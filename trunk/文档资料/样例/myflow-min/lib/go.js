/*
 * GoJS™ v1.0.4 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software®, http://www.nwoods.com/
 *
 * Copyright © 1998-2012 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.0.4/license.html.
 */
(function(window) { var f=void 0,h=!0,m=null,p=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function s(a){return function(){return this[a]}}function ca(a){return function(){return a}}var da,ea={};if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser."),Error("The HTML Canvas element is not supported in this browser.");
if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});
Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.ZD===h});Object.freeze||(Object.freeze=function(a){a.ZD=h});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
var t={TE:p,vI:p,Cy:p,TB:p,trace:aa(),SE:p,assert:p,cI:m,nI:aa(),pI:aa(),oI:aa(),mI:aa(),uI:aa(),qI:aa(),sI:aa(),rI:aa(),hI:p,QJ:p,LJ:p,MJ:p,pF:p,tI:aa()},t=m;ea.Debug=m;
var v={iw:{},Hz:0,YD:{},Ht:document.createElement("canvas").getContext("2d"),It:"",ix:[],vt:m,Az:[],Yw:"ontouchstart"in window,yA:"ongesturestart"in window,yz:p,g:function(a){t&&t.SE&&alert(a);throw Error(a);},v:function(a,b){if(a.Ha){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b);v.g(c)}},c:function(a,b,c,d){a instanceof b||(c=v.Wg(c),d!==f&&(c+="."+d),v.uc(a,b,c))},e:function(a,b,c,d){typeof a!==b&&(c=v.Wg(c),d!==f&&(c+="."+d),v.uc(a,b,
c))},i:function(a,b,c){isFinite(a)||(b=v.Wg(b),c!==f&&(b+="."+c),v.g(b+" must be a real number and not NaN or Infinity: "+a))},Sa:function(a,b,c,d){if(!(a instanceof ha)||a.Kd!==b)c=v.Wg(c),d!==f&&(c+="."+d),v.uc(a,"a constant of class "+v.Ki(b),c)},uc:function(a,b,c,d){b=v.Wg(b);c=v.Wg(c);d!==f&&(c+="."+d);v.g(c+" value is not an instance of "+b+": "+a)},ha:function(a,b,c,d){c=v.Wg(c);d!==f&&(c+="."+d);v.g(c+" is not in the range "+b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a)},
isArray:function(a){return a instanceof Array||a instanceof NodeList||a instanceof HTMLCollection},YA:function(a,b,c){v.isArray(a)||v.uc(a,"Array or NodeList or HTMLCollection",b,c)},xb:function(a){return a.length},mb:function(a,b){return a[b]},RE:function(a,b,c){a instanceof Array?a[b]=c:v.g("Cannot replace an object in an HTMLCollection or NodeList at "+b)},wx:function(a,b){if(a instanceof Array)return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return d;return-1},Kh:function(a,b,c){a instanceof
Array?b>=a.length?a.push(c):a.splice(b,0,c):v.g("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Lh:function(a,b){a instanceof Array?b>=a.length?a.pop():a.splice(b,1):v.g("Cannot remove an object from an HTMLCollection or NodeList at "+b)},jz:1,Hb:function(a){a.__gohashid=v.jz++},sn:function(a){var b=a.__gohashid;b===f&&(b=v.jz++,a.__gohashid=b);return b},fc:function(a){return a.__gohashid},a:function(a,b,c){"name"!==b&&"length"!==b&&(a[b]=c)},H:function(a,b){b.pz=a;ea[a]=
b},na:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){v.e(a,"function","Util.defineProperty:classfunc");v.e(b,"object","Util.defineProperty:propname");v.e(c,"function","Util.defineProperty:getter");v.e(d,"function","Util.defineProperty:setter");c={get:c,set:d};if(e!==f)for(var g in e)c[g]=e[g];for(var i in b)Object.defineProperty(a.prototype,i,c),e=Object.getOwnPropertyDescriptor(a.prototype,i),b[i]&&e&&Object.defineProperty(a.prototype,
b[i],e)},m:function(a,b,c,d){v.e(a,"function","Util.defineReadOnlyProperty:classfunc");v.e(b,"object","Util.defineReadOnlyProperty:propname");v.e(c,"function","Util.defineReadOnlyProperty:getter");c={get:c,set:function(a){v.g("The property "+b+" is read-only and cannot be set to "+a)}};if(d!==f)for(var e in d)c[e]=d[e];for(var g in b)Object.defineProperty(a.prototype,g,c),d=Object.getOwnPropertyDescriptor(a.prototype,g),b[g]&&d&&Object.defineProperty(a.prototype,b[g],d)},kd:function(a,b){for(var c in b)b[c]=
h;a.prototype.cE=b},Wg:function(a){return a===f?"":"string"===typeof a?a:"function"===typeof a?v.Ki(a):a===m?"*":""},Ki:function(a){return"function"===typeof a?a.pz:"object"===typeof a&&a.constructor?a.constructor.pz:typeof a},l:function(a,b,c){v.e(a,"function","Util.defineEnumValue:classfunc");v.e(b,"string","Util.defineEnumValue:name");v.e(c,"number","Util.defineEnumValue:num");c=new ha(a,b,c);Object.freeze(c);a[b]=c;var d=a.iz;d||(d=new ja("string",ha),a.iz=d);d.add(b,c);return c},nl:function(a,
b){if(!b)return m;v.e(a,"function","Util.findEnumValueForName:classfunc");v.e(b,"string","Util.findEnumValueForName:name");var c=a.iz;return!c?m:c.$(b)},aF:function(a,b,c,d){var e={},g;for(g in a){for(var i=p,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Wa:function(a,b){if(!a||!b)return m;var c=f;try{b instanceof Function?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),c===m&&(c=f)):c=a[b]}catch(d){t&&v.trace("property get error: "+d.toString())}return c},
bb:function(a,b,c){if(a&&b)try{b instanceof Function?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){t&&v.trace("property set error: "+d.toString())}},Ny:function(a,b){v.e(a,"object","Setting properties requires Objects as arguments");v.e(b,"object","Setting properties requires Objects as arguments");b.constructor!==Object&&v.g("Properties must be on a plain Object, not: "+b.toString());var c=t;c||(t=v);var d=a instanceof w,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");
if(0<j){var k=e.substring(0,j),g=a.Ke(k);g!==m?i=e.substr(j+1):v.g("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}"_"!==i[0]&&!v.ey(g,i)&&v.g('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e];"_"===i[0]&&(j=g.zk,j||(j=[],g.zk=j),j.push(i))}t=c;return a},ey:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;var d=c.cE;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return p},
ZA:function(a,b){if(!(b instanceof Object)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=v.Wa(b,d);e!==m&&("function"!==typeof e&&!v.ey(b,d))&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},ps:function(a,b){if(b&&!("number"===typeof b||"string"===typeof b||"boolean"===typeof b||"function"===
typeof b))if(v.fc(b)!==f){if(!v.Et.contains(b))if(v.Et.add(b),v.dt.add(v.ZA(a,b)),b instanceof A||b instanceof ka||b instanceof ja)for(var c=b.f;c.next();)v.ps(a+"["+c.key+"]",c.value);else for(c in b){var d=v.Wa(b,c);if(!(d===f||d===m||!(d instanceof Object))&&"_ownProperties"!==c){if(b instanceof ma){if("_lines"===c)continue}else if(b instanceof w){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof C))if(b instanceof oa){if("archetypeGroupData"===
c||"_archetypeGroupData"===c)continue}else if(b instanceof pa){if("archetypeLinkData"===c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof qa){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof D){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===c||"_delayedNodeReferences"===c)continue}v.ps(a+
"."+c,d)}}}else if(b instanceof Array)for(c=0;c<b.length;c++)v.ps(a+"["+c+"]",b[c]);else v.dt.add(v.ZA(a,b))},WE:function(a){v.Et===f?v.Et=new ka:v.Et.clear();v.dt=new ta;v.ps("",a);a=v.dt.toString();v.dt=m;return a},nG:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",i=0;i<a.length;i++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(i)^b[(b[c]+b[d])%256]);return g},EF:function(a){for(var b=
[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},rb:function(a){return v.nG(v.EF(a))},gv:m,vE:"7da71ca0ad381e90",XE:"@COLOR1",YE:"@COLOR2"},ua=v,va=document.createElement("canvas"),wa=va.getContext("2d");wa[v.rb("7ca11abfd022028846")]=v.rb("398c3597c01238");
for(var xa=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22462913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],ya=1;5>ya;ya++)wa[v.rb("7ca11abfd7330390")](v.rb(xa[ya-1]),10,15*ya+0);wa[v.rb("7ca11abfd022028846")]=v.rb("39f046ebb36e4b");for(ya=1;5>ya;ya++)wa[v.rb("7ca11abfd7330390")](v.rb(xa[ya-1]),10,15*ya+0);ua.gv=va;function ha(a,b,c){v.Hb(this);this.oz=a;this.qb=b;this.kE=c}
ha.prototype.toString=function(){return v.Ki(this.oz)+"."+this.qb};v.m(ha,{Kd:"classType"},s("oz"));v.m(ha,{name:"name"},s("qb"));v.m(ha,{value:"value"},s("kE"));function ta(){this.Pv=[];this.uj=0;this.AA="  "}ta.prototype.toString=function(){return this.Pv.join("")};ta.prototype.add=function(a){a&&this.Pv.push(a)};function Aa(a){a.uj--;0>a.uj&&(a.uj=0)}function Ea(a){for(var b="\n",c=a.uj;0<c;c--)b+=a.AA;a.Pv.push(b)}function Ga(){}v.m(Ga,{f:"iterator"},function(){return this});
Ga.prototype.reset=Ga.prototype.reset=aa();Ga.prototype.next=Ga.prototype.next=ca(p);v.m(Ga,{count:"count"},ca(0));Ga.prototype.Hf=aa();Ga.prototype.toString=ca("EmptyIterator");v.Af=new Ga;function Ha(a){this.key=-1;this.value=a}v.kd(Ha,{key:h,value:h});v.m(Ha,{f:"iterator"},function(){return this});Ha.prototype.reset=Ha.prototype.reset=function(){this.key=-1};Ha.prototype.next=Ha.prototype.next=function(){return-1===this.key?(this.key=0,h):p};v.m(Ha,{count:"count"},ca(1));
Ha.prototype.Hf=function(){this.value=m};Ha.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ia(a){this.Pf=a;this.wt=m;this.reset()}v.kd(Ia,{key:h,value:h});v.m(Ia,{f:"iterator"},function(){return this});v.a(Ia,"predicate",Ia.prototype.Ou);v.defineProperty(Ia,{Ou:"predicate"},s("wt"),ba("wt"));Ia.prototype.reset=Ia.prototype.reset=function(){var a=this.Pf;a.vg=m;this.$a=a.Rb;this.U=-1};
Ia.prototype.next=Ia.prototype.next=function(){var a=this.Pf;a.Rb!==this.$a&&v.g("the List has been modified during iteration");var a=a.j,b=a.length,c=++this.U,d=this.wt;if(d!==m)for(;c<b;){var e=a[c];if(d(e))return this.key=this.U=c,this.value=e,h;c++}else{if(c<b)return this.key=c,this.value=a[c],h;this.Hf()}return p};v.m(Ia,{count:"count"},function(){var a=this.wt;if(a!==m){for(var b=0,c=this.Pf.j,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Pf.j.length});
Ia.prototype.Hf=function(){this.key=-1;this.value=m;this.$a=-1;this.Pf.vg=this};Ia.prototype.toString=function(){return"ListIterator@"+this.U+"/"+this.Pf.count};function Ja(a){this.Pf=a;this.reset()}v.kd(Ja,{key:h,value:h});v.m(Ja,{f:"iterator"},function(){return this});Ja.prototype.reset=Ja.prototype.reset=function(){var a=this.Pf;a.vw=m;this.$a=a.Rb;this.U=a.j.length};
Ja.prototype.next=Ja.prototype.next=function(){var a=this.Pf;a.Rb!==this.$a&&v.g("the List has been modified during iteration");var b=--this.U;if(0<=b)return this.key=b,this.value=a.j[b],h;this.Hf();return p};v.m(Ja,{count:"count"},function(){return this.Pf.j.length});Ja.prototype.Hf=function(){this.key=-1;this.value=m;this.$a=-1;this.Pf.vw=this};Ja.prototype.toString=function(){return"ListIteratorBackwards("+this.U+"/"+this.Pf.count+")"};
function A(a){v.Hb(this);this.Ha=p;this.j=[];this.Rb=0;this.vw=this.vg=m;a===f||a===m?this.N=m:"string"===typeof a?"string"===a||"number"===a||"boolean"===a||"function"===a?this.N=a:v.ha(a,"the string 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.N=a:v.ha(a,"null, a primitive type name, or a class type","List constructor: type")}v.H("List",A);
A.prototype.Cf=function(a){this.N!==m&&("string"===typeof this.N?typeof a!==this.N&&v.uc(a,this.N):a instanceof this.N||v.uc(a,this.N))};A.prototype.Uc=function(){var a=this.Rb;a++;999999999<a&&(a=0);this.Rb=a};A.prototype.freeze=A.prototype.freeze=function(){this.Ha=h;return this};A.prototype.thaw=A.prototype.ta=function(){this.Ha=p;return this};A.prototype.toString=function(){return"List("+v.Wg(this.N)+")#"+v.fc(this)};
A.prototype.add=A.prototype.add=function(a){a!==m&&(t&&this.Cf(a),v.v(this,a),this.j.push(a),this.Uc())};A.prototype.addAll=A.prototype.Zf=function(a){if(a===m)return this;v.v(this);var b=this.j;if(v.isArray(a))for(var c=v.xb(a),d=0;d<c;d++){var e=v.mb(a,d);t&&this.Cf(e);b.push(e)}else for(a=a.f;a.next();)e=a.value,t&&this.Cf(e),b.push(e);this.Uc();return this};A.prototype.clear=A.prototype.clear=function(){v.v(this);this.j=[];this.Uc()};
A.prototype.contains=A.prototype.contains=function(a){if(a===m)return p;t&&this.Cf(a);return-1!==this.j.indexOf(a)};A.prototype.indexOf=A.prototype.indexOf=function(a){if(a===m)return-1;t&&this.Cf(a);return this.j.indexOf(a)};A.prototype.elt=A.prototype.Z=function(a){t&&v.i(a,A,"elt:i");var b=this.j;(0>a||a>=b.length)&&v.ha(a,"0 <= i < length",A,"elt:i");return b[a]};
A.prototype.setElt=A.prototype.Wu=function(a,b){t&&(this.Cf(b),v.i(a,A,"setElt:i"));var c=this.j;(0>a||a>=c.length)&&v.ha(a,"0 <= i < length",A,"setElt:i");v.v(this,a);c[a]=b};A.prototype.first=A.prototype.dc=function(){var a=this.j;return 0===a.length?m:a[0]};A.prototype.insertAt=A.prototype.gc=function(a,b){t&&(this.Cf(b),v.i(a,A,"insertAt:i"));0>a&&v.ha(a,">= 0",A,"insertAt:i");v.v(this,a);var c=this.j;a>=c.length?c.push(b):c.splice(a,0,b);this.Uc();return h};
A.prototype.remove=A.prototype.remove=function(a){if(a===m)return p;t&&this.Cf(a);v.v(this,a);var b=this.j,a=b.indexOf(a);if(-1===a)return p;a===b.length-1?b.pop():b.splice(a,1);this.Uc();return h};A.prototype.removeAt=A.prototype.Se=function(a){t&&v.i(a,A,"removeAt:i");var b=this.j;(0>a||a>=b.length)&&v.ha(a,"0 <= i < length",A,"removeAt:i");v.v(this,a);a===b.length-1?b.pop():b.splice(a,1);this.Uc()};
A.prototype.removeRange=A.prototype.removeRange=function(a,b){t&&(v.i(a,A,"removeRange:from"),v.i(b,A,"removeRange:to"));var c=this.j;(0>a||a>=c.length)&&v.ha(a,"0 <= from < length",A,"elt:from");(0>b||b>=c.length)&&v.ha(b,"0 <= to < length",A,"elt:to");v.v(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.Uc()};A.prototype.copy=A.prototype.copy=function(){for(var a=new A(this.N),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
A.prototype.toArray=A.prototype.zf=function(){for(var a=[],b=this.j,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};A.prototype.toSet=A.prototype.PG=function(){for(var a=new ka(this.N),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};A.prototype.sort=A.prototype.sort=function(a){t&&v.e(a,"function",A,"sort:sortfunc");v.v(this);this.j.sort(a);this.Uc();return this};
A.prototype.sortRange=A.prototype.Tn=function(a,b,c){var d=this.j,e=d.length;b===f&&(b=0);c===f&&(c=e);t&&(v.e(a,"function",A,"sortRange:sortfunc"),v.i(b,A,"sortRange:from"),v.i(c,A,"sortRange:to"));v.v(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&v.ha(b,"0 <= from < length",A,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.Uc()),this;if(0===b)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.Uc();return this};A.prototype.reverse=A.prototype.reverse=function(){v.v(this);this.j.reverse();this.Uc();return this};v.m(A,{count:"count"},function(){return this.j.length});v.m(A,{length:"length"},function(){return this.j.length});v.m(A,{f:"iterator"},function(){if(0>=this.j.length)return v.Af;var a=this.vg;return a!==m?(a.reset(),a):new Ia(this)});
v.m(A,{wn:"iteratorBackwards"},function(){if(0>=this.j.length)return v.Af;var a=this.vw;return a!==m?(a.reset(),a):new Ja(this)});function Ka(a){this.Xd=a;this.reset()}v.kd(Ka,{key:h,value:h});v.m(Ka,{f:"iterator"},function(){return this});Ka.prototype.reset=Ka.prototype.reset=function(){var a=this.Xd;a.vg=m;this.$a=a.Rb;this.Ud=m};
Ka.prototype.next=Ka.prototype.next=function(){var a=this.Xd;a.Rb!==this.$a&&v.g("the Set has been modified during iteration");var b=this.Ud,b=b===m?a.We:b.pi;if(b!==m)return this.Ud=b,this.value=b.value,this.key=b.key,h;this.Hf();return p};v.m(Ka,{count:"count"},function(){return this.Xd.Rd});Ka.prototype.Hf=function(){this.value=m;this.$a=-1;this.Xd.vg=this};Ka.prototype.toString=function(){return this.Ud!==m?"SetIterator@"+this.Ud.value:"SetIterator"};
function ka(a){v.Hb(this);this.Ha=p;a===f||a===m?this.N=m:"string"===typeof a?"string"===a||"number"===a?this.N=a:v.ha(a,"the string 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.N=a:v.ha(a,"null, a primitive type name, or a class type","Set constructor: type");this.jc={};this.Rd=0;this.vg=m;this.Rb=0;this.wg=this.We=m}v.H("Set",ka);ka.prototype.Cf=function(a){this.N!==m&&("string"===typeof this.N?typeof a!==this.N&&v.uc(a,this.N):a instanceof this.N||v.uc(a,this.N))};
ka.prototype.Uc=function(){var a=this.Rb;a++;999999999<a&&(a=0);this.Rb=a};ka.prototype.freeze=ka.prototype.freeze=function(){this.Ha=h;return this};ka.prototype.thaw=ka.prototype.ta=function(){this.Ha=p;return this};ka.prototype.toString=function(){return"Set("+v.Wg(this.N)+")#"+v.fc(this)};
ka.prototype.add=ka.prototype.add=function(a){if(a===m)return p;t&&this.Cf(a);v.v(this,a);var b=a;a instanceof Object&&(b=v.sn(a));return this.jc[b]===f?(this.Rd++,a=new La(a,a),this.jc[b]=a,b=this.wg,b===m?this.We=a:(a.ym=b,b.pi=a),this.wg=a,this.Uc(),h):p};ka.prototype.addAll=ka.prototype.Zf=function(a){if(a===m)return this;v.v(this);if(v.isArray(a))for(var b=v.xb(a),c=0;c<b;c++)this.add(v.mb(a,c));else for(a=a.f;a.next();)this.add(a.value);return this};
ka.prototype.contains=ka.prototype.contains=function(a){if(a===m)return p;t&&this.Cf(a);var b=a;return a instanceof Object&&(b=v.fc(a),b===f)?p:this.jc[b]!==f};ka.prototype.containsAll=ka.prototype.VH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(!this.contains(a.value))return p;return h};ka.prototype.containsAny=ka.prototype.WH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(this.contains(a.value))return h;return p};
ka.prototype.first=ka.prototype.dc=function(){var a=this.We;return a===m?m:a.value};ka.prototype.remove=ka.prototype.remove=function(a){if(a===m)return p;t&&this.Cf(a);v.v(this,a);var b=a;if(a instanceof Object&&(b=v.fc(a),b===f))return p;a=this.jc[b];if(a===f)return p;var c=a.pi,d=a.ym;c!==m&&(c.ym=d);d!==m&&(d.pi=c);this.We===a&&(this.We=c);this.wg===a&&(this.wg=d);delete this.jc[b];this.Rd--;this.Uc();return h};
ka.prototype.removeAll=ka.prototype.WJ=function(a){if(a===m)return this;v.v(this);for(a=a.f;a.next();)this.remove(a.value);return this};ka.prototype.retainAll=ka.prototype.dK=function(a){if(a===m||0===this.count)return this;v.v(this);var b=new ka(this.N);b.Zf(a);for(var a=new A(this.N),c=this.f;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.f;b.next();)this.remove(b.value);return this};ka.prototype.clear=ka.prototype.clear=function(){v.v(this);this.jc={};this.Rd=0;this.wg=this.We=m;this.Uc()};
ka.prototype.copy=ka.prototype.copy=function(){var a=new ka(this.N),b=this.jc,c;for(c in b)a.add(b[c].value);return a};ka.prototype.toArray=ka.prototype.zf=function(){var a=[],b=this.jc,c;for(c in b)a.push(b[c].value);return a};ka.prototype.toList=ka.prototype.OG=function(){var a=new A(this.N),b=this.jc,c;for(c in b)a.add(b[c]);return a};v.m(ka,{count:"count"},s("Rd"));v.m(ka,{f:"iterator"},function(){if(0>=this.Rd)return v.Af;var a=this.vg;return a!==m?(a.reset(),a):new Ka(this)});
function Ma(a){this.Tc=a;this.reset()}v.kd(Ma,{key:h,value:h});v.m(Ma,{f:"iterator"},function(){return this});Ma.prototype.reset=Ma.prototype.reset=function(){this.$a=this.Tc.Rb;this.Ud=m};Ma.prototype.next=Ma.prototype.next=function(){var a=this.Tc;a.Rb!==this.$a&&v.g("the Map has been modified during iteration");var b=this.Ud,b=b===m?a.We:b.pi;if(b!==m)return this.Ud=b,this.value=b.key,h;this.Hf();return p};v.m(Ma,{count:"count"},function(){return this.Tc.Rd});
Ma.prototype.Hf=function(){this.value=m;this.$a=-1};Ma.prototype.toString=function(){return this.Ud!==m?"MapKeySetIterator@"+this.Ud.value:"MapKeySetIterator"};function Na(a){v.Hb(this);this.Tc=a}v.na(Na,ka);Na.prototype.freeze=function(){return this};Na.prototype.ta=function(){return this};Na.prototype.toString=function(){return"MapKeySet("+this.Tc.toString()+")"};Na.prototype.add=Na.prototype.add=function(){v.g("This Set is read-only: "+this.toString());return p};
Na.prototype.contains=Na.prototype.contains=function(a){return this.Tc.contains(a)};Na.prototype.remove=Na.prototype.remove=function(){v.g("This Set is read-only: "+this.toString());return p};Na.prototype.clear=Na.prototype.clear=function(){v.g("This Set is read-only: "+this.toString())};Na.prototype.copy=Na.prototype.copy=function(){return new Na(this.Tc)};Na.prototype.toSet=Na.prototype.PG=function(){var a=new ka(this.Tc.N),b=this.Tc.jc,c;for(c in b)a.add(b[c].key);return a};
Na.prototype.toArray=Na.prototype.zf=function(){var a=[],b=this.Tc.jc,c;for(c in b)a.push(b[c].key);return a};Na.prototype.toList=Na.prototype.OG=function(){var a=new A(this.N),b=this.Tc.jc,c;for(c in b)a.add(b[c].key);return a};v.m(Na,{count:"count"},function(){return this.Tc.Rd});v.m(Na,{f:"iterator"},function(){return 0>=this.Tc.Rd?v.Af:new Ma(this.Tc)});function La(a,b){this.key=a;this.value=b;this.ym=this.pi=m}v.kd(La,{key:h,value:h});
La.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Oa(a){this.Tc=a;this.reset()}v.kd(Oa,{key:h,value:h});v.m(Oa,{f:"iterator"},function(){return this});Oa.prototype.reset=Oa.prototype.reset=function(){var a=this.Tc;a.vg=m;this.$a=a.Rb;this.Ud=m};
Oa.prototype.next=Oa.prototype.next=function(){var a=this.Tc;a.Rb!==this.$a&&v.g("the Map has been modified during iteration");var b=this.Ud,b=b===m?a.We:b.pi;if(b!==m)return this.Ud=b,this.key=b.key,this.value=b.value,h;this.Hf();return p};v.m(Oa,{count:"count"},function(){return this.Tc.Rd});Oa.prototype.Hf=function(){this.value=this.key=m;this.$a=-1;this.Tc.vg=this};Oa.prototype.toString=function(){return this.Ud!==m?"MapIterator@"+this.Ud:"MapIterator"};
function ja(a,b){v.Hb(this);this.Ha=p;a===f||a===m?this.sh=m:"string"===typeof a?"string"===a||"number"===a?this.sh=a:v.ha(a,"the string 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.sh=a:v.ha(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===m?this.Gh=m:"string"===typeof b?"string"===b||"boolean"===b||"number"===b||"function"===b?this.Gh=b:v.ha(b,"the string 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):
"function"===typeof b?this.Gh=b:v.ha(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.jc={};this.Rd=0;this.vg=m;this.Rb=0;this.wg=this.We=m}v.H("Map",ja);function Qa(a,b){a.sh!==m&&("string"===typeof a.sh?typeof b!==a.sh&&v.uc(b,a.sh):b instanceof a.sh||v.uc(b,a.sh))}ja.prototype.Uc=function(){var a=this.Rb;a++;999999999<a&&(a=0);this.Rb=a};ja.prototype.freeze=ja.prototype.freeze=function(){this.Ha=h;return this};
ja.prototype.thaw=ja.prototype.ta=function(){this.Ha=p;return this};ja.prototype.toString=function(){return"Map("+v.Wg(this.sh)+","+v.Wg(this.Gh)+")#"+v.fc(this)};
ja.prototype.add=ja.prototype.add=function(a,b){t&&(Qa(this,a),this.Gh!==m&&("string"===typeof this.Gh?typeof b!==this.Gh&&v.uc(b,this.Gh):b instanceof this.Gh||v.uc(b,this.Gh)));v.v(this,a);var c=a;a instanceof Object&&(c=v.sn(a));var d=this.jc[c];if(d===f)return this.Rd++,d=new La(a,b),this.jc[c]=d,c=this.wg,c===m?this.We=d:(d.ym=c,c.pi=d),this.wg=d,this.Uc(),h;d.value=b;return p};
ja.prototype.addAll=ja.prototype.Zf=function(a){if(a===m)return this;t&&v.c(a,ja,ja,"addAll:map");for(a=a.f;a.next();)this.add(a.key,a.value);return this};ja.prototype.contains=ja.prototype.contains=function(a){t&&Qa(this,a);var b=a;return a instanceof Object&&(b=v.fc(a),b===f)?p:this.jc[b]!==f};ja.prototype.getValue=ja.prototype.$=function(a){t&&Qa(this,a);var b=a;if(a instanceof Object&&(b=v.fc(a),b===f))return m;a=this.jc[b];return a===f?m:a.value};
ja.prototype.remove=ja.prototype.remove=function(a){if(a===m)return p;t&&Qa(this,a);v.v(this,a);var b=a;if(a instanceof Object&&(b=v.fc(a),b===f))return p;a=this.jc[b];if(a===f)return p;var c=a.pi,d=a.ym;c!==m&&(c.ym=d);d!==m&&(d.pi=c);this.We===a&&(this.We=c);this.wg===a&&(this.wg=d);delete this.jc[b];this.Rd--;this.Uc();return h};ja.prototype.clear=ja.prototype.clear=function(){v.v(this);this.jc={};this.Rd=0;this.wg=this.We=m;this.Uc()};
ja.prototype.copy=ja.prototype.copy=function(){var a=new ja(this.sh,this.Gh),b=this.jc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ja.prototype.toArray=ja.prototype.zf=function(){var a=[],b=this.jc,c;for(c in b){var d=b[c];a.push(new La(d.key,d.value))}return a};ja.prototype.toKeySet=ja.prototype.Xi=function(){return new Na(this)};v.m(ja,{count:"count"},s("Rd"));v.m(ja,{f:"iterator"},function(){if(0>=this.count)return v.Af;var a=this.vg;return a!==m?(a.reset(),a):new Oa(this)});
function E(a,b){a===f?this.y=this.x=0:"number"===typeof a&&"number"===typeof b?(this.x=a,this.y=b):v.g("Invalid arguments to Point constructor")}v.H("Point",E);v.kd(E,{x:h,y:h});E.prototype.Pa=function(a){t&&v.c(a,E,E,"assign:p");this.x=a.x;this.y=a.y};E.prototype.Xd=function(a,b){this.x=a;this.y=b};E.prototype.setTo=E.prototype.Tr=function(a,b){t&&(v.e(a,"number",E,"setTo:x"),v.e(b,"number",E,"setTo:y"));v.v(this);this.x=a;this.y=b;return this};
E.prototype.set=E.prototype.set=function(a){t&&v.c(a,E,E,"set:p");v.v(this);this.x=a.x;this.y=a.y;return this};E.prototype.copy=E.prototype.copy=function(){var a=new E;a.x=this.x;a.y=this.y;return a};E.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};E.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};E.prototype.freeze=function(){this.Ha=h;return this};E.prototype.ta=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.Ha=p;return this};
E.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new E(c,e)}return new E};var Sa;E.stringify=Sa=function(a){return a instanceof E?a.x.toString()+" "+a.y.toString():a.toString()};E.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};E.prototype.equals=E.prototype.u=function(a){return!(a instanceof E)?p:this.x===a.x&&this.y===a.y};
E.prototype.equalTo=E.prototype.Vx=function(a,b){return this.x===a&&this.y===b};E.prototype.su=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)};E.prototype.bk=function(a){return Va(this.x,a.x)&&Va(this.y,a.y)};E.prototype.add=E.prototype.add=function(a){t&&v.c(a,E,E,"add:p");v.v(this);this.x+=a.x;this.y+=a.y;return this};E.prototype.subtract=E.prototype.Xr=function(a){t&&v.c(a,E,E,"subtract:p");v.v(this);this.x-=a.x;this.y-=a.y;return this};
E.prototype.offset=E.prototype.offset=function(a,b){t&&(v.i(a,E,"offset:dx"),v.i(b,E,"offset:dy"));v.v(this);this.x+=a;this.y+=b;return this};E.prototype.rotate=E.prototype.rotate=function(a){t&&v.i(a,E,"rotate:angle");v.v(this);if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
E.prototype.scale=E.prototype.scale=function(a,b){t&&(v.i(a,E,"scale:sx"),v.i(b,E,"scale:sy"));this.x*=a;this.y*=b;return this};E.prototype.distanceSquaredPoint=E.prototype.Gi=function(a){t&&v.c(a,E,E,"distanceSquaredPoint:p");var b=a.x-this.x,a=a.y-this.y;return b*b+a*a};E.prototype.distanceSquared=E.prototype.iI=function(a,b){t&&(v.i(a,E,"distanceSquared:px"),v.i(b,E,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d};
E.prototype.normalize=E.prototype.normalize=function(){v.v(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};E.prototype.directionPoint=E.prototype.Ph=function(a){t&&v.c(a,E,E,"directionPoint:p");return Ya(a.x-this.x,a.y-this.y)};E.prototype.direction=E.prototype.direction=function(a,b){t&&(v.i(a,E,"direction:px"),v.i(b,E,"direction:py"));return Ya(a-this.x,b-this.y)};
function Ya(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}E.prototype.setRectSpot=E.prototype.Sn=function(a,b){t&&(v.c(a,F,E,"setRectSpot:r"),v.c(b,K,E,"setRectSpot:spot"));v.v(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
E.prototype.setSpot=E.prototype.Dl=function(a,b,c,d,e){t&&(v.i(a,E,"setSpot:x"),v.i(b,E,"setSpot:y"),v.i(c,E,"setSpot:w"),v.i(d,E,"setSpot:h"),(0>c||0>d)&&v.g("Point.setSpot:Width and height cannot be negative"),v.c(e,K,E,"setSpot:spot"));v.v(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};E.prototype.transform=function(a){t&&v.c(a,Za,E,"transform:t");a.wb(this);return this};function cb(a,b){t&&v.c(b,Za,E,"transformInverted:t");b.Vh(a);return a}var db;
E.distanceLineSegmentSquared=db=function(a,b,c,d,e,g){t&&(v.i(a,E,"distanceLineSegmentSquared:px"),v.i(b,E,"distanceLineSegmentSquared:py"),v.i(c,E,"distanceLineSegmentSquared:ax"),v.i(d,E,"distanceLineSegmentSquared:ay"),v.i(e,E,"distanceLineSegmentSquared:bx"),v.i(g,E,"distanceLineSegmentSquared:by"));var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(0>=l||l>=k)return i=e-a,j=g-b,Math.min(c*c+d*d,i*i+j*j);a=i*d-j*c;return a*a/k};
E.distanceSquared=function(a,b,c,d){t&&(v.i(a,E,"distanceSquared:px"),v.i(b,E,"distanceSquared:py"),v.i(c,E,"distanceSquared:qx"),v.i(d,E,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var eb;
E.direction=eb=function(a,b,c,d){t&&(v.i(a,E,"direction:px"),v.i(b,E,"direction:py"),v.i(c,E,"direction:qx"),v.i(d,E,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};E.prototype.isReal=E.prototype.W=function(){return isFinite(this.x)&&isFinite(this.y)};
function hb(a,b){a===f?this.height=this.width=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.width=a,this.height=b):v.g("Invalid arguments to Size constructor")}v.H("Size",hb);v.kd(hb,{width:h,height:h});hb.prototype.Pa=function(a){t&&v.c(a,hb,hb,"assign:s");this.width=a.width;this.height=a.height};hb.prototype.Xd=function(a,b){this.width=a;this.height=b};
hb.prototype.setTo=hb.prototype.Tr=function(a,b){t&&(v.e(a,"number",hb,"setTo:w"),v.e(b,"number",hb,"setTo:h"));0>a&&v.ha(a,">= 0",hb,"setTo:w");0>b&&v.ha(b,">= 0",hb,"setTo:h");v.v(this);this.width=a;this.height=b;return this};hb.prototype.set=hb.prototype.set=function(a){t&&v.c(a,hb,hb,"set:s");v.v(this);this.width=a.width;this.height=a.height;return this};hb.prototype.copy=hb.prototype.copy=function(){var a=new hb;a.width=this.width;a.height=this.height;return a};
hb.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};hb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};hb.prototype.freeze=function(){this.Ha=h;return this};hb.prototype.ta=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.Ha=p;return this};
hb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new hb(c,e)}return new hb};var jb;hb.stringify=jb=function(a){return a instanceof hb?a.width.toString()+" "+a.height.toString():a.toString()};hb.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
hb.prototype.equals=hb.prototype.u=function(a){return!(a instanceof hb)?p:this.width===a.width&&this.height===a.height};hb.prototype.equalTo=hb.prototype.Vx=function(a,b){return this.width===a&&this.height===b};hb.prototype.su=function(a){return Ta(this.width,a.width)&&Ta(this.height,a.height)};hb.prototype.bk=function(a){return Va(this.width,a.width)&&Va(this.height,a.height)};hb.prototype.isReal=hb.prototype.W=function(){return isFinite(this.width)&&isFinite(this.height)};
function F(a,b,c,d){a===f?this.height=this.width=this.y=this.x=0:a instanceof E?b instanceof E?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof hb?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):v.g("Incorrect arguments supplied"):!t||"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):v.g("Invalid arguments to Rect constructor")}
v.H("Rect",F);v.kd(F,{x:h,y:h,width:h,height:h});F.prototype.Pa=function(a){t&&v.c(a,F,F,"assign:r");this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};F.prototype.Xd=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function kb(a,b,c){a.width=b;a.height=c}
F.prototype.setTo=F.prototype.Tr=function(a,b,c,d){t&&(v.e(a,"number",F,"setTo:x"),v.e(b,"number",F,"setTo:y"),v.e(c,"number",F,"setTo:w"),v.e(d,"number",F,"setTo:h"));0>c&&v.ha(c,">= 0",F,"setTo:w");0>d&&v.ha(d,">= 0",F,"setTo:h");v.v(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};F.prototype.set=F.prototype.set=function(a){t&&v.c(a,F,F,"set:r");v.v(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
F.prototype.setPoint=F.prototype.w=function(a){t&&v.c(a,E,F,"setPoint:p");v.v(this);this.x=a.x;this.y=a.y;return this};F.prototype.setSize=F.prototype.EG=function(a){t&&v.c(a,hb,F,"setSize:s");v.v(this);this.width=a.width;this.height=a.height;return this};F.prototype.copy=F.prototype.copy=function(){var a=new F;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};F.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};
F.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};F.prototype.freeze=function(){this.Ha=h;return this};F.prototype.ta=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.Ha=p;return this};function lb(a){var b=a.count,c=h,d=m;if(0===b)return new F;for(var e=0;e<b;e++){var g=a.j[e];c?(d=new F(g.x,g.y,0,0),c=p):nb(d,g.x,g.y,0,0)}return d}
F.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new F(c,e,g,i)}return new F};var ob;F.stringify=ob=function(a){return a instanceof F?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
F.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};F.prototype.equals=F.prototype.u=function(a){return!(a instanceof F)?p:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};F.prototype.equalTo=F.prototype.Vx=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};F.prototype.su=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)&&Ta(this.width,a.width)&&Ta(this.height,a.height)};
F.prototype.bk=function(a){return Va(this.x,a.x)&&Va(this.y,a.y)&&Va(this.width,a.width)&&Va(this.height,a.height)};F.prototype.containsPoint=F.prototype.ea=function(a){t&&v.c(a,E,F,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};F.prototype.containsRect=F.prototype.gl=function(a){t&&v.c(a,F,F,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
F.prototype.contains=F.prototype.contains=function(a,b,c,d){t?(v.i(a,F,"contains:x"),v.i(b,F,"contains:y"),c===f?c=0:v.i(c,F,"contains:w"),d===f?d=0:v.i(d,F,"contains:h"),(0>c||0>d)&&v.g("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};F.prototype.reset=function(){v.v(this);this.height=this.width=this.y=this.x=0};
F.prototype.offset=F.prototype.offset=function(a,b){t&&(v.i(a,F,"offset:dx"),v.i(b,F,"offset:dy"));v.v(this);this.x+=a;this.y+=b;return this};F.prototype.inflate=F.prototype.jf=function(a,b){t&&(v.i(a,F,"inflate:w"),v.i(b,F,"inflate:h"));return qb(this,b,a,b,a)};F.prototype.addMargin=F.prototype.sx=function(a){t&&v.c(a,rb,F,"addMargin:m");return qb(this,a.top,a.right,a.bottom,a.left)};
F.prototype.subtractMargin=F.prototype.uK=function(a){t&&v.c(a,rb,F,"subtractMargin:m");return qb(this,-a.top,-a.right,-a.bottom,-a.left)};F.prototype.grow=F.prototype.XI=function(a,b,c,d){t&&(v.i(a,F,"grow:t"),v.i(b,F,"grow:r"),v.i(c,F,"grow:b"),v.i(d,F,"grow:l"));return qb(this,a,b,c,d)};function qb(a,b,c,d,e){v.v(a);var g=a.width;c+e<=-g?(a.x+=g/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}
F.prototype.intersectRect=F.prototype.hJ=function(a){t&&v.c(a,F,F,"intersectRect:r");return tb(this,a.x,a.y,a.width,a.height)};F.prototype.intersect=F.prototype.gJ=function(a,b,c,d){t&&(v.i(a,F,"intersect:x"),v.i(b,F,"intersect:y"),v.i(c,F,"intersect:w"),v.i(d,F,"intersect:h"),(0>c||0>d)&&v.g("Rect.intersect:Width and height cannot be negative"));return tb(this,a,b,c,d)};
function tb(a,b,c,d,e){v.v(a);var g=Math.max(a.x,b),i=Math.max(a.y,c),b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e);a.x=g;a.y=i;a.width=Math.max(0,b-g);a.height=Math.max(0,c-i);return a}F.prototype.intersectsRect=F.prototype.Me=function(a){t&&v.c(a,F,F,"intersectsRect:r");return this.JF(a.x,a.y,a.width,a.height)};
F.prototype.intersects=F.prototype.JF=function(a,b,c,d){t&&(v.i(a,F,"intersects:x"),v.i(b,F,"intersects:y"),v.i(a,F,"intersects:w"),v.i(b,F,"intersects:h"),(0>c||0>d)&&v.g("Rect.intersects:Width and height cannot be negative"));var e=this.width,g=this.x;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return p;a=this.height;e=this.y;return Infinity!==a&&Infinity!==d&&(a+=e,d+=b,isNaN(d)||isNaN(a)||e>d||b>a)?p:h};
F.prototype.unionPoint=F.prototype.cv=function(a){t&&v.c(a,E,F,"unionPoint:p");return nb(this,a.x,a.y,0,0)};F.prototype.unionRect=F.prototype.ok=function(a){t&&v.c(a,F,F,"unionRect:r");return nb(this,a.x,a.y,a.width,a.height)};
F.prototype.union=F.prototype.yK=function(a,b,c,d){v.v(this);t?(v.i(a,F,"union:x"),v.i(b,F,"union:y"),c===f?c=0:v.i(c,F,"union:w"),d===f?d=0:v.i(d,F,"union:h"),(0>c||0>d)&&v.g("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return nb(this,a,b,c,d)};function nb(a,b,c,d,e){var g=Math.min(a.x,b),i=Math.min(a.y,c),b=Math.max(a.x+a.width,b+d),c=Math.max(a.y+a.height,c+e);a.x=g;a.y=i;a.width=b-g;a.height=c-i;return a}
F.prototype.setSpot=F.prototype.Dl=function(a,b,c){t&&(v.i(a,F,"setSpot:x"),v.i(b,F,"setSpot:y"),v.c(c,K,F,"setSpot:spot"));v.v(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var ub;
F.contains=ub=function(a,b,c,d,e,g,i,j){t?(v.i(a,F,"contains:rx"),v.i(b,F,"contains:ry"),v.i(c,F,"contains:rw"),v.i(d,F,"contains:rh"),v.i(e,F,"contains:x"),v.i(g,F,"contains:y"),i===f?i=0:v.i(i,F,"contains:w"),j===f?j=0:v.i(j,F,"contains:h"),(0>c||0>d||0>i||0>j)&&v.g("Rect.contains:Width and height cannot be negative")):(i===f&&(i=0),j===f&&(j=0));return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
F.intersects=function(a,b,c,d,e,g,i,j){t&&(v.i(a,F,"intersects:rx"),v.i(b,F,"intersects:ry"),v.i(c,F,"intersects:rw"),v.i(d,F,"intersects:rh"),v.i(e,F,"intersects:x"),v.i(g,F,"intersects:y"),v.i(i,F,"intersects:w"),v.i(j,F,"intersects:h"),(0>c||0>d||0>i||0>j)&&v.g("Rect.intersects:Width and height cannot be negative"));c+=a;i+=e;if(a>i||e>c)return p;a=d+b;j+=g;return b>j||g>a?p:h};v.a(F,"left",F.prototype.left);
v.defineProperty(F,{left:"left"},s("x"),function(a){v.v(this,a);t&&v.e(a,"number",F,"left");this.x=a});v.a(F,"top",F.prototype.top);v.defineProperty(F,{top:"top"},s("y"),function(a){v.v(this,a);t&&v.e(a,"number",F,"top");this.y=a});v.a(F,"right",F.prototype.right);v.defineProperty(F,{right:"right"},function(){return this.x+this.width},function(a){v.v(this,a);t&&v.i(a,F,"right");this.x+=a-(this.x+this.width)});v.a(F,"bottom",F.prototype.bottom);
v.defineProperty(F,{bottom:"bottom"},function(){return this.y+this.height},function(a){v.v(this,a);t&&v.i(a,F,"top");this.y+=a-(this.y+this.height)});v.a(F,"position",F.prototype.position);v.defineProperty(F,{position:"position"},function(){return new E(this.x,this.y)},function(a){v.v(this,a);t&&v.c(a,E,F,"position");this.x=a.x;this.y=a.y});v.a(F,"size",F.prototype.size);
v.defineProperty(F,{size:"size"},function(){return new hb(this.width,this.height)},function(a){v.v(this,a);t&&v.c(a,hb,F,"size");this.width=a.width;this.height=a.height});v.a(F,"center",F.prototype.fu);v.defineProperty(F,{fu:"center"},function(){return new E(this.x+this.width/2,this.y+this.height/2)},function(a){v.v(this,a);t&&v.c(a,E,F,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});v.a(F,"centerX",F.prototype.ya);
v.defineProperty(F,{ya:"centerX"},function(){return this.x+this.width/2},function(a){v.v(this,a);t&&v.i(a,F,"centerX");this.x=a-this.width/2});v.a(F,"centerY",F.prototype.za);v.defineProperty(F,{za:"centerY"},function(){return this.y+this.height/2},function(a){v.v(this,a);t&&v.i(a,F,"centerY");this.y=a-this.height/2});F.prototype.isReal=F.prototype.W=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
F.prototype.isEmpty=F.prototype.jJ=function(){return 0===this.width&&0===this.height};function rb(a,b,c,d){a===f?this.left=this.bottom=this.right=this.top=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):v.g("Invalid arguments to Margin constructor")}v.H("Margin",rb);v.kd(rb,{top:h,right:h,bottom:h,left:h});
rb.prototype.Pa=function(a){t&&v.c(a,rb,rb,"assign:m");this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};rb.prototype.setTo=rb.prototype.Tr=function(a,b,c,d){t&&(v.e(a,"number",rb,"setTo:t"),v.e(b,"number",rb,"setTo:r"),v.e(c,"number",rb,"setTo:b"),v.e(d,"number",rb,"setTo:l"));v.v(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};
rb.prototype.set=rb.prototype.set=function(a){t&&v.c(a,rb,rb,"assign:m");v.v(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};rb.prototype.copy=rb.prototype.copy=function(){var a=new rb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};rb.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};rb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
rb.prototype.freeze=function(){this.Ha=h;return this};rb.prototype.ta=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.Ha=p;return this};rb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new rb(c,e,g,i)}return new rb};var vb;
rb.stringify=vb=function(a){return a instanceof rb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};rb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};rb.prototype.equals=rb.prototype.u=function(a){return!(a instanceof rb)?p:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};
rb.prototype.equalTo=rb.prototype.Vx=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};rb.prototype.su=function(a){return Ta(this.top,a.top)&&Ta(this.right,a.right)&&Ta(this.bottom,a.bottom)&&Ta(this.left,a.left)};rb.prototype.bk=function(a){return Va(this.top,a.top)&&Va(this.right,a.right)&&Va(this.bottom,a.bottom)&&Va(this.left,a.left)};rb.prototype.isReal=rb.prototype.W=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};
function Za(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Ra=this.Qa=0}v.kd(Za,{m11:h,m12:h,m21:h,m22:h,Qa:h,Ra:h});Za.prototype.set=Za.prototype.set=function(a){t&&v.c(a,Za,Za,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.Qa=a.Qa;this.Ra=a.Ra;return this};Za.prototype.copy=Za.prototype.copy=function(){var a=new Za;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.Qa=this.Qa;a.Ra=this.Ra;return a};
Za.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.Qa+","+this.Ra+")"};Za.prototype.equals=Za.prototype.u=function(a){return!(a instanceof Za)?p:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.Qa===a.Qa&&this.Ra===a.Ra};Za.prototype.reset=Za.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Ra=this.Qa=0};
Za.prototype.multiply=Za.prototype.multiply=function(a){t&&v.c(a,Za,Za,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.Qa+this.m21*a.Ra+this.Qa,g=this.m12*a.Qa+this.m22*a.Ra+this.Ra;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.Qa=e;this.Ra=g;return this};
Za.prototype.multiplyInverted=Za.prototype.JJ=function(a){t&&v.c(a,Za,Za,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.Ra-a.m22*a.Qa),j=b*(a.m12*a.Qa-a.m11*a.Ra),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.Qa,i=this.m12*i+this.m22*j+this.Ra;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.Qa=g;this.Ra=i;return this};
Za.prototype.invert=Za.prototype.Du=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.Ra-this.m22*this.Qa),g=a*(this.m12*this.Qa-this.m11*this.Ra);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.Qa=e;this.Ra=g};
Za.prototype.rotate=Za.prototype.rotate=function(a,b,c){t&&(v.i(a,Za,"rotate:angle"),v.i(b,Za,"rotate:rx"),v.i(c,Za,"rotate:ry"));this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
Za.prototype.translate=Za.prototype.translate=function(a,b){t&&(v.i(a,Za,"translate:x"),v.i(b,Za,"translate:y"));this.Qa+=this.m11*a+this.m21*b;this.Ra+=this.m12*a+this.m22*b};Za.prototype.scale=Za.prototype.scale=function(a,b){b===f&&(b=a);t&&(v.i(a,Za,"translate:sx"),v.i(b,Za,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};
Za.prototype.transformPoint=Za.prototype.wb=function(a){t&&v.c(a,E,Za,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.Qa;a.y=b*this.m12+c*this.m22+this.Ra;return a};Za.prototype.invertedTransformPoint=Za.prototype.Vh=function(a){t&&v.c(a,E,Za,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.Qa-this.m11*this.Ra),g=a.x,i=a.y;a.x=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.Ra-this.m22*this.Qa);a.y=g*c+i*d+e;return a};
Za.prototype.transformRect=Za.prototype.yD=function(a){t&&v.c(a,F,Za,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.Qa,n=this.Ra,r=b*g+c*j+l,q=b*i+c*k+n,u=d*g+c*j+l,c=d*i+c*k+n,x=b*g+e*j+l,b=b*i+e*k+n,g=d*g+e*j+l,d=d*i+e*k+n,e=r,i=q,r=Math.min(r,u),e=Math.max(e,u),i=Math.min(i,c),q=Math.max(q,c),r=Math.min(r,x),e=Math.max(e,x),i=Math.min(i,b),q=Math.max(q,b),r=Math.min(r,g),e=Math.max(e,g),i=Math.min(i,d),q=Math.max(q,d);a.x=r;a.y=
i;a.width=e-r;a.height=q-i};function Bb(a,b){return new E(b.x*a.m11+b.y*a.m21+a.Qa,b.x*a.m12+b.y*a.m22+a.Ra)}Za.prototype.isIdentity=Za.prototype.iy=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.Qa&&0===this.Ra};function K(a,b,c,d){a===f?this.offsetY=this.offsetX=this.y=this.x=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}v.H("Spot",K);v.kd(K,{x:h,y:h,offsetX:h,offsetY:h});
K.prototype.Pa=function(a){t&&v.c(a,K,K,"assign:s");this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};K.prototype.setTo=K.prototype.Tr=function(a,b,c,d){t&&(Cb(a,"setTo:x"),Cb(b,"setTo:y"),Fb(c,"setTo:offx"),Fb(d,"setTo:offy"));v.v(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};K.prototype.set=K.prototype.set=function(a){t&&v.c(a,K,K,"set:s");v.v(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};
K.prototype.copy=K.prototype.copy=function(){var a=new K;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};K.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};K.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};K.prototype.freeze=function(){this.Ha=h;return this};K.prototype.ta=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.Ha=p;return this};function Gb(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}
function Cb(a,b){(isNaN(a)||1<a||0>a)&&v.ha(a,"0 <= "+b+" <= 1",K,b)}function Fb(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&v.ha(a,"real number, not NaN or Infinity",K,b)}var Mb;
K.parse=Mb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return v.NONE;if("TopLeft"===a)return v.Bv;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return v.$n;if("TopRight"===a)return v.Dv;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return v.Yn;if("Center"===a)return v.rv;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return v.Zn;if("BottomLeft"===a)return v.mv;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return v.Xn;if("BottomRight"===a)return v.ov;if("TopSide"===
a)return v.Fv;if("LeftSide"===a)return v.uv;if("RightSide"===a)return v.zv;if("BottomSide"===a)return v.qv;if("TopBottomSides"===a)return v.Av;if("LeftRightSides"===a)return v.tv;if("TopLeftSides"===a)return v.Cv;if("TopRightSides"===a)return v.Ev;if("BottomLeftSides"===a)return v.nv;if("BottomRightSides"===a)return v.pv;if("NotTopSide"===a)return v.yv;if("NotLeftSide"===a)return v.wv;if("NotRightSide"===a)return v.xv;if("NotBottomSide"===a)return v.vv;if("AllSides"===a)return v.lv;if("Default"===
a)return v.sv;for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new K(c,e,g,i)}return new K};var Nb;K.stringify=Nb=function(a){return a instanceof K?Ob(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
K.prototype.toString=function(){return Ob(this)?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.u(v.NONE)?"None":this.u(v.Bv)?"TopLeft":this.u(v.$n)?"Top":this.u(v.Dv)?"TopRight":this.u(v.Yn)?"Left":this.u(v.rv)?"Center":this.u(v.Zn)?"Right":this.u(v.mv)?"BottomLeft":this.u(v.Xn)?"Bottom":this.u(v.ov)?"BottomRight":this.u(v.Fv)?"TopSide":this.u(v.uv)?"LeftSide":this.u(v.zv)?"RightSide":this.u(v.qv)?"BottomSide":
this.u(v.Av)?"TopBottomSides":this.u(v.tv)?"LeftRightSides":this.u(v.Cv)?"TopLeftSides":this.u(v.Ev)?"TopRightSides":this.u(v.nv)?"BottomLeftSides":this.u(v.pv)?"BottomRightSides":this.u(v.yv)?"NotTopSide":this.u(v.wv)?"NotLeftSide":this.u(v.xv)?"NotRightSide":this.u(v.vv)?"NotBottomSide":this.u(v.lv)?"AllSides":this.u(v.sv)?"Default":"None"};
K.prototype.equals=K.prototype.u=function(a){return!(a instanceof K)?p:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};K.prototype.opposite=K.prototype.KJ=function(){return new K(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};K.prototype.includesSide=K.prototype.aJ=function(a){if(!Pb(this)||!Pb(a))return p;a=a.offsetY;return(this.offsetY&a)===a};
function Ob(a){return!isNaN(a.x)&&!isNaN(a.y)}function Sb(a){return isNaN(a.x)||isNaN(a.y)}function Pb(a){return Sb(a)&&1===a.offsetX&&0!==a.offsetY}function Tb(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}v.Nc=1;v.vc=2;v.Fc=4;v.Ec=8;v.NONE=Gb(new K(0,0,0,0),0).Ga();v.sv=Gb(new K(0,0,-1,0),-1).Ga();v.Bv=(new K(0,0,0,0)).Ga();v.$n=(new K(0.5,0,0,0)).Ga();v.Dv=(new K(1,0,0,0)).Ga();v.Yn=(new K(0,0.5,0,0)).Ga();v.rv=(new K(0.5,0.5,0,0)).Ga();v.Zn=(new K(1,0.5,0,0)).Ga();
v.mv=(new K(0,1,0,0)).Ga();v.Xn=(new K(0.5,1,0,0)).Ga();v.ov=(new K(1,1,0,0)).Ga();v.Fv=Gb(new K(0,0,1,v.Nc),1).Ga();v.uv=Gb(new K(0,0,1,v.vc),1).Ga();v.zv=Gb(new K(0,0,1,v.Fc),1).Ga();v.qv=Gb(new K(0,0,1,v.Ec),1).Ga();v.Av=Gb(new K(0,0,1,v.Nc|v.Ec),1).Ga();v.tv=Gb(new K(0,0,1,v.vc|v.Fc),1).Ga();v.Cv=Gb(new K(0,0,1,v.Nc|v.vc),1).Ga();v.Ev=Gb(new K(0,0,1,v.Nc|v.Fc),1).Ga();v.nv=Gb(new K(0,0,1,v.Ec|v.vc),1).Ga();v.pv=Gb(new K(0,0,1,v.Ec|v.Fc),1).Ga();v.yv=Gb(new K(0,0,1,v.vc|v.Fc|v.Ec),1).Ga();
v.wv=Gb(new K(0,0,1,v.Nc|v.Fc|v.Ec),1).Ga();v.xv=Gb(new K(0,0,1,v.Nc|v.vc|v.Ec),1).Ga();v.vv=Gb(new K(0,0,1,v.Nc|v.vc|v.Fc),1).Ga();v.lv=Gb(new K(0,0,1,v.Nc|v.vc|v.Fc|v.Ec),1).Ga();var Ub;K.None=Ub=v.NONE;var Wb;K.Default=Wb=v.sv;var Xb;K.TopLeft=Xb=v.Bv;var Yb;K.TopCenter=Yb=v.$n;var dc;K.TopRight=dc=v.Dv;K.LeftCenter=v.Yn;var ec;K.Center=ec=v.rv;K.RightCenter=v.Zn;var fc;K.BottomLeft=fc=v.mv;var gc;K.BottomCenter=gc=v.Xn;var nc;K.BottomRight=nc=v.ov;var oc;K.MiddleTop=oc=v.$n;var pc;
K.MiddleLeft=pc=v.Yn;var qc;K.MiddleRight=qc=v.Zn;var sc;K.MiddleBottom=sc=v.Xn;K.Top=v.$n;K.Left=v.Yn;K.Right=v.Zn;K.Bottom=v.Xn;var tc;K.TopSide=tc=v.Fv;var uc;K.LeftSide=uc=v.uv;var vc;K.RightSide=vc=v.zv;var wc;K.BottomSide=wc=v.qv;K.TopBottomSides=v.Av;K.LeftRightSides=v.tv;K.TopLeftSides=v.Cv;K.TopRightSides=v.Ev;K.BottomLeftSides=v.nv;K.BottomRightSides=v.pv;K.NotTopSide=v.yv;K.NotLeftSide=v.wv;K.NotRightSide=v.xv;K.NotBottomSide=v.vv;var Cc;K.AllSides=Cc=v.lv;
var Dc=4*((Math.sqrt(2)-1)/3),Ec=(new E(0,0)).Ga(),Jc=(new hb(Infinity,Infinity)).Ga(),Kc=(new E(-Infinity,-Infinity)).Ga(),Lc=(new E(Infinity,Infinity)).Ga(),Mc=(new hb(0,0)).Ga(),Nc=(new E(NaN,NaN)).Ga();function Va(a,b){var c=a-b;return 0.5>c&&-0.5<c}function Ta(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function Tc(a,b,c,d,e,g,i){0>=e&&(e=1E-6);var j,k,l,n;a<c?(k=a,j=c):(k=c,j=a);b<d?(n=b,l=d):(n=d,l=b);if(a===c)return n<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j+=e;k-=e;if(k<=g&&g<=j&&(l+=e,n-=e,n<=i&&i<=l))if(j-k>l-n)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){if(i=(c-a)/(d-b)*(i-b)+a,i-e<=g&&g<=i+e)return h}else return h;return p}
function Uc(a,b,c,d,e,g,i,j,k,l,n){if(!Tc(a,b,i,j,k,c,d)||!Tc(a,b,i,j,k,e,g)){var r=(a+c)/2,q=(b+d)/2,u=(c+e)/2,x=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(r+u)/2,c=(q+x)/2,u=(u+e)/2,x=(x+g)/2,B=(d+u)/2,G=(c+x)/2;return Uc(a,b,r,q,d,c,B,G,k,l,n)||Uc(B,G,u,x,e,g,i,j,k,l,n)}return Tc(a,b,i,j,k,l,n)}
function Vc(a,b,c,d,e,g,i,j,k,l){if(!Tc(a,b,i,j,k,c,d)||!Tc(a,b,i,j,k,e,g)){var n=(a+c)/2,r=(b+d)/2,q=(c+e)/2,u=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(n+q)/2,c=(r+u)/2,q=(q+e)/2,u=(u+g)/2,x=(d+q)/2,B=(c+u)/2;Vc(a,b,n,r,d,c,x,B,k,l);Vc(x,B,q,u,e,g,i,j,k,l)}else nb(l,a,b,0,0),nb(l,i,j,0,0)}function Wc(a,b,c,d,e,g,i,j,k){if(Tc(a,b,e,g,i,c,d))return Tc(a,b,e,g,i,j,k);var l=(a+c)/2,n=(b+d)/2,c=(c+e)/2,d=(d+g)/2,r=(l+c)/2,q=(n+d)/2;return Wc(a,b,l,n,r,q,i,j,k)||Wc(r,q,c,d,e,g,i,j,k)}
function Yc(a,b,c,d,e,g,i,j){if(Tc(a,b,e,g,i,c,d))nb(j,a,b,0,0),nb(j,e,g,0,0);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,n=(k+c)/2,r=(l+d)/2;Yc(a,b,k,l,n,r,i,j);Yc(n,r,c,d,e,g,i,j)}}
function Zc(a,b,c,d,e,g,i,j,k,l,n,r,q,u){0>=q&&(q=1E-6);if(!Tc(a,b,i,j,q,c,d)||!Tc(a,b,i,j,q,e,g)){var x=(a+c)/2,B=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,G=(x+c)/2,I=(B+d)/2,c=(c+e)/2,d=(d+g)/2,y=(G+c)/2,J=(I+d)/2,z=(n-k)*(n-k)+(r-l)*(r-l),H=p;Zc(a,b,x,B,G,I,y,J,k,l,n,r,q,u)&&(a=(u.x-k)*(u.x-k)+(u.y-l)*(u.y-l),a<z&&(z=a,H=h));b=u.x;x=u.y;Zc(y,J,c,d,e,g,i,j,k,l,n,r,q,u)&&(a=(u.x-k)*(u.x-k)+(u.y-l)*(u.y-l),a<z?H=h:(u.x=b,u.y=x));return H}x=(a-i)*(l-r)-(b-j)*(k-n);if(!x)return p;q=((a*j-b*i)*
(k-n)-(a-i)*(k*r-l*n))/x;x=((a*j-b*i)*(l-r)-(b-j)*(k*r-l*n))/x;if((k>n?k-n:n-k)<(l>r?l-r:r-l)){if(b<j?(k=b,i=j):(k=j,i=b),x<k||x>i)return p}else if(a<i?k=a:(k=i,i=a),q<k||q>i)return p;u.x=q;u.y=x;return h}
function ad(a,b,c,d,e,g,i,j,k,l,n,r,q){var u=0;0>=q&&(q=1E-6);if(!Tc(a,b,i,j,q,c,d)||!Tc(a,b,i,j,q,e,g))var x=(a+c)/2,B=(b+d)/2,G=(c+e)/2,I=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(x+G)/2,c=(B+I)/2,G=(G+e)/2,I=(I+g)/2,y=(d+G)/2,J=(c+I)/2,u=u+ad(a,b,x,B,d,c,y,J,k,l,n,r,q),u=u+ad(y,J,G,I,e,g,i,j,k,l,n,r,q);else{q=(a-i)*(l-r)-(b-j)*(k-n);if(!q)return u;x=((a*j-b*i)*(k-n)-(a-i)*(k*r-l*n))/q;B=((a*j-b*i)*(l-r)-(b-j)*(k*r-l*n))/q;if(x>=n)return u;if((k>n?k-n:n-k)<(l>r?l-r:r-l)){if(b<j?(k=b,a=j):(k=j,a=b),B<k||B>
a)return u}else if(a<i?(k=a,a=i):k=i,x<k||x>a)return u;0<q?u++:0>q&&u--}return u}function bd(a,b,c,d,e,g,i){if(Ta(a,c)){var j;b<d?(j=b,c=d):(j=d,c=b);d=g;if(d<j)return i.x=a,i.y=j,p;if(d>c)return i.x=a,i.y=c,p;i.x=a;i.y=d;return h}if(Ta(b,d)){a<c?j=a:(j=c,c=a);d=e;if(d<j)return i.x=j,i.y=b,p;if(d>c)return i.x=c,i.y=b,p;i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>j)return i.x=a,i.y=b,p;if(1.000005<j)return i.x=c,i.y=d,p;i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function cd(a,b,c,d,e,g,i,j,k){if(Va(a,c)&&Va(b,d))return k.x=a,k.y=b,p;if(Ta(e,i)){if(Ta(a,c))return bd(a,b,c,d,e,g,k),p;g=(d-b)/(c-a)*(e-a)+b;return bd(a,b,c,d,e,g,k)}j=(j-g)/(i-e);if(Ta(a,c)){g=j*(a-e)+g;b<d?(i=b,c=d):(i=d,c=b);if(g<i)return k.x=a,k.y=i,p;if(g>c)return k.x=a,k.y=c,p;k.x=a;k.y=g;return h}i=(d-b)/(c-a);if(Ta(j,i))return bd(a,b,c,d,e,g,k),p;e=(i*a-j*e+g-b)/(i-j);if(Ta(i,0)){a<c?i=a:(i=c,c=a);if(e<i)return k.x=i,k.y=b,p;if(e>c)return k.x=c,k.y=b,p;k.x=e;k.y=b;return h}g=i*(e-a)+b;
return bd(a,b,c,d,e,g,k)}
function dd(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<n&&(n=e,k.x=c,k.y=d)}var n=Infinity;l(k.x,k.y);var r,q,u,x;e<i?(r=e,q=i):(r=i,q=e);g<j?(u=e,x=i):(u=i,x=e);r=(q-r)/2+0;u=(x-u)/2+0;e=(e+i)/2;g=(g+j)/2;0===r||0===u||(0.5>(c>a?c-a:a-c)?(r=1-(c-e)*(c-e)/(r*r),0>r||(r=Math.sqrt(r),d=-u*r+g,l(c,u*r+g),l(c,d))):(c=(d-b)/(c-a),d=1/(r*r)+c*c/(u*u),j=2*c*(b-c*a)/(u*u)-2*c*g/(u*u)-2*e/(r*r),u=j*j-4*d*(2*c*a*g/(u*u)-2*b*g/(u*u)+g*g/(u*u)+e*e/(r*r)-1+(b-c*a)*(b-c*a)/(u*u)),0>u||(r=
Math.sqrt(u),u=(-j+r)/(2*d),l(u,c*u-c*a+b),u=(-j-r)/(2*d),l(u,c*u-c*a+b))))}
function ed(a,b,c,d){var e=a.left,g=a.right,i=a.top,a=a.bottom,j=b.x,b=b.y,k=c.x,c=c.y,l=1E21,n=e,r=i;if(cd(e,i,e,a,j,b,k,c,d)){var q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);q<l&&(l=q,n=d.x,r=d.y)}cd(g,i,g,a,j,b,k,c,d)&&(q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b),q<l&&(l=q,n=d.x,r=d.y));cd(e,i,g,i,j,b,k,c,d)&&(q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b),q<l&&(l=q,n=d.x,r=d.y));cd(e,a,g,a,j,b,k,c,d)&&(q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b),q<l&&(l=q,n=d.x,r=d.y));d.x=n;d.y=r;return 1E21>l}
function id(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,n=a.bottom;return d===g?(e<i?(a=e,g=i):(a=i,g=e),j<=d&&d<=k&&a<=n&&g>=l):e===i?(d<g?a=d:(a=g,g=d),l<=e&&e<=n&&a<=k&&g>=j):a.ea(b)||a.ea(c)||jd(j,l,k,l,d,e,g,i)||jd(k,l,k,n,d,e,g,i)||jd(k,n,j,n,d,e,g,i)||jd(j,n,j,l,d,e,g,i)?h:p}function jd(a,b,c,d,e,g,i,j){return 0>=kd(a,b,c,d,e,g)*kd(a,b,c,d,i,j)&&0>=kd(e,g,i,j,a,b)*kd(e,g,i,j,c,d)}
function kd(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0}function ld(a){0>a&&(a+=360);360<=a&&(a-=360);return a}function md(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new E(i,a)}function nd(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g}
function zd(a){v.Hb(this);a===f?a=Ad:t&&v.Sa(a,zd,zd,"constructor:type");this.N=a;this.Gc=this.xc=this.Wb=this.Kb=0;this.Ck=new A(Bd);this.Fs=this.Ck.Rb;this.ts=(new F).freeze();this.Ea=h;this.$G=new E;this.Bh=Xb;this.Ch=nc;this.Ms=this.Ns=NaN;this.qd=Mc;this.Ib=Cd}v.H("Geometry",zd);
zd.prototype.copy=zd.prototype.copy=function(){var a=new zd;a.N=this.N;a.Kb=this.Kb;a.Wb=this.Wb;a.xc=this.xc;a.Gc=this.Gc;for(var b=this.Ck,c=b.length,d=a.Ck,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.Fs=this.Fs;a.ts.Pa(this.ts);a.Ea=this.Ea;a.Bh=this.Bh.B();a.Ch=this.Ch.B();a.Ns=this.Ns;a.Ms=this.Ms;a.qd=this.qd.B();a.Ib=this.Ib;return a};var Kd;zd.Line=Kd=v.l(zd,"Line",0);var Nd;zd.Rectangle=Nd=v.l(zd,"Rectangle",1);var Od;zd.Ellipse=Od=v.l(zd,"Ellipse",2);var Ad;zd.Path=Ad=v.l(zd,"Path",3);
zd.prototype.Ga=function(){this.freeze();Object.freeze(this);return this};zd.prototype.freeze=function(){this.Ha=h;var a=this.tc;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};zd.prototype.ta=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.Ha=p;var a=this.tc;a.ta();for(var b=a.length,c=0;c<b;c++)a.j[c].ta();return this};
zd.prototype.toString=function(a){switch(this.type){case Kd:return"M"+this.Ma.toFixed(a)+" "+this.Na.toFixed(a)+"L"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);case Nd:var b=new F(this.Ma,this.Na,0,0);nb(b,this.aa,this.ba,0,0);return"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Od:b=new F(this.Ma,this.Na,0,0);nb(b,this.aa,this.ba,0,0);var c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/2).toFixed(a)+" "+
(b.height/2).toFixed(a)+" 0 0 1 "+(b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a))+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Ad:for(var b="",c=this.tc,d=c.length,e=0;e<d;e++){var g=c.j[e];0<e&&(b+=" ");b+=g.toString(a)}return b;default:return this.type.toString()}};var Pd;
zd.parse=Pd=function(a,b){function c(){return l>=x-1?h:k[l+1].match(/[A-Za-z]/)!==m}function d(){l++;return k[l]}function e(){var a=new E(parseFloat(d()),parseFloat(d()));n===n.toLowerCase()&&(a.x=u.x+a.x,a.y=u.y+a.y);return a}function g(){return u=e()}function i(){return q=e()}function j(){return"c"!==r.toLowerCase()&&"s"!==r.toLowerCase()?u:new E(2*u.x-q.x,2*u.y-q.y)}b===f&&(b=h);var a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,n="",r="";new E(0,0);for(var q=new E(0,0),u=new E(0,0),x=k.length,B=new L,G;!(l>=x-1);)if(r=n,n=d(),""!==n)switch(n.toUpperCase()){case "M":G=g();
for(B.$b===m?M(B,G.x,G.y,p,p):B.moveTo(G.x,G.y);!c();)G=g(),B.lineTo(G.x,G.y);break;case "L":for(;!c();)G=g(),B.lineTo(G.x,G.y);break;case "H":for(;!c();)u=G=new E((n===n.toLowerCase()?u.x:0)+parseFloat(d()),u.y),B.lineTo(u.x,u.y);break;case "V":for(;!c();)u=G=new E(u.x,(n===n.toLowerCase()?u.y:0)+parseFloat(d())),B.lineTo(u.x,u.y);break;case "C":for(;!c();){G=e();var I=i(),y=g();N(B,G.x,G.y,I.x,I.y,y.x,y.y)}break;case "S":for(;!c();)G=j(),I=i(),y=g(),N(B,G.x,G.y,I.x,I.y,y.x,y.y);break;case "Q":for(;!c();)I=
i(),y=g(),Qd(B,I.x,I.y,y.x,y.y);break;case "T":for(;!c();)q=I=j(),y=g(),Qd(B,I.x,I.y,y.x,y.y);break;case "B":for(;!c();)G=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())],c()||(G.push(parseFloat(d())),c()||G.push(parseFloat(d()))),n===n.toLowerCase()&&(G[2]+=u.x,G[3]+=u.y),B.arcTo(G[0],G[1],G[2],G[3],G[4],G[5],G[6]);break;case "Z":O(B);break;case "F":b=h}B=B.k;if(b)for(G=B.tc.f;G.next();)G.value.vr=h;return B};
zd.prototype.ky=function(){if(this.Ea)return h;var a=this.tc;if(this.Fs!==a.Rb)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].ky())return h;return p};zd.prototype.az=function(){this.Ea=p;var a=this.tc;this.Fs=a.Rb;for(var b=a.length,c=0;c<b;c++)a.j[c].az()};
zd.prototype.$d=function(){var a=this.ts;a.ta();a.reset();a.EG(this.qd);switch(this.type){case Kd:case Nd:case Od:nb(a,this.Kb,this.Wb,0,0);nb(a,this.xc,this.Gc,0,0);break;case Ad:for(var b=this.tc,c=b.length,d=0;d<c;d++){var e=b.j[d];nb(a,e.Ma,e.Na,0,0);for(var g=e.tb,i=g.length,j=e.Ma,e=e.Na,k=0;k<i;k++){var l=g.j[k];switch(l.type){case Rd:case Sd:j=l.aa;e=l.ba;nb(a,j,e,0,0);break;case ce:Vc(j,e,l.Ad,l.tf,l.Mn,l.Nn,l.aa,l.ba,0.5,a);j=l.aa;e=l.ba;break;case de:Yc(j,e,l.Ad,l.tf,l.aa,l.ba,0.5,a);j=
l.aa;e=l.ba;break;case ee:for(var l=fe(l),n=l.length,r=m,d=0;d<n;d++)r=l[d],Vc(r.Kl,r.Ll,r.hv,r.jv,r.iv,r.kv,r.pk,r.qk,0.5,a);r!==m&&(j=r.pk,e=r.qk);break;default:v.g("Unknown Segment type: "+l.type)}}}break;default:v.g("Unknown Geometry type: "+this.type)}nb(a,0,0,0,0);a.freeze()};
zd.prototype.ea=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.hb.x-20,a=a.y,j=0,k,l,n,r,q,u,x,B=this.tc.j,G=B.length,I=0;I<G;I++){var y=B[I];if(y.vr){if(c&&y.ea(e,g,b))return h;var J=y.tb;k=y.Ma;l=y.Na;for(var z=k,H=l,fa=0;fa<=J.length;fa++){fa!==J.length?(n=J.j[fa],r=n.type,u=n.aa,x=n.ba):(r=Rd,u=y.Ma,x=y.Na);switch(r){case Sd:q=ge(e,g,i,a,k,l,z,H);if(q===h)return h;j+=q;z=u;H=x;break;case Rd:q=ge(e,g,i,a,k,l,u,x);if(q===h)return h;j+=q;break;case ce:q=ad(k,l,n.Ad,n.tf,n.Mn,n.Nn,u,x,i,a,e,g,0.5);
j+=q;break;case de:q=ad(k,l,(k+2*n.Ad)/3,(l+2*n.tf)/3,(n.Ad+2*u)/3,(n.Ad+2*u)/3,u,x,i,a,e,g,0.5);j+=q;break;case ee:r=fe(n);for(var S=r.length,T=m,ga=0;ga<S;ga++){T=r[ga];if(0===ga){q=ge(e,g,i,a,k,l,T.Kl,T.Ll);if(q===h)return h;j+=q}q=ad(T.Kl,T.Ll,T.hv,T.jv,T.iv,T.kv,T.pk,T.qk,i,a,e,g,0.5);j+=q}T!==m&&(u=T.pk,x=T.qk);break;default:v.g("Unknown Segment type: "+n.type)}k=u;l=x}if(0!==j)return h;j=0}else if(y.ea(e,g,d?b:b+2))return h}return 0!==j};
function ge(a,b,c,d,e,g,i,j){if(Tc(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(0===k)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j?(a=g,e=j):(a=j,e=g),b<a||b>e)return 0}else if(e<i?(a=e,e=i):a=i,l<a||l>e)return 0;return 0<k?1:-1}function pe(a,b,c,d){for(var e=a.tc.length,g=0;g<e;g++)if(a.tc.j[g].ea(b,c,d))return h;return p}v.a(zd,"type",zd.prototype.type);
v.defineProperty(zd,{type:"type"},s("N"),function(a){this.N!==a&&(t&&v.Sa(a,zd,zd,"type"),v.v(this,a),this.N=a,this.Ea=h)});v.a(zd,"startX",zd.prototype.Ma);v.defineProperty(zd,{Ma:"startX"},s("Kb"),function(a){this.Kb!==a&&(t&&v.i(a,zd,"startX"),v.v(this,a),this.Kb=a,this.Ea=h)});v.a(zd,"startY",zd.prototype.Na);v.defineProperty(zd,{Na:"startY"},s("Wb"),function(a){this.Wb!==a&&(t&&v.i(a,zd,"startY"),v.v(this,a),this.Wb=a,this.Ea=h)});v.a(zd,"endX",zd.prototype.aa);
v.defineProperty(zd,{aa:"endX"},s("xc"),function(a){this.xc!==a&&(t&&v.i(a,zd,"endX"),v.v(this,a),this.xc=a,this.Ea=h)});v.a(zd,"endY",zd.prototype.ba);v.defineProperty(zd,{ba:"endY"},s("Gc"),function(a){this.Gc!==a&&(t&&v.i(a,zd,"endY"),v.v(this,a),this.Gc=a,this.Ea=h)});v.a(zd,"figures",zd.prototype.tc);v.defineProperty(zd,{tc:"figures"},s("Ck"),function(a){this.Ck!==a&&(t&&v.c(a,A,zd,"figures"),v.v(this,a),this.Ck=a,this.Ea=h)});
v.defineProperty(zd,{n:"spot1"},s("Bh"),function(a){t&&v.c(a,K,zd,"spot1");v.v(this,a);this.Bh=a.B()});v.defineProperty(zd,{o:"spot2"},s("Ch"),function(a){t&&v.c(a,K,zd,"spot2");v.v(this,a);this.Ch=a.B()});v.m(zd,{hb:"bounds"},function(){this.ky()&&(this.az(),this.$d());return this.ts});v.a(zd,"minSize",zd.prototype.Qd);
v.defineProperty(zd,{Qd:"minSize"},s("qd"),function(a){this.qd.u(a)||(t&&v.c(a,hb,zd,"minSize"),a=a.B(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.qd=a)});function Bd(a,b,c){v.Hb(this);c===f&&(c=h);this.fp=c;this.Lf=h;a!==f?(t&&v.i(a,Bd,"sx"),this.Kb=a):this.Kb=0;b!==f?(t&&v.i(b,Bd,"sy"),this.Wb=b):this.Wb=0;this.rq=new A(qe);this.Ft=this.rq.Rb;this.Ea=h}v.H("PathFigure",Bd);
Bd.prototype.copy=Bd.prototype.copy=function(){var a=new Bd;a.fp=this.fp;a.Lf=this.Lf;a.Kb=this.Kb;a.Wb=this.Wb;for(var b=this.rq,c=b.length,d=a.rq,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.Ft=this.Ft;a.Ea=this.Ea;return a};da=Bd.prototype;da.toString=function(a){for(var b="M"+this.Ma.toFixed(a)+" "+this.Na.toFixed(a),c=this.tb,d=c.length,e=0;e<d;e++)b+=" "+c.j[e].toString(a);this.vr&&(b+="\t");return b};
da.freeze=function(){this.Ha=h;var a=this.tb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};da.ta=function(){this.Ha=p;var a=this.tb;a.ta();for(var b=a.length,c=0;c<b;c++)a.j[c].ta();return this};da.ky=function(){if(this.Ea)return h;var a=this.tb;if(this.Ft!==a.Rb)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].Ea)return h;return p};da.az=function(){this.Ea=p;var a=this.tb;this.Ft=a.Rb;for(var b=a.length,c=0;c<b;c++)a.j[c].Ea=p};v.a(Bd,"isFilled",Bd.prototype.vr);
v.defineProperty(Bd,{vr:"isFilled"},s("fp"),function(a){t&&v.e(a,"boolean",Bd,"isFilled");v.v(this,a);this.fp=a});v.a(Bd,"isShadowed",Bd.prototype.ul);v.defineProperty(Bd,{ul:"isShadowed"},s("Lf"),function(a){t&&v.e(a,"boolean",Bd,"isShadowed");v.v(this,a);this.Lf=a});v.a(Bd,"subPath",Bd.prototype.JG);v.defineProperty(Bd,{JG:"subPath"},s("fE"),function(a){t&&v.e(a,"boolean",Bd,"subPath");v.v(this,a);this.fE=a});v.a(Bd,"startX",Bd.prototype.Ma);
v.defineProperty(Bd,{Ma:"startX"},s("Kb"),function(a){t&&v.i(a,Bd,"startX");v.v(this,a);this.Kb=a;this.Ea=h});v.a(Bd,"startY",Bd.prototype.Na);v.defineProperty(Bd,{Na:"startY"},s("Wb"),function(a){t&&v.i(a,Bd,"startY");v.v(this,a);this.Wb=a;this.Ea=h});v.a(Bd,"segments",Bd.prototype.tb);v.defineProperty(Bd,{tb:"segments"},s("rq"),function(a){t&&v.c(a,A,Bd,"segments");v.v(this,a);this.rq=a;this.Ea=h});
Bd.prototype.ea=function(a,b,c){for(var d=this.Ma,e=this.Na,g=d,i=e,j=this.tb.j,k=j.length,l=0;l<k;l++){var n=j[l];switch(n.type){case Sd:g=n.aa;i=n.ba;break;case Rd:if(Tc(d,e,n.aa,n.ba,c,a,b))return h;break;case ce:if(Uc(d,e,n.Ad,n.tf,n.Mn,n.Nn,n.aa,n.ba,c,a,b))return h;break;case de:if(Wc(d,e,n.Ad,n.tf,n.aa,n.ba,c,a,b))return h;break;case ee:for(var r=fe(n),q=r.length,u=m,x=0;x<q;x++)if(u=r[x],0===x&&Tc(d,e,u.Kl,u.Ll,c,a,b)||Uc(u.Kl,u.Ll,u.hv,u.jv,u.iv,u.kv,u.pk,u.qk,c,a,b))return h;u!==m&&(n.aa=
u.pk,n.ba=u.qk);break;default:v.g("Unknown Segment type: "+n.type)}d=n.aa;e=n.ba;if(n.ji&&(d!==g||e!==i)&&Tc(d,e,g,i,c,a,b))return h}return p};
function qe(a,b,c,d,e,g,i){v.Hb(this);a===f?a=Rd:t&&v.Sa(a,qe,qe,"constructor:type");this.N=a;a===ee?(b!==f?(t&&v.i(b,qe,"ex"),this.Eg=b):this.Eg=0,c!==f?(t&&v.i(c,qe,"ey"),this.Gg=c):this.Gg=0,d!==f&&(t&&v.i(d,qe,"x1"),this.Ul=d),e!==f&&(t&&v.i(e,qe,"y1"),this.Vl=e),g!==f&&(t&&v.i(g,qe,"x2"),this.zt=g),i!==f&&(t&&v.i(i,qe,"y2"),this.At=i)):(b!==f?(t&&v.i(b,qe,"ex"),this.Uk=b):this.Uk=0,c!==f?(t&&v.i(c,qe,"ey"),this.Vk=c):this.Vk=0,d!==f&&(t&&v.i(d,qe,"x1"),this.Kj=d),e!==f&&(t&&v.i(e,qe,"y1"),this.Lj=
e),g!==f&&(t&&v.i(g,qe,"x2"),this.Sk=g),i!==f&&(t&&v.i(i,qe,"y2"),this.Tk=i));this.Ea=h;this.ji=p}v.H("PathSegment",qe);qe.prototype.copy=qe.prototype.copy=function(){var a=new qe;a.N=this.N;this.N===ee?(a.Eg=this.Eg,a.Gg=this.Gg,a.Ul=this.Ul,a.Vl=this.Vl,a.zt=this.zt,a.At=this.At):(a.Uk=this.Uk,a.Vk=this.Vk,a.Kj=this.Kj,a.Lj=this.Lj,a.Sk=this.Sk,a.Tk=this.Tk);a.Ea=this.Ea;a.ji=this.ji;return a};
qe.prototype.toString=function(a){switch(this.type){case Sd:a="M"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case Rd:a="L"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case ce:a="C"+this.Ad.toFixed(a)+" "+this.tf.toFixed(a)+" "+this.Mn.toFixed(a)+" "+this.Nn.toFixed(a)+" "+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case de:case ee:a="A";break;default:a=this.type.toString()}return a+(this.ji?"z":"")};var Sd;qe.Move=Sd=v.l(qe,"Move",0);var Rd;qe.Line=Rd=v.l(qe,"Line",1);var ce;
qe.Bezier=ce=v.l(qe,"Bezier",2);var de;qe.QuadraticBezier=de=v.l(qe,"QuadraticBezier",3);var ee;qe.Arc=ee=v.l(qe,"Arc",4);qe.prototype.freeze=function(){this.Ha=h;return this};qe.prototype.ta=function(){this.Ha=p;return this};qe.prototype.close=qe.prototype.close=function(){this.ji=h;return this};
function fe(a){if(a.Ov&&a.Ea===p)return a.Ov;for(var b=a.Ul,c=a.Vl,d=a.Mr,e=a.jk,g=a.jk+a.Fl,i=Math.PI,e=e*(i/180),g=g*(i/180),j=e<g?1:-1,k=[],l=i/2,n=e,e=Math.min(2*i+1E-5,Math.abs(g-e));1E-5<e;){var g=n+j*Math.min(e,l),r=(g-n)/2,q=d*Math.cos(r),u=d*Math.sin(r),x=0.5522847498*Math.tan(r),i=q+x*u,q=-u+x*q,u=-q,x=r+n,r=Math.cos(x),x=Math.sin(x);k.push({Kl:b+d*Math.cos(n),Ll:c+d*Math.sin(n),hv:b+i*r-q*x,jv:c+i*x+q*r,iv:b+i*r-u*x,kv:c+i*x+u*r,pk:b+d*Math.cos(g),qk:c+d*Math.sin(g)});e-=Math.abs(g-n);
n=g}a.Ov=k;return a.Ov}v.a(qe,"isClosed",qe.prototype.aC);v.defineProperty(qe,{aC:"isClosed"},s("ji"),function(a){this.ji!==a&&(this.ji=a,this.Ea=h)});v.a(qe,"type",qe.prototype.type);v.defineProperty(qe,{type:"type"},s("N"),function(a){t&&v.Sa(a,qe,qe,"type");v.v(this,a);this.N=a;this.Ea=h});v.a(qe,"endX",qe.prototype.aa);v.defineProperty(qe,{aa:"endX"},s("Uk"),function(a){t&&v.i(a,qe,"endX");v.v(this,a);this.Uk=a;this.Ea=h});v.a(qe,"endY",qe.prototype.ba);
v.defineProperty(qe,{ba:"endY"},s("Vk"),function(a){t&&v.i(a,qe,"endY");v.v(this,a);this.Vk=a;this.Ea=h});v.defineProperty(qe,{Ad:"point1X"},s("Kj"),function(a){t&&v.i(a,qe,"point1X");v.v(this,a);this.Kj=a;this.Ea=h});v.defineProperty(qe,{tf:"point1Y"},s("Lj"),function(a){t&&v.i(a,qe,"point1Y");v.v(this,a);this.Lj=a;this.Ea=h});v.defineProperty(qe,{Mn:"point2X"},s("Sk"),function(a){t&&v.i(a,qe,"point2X");v.v(this,a);this.Sk=a;this.Ea=h});
v.defineProperty(qe,{Nn:"point2Y"},s("Tk"),function(a){t&&v.i(a,qe,"point2Y");v.v(this,a);this.Tk=a;this.Ea=h});v.defineProperty(qe,{ya:"centerX"},s("Ul"),function(a){t&&v.i(a,qe,"centerX");v.v(this,a);this.Ul=a;this.Ea=h});v.defineProperty(qe,{za:"centerY"},s("Vl"),function(a){t&&v.i(a,qe,"centerY");v.v(this,a);this.Vl=a;this.Ea=h});v.defineProperty(qe,{Mr:"radiusX"},s("zt"),function(a){t&&v.i(a,qe,"radiusX");v.v(this,a);this.zt=a;this.Ea=h});
v.defineProperty(qe,{Pu:"radiusY"},s("At"),function(a){t&&v.i(a,qe,"radiusY");v.v(this,a);this.At=a;this.Ea=h});v.defineProperty(qe,{jk:"startAngle"},s("Eg"),function(a){t&&v.i(a,qe,"startAngle");v.v(this,a);this.Eg=a;this.Ea=h});v.defineProperty(qe,{Fl:"sweepAngle"},s("Gg"),function(a){t&&v.i(a,qe,"sweepAngle");v.v(this,a);this.Gg=a;this.Ea=h});
function re(){this.L=m;this.lx=(new E(0,0)).freeze();this.bw=(new E(0,0)).freeze();this.ms=this.gt=0;this.Ts="";this.Bs=this.qs=0;this.ai=this.Hs=p;this.ei=m;this.Tt=0;this.df=this.Qt=m}v.H("InputEvent",re);re.prototype.copy=re.prototype.copy=function(){var a=new re;a.L=this.L;a.lx=this.bd.copy().freeze();a.bw=this.C.copy().freeze();a.gt=this.gt;a.ms=this.ms;a.Ts=this.Ts;a.qs=this.qs;a.Bs=this.Bs;a.Hs=this.Hs;a.ai=this.ai;a.ei=this.ei;a.Tt=this.Tt;a.Qt=this.Qt;a.df=this.df;return a};
re.prototype.toString=function(){var a="^";this.Xg&&(a+="M:"+this.Xg);this.button&&(a+="B:"+this.button);this.key&&(a+="K:"+this.key);this.Ge&&(a+="C:"+this.Ge);this.Fi&&(a+="D:"+this.Fi);this.ud&&(a+="h");this.bubbles&&(a+="b");this.C!==m&&(a+="@"+this.C.toString());return a};v.a(re,"diagram",re.prototype.b);v.defineProperty(re,{b:"diagram"},s("L"),ba("L"));v.a(re,"viewPoint",re.prototype.bd);v.defineProperty(re,{bd:"viewPoint"},s("lx"),function(a){v.c(a,E,re,"viewPoint");this.lx.Pa(a)});
v.a(re,"documentPoint",re.prototype.C);v.defineProperty(re,{C:"documentPoint"},s("bw"),function(a){v.c(a,E,re,"documentPoint");this.bw.Pa(a)});v.a(re,"modifiers",re.prototype.Xg);v.defineProperty(re,{Xg:"modifiers"},s("gt"),ba("gt"));v.a(re,"button",re.prototype.button);v.defineProperty(re,{button:"button"},s("ms"),ba("ms"));v.a(re,"key",re.prototype.key);v.defineProperty(re,{key:"key"},s("Ts"),ba("Ts"));v.a(re,"clickCount",re.prototype.Ge);v.defineProperty(re,{Ge:"clickCount"},s("qs"),ba("qs"));
v.a(re,"delta",re.prototype.Fi);v.defineProperty(re,{Fi:"delta"},s("Bs"),ba("Bs"));v.a(re,"handled",re.prototype.ud);v.defineProperty(re,{ud:"handled"},s("Hs"),ba("Hs"));v.a(re,"bubbles",re.prototype.bubbles);v.defineProperty(re,{bubbles:"bubbles"},s("ai"),ba("ai"));v.a(re,"event",re.prototype.event);v.defineProperty(re,{event:"event"},s("ei"),ba("ei"));v.a(re,"timestamp",re.prototype.timestamp);v.defineProperty(re,{timestamp:"timestamp"},s("Tt"),ba("Tt"));v.a(re,"targetDiagram",re.prototype.xf);
v.defineProperty(re,{xf:"targetDiagram"},s("Qt"),ba("Qt"));v.a(re,"targetObject",re.prototype.ad);v.defineProperty(re,{ad:"targetObject"},s("df"),ba("df"));v.m(re,{Zj:"control"},function(){return 0!==(this.Xg&1)});v.m(re,{shift:"shift"},function(){return 0!==(this.Xg&4)});v.m(re,{alt:"alt"},function(){return 0!==(this.Xg&2)});v.m(re,{EJ:"meta"},function(){return 0!==(this.Xg&8)});v.m(re,{left:"left"},function(){return 0===this.button});v.m(re,{FJ:"middle"},function(){return 1===this.button});
v.m(re,{right:"right"},function(){return 2===this.button});function se(){this.L=m;this.qb="";this.tt=this.Mt=m;this.ns=p}v.H("DiagramEvent",se);se.prototype.copy=se.prototype.copy=function(){var a=new se;a.L=this.L;a.qb=this.qb;a.Mt=this.Mt;a.tt=this.tt;a.ns=this.ns;return a};se.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");this.av!==m&&(a+=":"+this.av.toString());this.Nu!==m&&(a+="("+this.Nu.toString()+")");return a};v.a(se,"diagram",se.prototype.b);
v.defineProperty(se,{b:"diagram"},s("L"),ba("L"));v.a(se,"name",se.prototype.name);v.defineProperty(se,{name:"name"},s("qb"),ba("qb"));v.a(se,"subject",se.prototype.av);v.defineProperty(se,{av:"subject"},s("Mt"),ba("Mt"));v.a(se,"parameter",se.prototype.Nu);v.defineProperty(se,{Nu:"parameter"},s("tt"),ba("tt"));v.a(se,"cancel",se.prototype.cancel);v.defineProperty(se,{cancel:"cancel"},s("ns"),ba("ns"));function te(){this.clear()}v.H("ChangedEvent",te);var ue;
te.Transaction=ue=v.l(te,"Transaction",-1);var ve;te.Property=ve=v.l(te,"Property",0);var we;te.Insert=we=v.l(te,"Insert",1);var xe;te.Remove=xe=v.l(te,"Remove",2);te.prototype.clear=te.prototype.clear=function(){this.os=ve;this.yt=this.ft="";this.jt=this.kt=this.qt=this.rt=this.pt=this.L=this.Qf=m};
te.prototype.copy=te.prototype.copy=function(){var a=new te;a.Qf=this.Qf;a.L=this.L;a.os=this.os;a.ft=this.ft;a.yt=this.yt;a.pt=this.pt;var b=this.rt;a.rt=b instanceof Object&&b.B!==f?b.B():b;b=this.qt;a.qt=b instanceof Object&&b.B!==f?b.B():b;b=this.kt;a.kt=b instanceof Object&&b.B!==f?b.B():b;b=this.jt;a.jt=b instanceof Object&&b.B!==f?b.B():b;return a};
te.prototype.toString=function(){var a="",a=this.Mc===ue?a+"* ":this.Mc===ve?a+(this.I!==m?"!m":"!d"):a+((this.I!==m?"!m":"!d")+this.Mc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.he&&this.he!==this.propertyName&&(a+=" "+this.he);a+=": ";this.Mc===ue?this.oldValue!==m&&(a+=" "+this.oldValue):(this.object!==m&&(a+=ye(this.object)),this.oldValue!==m&&(a+="  old: "+ye(this.oldValue)),this.Pe!==m&&(a+=" "+this.Pe),this.newValue!==m&&(a+="  new: "+ye(this.newValue)),
this.Oe!==m&&(a+=" "+this.Oe));return a};te.prototype.getValue=te.prototype.$=function(a){return a?this.oldValue:this.newValue};te.prototype.getParam=te.prototype.RI=function(a){return a?this.Pe:this.Oe};te.prototype.canUndo=te.prototype.Xj=function(){return this.I!==m||this.b!==m?h:p};te.prototype.undo=te.prototype.nk=function(){this.Xj()&&(this.I!==m?this.I.ar(this,h):this.b!==m&&this.b.ar(this,h))};te.prototype.canRedo=te.prototype.Wj=function(){return this.I!==m||this.b!==m?h:p};
te.prototype.redo=te.prototype.On=function(){this.Wj()&&(this.I!==m?this.I.ar(this,p):this.b!==m&&this.b.ar(this,p))};v.a(te,"model",te.prototype.I);v.defineProperty(te,{I:"model"},s("Qf"),ba("Qf"));v.a(te,"diagram",te.prototype.b);v.defineProperty(te,{b:"diagram"},s("L"),ba("L"));v.a(te,"change",te.prototype.Mc);v.defineProperty(te,{Mc:"change"},s("os"),function(a){t&&v.Sa(a,te,te,"change");this.os=a});v.a(te,"modelChange",te.prototype.he);
v.defineProperty(te,{he:"modelChange"},s("ft"),function(a){t&&v.e(a,"string",te,"modelChange");this.ft=a});v.a(te,"propertyName",te.prototype.propertyName);v.defineProperty(te,{propertyName:"propertyName"},s("yt"),function(a){t&&"string"!==typeof a&&v.c(a,Function,te,"propertyName");this.yt=a});v.a(te,"object",te.prototype.object);v.defineProperty(te,{object:"object"},s("pt"),ba("pt"));v.a(te,"oldValue",te.prototype.oldValue);v.defineProperty(te,{oldValue:"oldValue"},s("rt"),ba("rt"));
v.a(te,"oldParam",te.prototype.Pe);v.defineProperty(te,{Pe:"oldParam"},s("qt"),ba("qt"));v.a(te,"newValue",te.prototype.newValue);v.defineProperty(te,{newValue:"newValue"},s("kt"),ba("kt"));v.a(te,"newParam",te.prototype.Oe);v.defineProperty(te,{Oe:"newParam"},s("jt"),ba("jt"));
function D(a){v.Hb(this);this.Wv=this.qb="";this.zj=p;this.Tf=[];this.yc=new ja(m,Object);this.Tp="key";this.ws=this.Ws=m;this.Rp="category";this.mg=new ja(m,ka);this.ki=m;this.Gk=this.ui=p;this.hx=m;this.ca=new ze;a!==f&&(this.Zg=a)}v.H("Model",D);D.prototype.clear=D.prototype.clear=function(){this.Tf=[];this.yc.clear();this.mg.clear();this.ca.clear()};
D.prototype.writeJsonProtected=D.prototype.ID=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.jl&&(a+=',\n  "dataFormat": '+this.quote(this.jl));this.Ja&&(a+=',\n  "isReadOnly": '+this.Ja);"key"!==this.yl&&"string"===typeof this.yl&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.yl));"category"!==this.xl&&"string"===typeof this.xl&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.xl));return a};
D.prototype.ez=function(){return',\n  "nodeDataArray": '+Ae(this,this.Zg,h)};D.prototype.readJsonProtected=D.prototype.JC=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.jl=a.dataFormat);a.isReadOnly&&(this.Ja=a.isReadOnly);a.nodeKeyProperty&&(this.yl=a.nodeKeyProperty);a.nodeCategoryProperty&&(this.xl=a.nodeCategoryProperty)};D.prototype.Gy=function(a){a.nodeDataArray&&(a=a.nodeDataArray,Be(this,a),this.Zg=a)};
D.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.pD();var b=(""!==this.name?this.name:"")+" Model";if(0<a){var b=b+"\n node data:",a=this.Zg,c=v.xb(a),d;for(d=0;d<c;d++)var e=v.mb(a,d),b=b+(" "+this.Xb(e)+":"+ye(e))}return b};D.prototype.toJson=D.prototype.pD=function(a){a===f&&(a=this.constructor===D?"go.Model":this.constructor===P?"go.GraphLinksModel":v.Ki(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.ez()+"}"};
D.fromJson=function(a,b){b===f&&(b=m);v.e(a,"string",D,"fromJson:s");b&&v.c(b,D,D,"fromJson:model");var c=m;if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){t&&v.trace("JSON.parse error: "+d.toString())}else v.trace("WARNING: no JSON.parse available");if(c===m)return m;if(b===m){var e;e=m;var g=c["class"];if("string"===typeof g)try{var i=m;0===g.indexOf("go.")?(g=g.substr(3),i=ea[g]):(i=ea[g])||(i=window[g]);"function"===typeof i&&(e=new i)}catch(j){}e===m||e instanceof
D?b=e:v.g("Unable to construct a Model of declared class: "+c["class"])}b===m&&(b=new P);b.readJsonProtected(c);b.Gy(c);return b};
function Be(a,b){if(v.isArray(b))for(var c=v.xb(b),d=0;d<c;d++){var e=v.mb(b,d);e instanceof Object&&v.RE(b,d,Be(a,e))}else if(b instanceof Object){for(d in b)e=b[d],e instanceof Object&&(b[d]=Be(a,e));if("object"!==typeof b)c=b;else{e=b;d=b["class"];if("NaN"===d)e=NaN;else if("go.Point"===d)e=new E(b.x,b.y);else if("go.Size"===d)e=new hb(b.width,b.height);else if("go.Rect"===d)e=new F(b.x,b.y,b.width,b.height);else if("go.Margin"===d)e=new rb(b.top,b.right,b.bottom,b.left);else if("go.Spot"===d)e=
"string"===typeof b["enum"]?Mb(b["enum"]):new K(b.x,b.y,b.offsetX,b.offsetY);else if("go.Brush"===d){if(e=new Ce,e.type=v.nl(Ce,b.type),b.start instanceof K&&(e.start=b.start),b.end instanceof K&&(e.end=b.end),"number"===typeof b.startRadius&&(e.Vn=b.startRadius),"number"===typeof b.endRadius&&(e.gn=b.endRadius),d=b.colorStops)for(c in d)e.addColorStop(parseFloat(c),d[c])}else"go.Geometry"===d&&(e="string"===typeof b.path?Pd(b.path):new zd,e.type=v.nl(zd,b.type),"number"===typeof b.startX&&(e.Ma=
b.startX),"number"===typeof b.startY&&(e.Na=b.startY),"number"===typeof b.endX&&(e.aa=b.endX),"number"===typeof b.endY&&(e.ba=b.endY),b.spot1 instanceof K&&(e.n=b.spot1),b.spot2 instanceof K&&(e.o=b.spot2));c=e}return c}return b}D.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
D.prototype.writeJsonValue=D.prototype.JD=function(a){var b;if(a===f)b="undefined";else if(a===m)b="null";else if(a===h)b="true";else if(a===p)b="false";else if("string"===typeof a)b=this.quote(a);else if("number"===typeof a)b=Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(v.isArray(a))b=Ae(this,a);else if(a instanceof Object){var c=a;if(c instanceof E)a={"class":"go.Point",x:c.x,y:c.y};else if(c instanceof hb)a={"class":"go.Size",width:c.width,height:c.height};
else if(c instanceof F)a={"class":"go.Rect",x:c.x,y:c.y,width:c.width,height:c.height};else if(c instanceof rb)a={"class":"go.Margin",top:c.top,right:c.right,bottom:c.bottom,left:c.left};else if(c instanceof K)a=Ob(c)?{"class":"go.Spot",x:c.x,y:c.y,offsetX:c.offsetX,offsetY:c.offsetY}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Ce){a={"class":"go.Brush",type:c.type.name};if(c.type===Me)a.color=c.color;else if(c.type===Ne||c.type===Oe)a.start=c.start,a.end=c.end,c.type===Oe&&(0!==
c.Vn&&(a.startRadius=c.Vn),isNaN(c.gn)||(a.endRadius=c.gn));if(c.cn!==m){for(var d={},c=c.cn.f;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof zd&&(a={"class":"go.Geometry",type:c.type.name},0!==c.Ma&&(a.startX=c.Ma),0!==c.Na&&(a.startY=c.Na),0!==c.aa&&(a.endX=c.aa),0!==c.ba&&(a.endY=c.ba),c.n.u(Xb)||(a.spot1=c.n),c.o.u(nc)||(a.spot2=c.o),0<c.tc.count&&(a.path=a.toString()));d="{";c=h;for(b in a){var e=v.Wa(a,b);e===f||"__gohashid"===b||"_"===b[0]||"function"===typeof e||(c?
c=p:d+=", ",d+='"'+b+'":'+this.JD(e))}b=d+"}"}else b="function"===typeof a?"null":a.toString();return b};function Ae(a,b,c){var d=v.xb(b),e="[ ";c&&1<d&&(e+="\n");for(var g=0;g<d;g++){var i=v.mb(b,g);i!==f&&(0<g&&(e+=",",c&&(e+="\n")),e+=a.JD(i))}c&&1<d&&(e+="\n");return e+" ]"}v.a(D,"name",D.prototype.name);v.defineProperty(D,{name:"name"},s("qb"),function(a){var b=this.qb;b!==a&&(v.e(a,"string",D,"name"),this.qb=a,this.d("name",b,a))});v.a(D,"dataFormat",D.prototype.jl);
v.defineProperty(D,{jl:"dataFormat"},s("Wv"),function(a){var b=this.Wv;b!==a&&(v.e(a,"string",D,"dataFormat"),this.Wv=a,this.d("dataFormat",b,a))});v.a(D,"isReadOnly",D.prototype.Ja);v.defineProperty(D,{Ja:"isReadOnly"},s("zj"),function(a){var b=this.zj;b!==a&&(v.e(a,"boolean",D,"isReadOnly"),this.zj=a,this.d("isReadOnly",b,a))});D.prototype.addChangedListener=D.prototype.rx=function(a){v.e(a,"function",D,"addChangedListener:listener");this.ki===m&&(this.ki=new A("function"));this.ki.add(a)};
D.prototype.removeChangedListener=D.prototype.Iy=function(a){v.e(a,"function",D,"removeChangedListener:listener");this.ki!==m&&(this.ki.remove(a),0===this.ki.count&&(this.ki=m))};D.prototype.eu=function(a){this.La||this.ca.SB(a);if(this.ki!==m)for(var b=this.ki.f;b.next();){var c=b.value;c(a)}};D.prototype.raiseChangedEvent=D.prototype.ke=function(a,b,c,d,e,g,i){Pe(this,"",a,b,c,d,e,g,i)};D.prototype.raiseChanged=D.prototype.d=function(a,b,c,d,e){Pe(this,"",ve,a,this,b,c,d,e)};
D.prototype.raiseDataChanged=D.prototype.TJ=function(a,b,c,d,e,g){Pe(this,"",ve,b,a,c,d,e,g)};function Pe(a,b,c,d,e,g,i,j,k){j===f&&(j=m);k===f&&(k=m);var l=new te;l.I=a;l.Mc=c;l.he=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Pe=j;l.newValue=i;l.Oe=k;a.eu(l)}v.a(D,"undoManager",D.prototype.ca);v.defineProperty(D,{ca:"undoManager"},s("hx"),function(a){var b=this.hx;b!==a&&(v.c(a,ze,D,"undoManager"),b!==m&&b.sG(this),this.hx=a,a!==m&&a.tE(this))});v.a(D,"skipsUndoManager",D.prototype.La);
v.defineProperty(D,{La:"skipsUndoManager"},s("ui"),function(a){v.e(a,"boolean",D,"skipsUndoManager");this.ui=a});D.prototype.ar=function(a,b){if(a!==m&&a.I===this){var c=this.Gk;try{this.Gk=h,this.Bx(a,b)}finally{this.Gk=c}}};
D.prototype.Bx=function(a,b){if(a.Mc===ve){var c=a.object,d=a.propertyName,e=a.$(b);v.bb(c,d,e)}else a.Mc===we?"nodeDataArray"===a.he?(c=a.newValue,c instanceof Object&&(d=this.Xb(c),b?(v.Lh(this.Tf,a.Oe),this.yc.remove(d)):(v.Kh(this.Tf,a.Oe,c),this.yc.add(d,c)))):""===a.he?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.Wa(a.object,a.propertyName)),v.isArray(c)&&(d=a.newValue,e=a.Oe,b?v.Lh(c,e):v.Kh(c,e,d))):v.g("unknown ChangedEvent.Insert object: "+a.toString()):a.Mc===xe?"nodeDataArray"===a.he?
(c=a.oldValue,c instanceof Object&&(d=this.Xb(c),b?(v.Kh(this.Tf,a.Pe,c),this.yc.add(d,c)):(v.Lh(this.Tf,a.Pe),this.yc.remove(d)))):""===a.he?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.Wa(a.object,a.propertyName)),v.isArray(c)&&(d=a.oldValue,e=a.Pe,b?v.Kh(c,e,d):v.Lh(c,e))):v.g("unknown ChangedEvent.Remove object: "+a.toString()):a.Mc!==ue&&v.g("unknown ChangedEvent: "+a.toString())};D.prototype.startTransaction=D.prototype.Gb=function(a){return this.ca.Gb(a)};
D.prototype.commitTransaction=D.prototype.Md=function(a){return this.ca.Md(a)};D.prototype.rollbackTransaction=D.prototype.Nr=function(){return this.ca.Nr()};D.prototype.updateTargetBindings=D.prototype.ic=function(a,b){b===f&&(b="");Pe(this,"SourceChanged",ue,b,a,m,m)};v.a(D,"nodeKeyProperty",D.prototype.yl);
v.defineProperty(D,{yl:"nodeKeyProperty"},s("Tp"),function(a){var b=this.Tp;b!==a&&(Qe(a,D,"nodeKeyProperty"),0<this.yc.count&&v.g("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Tp=a,this.d("nodeKeyProperty",b,a))});function Qe(a,b,c){"string"!==typeof a&&"function"!==typeof a&&v.uc(a,"string or function",b,c)}
D.prototype.getKeyForNodeData=D.prototype.Xb=function(a){if(a!==m){var b=this.Tp;if(""!==b&&(b=v.Wa(a,b),b!==f)){if(Re(b))return b;t&&v.trace("Key value for node data "+a+" is not a number or a string: "+b)}}};v.a(D,"makeUniqueKeyFunction",D.prototype.$F);v.defineProperty(D,{$F:"makeUniqueKeyFunction"},s("Ws"),function(a){var b=this.Ws;b!==a&&(a!==m&&v.e(a,"function",D,"makeUniqueKeyFunction"),this.Ws=a,this.d("makeUniqueKeyFunction",b,a))});
function Re(a){return"number"===typeof a||"string"===typeof a}D.prototype.containsNodeData=D.prototype.Bi=function(a){a=this.Xb(a);return a===f?p:this.yc.contains(a)};D.prototype.findNodeDataForKey=D.prototype.Tg=function(a){a===m&&v.g("Model.findNodeDataForKey:key must not be null");return a===f||!Re(a)?m:this.yc.$(a)};v.a(D,"nodeDataArray",D.prototype.Zg);
v.defineProperty(D,{Zg:"nodeDataArray"},s("Tf"),function(a){var b=this.Tf;if(b!==a){v.YA(a,D,"nodeDataArray");this.yc.clear();this.Zy();for(var c=v.xb(a),d=0;d<c;d++){var e=v.mb(a,d);if(!(e instanceof Object)){v.g("Model.nodeDataArray must only contain Objects, not: "+e);return}v.sn(e)}this.Tf=a;for(var g=new A(Object),d=0;d<c;d++){var e=v.mb(a,d),i=this.Xb(e);i===f?g.add(e):this.yc.$(i)!==m?g.add(e):this.yc.add(i,e)}for(d=g.f;d.next();)e=d.value,this.pC(e),g=this.Xb(e),this.yc.add(g,e);Pe(this,"nodeDataArray",
ve,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=v.mb(a,d),this.Ru(e),this.Qu(e);this.$A();a instanceof Array||(this.Ja=h)}});
D.prototype.makeNodeDataKeyUnique=D.prototype.pC=function(a){if(a!==m){var b=this.Tp;if(""!==b){var c=this.Xb(a);if(c===f||this.yc.contains(c)){var d=this.Ws;if(d!==m&&(c=d(this,a),c!==f&&c!==m&&!this.yc.contains(c))){v.bb(a,b,c);return}if("string"===typeof c){for(d=2;this.yc.contains(c+d);)d++;v.bb(a,b,c+d)}else if(c===f||"number"===typeof c){for(d=-this.yc.count-1;this.yc.contains(d);)d--;v.bb(a,b,d)}else v.g("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
D.prototype.addNodeData=D.prototype.$t=function(a){if(a!==m){v.sn(a);var b=this.Xb(a);b!==f&&this.yc.$(b)===a||(this.pC(a),b=this.Xb(a),this.yc.add(b,a),b=v.xb(this.Tf),v.Kh(this.Tf,b,a),Pe(this,"nodeDataArray",we,"nodeDataArray",this,m,a,m,b),this.Ru(a),this.Qu(a))}};D.prototype.removeNodeData=D.prototype.OC=function(a){if(a!==m){var b=this.Xb(a);b!==f&&this.yc.contains(b)&&(this.yc.remove(b),b=v.wx(this.Tf,a),0>b||(v.Lh(this.Tf,b),Pe(this,"nodeDataArray",xe,"nodeDataArray",this,a,m,b,m),this.$y(a)))}};
D.prototype.Zy=aa();D.prototype.Ru=aa();D.prototype.Qu=aa();D.prototype.$y=aa();D.prototype.delayReference=D.prototype.bg=function(a,b){if(a!==f){var c=this.mg.$(a);c===m&&(c=new ka,this.mg.add(a,c));c.add(b)}};D.prototype.forgetDelayedReference=D.prototype.Ug=function(a,b){if(a!==f){var c=this.mg.$(a);c instanceof ka&&(b===f||b===m?this.mg.remove(a):(c.remove(b),0===c.count&&this.mg.remove(a)))}};
D.prototype.dumpDelayedReferences=D.prototype.xI=function(){v.trace("DelayedReferences ("+this.mg.count+")");for(var a=this.mg.f;a.next();){for(var b="",c=a.value.f;c.next();)b+=ye(c.value)+", ";v.trace("  "+a.key+": "+b)}};D.prototype.findDelayedReferences=D.prototype.DB=function(a){if(a===f)return m;a=this.mg.$(a);return a instanceof ka?a:m};D.prototype.clearUnresolvedReferences=D.prototype.$A=function(a){a===f?this.mg.clear():this.mg.remove(a)};v.a(D,"copyNodeDataFunction",D.prototype.cF);
v.defineProperty(D,{cF:"copyNodeDataFunction"},s("ws"),function(a){var b=this.ws;b!==a&&(a!==m&&v.e(a,"function",D,"copyNodeDataFunction"),this.ws=a,this.d("copyNodeDataFunction",b,a))});D.prototype.copyNodeData=D.prototype.dn=function(a){if(a===m)return m;var b=m,b=this.ws;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)v.bb(b,c,v.Wa(a,c))}b&&v.Hb(b);return b};
D.prototype.setDataProperty=D.prototype.DG=function(a,b,c){t&&(v.e(a,"object",D,"setDataProperty:data"),v.e(b,"string",D,"setDataProperty:propname"),""===b&&v.g("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.Bi(a))if(b===this.yl)v.g("Model.setDataProperty: property name must not be the key for the node data: "+b);else if(b===this.xl&&"string"===typeof c){this.fD(a,c);return}var d=v.Wa(a,b);d!==c&&(v.bb(a,b,c),Pe(this,"",ve,b,a,d,c))};
D.prototype.insertArrayItem=D.prototype.dJ=function(a,b,c){t&&(v.isArray(a)||v.g("Model.insertArrayItem:arr must be an Array-like object, not: "+a),v.i(b,D,"insertArrayItem:idx"));0>b&&(b=v.xb(a));v.Kh(a,b,c);Pe(this,"",we,"",a,m,c,m,b)};
D.prototype.removeArrayItem=D.prototype.XJ=function(a,b){b===f&&(b=-1);t&&(v.isArray(a)||v.g("Model.removeArrayItem:arr must be an Array-like object, not: "+a),v.i(b,D,"removeArrayItem:idx"));-1===b&&(b=v.xb(a)-1);var c=v.mb(a,b);v.Lh(a,b);Pe(this,"",xe,"",a,c,m,b,m)};v.a(D,"nodeCategoryProperty",D.prototype.xl);v.defineProperty(D,{xl:"nodeCategoryProperty"},s("Rp"),function(a){var b=this.Rp;b!==a&&(Qe(a,D,"nodeCategoryProperty"),this.Rp=a,this.d("nodeCategoryProperty",b,a))});
D.prototype.getCategoryForNodeData=D.prototype.LB=function(a){if(a===m)return"";var b=this.Rp;if(""===b)return"";b=v.Wa(a,b);if(b===f)return"";if("string"===typeof b)return b;t&&v.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
D.prototype.setCategoryForNodeData=D.prototype.fD=function(a,b){v.e(b,"string",D,"setCategoryForNodeData:val");if(a!==m){var c=this.Rp;if(""!==c)if(this.Bi(a)){var d=v.Wa(a,c);d!==b&&(v.bb(a,c,b),Pe(this,"nodeCategory",ve,c,a,d,b))}else v.bb(a,c,b)}};function P(a,b){D.call(this);this.Bj=[];this.xp=new ka(Object);this.vs=m;this.Cj="from";this.Ej="to";this.Ap=this.zp="";this.vp="category";this.uh=this.mt="";this.lt="isGroup";this.Hj="group";a!==f&&(this.Zg=a);b!==f&&(this.eg=b)}
v.H("GraphLinksModel",P);v.na(P,D);P.prototype.clear=P.prototype.clear=function(){D.prototype.clear.call(this);this.Bj=[];this.xp.clear()};P.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.pD();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){var b=b+"\n node data:",a=this.Zg,c=v.xb(a),d;for(d=0;d<c;d++)var e=v.mb(a,d),b=b+(" "+this.Xb(e)+":"+ye(e));b+="\n link data:";a=this.eg;c=v.xb(a);for(d=0;d<c;d++)e=v.mb(a,d),b+=" "+this.qn(e)+"--\>"+this.rn(e)}return b};
P.prototype.writeJsonProtected=P.prototype.ID=function(){var a=D.prototype.ID.call(this),b="";"category"!==this.xn&&"string"===typeof this.xn&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.xn));"from"!==this.yn&&"string"===typeof this.yn&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.yn));"to"!==this.Cn&&"string"===typeof this.Cn&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.Cn));""!==this.zn&&"string"===typeof this.zn&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.zn));""!==
this.Dn&&"string"===typeof this.Dn&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.Dn));""!==this.Ln&&"string"===typeof this.Ln&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.Ln));""!==this.An&&"string"===typeof this.An&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.An));"isGroup"!==this.Kn&&"string"===typeof this.Kn&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.Kn));"group"!==this.Jn&&"string"===typeof this.Jn&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Jn));return a+
b};P.prototype.ez=function(){var a=D.prototype.ez.call(this),b=',\n  "linkDataArray": '+Ae(this,this.eg,h);return a+b};
P.prototype.readJsonProtected=P.prototype.JC=function(a){D.prototype.JC.call(this,a);a.linkFromKeyProperty&&(this.yn=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.Cn=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.zn=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Dn=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.xn=a.linkCategoryProperty);a.nodeIsLinkLabelProperty&&(this.Ln=a.nodeIsLinkLabelProperty);a.linkLabelKeysProperty&&(this.An=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&
(this.Kn=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.Jn=a.nodeGroupKeyProperty)};P.prototype.Gy=function(a){D.prototype.Gy.call(this,a);a.linkDataArray&&(a=a.linkDataArray,Be(this,a),this.eg=a)};
P.prototype.Bx=function(a,b){if(a.Mc===we){var c=m;"linkDataArray"===a.he?c=this.eg:"linkLabelKeys"===a.he&&(c=this.ql(a.object));if(v.isArray(c)){b?v.Lh(c,a.Oe):v.Kh(c,a.Oe,a.newValue);return}}else if(a.Mc===xe&&(c=m,"linkDataArray"===a.he?c=this.eg:"linkLabelKeys"===a.he&&(c=this.ql(a.object)),v.isArray(c))){b?v.Kh(c,a.Pe,a.oldValue):v.Lh(c,a.Pe);return}D.prototype.Bx.call(this,a,b)};v.a(P,"linkFromKeyProperty",P.prototype.yn);
v.defineProperty(P,{yn:"linkFromKeyProperty"},s("Cj"),function(a){var b=this.Cj;b!==a&&(Qe(a,P,"linkFromKeyProperty"),this.Cj=a,this.d("linkFromKeyProperty",b,a))});P.prototype.getFromKeyForLinkData=P.prototype.qn=function(a){if(a!==m){var b=this.Cj;if(""!==b&&(b=v.Wa(a,b),b!==f)){if(Re(b))return b;t&&v.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
P.prototype.setFromKeyForLinkData=P.prototype.Xu=function(a,b){b===m&&(b=f);b!==f&&!Re(b)&&v.uc(b,"number or string",P,"setFromKeyForLinkData:key");if(a!==m){var c=this.Cj;if(""!==c)if(this.Oh(a)){var d=v.Wa(a,c);d!==b&&(this.Ug(d,a),v.bb(a,c,b),this.Tg(b)===m&&this.bg(b,a),Pe(this,"linkFromKey",ve,c,a,d,b),"string"===typeof c&&this.ic(a,c))}else v.bb(a,c,b)}};v.a(P,"linkToKeyProperty",P.prototype.Cn);
v.defineProperty(P,{Cn:"linkToKeyProperty"},s("Ej"),function(a){var b=this.Ej;b!==a&&(Qe(a,P,"linkToKeyProperty"),this.Ej=a,this.d("linkToKeyProperty",b,a))});P.prototype.getToKeyForLinkData=P.prototype.rn=function(a){if(a!==m){var b=this.Ej;if(""!==b&&(b=v.Wa(a,b),b!==f)){if(Re(b))return b;t&&v.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
P.prototype.setToKeyForLinkData=P.prototype.Yu=function(a,b){b===m&&(b=f);b!==f&&!Re(b)&&v.uc(b,"number or string",P,"setToKeyForLinkData:key");if(a!==m){var c=this.Ej;if(""!==c)if(this.Oh(a)){var d=v.Wa(a,c);d!==b&&(this.Ug(d,a),v.bb(a,c,b),this.Tg(b)===m&&this.bg(b,a),Pe(this,"linkToKey",ve,c,a,d,b),"string"===typeof c&&this.ic(a,c))}else v.bb(a,c,b)}};v.a(P,"linkFromPortIdProperty",P.prototype.zn);
v.defineProperty(P,{zn:"linkFromPortIdProperty"},s("zp"),function(a){var b=this.zp;b!==a&&(Qe(a,P,"linkFromPortIdProperty"),this.zp=a,this.d("linkFromPortIdProperty",b,a))});P.prototype.getFromPortIdForLinkData=P.prototype.yF=function(a){if(a===m)return"";var b=this.zp;if(""===b)return"";a=v.Wa(a,b);return a===f?"":a};
P.prototype.setFromPortIdForLinkData=P.prototype.Sr=function(a,b){v.e(b,"string",P,"setFromPortIdForLinkData:portname");if(a!==m){var c=this.zp;if(""!==c)if(this.Oh(a)){var d=v.Wa(a,c);d!==b&&(v.bb(a,c,b),Pe(this,"linkFromPortId",ve,c,a,d,b),"string"===typeof c&&this.ic(a,c))}else v.bb(a,c,b)}};v.a(P,"linkToPortIdProperty",P.prototype.Dn);
v.defineProperty(P,{Dn:"linkToPortIdProperty"},s("Ap"),function(a){var b=this.Ap;b!==a&&(Qe(a,P,"linkToPortIdProperty"),this.Ap=a,this.d("linkToPortIdProperty",b,a))});P.prototype.getToPortIdForLinkData=P.prototype.AF=function(a){if(a===m)return"";var b=this.Ap;if(""===b)return"";a=v.Wa(a,b);return a===f?"":a};
P.prototype.setToPortIdForLinkData=P.prototype.Ur=function(a,b){v.e(b,"string",P,"setToPortIdForLinkData:portname");if(a!==m){var c=this.Ap;if(""!==c)if(this.Oh(a)){var d=v.Wa(a,c);d!==b&&(v.bb(a,c,b),Pe(this,"linkToPortId",ve,c,a,d,b),"string"===typeof c&&this.ic(a,c))}else v.bb(a,c,b)}};v.a(P,"nodeIsLinkLabelProperty",P.prototype.Ln);
v.defineProperty(P,{Ln:"nodeIsLinkLabelProperty"},s("mt"),function(a){var b=this.mt;b!==a&&(Qe(a,P,"nodeIsLinkLabelProperty"),this.mt=a,this.d("nodeIsLinkLabelProperty",b,a))});P.prototype.isLinkLabelForNodeData=P.prototype.my=function(a){if(a===m)return p;var b=this.mt;return""===b?p:v.Wa(a,b)?h:p};v.a(P,"linkLabelKeysProperty",P.prototype.An);
v.defineProperty(P,{An:"linkLabelKeysProperty"},s("uh"),function(a){var b=this.uh;b!==a&&(Qe(a,P,"linkLabelKeysProperty"),this.uh=a,this.d("linkLabelKeysProperty",b,a))});P.prototype.getLabelKeysForLinkData=P.prototype.ql=function(a){if(a===m)return[];var b=this.uh;if(""===b)return[];a=v.Wa(a,b);return a===f?[]:a};
P.prototype.setLabelKeysForLinkData=P.prototype.gD=function(a,b){v.c(b,Array,P,"setLabelKeysForLinkData:arr");if(a!==m){var c=this.uh;if(""!==c)if(this.Oh(a)){var d=v.Wa(a,c);if(d!==b){for(var e=v.xb(d),g=0;g<e;g++){var i=v.mb(d,g);this.Ug(i,a)}v.bb(a,c,b);e=v.xb(b);for(g=0;g<e;g++)i=v.mb(b,g),this.Tg(i)===m&&this.bg(i,a);Pe(this,"linkLabelKeys",ve,c,a,d,b);"string"===typeof c&&this.ic(a,c)}}else v.bb(a,c,b)}};
P.prototype.addLabelKeyForLinkData=P.prototype.MA=function(a,b){if(!(b===m||b===f))if(Re(b)||v.uc(b,"number or string",P,"addLabelKeyForLinkData:key"),a!==m){var c=this.uh;if(""!==c){var d=v.Wa(a,c);d===f?this.gD(a,[b]):v.isArray(d)?0<=v.wx(d,b)||(v.Kh(d,Infinity,b),this.Oh(a)&&(this.Tg(b)===m&&this.bg(b,a),Pe(this,"linkLabelKeys",we,c,a,m,b))):v.g(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
P.prototype.removeLabelKeyForLinkData=P.prototype.qG=function(a,b){if(!(b===m||b===f))if(Re(b)||v.uc(b,"number or string",P,"removeLabelKeyForLinkData:key"),a!==m){var c=this.uh;if(""!==c){var d=v.Wa(a,c);if(v.isArray(d)){var e=v.wx(d,b);0>e||(v.Lh(d,e),this.Oh(a)&&(this.Ug(b,a),Pe(this,"linkLabelKeys",xe,c,a,b,m)))}else d!==f&&v.g(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};v.a(P,"linkDataArray",P.prototype.eg);
v.defineProperty(P,{eg:"linkDataArray"},s("Bj"),function(a){var b=this.Bj;if(b!==a){v.YA(a,P,"linkDataArray");for(var c=v.xb(a),d=0;d<c;d++){var e=v.mb(a,d);if(!(e instanceof Object)){v.g("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}v.sn(e)}this.Bj=a;for(var g=new ka(Object),d=0;d<c;d++)e=v.mb(a,d),g.add(e);this.xp=g;Pe(this,"linkDataArray",ve,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=v.mb(a,d),Se(this,e)}});
P.prototype.containsLinkData=P.prototype.Oh=function(a){return a===m?p:this.xp.contains(a)};P.prototype.addLinkData=P.prototype.NA=function(a){if(a!==m){if(v.fc(a)===f)v.Hb(a);else if(this.Oh(a))return;this.xp.add(a);var b=v.xb(this.Bj);v.Kh(this.Bj,b,a);Pe(this,"linkDataArray",we,"linkDataArray",this,m,a,m,b);Se(this,a)}};
P.prototype.removeLinkData=P.prototype.rG=function(a){if(a!==m){this.xp.remove(a);var b=this.Bj.indexOf(a);if(!(0>b)){v.Lh(this.Bj,b);Pe(this,"linkDataArray",xe,"linkDataArray",this,a,m,b,m);b=this.qn(a);this.Ug(b,a);b=this.rn(a);this.Ug(b,a);for(var c=this.ql(a),d=v.xb(c),e=0;e<d;e++)b=v.mb(c,e),this.Ug(b,a)}}};function Se(a,b){var c=a.qn(b);a.Tg(c)===m&&a.bg(c,b);c=a.rn(b);a.Tg(c)===m&&a.bg(c,b);for(var d=a.ql(b),e=v.xb(d),g=0;g<e;g++)c=v.mb(d,g),a.Tg(c)===m&&a.bg(c,b)}
v.a(P,"copyLinkDataFunction",P.prototype.bF);v.defineProperty(P,{bF:"copyLinkDataFunction"},s("vs"),function(a){var b=this.vs;b!==a&&(a!==m&&v.e(a,"function",P,"copyLinkDataFunction"),this.vs=a,this.d("copyLinkDataFunction",b,a))});
P.prototype.copyLinkData=P.prototype.iB=function(a){if(a===m)return m;var b=m,b=this.vs;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)v.bb(b,c,v.Wa(a,c))}b&&(v.Hb(b),""!==this.Cj&&v.bb(b,this.Cj,f),""!==this.Ej&&v.bb(b,this.Ej,f),""!==this.uh&&v.bb(b,this.uh,[]));return b};v.a(P,"nodeIsGroupProperty",P.prototype.Kn);v.defineProperty(P,{Kn:"nodeIsGroupProperty"},s("lt"),function(a){var b=this.lt;b!==a&&(Qe(a,P,"nodeIsGroupProperty"),this.lt=a,this.d("nodeIsGroupProperty",b,a))});
P.prototype.isGroupForNodeData=P.prototype.hy=function(a){if(a===m)return p;var b=this.lt;return""===b?p:v.Wa(a,b)?h:p};v.a(P,"nodeGroupKeyProperty",P.prototype.Jn);v.defineProperty(P,{Jn:"nodeGroupKeyProperty"},s("Hj"),function(a){var b=this.Hj;b!==a&&(Qe(a,P,"nodeGroupKeyProperty"),this.Hj=a,this.d("nodeGroupKeyProperty",b,a))});
P.prototype.getGroupKeyForNodeData=P.prototype.qr=function(a){if(a!==m){var b=this.Hj;if(""!==b&&(b=v.Wa(a,b),b!==f)){if(Re(b))return b;t&&v.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
P.prototype.setGroupKeyForNodeData=P.prototype.Oy=function(a,b){b===m&&(b=f);b!==f&&!Re(b)&&v.uc(b,"number or string",P,"setGroupKeyForNodeData:key");if(a!==m){var c=this.Hj;if(""!==c)if(this.Bi(a)){var d=v.Wa(a,c);d!==b&&(this.Ug(d,a),v.bb(a,c,b),this.Tg(b)===m&&this.bg(b,a),Pe(this,"nodeGroupKey",ve,c,a,d,b),"string"===typeof c&&this.ic(a,c))}else v.bb(a,c,b)}};P.prototype.copyNodeData=P.prototype.dn=function(a){if(a===m)return m;a=D.prototype.dn.call(this,a);""!==this.Hj&&v.bb(a,this.Hj,f);return a};
P.prototype.setDataProperty=P.prototype.DG=function(a,b,c){t&&(v.e(a,"object",P,"setDataProperty:data"),v.e(b,"string",P,"setDataProperty:propname"),""===b&&v.g("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.Bi(a))if(b===this.yl)v.g("GraphLinksModel.setDataProperty: property name must not be the key for the node data: "+b);else{if(b===this.xl&&"string"===typeof c){this.fD(a,c);return}if(b===this.Jn&&("string"===typeof c||"number"===
typeof c)){this.Oy(a,c);return}b===this.Kn?v.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.Ln&&v.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.Oh(a)){if(b===this.yn&&("string"===typeof c||"number"===typeof c)){this.Xu(a,c);return}if(b===this.Cn&&("string"===typeof c||"number"===typeof c)){this.Yu(a,c);return}if(b===this.zn&&"string"===typeof c){this.Sr(a,c);return}if(b===this.Dn&&
"string"===typeof c){this.Ur(a,c);return}if(b===this.xn&&"string"===typeof c){this.CG(a,c);return}if(b===this.An&&c instanceof Array){this.gD(a,c);return}}var d=v.Wa(a,b);d!==c&&(v.bb(a,b,c),Pe(this,"",ve,b,a,d,c))};P.prototype.Zy=function(){D.prototype.Zy.call(this);for(var a=this.eg,b=v.xb(a),c=0;c<b;c++)Se(this,v.mb(a,c))};
P.prototype.Ru=function(a){D.prototype.Ru.call(this,a);var a=this.Xb(a),b=this.DB(a);if(b!==m){for(var c=new A(Object),b=b.f;b.next();){var d=b.value;if(this.Bi(d)){if(this.qr(d)===a){var e=this.Hj;Pe(this,"nodeGroupKey",ve,e,d,a,a);"string"===typeof e&&this.ic(d,e);c.add(d)}}else{this.qn(d)===a&&(e=this.Cj,Pe(this,"linkFromKey",ve,e,d,a,a),"string"===typeof e&&this.ic(d,e),c.add(d));this.rn(d)===a&&(e=this.Ej,Pe(this,"linkToKey",ve,e,d,a,a),"string"===typeof e&&this.ic(d,e),c.add(d));for(var g=this.ql(d),
i=v.xb(g),e=this.uh,j=0;j<i;j++)v.mb(g,j)===a&&(Pe(this,"linkLabelKeys",we,e,d,a,a),c.add(d))}}for(c=c.f;c.next();)this.Ug(a,c.value)}};P.prototype.Qu=function(a){D.prototype.Qu.call(this,a);var b=this.qr(a);this.Tg(b)===m&&this.bg(b,a)};P.prototype.$y=function(a){D.prototype.$y.call(this,a);var b=this.qr(a);this.Ug(b,a)};v.a(P,"linkCategoryProperty",P.prototype.xn);
v.defineProperty(P,{xn:"linkCategoryProperty"},s("vp"),function(a){var b=this.vp;b!==a&&(Qe(a,P,"linkCategoryProperty"),this.vp=a,this.d("linkCategoryProperty",b,a))});P.prototype.getCategoryForLinkData=P.prototype.KB=function(a){if(a===m)return"";var b=this.vp;if(""===b)return"";b=v.Wa(a,b);if(b===f)return"";if("string"===typeof b)return b;t&&v.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
P.prototype.setCategoryForLinkData=P.prototype.CG=function(a,b){v.e(b,"string",P,"setCategoryForLinkData:val");if(a!==m){var c=this.vp;if(""===c)return"";if(this.Oh(a)){var d=v.Wa(a,c);d!==b&&(v.bb(a,c,b),Pe(this,"linkCategory",ve,c,a,d,b),"string"===typeof c&&this.ic(a,c))}else v.bb(a,c,b)}};
function Te(a,b,c){v.Hb(this);a===f?a="":v.e(a,"string",Te,"constructor:targetprop");b===f?b=a:v.e(b,"string",Te,"constructor:sourceprop");c===f?c=m:c!==m&&v.e(c,"function",Te,"constructor:conv");this.BA="";this.df=m;this.Rt=a;this.Pt=this.$w=0;this.tA=m;this.Kt=b;this.Tv=c;this.Aw=Ue;this.Nv=m}v.H("Binding",Te);var Ue;Te.OneWay=Ue=v.l(Te,"OneWay",1);var Ve;Te.TwoWay=Ve=v.l(Te,"TwoWay",2);
Te.parseEnum=function(a,b){v.e(a,"function",Te,"parseEnum:ctor");v.Sa(b,a,Te,"parseEnum:defval");return function(c){return v.nl(a,c)||b}};var ye;Te.toString=ye=function(a){var b=a;a instanceof Object&&(a.text?b=a.text:a.name?b=a.name:a.key!==f?b=a.key:a.id!==f&&(b=a.id));return b===f?"undefined":b===m?"null":b.toString()};Te.prototype.toString=function(){return"Binding("+this.Gl+" "+this.Vy+":"+this.Qy+")"};Te.prototype.freeze=function(){this.Ha=h;return this};
Te.prototype.ta=function(){this.Ha=p;return this};v.a(Te,"targetId",Te.prototype.Gl);v.defineProperty(Te,{Gl:"targetId"},s("BA"),function(a){v.v(this);v.e(a,"string",Te,"targetId");this.BA=a});v.a(Te,"targetProperty",Te.prototype.Vy);v.defineProperty(Te,{Vy:"targetProperty"},s("Rt"),function(a){v.v(this);v.e(a,"string",Te,"targetProperty");this.Rt=a});v.a(Te,"sourceName",Te.prototype.Un);v.defineProperty(Te,{Un:"sourceName"},s("tA"),function(a){v.v(this);v.e(a,"string",Te,"sourceName");this.tA=a});
v.a(Te,"sourceProperty",Te.prototype.Qy);v.defineProperty(Te,{Qy:"sourceProperty"},s("Kt"),function(a){v.v(this);v.e(a,"string",Te,"sourceProperty");this.Kt=a});v.a(Te,"converter",Te.prototype.fB);v.defineProperty(Te,{fB:"converter"},s("Tv"),function(a){v.v(this);a!==m&&v.e(a,"function",Te,"converter");this.Tv=a});v.a(Te,"backConverter",Te.prototype.XA);v.defineProperty(Te,{XA:"backConverter"},s("Nv"),function(a){v.v(this);a!==m&&v.e(a,"function",Te,"backConverter");this.Nv=a});v.a(Te,"mode",Te.prototype.mode);
v.defineProperty(Te,{mode:"mode"},s("Aw"),function(a){v.v(this);v.Sa(a,Te,Te,"mode");this.Aw=a});Te.prototype.makeTwoWay=Te.prototype.wJ=function(a){a===f&&(a=m);this.mode=Ve;this.XA=a;return this};Te.prototype.ofObject=Te.prototype.Ey=function(a){a===f&&(a="");t&&v.e(a,"string",Te,"ofObject:srcname");this.Un=a;return this};
Te.prototype.updateTarget=Te.prototype.ED=function(a,b,c){var d=this.Kt;if(!(c&&d!==c)){var c=this.Rt,e=this.Tv;if(!(e===m&&""===c)){t&&("string"===typeof c&&"function"!==typeof a.setAttribute&&!v.ey(a,c))&&v.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;""!==d&&(g=v.Wa(b,d));if(g!==f)if(e===m)""!==c&&v.bb(a,c,g);else try{if(""!==c){var i=e(g,a);v.bb(a,c,i)}else e(g,a)}catch(j){t&&v.trace("Binding error: "+j.toString())}}}};
Te.prototype.updateSource=Te.prototype.DD=function(a,b,c){if(this.Aw===Ve){var d=this.Rt;if(!(c&&d!==c)){var c=this.Kt,e=this.Nv;if(!(e===m&&""===c)){var g=a;""!==d&&(g=v.Wa(a,d));if(g!==f)if(e===m)v.bb(b,c,g);else try{if(""!==c){var i=e(g,b);v.bb(b,c,i)}else e(g,b)}catch(j){t&&v.trace("Binding error: "+j.toString())}}}}};function We(){this.QD=(new A(te)).freeze();this.qb="";this.Pz=p}v.H("Transaction",We);
We.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.Og.count.toString()+(this.un?"":", incomplete");if(a!==f&&0<a)for(var c=this.Og.count,d=0;d<c;d++){var e=this.Og.Z(d);e!==m&&(b+="\n  "+e.toString(a-1))}return b};We.prototype.clear=We.prototype.clear=function(){var a=this.Og;a.ta();for(var b=a.count-1;0<=b;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();a.freeze()};We.prototype.canUndo=We.prototype.Xj=s("un");
We.prototype.undo=We.prototype.nk=function(){if(this.Xj())for(var a=this.Og.count-1;0<=a;a--){var b=this.Og.Z(a);b!==m&&b.nk()}};We.prototype.canRedo=We.prototype.Wj=s("un");We.prototype.redo=We.prototype.On=function(){if(this.Wj())for(var a=this.Og.count,b=0;b<a;b++){var c=this.Og.Z(b);c!==m&&c.On()}};v.m(We,{Og:"changes"},s("QD"));v.a(We,"name",We.prototype.name);v.defineProperty(We,{name:"name"},s("qb"),ba("qb"));v.a(We,"isComplete",We.prototype.un);
v.defineProperty(We,{un:"isComplete"},s("Pz"),ba("Pz"));function ze(){this.Bw=new ka(D);this.qh=p;this.XD=(new A(We)).freeze();this.tj=-1;this.Vz=999;this.rh=p;this.As=m;this.Sj=0;this.Qv=p;t&&(this.Qv=h);this.Sf=(new A("string")).freeze();this.wm=new A("number");this.hw=h}v.H("UndoManager",ze);
ze.prototype.toString=function(a){for(var b="UndoManager "+this.Li+"<"+this.history.count+"<="+this.uy,b=b+"[",c=this.AC.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.AC.Z(d);b+="]";if(a!==f&&0<a){c=this.history.count;for(d=0;d<c;d++)b+="\n "+this.history.Z(d).toString(a-1)}return b};
ze.prototype.clear=ze.prototype.clear=function(){var a=this.history;a.ta();for(var b=a.count-1;0<=b;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();this.tj=-1;a.freeze();this.rh=p;this.As=m;this.Sj=0;this.Sf.ta();this.Sf.clear();this.Sf.freeze();this.wm.clear()};ze.prototype.addModel=ze.prototype.tE=function(a){this.Bw.add(a)};ze.prototype.removeModel=ze.prototype.sG=function(a){this.Bw.remove(a)};
ze.prototype.startTransaction=ze.prototype.Gb=function(a){a===m&&(a="");if(this.ab)return p;this.hw===h&&(this.hw=p,this.Sj++,this.rd("StartingFirstTransaction",a,this.il),0<this.Sj&&this.Sj--);this.isEnabled&&(this.Sf.ta(),this.Sf.add(a),this.Sf.freeze(),this.il===m?this.wm.add(0):this.wm.add(this.il.Og.count));this.Sj++;var b=1===this.mk;b&&this.rd("StartedTransaction",a);return b};ze.prototype.commitTransaction=ze.prototype.Md=function(a){return Xe(this,h,a)};
ze.prototype.rollbackTransaction=ze.prototype.Nr=function(){return Xe(this,p,"")};
function Xe(a,b,c){if(a.ab)return p;a.Cx&&1>a.mk&&v.trace("Ending transaction without having started a transaction: "+c);var d=1===a.mk;d&&(b&&a.isEnabled)&&a.rd("CommittingTransaction",c,a.il);var e=0;if(0<a.mk&&(a.Sj--,a.isEnabled)){var g=a.Sf.count;0<g&&(""===c&&(c=a.Sf.Z(0)),a.Sf.ta(),a.Sf.Se(g-1),a.Sf.freeze());g=a.wm.count;0<g&&(e=a.wm.Z(g-1),a.wm.Se(g-1))}g=a.il;if(d){if(b){if(a.isEnabled&&g!==m){b=g;b.un=h;b.name=c;d=a.history;d.ta();for(e=d.count-1;e>a.Li;e--)g=d.Z(e),g!==m&&g.clear(),d.Se(e);
e=a.uy;0===e&&(e=1);0<e&&d.count>=e&&(g=d.Z(0),g!==m&&g.clear(),d.Se(0),a.tj--);d.add(b);a.tj++;d.freeze();g=b}a.rd("CommittedTransaction",c,g)}else{a.rh=h;try{a.isEnabled&&g!==m&&(g.un=h,g.nk())}finally{a.rd("RolledBackTransaction",c,g),a.rh=p}g!==m&&g.clear()}a.As=m;return h}if(a.isEnabled&&!b&&g!==m){a=e;c=g.Og;c.ta();for(b=c.count-1;b>=a;b--)d=c.Z(b),d!==m&&d.nk(),c.Se(b);c.freeze()}return p}
ze.prototype.canUndo=ze.prototype.Xj=function(){if(!this.isEnabled||0<this.mk||this.ab)return p;var a=this.xD;return a!==m&&a.Xj()?h:p};ze.prototype.undo=ze.prototype.nk=function(){if(this.Xj()){var a=this.xD;try{this.rd("StartingUndo","Undo",a),this.rh=h,this.tj--,a.nk()}catch(b){v.trace("undo error: "+b.toString())}finally{this.rh=p,this.rd("FinishedUndo","Undo",a)}}};
ze.prototype.canRedo=ze.prototype.Wj=function(){if(!this.isEnabled||0<this.mk||this.ab)return p;var a=this.wD;return a!==m&&a.Wj()?h:p};ze.prototype.redo=ze.prototype.On=function(){if(this.Wj()){var a=this.wD;try{this.rd("StartingRedo","Redo",a),this.rh=h,this.tj++,a.On()}catch(b){v.trace("redo error: "+b.toString())}finally{this.rh=p,this.rd("FinishedRedo","Redo",a)}}};
ze.prototype.rd=function(a,b,c){c===f&&(c=m);var d=new te;d.Mc=ue;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.dG;a.next();)b=a.value,d.I=b,b.eu(d)};ze.prototype.handleChanged=ze.prototype.SB=function(a){if(this.isEnabled&&!this.ab&&!this.skipsEvent(a)){var b=this.il;b===m&&(this.As=b=new We);var c=a.copy(),b=b.Og;b.ta();b.add(c);b.freeze();this.Cx&&(0>=this.mk&&!this.hw)&&(a=a.b,a!==m&&a.Kf===p||v.trace("Change not within a transaction: "+c.toString()))}};
ze.prototype.skipsEvent=ze.prototype.lK=function(a){if(a===m||0>a.Mc.value)return h;a=a.object;if(a instanceof Q){if(a=a.sa,a!==m&&a.Zc)return h}else if(a instanceof Ye&&a.Zc)return h;return p};v.m(ze,{dG:"models"},function(){return this.Bw.f});v.a(ze,"isEnabled",ze.prototype.isEnabled);v.defineProperty(ze,{isEnabled:"isEnabled"},s("qh"),ba("qh"));v.m(ze,{xD:"transactionToUndo"},function(){return 0<=this.Li&&this.Li<=this.history.count-1?this.history.Z(this.Li):m});
v.m(ze,{wD:"transactionToRedo"},function(){return this.Li<this.history.count-1?this.history.Z(this.Li+1):m});v.m(ze,{ab:"isUndoingRedoing"},s("rh"));v.m(ze,{history:"history"},s("XD"));v.a(ze,"maxHistoryLength",ze.prototype.uy);v.defineProperty(ze,{uy:"maxHistoryLength"},s("Vz"),ba("Vz"));v.m(ze,{Li:"historyIndex"},s("tj"));v.m(ze,{il:"currentTransaction"},s("As"));v.m(ze,{mk:"transactionLevel"},s("Sj"));v.m(ze,{MF:"isInTransaction"},function(){return 0<this.Sj});
v.defineProperty(ze,{Cx:"checksTransactionLevel"},s("Qv"),ba("Qv"));v.m(ze,{AC:"nestedTransactionNames"},s("Sf"));function oa(){this.L=m;this.zz=this.uz=p;this.Gj=this.nz=m}v.H("CommandHandler",oa);var Ze=m,$e="";oa.prototype.toString=ca("CommandHandler");v.m(oa,{b:"diagram"},s("L"));oa.prototype.uf=function(a){t&&a!==m&&v.c(a,C,oa,"setDiagram");this.L=a};
oa.prototype.doKeyDown=oa.prototype.Px=function(){var a=this.b;if(a!==m){var b=a.F,c=b.Zj,d=b.shift,e=b.alt,g=b.key;c&&("C"===g||"Insert"===g)?this.canCopySelection()&&this.copySelection():c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():"Del"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&
this.undo():c&&"A"===g?this.canSelectAll()&&this.selectAll():c&&"P"===g?this.canPrint()&&this.print():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.Fe&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.Fe&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.Ee&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.Ee&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?a.Ee?a.scroll("page","left"):!c&&a.Fe&&a.scroll("page","up"):
"PageDown"===g?a.Ee?a.scroll("page","right"):!c&&a.Fe&&a.scroll("page","down"):"Home"===g?(b=a.sc,c&&a.Fe?a.position=new E(a.position.x,b.y):!c&&a.Ee&&(a.position=new E(b.x,a.position.y))):"End"===g?(b=a.sc,d=a.jb,c&&a.Fe?a.position=new E(d.x,b.bottom-d.height):!c&&a.Ee&&(a.position=new E(b.right-d.width,d.y))):"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():c&&!d&&"G"===g?this.canGroupSelection()&&
this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};oa.prototype.doKeyUp=oa.prototype.Qx=function(){var a=this.b;a!==m&&(a.F.bubbles=h)};oa.prototype.stopCommand=oa.prototype.sK=function(){var a=this.b;if(a!==m){var b=a.pa;b instanceof af&&a.Id&&a.Ex();b!==m&&b.doCancel()}};oa.prototype.canStopCommand=oa.prototype.GH=ca(h);
oa.prototype.selectAll=oa.prototype.fK=function(){var a=this.b;if(a!==m)try{a.rc="wait";a.fa("ChangingSelection");for(var b=a.Si;b.next();)b.value.Da=h;for(b=a.hk;b.next();)b.value.Da=h;for(b=a.links;b.next();)b.value.Da=h}finally{a.fa("ChangedSelection"),a.rc=""}};oa.prototype.canSelectAll=oa.prototype.FH=function(){var a=this.b;return a!==m&&a.Id};
oa.prototype.deleteSelection=oa.prototype.gI=function(){var a=this.b;if(a!==m&&!a.fa("SelectionDeleting",a.selection))try{a.rc="wait";a.Gb("Delete");a.fa("ChangingSelection");for(var b=new ka(R),c=a.selection.f;c.next();)bf(b,c.value,h,this.xB,function(a){return a.canDelete()});this.deleteParts(b,h);a.fa("SelectionDeleted",b)}finally{a.fa("ChangedSelection"),a.Md("Delete"),a.rc=""}};
oa.prototype.canDeleteSelection=oa.prototype.pH=function(){var a=this.b;return a===m||(a.Ja||a.Od)||!a.Uj||0===a.selection.count?p:h};oa.prototype.deleteParts=oa.prototype.fI=function(a,b){for(var c=a.f;c.next();){var d=c.value;if(!b||d.canDelete()){var e=d.b;e!==m&&e.remove(d)}}};
function bf(a,b,c,d,e){if(!a.contains(b)&&(e===f&&(e=m),(e===m||e(b))&&!(b instanceof cf)))if(a.add(b),b instanceof U){if(c&&b instanceof V)for(var g=b.hc;g.next();){var i=g.value;bf(a,i,c,d,e)}for(i=b.ge;i.next();)if(g=i.value,!a.contains(g)){var j=g.da,k=g.ga;j!==m&&a.contains(j)&&k!==m&&a.contains(k)?bf(a,g,c,d,e):(j===m||k===m)&&bf(a,g,c,d,e)}if(d){i=h;g=b.b;g!==m&&(i=g.nf);for(b=i?b.ln():b.kn();b.next();)i=b.value,bf(a,i,c,d,e)}}else if(b instanceof W)for(i=b.Xh;i.next();)bf(a,i.value,c,d,e)}
oa.prototype.copyParts=oa.prototype.XH=function(a,b,c){for(var d=new ja(R,R),a=a.f;a.next();)df(this,a.value,b,d,c);for(b=d.f;b.next();)b.value.ic();return d};
function df(a,b,c,d,e){if(b===m||e&&!b.canCopy())return m;if(d.contains(b))return a=d.$(b),a instanceof R?a:m;var g=m,i=b.data;if(i!==m&&c!==m){var j=c.I;b instanceof W?j instanceof P&&(i=j.iB(i),i instanceof Object&&(j.NA(i),g=c.dg(i))):(i=j.dn(i),i instanceof Object&&(j.$t(i),g=c.dg(i)))}else of(b),g=b.copy(),c!==m&&g instanceof R&&c.add(g);if(!(g instanceof R))return m;g.Da=p;d.add(b,g);if(b instanceof U){for(j=b.ge;j.next();){i=j.value;if(i.da===b){var k=d.$(i);k!==m&&(k.da=g)}i.ga===b&&(k=d.$(i),
k!==m&&(k.ga=g))}if(b instanceof V&&g instanceof V)for(b=b.hc;b.next();)j=df(a,b.value,c,d,e),!(j instanceof W)&&j!==m&&(j.Ta=g)}else if(b instanceof W){j=b.da;j!==m&&(j=d.$(j),j!==m&&(g.da=j));j=b.ga;j!==m&&(j=d.$(j),j!==m&&(g.ga=j));for(b=b.Xh;b.next();)j=df(a,b.value,c,d,e),j!==m&&(j.fe=g)}return g}oa.prototype.copySelection=oa.prototype.ZH=function(){var a=this.b;if(a!==m){for(var b=new ka(R),a=a.selection.f;a.next();)bf(b,a.value,h,this.hB,function(a){return a.canCopy()});this.copyToClipboard(b)}};
oa.prototype.canCopySelection=oa.prototype.lH=function(){var a=this.b;return a===m||(!a.Hh||!a.bu)||0===a.selection.count?p:h};oa.prototype.cutSelection=oa.prototype.bI=function(){this.copySelection();this.deleteSelection()};oa.prototype.canCutSelection=oa.prototype.mH=function(){var a=this.b;return a===m||(a.Ja||a.Od)||(!a.Hh||!a.Uj||!a.bu)||0===a.selection.count?p:h};
oa.prototype.copyToClipboard=oa.prototype.$H=function(a){var b=this.b;if(b!==m){var c=m;a===m?(Ze=m,$e=""):(a=this.copyParts(a,m,h),c=new A(R),c.Zf(a),Ze=c,$e=b.I.jl);b.fa("ClipboardChanged",c)}};
oa.prototype.pasteFromClipboard=oa.prototype.OJ=function(){var a=Ze;if(a===m)return v.Af;var b=this.b;if(b===m||$e!==b.I.jl)return v.Af;b=this.copyParts(a,b,p);a=new ka(R);for(b=b.f;b.next();){var c=b.value;c.location.W()||(c.location=b.key.location.copy());c.position.W()||(c.position=b.key.position.copy());a.add(c)}return a};
oa.prototype.pasteSelection=oa.prototype.PJ=function(a){var b=this.b;if(b!==m)try{b.rc="wait";b.Gb("Paste");b.fa("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&pf(b);for(var d=c.f;d.next();)d.value.Da=h;b.fa("ChangedSelection");if(a instanceof E){var e=this.computeBounds(b.selection);if(e){var g=b.Ob.be,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new E(a.x-e.ya,a.y-e.za),p)}}b.fa("ClipboardPasted",c)}finally{b.Md("Paste"),b.rc=""}};
oa.prototype.canPasteSelection=oa.prototype.yH=function(){var a=this.b;return a===m||(a.Ja||a.Od)||(!a.Vm||!a.bu)||Ze===m||$e!==a.I.jl?p:h};oa.prototype.computeBounds=oa.prototype.$d=function(a){for(var b=m,a=a.f;a.next();){var c=a.value;c instanceof W||(c.Sh(),b===m?b=c.oa:b.ok(c.oa))}return b};oa.prototype.undo=oa.prototype.nk=function(){var a=this.b;a!==m&&a.ca.nk()};oa.prototype.canUndo=oa.prototype.Xj=function(){var a=this.b;return a===m||a.Ja||a.Od?p:a.tx&&a.ca.Xj()};
oa.prototype.redo=oa.prototype.On=function(){var a=this.b;a!==m&&a.ca.On()};oa.prototype.canRedo=oa.prototype.Wj=function(){var a=this.b;return a===m||a.Ja||a.Od?p:a.tx&&a.ca.Wj()};oa.prototype.decreaseZoom=oa.prototype.dF=function(a){a===f&&(a=1/1.05);var b=this.b;b!==m&&(a*=b.scale,a<b.Ri||a>b.Qi||(b.scale=a,qf(b)))};oa.prototype.canDecreaseZoom=oa.prototype.nH=function(a){a===f&&(a=1/1.05);var b=this.b;if(b===m)return p;a*=b.scale;return a<b.Ri||a>b.Qi?p:b.Zq};
oa.prototype.increaseZoom=oa.prototype.FF=function(a){a===f&&(a=1.05);var b=this.b;b!==m&&(a*=b.scale,a<b.Ri||a>b.Qi||(b.scale=a,qf(b)))};oa.prototype.canIncreaseZoom=oa.prototype.wH=function(a){a===f&&(a=1.05);var b=this.b;if(b===m)return p;a*=b.scale;return a<b.Ri||a>b.Qi?p:b.Zq};oa.prototype.resetZoom=oa.prototype.aK=function(a){a===f&&(a=1);var b=this.b;if(b!==m&&!(a<b.Ri||a>b.Qi))b.scale=a,qf(b)};
oa.prototype.canResetZoom=oa.prototype.BH=function(a){a===f&&(a=1);var b=this.b;return b===m||a<b.Ri||a>b.Qi?p:b.Zq};oa.prototype.collapseTree=oa.prototype.cr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Gb("Collapse Tree");var c=new A(U);if(a instanceof U&&a.Pd)a.cr(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof U&&d.Pd&&(d.cr(),c.add(d))}b.fa("TreeCollapsed",c);b.Md("Collapse Tree")};
oa.prototype.canCollapseTree=oa.prototype.jH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return p;if(a instanceof U){if(!a.Pd)return p;if(b.nf){if(0<a.ln().count)return h}else if(0<a.kn().count)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&c.Pd)if(b.nf){if(0<c.ln().count)return h}else if(0<c.kn().count)return h}return p};
oa.prototype.expandTree=oa.prototype.jr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Gb("Expand Tree");var c=new A(U);if(a instanceof U&&!a.Pd)a.jr(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof U&&!d.Pd&&(d.jr(),c.add(d))}b.fa("TreeExpanded",c);b.Md("Expand Tree")};
oa.prototype.canExpandTree=oa.prototype.tH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return p;if(a instanceof U){if(a.Pd)return p;if(b.nf){if(0<a.ln().count)return h}else if(0<a.kn().count)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&!c.Pd)if(b.nf){if(0<c.ln().count)return h}else if(0<c.kn().count)return h}return p};
oa.prototype.groupSelection=oa.prototype.WI=function(){var a=this.b;if(a!==m){var b=a.I;if(b!==m&&b instanceof P){var c=this.ux;if(c!==m)try{a.rc="wait";a.Gb("Group");a.fa("ChangingSelection");for(var d=new A(R),e=a.selection.f;e.next();){var g=e.value;(g instanceof U||g.constructor===R)&&g.canGroup()&&d.add(g)}for(var i=new A(R),j=d.f;j.next();){for(var k=j.value,g=p,e=d.f;e.next();)if(k.tl(e.value)){g=h;break}g||i.add(k)}if(0<i.count){e=i.f;e.next();var l=e.value.Ta;if(l!==m)for(;l!==m;){e=i.f;
e.next();for(d=p;e.next();)if(k=e.value,!k.tl(l)){d=h;break}if(d)l=l.Ta;else break}var n=m;if(c instanceof V)of(c),n=c.copy(),n instanceof V&&a.add(n);else if(b.hy(c)){var r=b.dn(c);r instanceof Object&&(b.$t(r),n=a.dg(r))}if(n instanceof V){l!==m&&this.isValidMember(l,n)&&(n.Ta=l);for(e=i.f;e.next();)k=e.value,this.isValidMember(n,k)&&(k.Ta=n);a.select(n)}}a.fa("ChangedSelection");a.fa("SelectionGrouped",n)}finally{a.Md("Group"),a.rc=""}}}};
oa.prototype.canGroupSelection=oa.prototype.vH=function(){var a=this.b;if(a===m||a.Ja||a.Od||!a.Vm||!a.Um)return p;var b=a.I;if(b===m||!(b instanceof P)||this.ux===m)return p;for(a=a.selection.f;a.next();)if(b=a.value,(b instanceof U||b.constructor===R)&&b.canGroup())return h;return p};
oa.prototype.findUnnestedNodes=oa.prototype.Xx=function(a){for(var b=[],a=a.f;a.next();){var c=a.value;c instanceof W||b.push(c)}for(var a=new ka(R),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.tl(b[i])){g=p;break}g&&a.add(e)}return a};
oa.prototype.isValidMember=oa.prototype.ny=function(a,b){if(b===m||a===b||b instanceof W)return p;if(a!==m){if(a===b||a.tl(b))return p;var c=a.Cr;if(c!==m&&!c(a,b)||a.data===m&&b.data!==m||a.data!==m&&b.data===m)return p}c=this.Cr;return c!==m?c(a,b):h};
oa.prototype.ungroupSelection=oa.prototype.xK=function(a){a===f&&(a=m);var b=this.b;if(b!==m){var c=b.I;if(c!==m&&c instanceof P)try{b.rc="wait";b.Gb("Ungroup");b.fa("ChangingSelection");var d=new A(V);if(a instanceof V)d.add(a);else for(var e=b.selection.f;e.next();){var g=e.value;g instanceof V&&g.canUngroup()&&d.add(g)}if(0<d.count){b.Ex();for(e=d.f;e.next();){var i=e.value,j=i.data,k=i.Ta,l=k!==m&&k.data!==m?c.Xb(k.data):f,n=new A(R);n.Zf(i.hc);for(var r=n.f;r.next();){var q=r.value;if(!(q instanceof
W)){var u=q.data;u!==m?c.Oy(u,l):q.Ta=k;q.Da=h}}j!==m?c.OC(j):b.remove(i)}}b.fa("ChangedSelection");b.fa("SelectionUngrouped",d)}finally{b.Md("Ungroup"),b.rc=""}}};oa.prototype.canUngroupSelection=oa.prototype.IH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja||b.Od||!b.Uj||!b.an)return p;var c=b.I;if(c===m||!(c instanceof P))return p;if(a instanceof V){if(a.canUngroup())return h}else for(a=b.selection.f;a.next();)if(b=a.value,b instanceof V&&b.canUngroup())return h;return p};
oa.prototype.addTopLevelParts=oa.prototype.eH=function(a,b){for(var c=h,d=this.Xx(a).f;d.next();){var e=d.value;e.Ta!==m&&(!b||this.ny(m,e)?e.Ta=m:c=p)}return c};oa.prototype.collapseSubGraph=oa.prototype.br=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Gb("Collapse SubGraph");var c=new A(V);if(a instanceof V&&a.ee)a.br(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof V&&d.ee&&(d.br(),c.add(d))}b.fa("SubGraphCollapsed",c);b.Md("Collapse SubGraph")};
oa.prototype.canCollapseSubGraph=oa.prototype.iH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return p;if(a instanceof V)return!a.ee?p:h;for(a=b.selection.f;a.next();)if(b=a.value,b instanceof V&&b.ee)return h;return p};
oa.prototype.expandSubGraph=oa.prototype.ir=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Gb("Expand SubGraph");var c=new A(V);if(a instanceof V&&!a.ee)a.ir(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof V&&!d.ee&&(d.ir(),c.add(d))}b.fa("SubGraphExpanded",c);b.Md("Expand SubGraph")};
oa.prototype.canExpandSubGraph=oa.prototype.sH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return p;if(a instanceof V)return a.ee?p:h;for(a=b.selection.f;a.next();)if(b=a.value,b instanceof V&&!b.ee)return h;return p};
oa.prototype.editTextBlock=oa.prototype.yI=function(a){a===f&&(a=m);var b=this.b;if(b!==m&&b.Ob!==m){var c=b.Ob.bv;if(c!==m){if(a===m){for(var a=b.selection.f,d=m;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===m)return;a=d.FB(function(a){return a instanceof ma&&a.qu})}a!==m&&a instanceof ma&&(c.yf=a,b.pa=c)}}};
oa.prototype.canEditTextBlock=oa.prototype.rH=function(a){a===f&&(a=m);var b=this.b;if(b===m||(b.Ja||b.Od)||!b.$m||b.Ob===m||b.Ob.bv===m)return p;if(a instanceof ma){if(a=a.T,a!==m&&a.canEdit())return h}else for(b=b.selection.f;b.next();)if(a=b.value,a.canEdit()&&(a=a.FB(function(a){return a instanceof ma&&a.qu}),a!==m))return h;return p};oa.prototype.print=oa.prototype.print=aa();oa.prototype.canPrint=oa.prototype.UE=function(){var a=this.b;return a!==m&&a.Wm};v.a(oa,"copiesTree",oa.prototype.hB);
v.defineProperty(oa,{hB:"copiesTree"},s("uz"),ba("uz"));v.a(oa,"deletesTree",oa.prototype.xB);v.defineProperty(oa,{xB:"deletesTree"},s("zz"),ba("zz"));v.a(oa,"archetypeGroupData",oa.prototype.ux);
v.defineProperty(oa,{ux:"archetypeGroupData"},s("nz"),function(a){a!==m&&v.c(a,Object,oa,"archetypeGroupData");var b=this.b;b!==m&&(b=b.I,b!==m&&!(a instanceof V)&&!b.hy(a)&&v.g("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a));this.nz=a});v.a(oa,"memberValidation",oa.prototype.Cr);v.defineProperty(oa,{Cr:"memberValidation"},s("Gj"),function(a){a!==m&&v.e(a,"function",oa,"memberValidation");this.Gj=a});
function rf(){v.Hb(this);this.L=m;this.qb="";this.qh=h;this.Nz=p;this.GA=m;this.Xt=-1}v.H("Tool",rf);rf.prototype.uf=function(a){t&&a!==m&&v.c(a,C,rf,"setDiagram");this.L=a};rf.prototype.toString=function(){return""!==this.name?this.name+" Tool":v.Ki(Object.getPrototypeOf(this))};rf.prototype.updateAdornments=rf.prototype.$h=aa();rf.prototype.canStart=rf.prototype.ff=s("isEnabled");rf.prototype.doStart=rf.prototype.Rx=aa();rf.prototype.doActivate=rf.prototype.Rh=function(){this.Q=h};
rf.prototype.doDeactivate=rf.prototype.ak=function(){this.Q=p};rf.prototype.doStop=rf.prototype.Ii=aa();rf.prototype.doCancel=rf.prototype.Hi=function(){this.stopTool()};rf.prototype.stopTool=rf.prototype.tK=function(){var a=this.b;a!==m&&a.pa===this&&(a.pa=m,a.rc="")};rf.prototype.doMouseDown=rf.prototype.pu=function(){!this.Q&&this.canStart()&&this.doActivate()};rf.prototype.doMouseMove=rf.prototype.Sg=aa();rf.prototype.doMouseUp=rf.prototype.Je=function(){this.stopTool()};
rf.prototype.doMouseWheel=rf.prototype.lF=aa();rf.prototype.doKeyDown=rf.prototype.Px=function(){var a=this.b;a!==m&&"Esc"===a.F.key&&this.doCancel()};rf.prototype.doKeyUp=rf.prototype.Qx=aa();rf.prototype.startTransaction=rf.prototype.Gb=function(a){this.oe=m;var b=this.b;return b===m?p:b.Gb(a)};rf.prototype.stopTransaction=rf.prototype.Wi=function(){var a=this.b;return a===m?p:this.oe===m?a.Nr():a.Md(this.oe)};
rf.prototype.standardMouseSelect=rf.prototype.HG=function(){var a=this.b;if(a!==m&&a.Id){var b=a.F,c=a.kr(b.C,h);c!==m?b.Zj?(a.fa("ChangingSelection"),c.Da=!c.Da,a.fa("ChangedSelection")):b.shift?c.Da||(a.fa("ChangingSelection"),c.Da=h,a.fa("ChangedSelection")):c.Da||a.select(c):b.left&&(!b.Zj&&!b.shift)&&a.Ex()}};rf.prototype.standardMouseClick=rf.prototype.oK=function(a,b){a===f&&(a=m);b===f&&(b=function(a){return!a.sa.Zc});var c=this.b;if(c!==m){var d=c.F,e=c.Yc(d.C,a,b);d.ad=e;sf(e,d,c)}};
function sf(a,b,c){var d=0;b.left?d=1===b.Ge?1:2===b.Ge?2:1:b.right&&1===b.Ge&&(d=3);var e="";if(a!==m){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.fa(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.fa(e)}if(a!==m)for(;a!==m;){e=m;switch(d){case 1:e=a.click;break;case 2:e=a.ll?a.ll:a.click;break;case 3:e=a.dr}if(e!==m&&
(e(b,a),b.ud))break;a=a.V}else{e=m;switch(d){case 1:e=c.click;break;case 2:e=c.ll?c.ll:c.click;break;case 3:e=c.dr}e!==m&&e(b)}}
rf.prototype.standardMouseOver=rf.prototype.pK=function(){var a=this.b;if(a!==m){var b=a.F,c=a.Yc(b.C,m,m);b.ad=c;var d=a.La;a.La=h;var e=p;if(c!==a.Xl){var g=a.Xl;a.Qw=g;a.Xl=c;for(this.doCurrentObjectChanged(g,c);g!==m;){var i=g.yy;if(i!==m){if(c===g)break;if(c!==m&&c.Wh(g))break;i(b,g,c);e=h;if(b.ud)break}g=g.V}for(g=a.Qw;c!==m;){i=c.xy;if(i!==m){if(g===c)break;if(g!==m&&g.Wh(c))break;i(b,c,g);e=h;if(b.ud)break}c=c.V}c=a.Xl}if(c!==m){g=c;for(i="";g!==m;){i=g.cursor;if(""!==i)break;g=g.V}a.rc=i;
for(g=c;g!==m;){i=g.Gr;if(i!==m&&(i(b,g),e=h,b.ud))break;g=g.V}}else a.rc="",i=a.Gr,i!==m&&(i(b),e=h);e&&a.update();a.La=d}};rf.prototype.doCurrentObjectChanged=rf.prototype.kF=aa();
rf.prototype.standardMouseWheel=rf.prototype.qK=function(){var a=this.b;if(a!==m){var b=a.F,c=b.Fi;if(0!==c){var d=a.Ob.wl;if(a.Zq&&(d===tf&&!b.shift||d===uf&&b.Zj)){d=a.rk;a.rk=b.bd;var e=a.Ld;e!==m?0<c?e.FF():e.dF():a.scale=0<c?1.05*a.scale:a.scale/1.05;a.rk=d;b.bubbles=p}else if(d===tf&&b.shift||d===uf&&!b.Zj)d=a.position.copy(),!b.shift&&a.Fe?0<c?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.Ee&&(0<c?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.u(d)||(b.bubbles=
p)}}};rf.prototype.standardWaitAfter=rf.prototype.rK=function(a){v.e(a,"number",rf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.Xt=window.setTimeout(function(){b.doWaitAfter()},a)};rf.prototype.cancelWaitAfter=rf.prototype.JH=function(){-1!==this.Xt&&window.clearTimeout(this.Xt);this.Xt=-1};rf.prototype.doWaitAfter=rf.prototype.oF=aa();
rf.prototype.findToolHandleAt=rf.prototype.KI=function(a,b){var c=this.b;if(c===m)return m;c=c.Yc(a,m,function(a){a=a.T;return a===m?p:a.Hd!==m});if(c===m)return m;var d=c.T;return d===m||d.hd!==b?m:c};rf.prototype.isBeyondDragSize=rf.prototype.iJ=function(){var a=this.b;if(a===m)return p;var b=a.ec.bd,a=a.F.bd,c=2;v.Yw&&(c+=4);return Math.abs(a.x-b.x)>c||Math.abs(a.y-b.y)>c};v.m(rf,{b:"diagram"},s("L"));v.a(rf,"name",rf.prototype.name);v.defineProperty(rf,{name:"name"},s("qb"),ba("qb"));
v.a(rf,"isEnabled",rf.prototype.isEnabled);v.defineProperty(rf,{isEnabled:"isEnabled"},s("qh"),ba("qh"));v.a(rf,"isActive",rf.prototype.Q);v.defineProperty(rf,{Q:"isActive"},s("Nz"),ba("Nz"));v.a(rf,"transactionResult",rf.prototype.oe);v.defineProperty(rf,{oe:"transactionResult"},s("GA"),ba("GA"));function vf(a){this.Nw=a!==f?a.copy():new E;this.sA=m}vf.prototype.toString=function(){return this.Nw.toString()};v.a(vf,"point",vf.prototype.$g);v.defineProperty(vf,{$g:"point"},s("Nw"),ba("Nw"));
function wf(){rf.call(this);this.name="Dragging";this.tz=h;this.Hk=this.Gz=p;this.kw=(new hb(NaN,NaN)).freeze();this.lw=Xb;this.mw=(new E(NaN,NaN)).freeze();this.Dz=this.Qz=p;this.Ez=this.sz=this.Fz=this.wz=m;this.Io=this.Cz=p;this.Fm=new E(NaN,NaN);this.Dh=new E;this.Nt=p;this.Jt=h;this.am=100;this.Bk=this.xt=m}v.H("DraggingTool",wf);v.na(wf,rf);v.a(wf,"copiesEffectiveCollection",wf.prototype.gB);v.defineProperty(wf,{gB:"copiesEffectiveCollection"},s("tz"),ba("tz"));v.a(wf,"dragsTree",wf.prototype.BB);
v.defineProperty(wf,{BB:"dragsTree"},s("Gz"),ba("Gz"));v.a(wf,"isGridSnapEnabled",wf.prototype.vn);v.defineProperty(wf,{vn:"isGridSnapEnabled"},s("Hk"),function(a){this.Hk!==a&&(v.e(a,"boolean",wf,"isGridSnapEnabled"),this.Hk=a)});v.a(wf,"gridSnapCellSize",wf.prototype.cy);v.defineProperty(wf,{cy:"gridSnapCellSize"},s("kw"),function(a){this.kw.u(a)||(v.c(a,hb,wf,"gridSnapCellSize"),this.kw=a=a.B())});v.a(wf,"gridSnapCellSpot",wf.prototype.OB);
v.defineProperty(wf,{OB:"gridSnapCellSpot"},s("lw"),function(a){this.lw.u(a)||(v.c(a,K,wf,"gridSnapCellSpot"),this.lw=a=a.B())});v.a(wf,"gridSnapOrigin",wf.prototype.PB);v.defineProperty(wf,{PB:"gridSnapOrigin"},s("mw"),function(a){this.mw.u(a)||(v.c(a,E,wf,"gridSnapOrigin"),this.mw=a=a.B())});v.a(wf,"isDragSnapEnabled",wf.prototype.LF);v.defineProperty(wf,{LF:"isDragSnapEnabled"},s("Qz"),ba("Qz"));v.a(wf,"draggableLinks",wf.prototype.ml);v.defineProperty(wf,{ml:"draggableLinks"},s("Dz"),ba("Dz"));
v.a(wf,"currentPart",wf.prototype.hl);v.defineProperty(wf,{hl:"currentPart"},s("wz"),ba("wz"));v.a(wf,"copiedParts",wf.prototype.qc);v.defineProperty(wf,{qc:"copiedParts"},s("sz"),ba("sz"));v.a(wf,"draggedParts",wf.prototype.Lb);v.defineProperty(wf,{Lb:"draggedParts"},s("Fz"),ba("Fz"));v.a(wf,"draggedLink",wf.prototype.Db);v.defineProperty(wf,{Db:"draggedLink"},s("Ez"),ba("Ez"));v.a(wf,"dragOutStarted",wf.prototype.Tx);v.defineProperty(wf,{Tx:"dragOutStarted"},s("Cz"),ba("Cz"));v.a(wf,"delay",wf.prototype.nu);
v.defineProperty(wf,{nu:"delay"},s("am"),ba("am"));wf.prototype.canStart=wf.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||!a.Vj&&!a.Hh&&!a.cu||!a.Id)return p;var b=a.F;return!b.left||a.pa!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.ei!==m&&b.ei instanceof window.TouchEvent)&&b.timestamp-a.ec.timestamp<this.am)?p:this.findDraggablePart()!==m};
wf.prototype.findDraggablePart=wf.prototype.DI=function(){var a=this.b;if(a===m)return m;a=a.kr(a.ec.C,h);return a!==m&&(a.canMove()||a.canCopy())?a:m};wf.prototype.standardMouseSelect=wf.prototype.HG=function(){var a=this.b;if(a!==m&&a.Id&&(this.hl=a.kr(a.ec.C,h),this.hl!==m&&!this.hl.Da)){a.fa("ChangingSelection");var b=a.F;!b.Zj&&!b.shift&&pf(a);this.hl.Da=h;a.fa("ChangedSelection")}};
wf.prototype.doActivate=wf.prototype.Rh=function(){var a=this.b;if(a!==m){this.standardMouseSelect();var b=this.hl;b===m||!b.canMove()&&!b.canCopy()||(this.Q=h,this.Fm.set(a.position),xf(this,a.selection),this.Bk=this.xt=m,this.Lb=this.computeEffectiveCollection(a.selection),yf(this,this.Lb),this.Gb("Drag"),this.Dh.set(a.ec.C),a.cu?(this.Tx=h,this.Io=p,zf=this,this.b.Cc=h):a.Cc=h)}};
function xf(a,b){if(a.ml){var c=a.b;c!==m&&c.zi&&(1===b.count?(c=b.f,c.next(),a.Db=c.value,a.Db!==m&&(a.Db.canRelinkFrom()&&a.Db.canRelinkTo())&&a.Db.Pg()):a.Db=m)}}
wf.prototype.computeEffectiveCollection=wf.prototype.OH=function(a){var b=this.b!==m&&this.b.pa===this,c=new ja(R,vf);if(a===m)return c;for(var d=a.f;d.next();){var e=d.value;Af(this,c,e,b)}if(this.Db!==m&&this.ml)return c;for(d=a.f;d.next();)e=d.value,e instanceof W&&(a=e,b=a.da,b!==m&&!c.contains(b)?c.remove(a):(b=a.ga,b!==m&&!c.contains(b)&&c.remove(a)));return c};
function Af(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof U){b.add(c,new vf(c.location));if(c instanceof V)for(var e=c.hc;e.next();){var g=e.value;Af(a,b,g,d)}for(g=c.ge;g.next();)if(e=g.value,!b.contains(e)){var i=e.da,j=e.ga;i!==m&&(b.contains(i)&&j!==m&&b.contains(j))&&Af(a,b,e,d)}if(a.BB){g=h;e=c.b;e!==m&&(g=e.nf);for(c=g?c.ln():c.kn();c.next();)g=c.value,Af(a,b,g,d)}}else if(c instanceof W){e=c;b.add(e,new vf);for(g=e.Xh;g.next();)Af(a,b,g.value,d)}else c.constructor===
R&&b.add(c,new vf(c.location))}wf.prototype.doStop=wf.prototype.Ii=function(){var a=this.b;a!==m&&Bf(a);Cf(this);Df(this,this.Lb);this.Lb=m;this.Io=this.Tx=p;if(0<Ef.count){for(var b=Ef.length,c=0;c<b;c++){var d=Ef.j[c];d.Db!==m&&(d.Db=m);Ff(d);Cf(d);d.b!==m&&Bf(d.b)}Ef.clear()}this.Db!==m&&(this.Db=m);this.Fm.Tr(NaN,NaN);zf=Gf=m;Ff(this);a.Cc=p;this.Wi()};
function Cf(a){var b=a.b;if(b!==m){var c=b.La;b.La=h;for(var d=b.F,e=a.Bk;e!==m;){var g=e.wy;if(g!==m&&(g(d,e,m),d.ud))break;e=e.V}b.La=c}a.xt=m;a.Bk=m}wf.prototype.doCancel=wf.prototype.Hi=function(){Ff(this);Hf(this);var a=this.b;a!==m&&this.Fm.W()&&(a.position=this.Fm);this.stopTool()};function yf(a,b){if(b!==m){a.Nt=h;for(var c=b.f;c.next();){var d=c.key;d instanceof W&&(d.Jm=h)}}}
function Df(a,b){if(b!==m&&a.Nt){for(var c=b.f;c.next();){var d=c.key;d instanceof W&&(d.Jm=p,d.Te===If?d.Nb():d.K())}a.Nt=p}}wf.prototype.doKeyDown=wf.prototype.Px=function(){var a=this.b;a!==m&&(a=a.F,a!==m&&this.Q&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};wf.prototype.doKeyUp=wf.prototype.Qx=function(){var a=this.b;a!==m&&(a.F!==m&&this.Q)&&this.doMouseMove()};
function Of(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.f;a.next();){var g=a.value;if(g instanceof U||g.constructor===R){var i=g.location,g=i.x,i=i.y;!isNaN(g)&&!isNaN(i)&&(g<b&&(b=g),i<c&&(c=i),g>d&&(d=g),i>e&&(e=i))}}return Infinity===b?new F(0,0,0,0):new F(b,c,d-b,e-c)}
function Pf(a,b){if(a.qc===m){var c=a.b;if(!(c===m||c.Ja||c.Od)&&a.Lb!==m){c.La=!b;c.I.La=!b;c.Yq=!b;Hf(a);a.Dh.set(c.ec.C);for(var c=a.gB?c.Ld.copyParts(a.Lb.Xi(),c,h):c.Ld.copyParts(c.selection,c,h),d=c.f;d.next();)d.value.location=d.key.location.copy();d=Of(c);new E(d.x+d.width/2,d.y+d.height/2);for(var d=new ja(R,vf),e=a.Lb.f;e.next();){var g=e.key;if((g instanceof U||g.constructor===R)&&g.canCopy())g=c.$(g),g!==m&&(g.Sh(),d.add(g,new vf(g.location)))}for(c=c.f;c.next();)e=c.value,e instanceof
W&&e.canCopy()&&d.add(e,new vf);a.qc=d;xf(a,d.Xi());a.Db!==m&&(c=a.Db,d=lb(c.ib),c.gk(a.Dh.x-(d.x+d.width/2),a.Dh.y-(d.y+d.height/2)))}}}function Ff(a){var b=a.b;b!==m&&(a.qc!==m&&(b.Ld.deleteParts(a.qc.Xi(),p),a.qc=m),b.La=p,b.I.La=p,b.Yq=p,a.Dh.set(b.ec.C))}function Qf(a,b){var c=a.b;if(c!==m){var d=a.Dh;a.moveParts(b,c.F.C.copy().Xr(d),h)}}
wf.prototype.moveParts=wf.prototype.IJ=function(a,b,c){if(!(a===m||0===a.count)){var d=b.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);var e=this.Nt;e||yf(this,a);for(var g=new A,i=new A(La),j=a.f;j.next();){var k=j.key;if(k instanceof U||k.constructor===R){var l=Rf(this,k,a);if(l!==m)g.add({Yg:k,info:j.value,BF:l});else if(!c||k.canMove()){var l=j.value.$g,n=this.computeMove(k,l.copy().add(d),a);k.location=n;j.value.sA=n.copy().Xr(l)}}else j.key instanceof W&&i.add(j.Ud)}for(c=g.f;c.next();)g=c.value,
l=g.info.$g,n=l.copy().add(g.BF.sA),g.Yg.location=n;for(i=i.f;i.next();)if(j=i.value,l=j.key,l instanceof W)if(l.Jm)if(c=l.da,g=l.ga,this.Db!==m&&this.ml)j=j.value.$g,a.add(l,new vf(d)),n=b.x-j.x,c=b.y-j.y,l.gk(n,c);else{n=new E(0,0);if(c!==m){n.set(c.location);var r=a.$(c);r!==m&&n.Xr(r.$g)}k=new E(0,0);g!==m&&(k.set(g.location),r=a.$(g),r!==m&&k.Xr(r.$g));c!==m&&g!==m?n.bk(k)?(j=j.value.$g,c=n.copy(),c.Xr(j),a.add(l,new vf(n)),l.gk(c.x,c.y)):(l.Jm=p,l.Nb()):(j=j.value.$g,a.add(l,new vf(c!==m?n:
g!==m?k:b)),n=d.x-j.x,c=d.y-j.y,l.gk(n,c))}else if(l.da===m||l.ga===m)j=j.value.$g,a.add(l,new vf(b)),n=d.x-j.x,c=d.y-j.y,l.gk(n,c);e||Df(this,a)}};function Rf(a,b,c){b=b.Ta;if(b!==m){a=Rf(a,b,c);if(a!==m)return a;a=c.$(b);if(a!==m&&a instanceof vf)return a}return m}
function Hf(a){if(a.Lb!==m){var b=a.b,c=p,d=p;b!==m&&(c=b.La,d=b.I.La,b.La=h,b.I.La=h);for(var e=a.Lb.f;e.next();){var g=e.key;if(g instanceof U||g.constructor===R)g.location=e.value.$g}for(e=a.Lb.f;e.next();)if(g=e.key,g instanceof W&&g.Jm){var i=e.value.$g;a.Lb.add(g,new vf);g.gk(-i.x,-i.y)}b!==m&&(b.La=c,b.I.La=d,b.Mi())}}
wf.prototype.computeMove=wf.prototype.RH=function(a,b){if(a===m)return b;var c=b,c=b;if(this.vn&&(c=b.copy(),a!==m)){var d=this.b;if(d!==m){var e=d.Cu,g=this.cy,d=g.width,g=g.height,i=this.PB,j=i.x,i=i.y,k=this.OB;if(e!==m){var l=e.rr;isNaN(d)&&(d=l.width);isNaN(g)&&(g=l.height);e=e.by;isNaN(j)&&(j=e.x);isNaN(i)&&(i=e.y)}e=(new E).Dl(0,0,d,g,k);c=md(c.x,c.y,j+e.x,i+e.y,d,g)}}c=a.Sx!==m?a.Sx(a,b,c):c;g=a.wC;d=g.x;isNaN(d)&&(d=a.location.x);g=g.y;isNaN(g)&&(g=a.location.y);e=a.qC;j=e.x;isNaN(j)&&(j=
a.location.x);e=e.y;isNaN(e)&&(e=a.location.y);return new E(Math.max(d,Math.min(c.x,j)),Math.max(g,Math.min(c.y,e)))};function Sf(a,b){if(b===m)return h;var c=b.T;return c===m||c.Da||c instanceof cf||c.sa.Zc||a.Lb&&a.Lb.contains(c)||a.qc&&a.qc.contains(c)?h:p}
wf.prototype.dragOver=wf.prototype.lI=function(a,b,c){var d=this.b;if(d!==m){if(this.ml&&this.Db!==m){var e=this.b.I;e instanceof P&&(this.Db.da!==m&&e.Sr(this.Db.data,""),this.Db.ga!==m&&e.Ur(this.Db.data,""))}e=p;this.Jt===p&&(e=d.La,d.La=h);var g=p,i=this,j=Tf(d,a,m,function(a){return!Sf(i,a)}),k=d.F;k.ad=j;var l=d.La;d.La=h;if(j!==this.Bk){var n=this.Bk;this.xt=n;for(this.Bk=j;n!==m;){var r=n.wy;if(r!==m){if(j===n)break;if(j!==m&&j.Wh(n))break;r(k,n,j);g=h;if(k.ud)break}n=n.V}for(n=this.xt;j!==
m;){r=j.xC;if(r!==m){if(n===j)break;if(n!==m&&n.Wh(j))break;r(k,j,n);g=h;if(k.ud)break}j=j.V}j=this.Bk}j===m&&(r=d.yC,r!==m&&(r(k),g=h));d.La=l;g&&d.update();this.Jt===p&&(d.La=e);if((d.Ee||d.Fe)&&(b||c))d.Mv=d.bs(a),Uf(d,d.Mv).bk(d.position)?Bf(d):Vf(d)}};
wf.prototype.dropOnto=wf.prototype.wI=function(a){var b=this.b;if(b!==m&&b.I!==m){var c=this;Cf(this);var d=Tf(b,a,m,function(a){return!Sf(c,a)}),a=b.F;a.ad=d;if(d!==m)for(;d!==m;){var e=d.Dr;if(e!==m&&(e(a,d),a.ud))break;d=d.V}else e=b.Dr,e!==m&&e(a);for(a=b.selection.f;a.next();)d=a.value,d instanceof U&&Wf(b,d.oa)}};
wf.prototype.doMouseMove=wf.prototype.Sg=function(){if(this.Q){var a=this.b;if(a!==m&&this.hl!==m&&this.Lb!==m){var b=p,c=p;this.mayCopy()?(b=h,Pf(this,p),Qf(this,this.qc)):this.mayMove()?(c=h,Ff(this),Qf(this,this.Lb)):Ff(this);this.dragOver(a.F.C,c,b);qf(a)}}};
wf.prototype.doMouseUp=wf.prototype.Je=function(){if(this.Q){this.Io=h;var a=this.b;if(a!==m){var b=p,c=this.mayCopy();c&&this.qc!==m?(Hf(this),Ff(this),Pf(this,h),Qf(this,this.qc),this.qc!==m&&a.My(this.qc.Xi())):(b=h,this.mayMove()&&(this.Jt=p,this.dragOver(a.F.C,h,p),this.Jt=h));this.dropOnto(a.F.C);if(this.Q){this.qc=m;if(b&&this.Lb!==m)for(b=this.Lb.f;b.next();){var d=b.key;d instanceof U&&(d=d.Ta,d!==m&&d.placeholder!==m&&!this.Lb.contains(d)&&d.Kx&&d.K())}a.Mi();Df(this,this.Lb);this.oe=c?
"Copy":"Move";a.fa(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};wf.prototype.mayCopy=wf.prototype.BJ=function(){var a=this.b;if(a===m||(a.Ja||a.Od||!a.Vm||!a.Hh)||!a.F.Zj)return p;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===R)&&b.canCopy())return h}return this.Db!==m&&this.ml&&this.Db.canCopy()?h:p};
wf.prototype.mayMove=wf.prototype.DJ=function(){var a=this.b;if(a===m||a.Ja||!a.Vj)return p;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===R)&&b.canMove())return h}return this.Db!==m&&this.ml&&this.Db.canMove()?h:p};var Ef=new A(wf),zf=m,Gf=m;wf.prototype.mayCopyExternal=wf.prototype.CJ=function(){var a=this.b;return a===m||(!a.QA||a.Ja||a.Od||!a.Vm)||a.I===m?p:h};
wf.prototype.doSimulatedDragEnter=wf.prototype.yB=function(){this.mayCopyExternal()&&(Ef.contains(this)||Ef.add(this))};wf.prototype.doSimulatedDragLeave=wf.prototype.zB=function(){Ff(this);var a=this.b;a!==m&&(a.pa!==this&&this.Fm.W())&&(a.position=this.Fm)};wf.prototype.doSimulatedDragOver=wf.prototype.mF=function(){if(this.mayCopyExternal()){var a=this.b;if(a!==m){var b=zf;b!==m&&b.Lb!==m&&(Xf(this,b.Lb.Xi(),p),Qf(this,this.qc),a.My(this.qc.Xi()),this.dragOver(a.F.C,p,h),qf(a))}}};
wf.prototype.doSimulatedDrop=wf.prototype.nF=function(){var a=zf;if(a!==m&&(a.Io=h,Ff(this),this.mayCopyExternal())){var b=this.b;b!==m&&(this.Gb("Drop"),Xf(this,a.Lb.Xi(),h),Qf(this,this.qc),this.qc!==m&&b.My(this.qc.Xi()),this.oe="ExternalCopy",this.dropOnto(b.F.C),this.qc=m,b.fa("ExternalObjectsDropped",b.selection),this.Wi(),b.Mi())}};
function Xf(a,b,c){if(a.qc===m){var d=a.b;if(!(d===m||d.Ja||d.Od)){var e=d.I;if(e!==m){e.La=!c;d.Yq=!c;a.Dh.set(d.F.C);for(var d=d.Ld.copyParts(b,d,h),c=Of(b),e=new E(c.x+c.width/2,c.y+c.height/2),g=a.Dh,c=new ja(R,vf),b=b.f;b.next();){var i=b.value;if((i instanceof U||i.constructor===R)&&i.canCopy()){var j=i.location,i=d.$(i);i.location=new E(g.x-(e.x-j.x),g.y-(e.y-j.y));i.Sh();c.add(i,new vf(i.location))}}for(d=d.f;d.next();)b=d.value,b instanceof W&&b.canCopy()&&c.add(b,new vf);a.qc=c;xf(a,c.Xi());
a.Db!==m&&(c=a.Db,d=lb(c.ib),c.gk(a.Dh.x-(d.x+d.width/2),a.Dh.y-(d.y+d.height/2)))}}}}
function Yf(){rf.call(this);this.Ow=100;this.kx=p;var a=new W;a.Rn="PATH";var b=new X;b.Oi=h;b.name="PATH";b.stroke="blue";a.add(b);b=new X;b.Jl="Standard";b.fill="blue";a.add(b);a.xd="Tool";this.dx=a;a=new U;b=new X;b.je="";b.Ua="Rectangle";b.fill=m;b.stroke="magenta";b.Oa=2;b.ka=new hb(1,1);a.add(b);a.ik=p;a.xd="Tool";this.bx=a;this.cx=b;a=new U;b=new X;b.je="";b.Ua="Rectangle";b.fill=m;b.stroke="magenta";b.Oa=2;b.ka=new hb(1,1);a.add(b);a.ik=p;a.xd="Tool";this.ex=a;this.fx=b;this.Mw=this.Lw=this.Iw=
this.Hw=this.Jw=m;this.Os=h;this.jE=new ja(Q,"boolean");this.Uz=this.ax=m}v.H("LinkingBaseTool",Yf);v.na(Yf,rf);Yf.prototype.doStop=Yf.prototype.Ii=function(){this.sf=this.Re=this.rf=this.Qe=this.Eb=m;this.dv.clear();this.le=m};v.a(Yf,"portGravity",Yf.prototype.GC);v.defineProperty(Yf,{GC:"portGravity"},s("Ow"),function(a){this.Ow!==a&&(t&&v.e(a,"number",Yf,"portGravity"),this.Ow=a)});v.a(Yf,"validUnconnectedLinks",Yf.prototype.Wn);
v.defineProperty(Yf,{Wn:"validUnconnectedLinks"},s("kx"),function(a){this.kx!==a&&(t&&v.e(a,"boolean",Yf,"validUnconnectedLinks"),this.kx=a)});v.a(Yf,"temporaryLink",Yf.prototype.dh);v.defineProperty(Yf,{dh:"temporaryLink"},s("dx"),function(a){this.dx!==a&&(t&&v.c(a,W,Yf,"temporaryLink"),this.dx=a)});v.a(Yf,"temporaryFromNode",Yf.prototype.me);v.defineProperty(Yf,{me:"temporaryFromNode"},s("bx"),function(a){this.bx!==a&&(t&&v.c(a,U,Yf,"temporaryFromNode"),this.bx=a)});v.a(Yf,"temporaryFromPort",Yf.prototype.Hl);
v.defineProperty(Yf,{Hl:"temporaryFromPort"},s("cx"),function(a){this.cx!==a&&(t&&v.c(a,Q,Yf,"temporaryFromPort"),this.cx=a)});v.a(Yf,"temporaryToNode",Yf.prototype.ne);v.defineProperty(Yf,{ne:"temporaryToNode"},s("ex"),function(a){this.ex!==a&&(t&&v.c(a,U,Yf,"temporaryToNode"),this.ex=a)});v.a(Yf,"temporaryToPort",Yf.prototype.Il);v.defineProperty(Yf,{Il:"temporaryToPort"},s("fx"),function(a){this.fx!==a&&(t&&v.c(a,Q,Yf,"temporaryToPort"),this.fx=a)});v.a(Yf,"originalLink",Yf.prototype.Eb);
v.defineProperty(Yf,{Eb:"originalLink"},s("Jw"),function(a){this.Jw!==a&&(t&&a!==m&&v.c(a,W,Yf,"originalLink"),this.Jw=a)});v.a(Yf,"originalFromNode",Yf.prototype.Qe);v.defineProperty(Yf,{Qe:"originalFromNode"},s("Hw"),function(a){this.Hw!==a&&(t&&a!==m&&v.c(a,U,Yf,"originalFromNode"),this.Hw=a)});v.a(Yf,"originalFromPort",Yf.prototype.rf);v.defineProperty(Yf,{rf:"originalFromPort"},s("Iw"),function(a){this.Iw!==a&&(t&&a!==m&&v.c(a,Q,Yf,"originalFromPort"),this.Iw=a)});v.a(Yf,"originalToNode",Yf.prototype.Re);
v.defineProperty(Yf,{Re:"originalToNode"},s("Lw"),function(a){this.Lw!==a&&(t&&a!==m&&v.c(a,U,Yf,"originalToNode"),this.Lw=a)});v.a(Yf,"originalToPort",Yf.prototype.sf);v.defineProperty(Yf,{sf:"originalToPort"},s("Mw"),function(a){this.Mw!==a&&(t&&a!==m&&v.c(a,Q,Yf,"originalToPort"),this.Mw=a)});v.m(Yf,{wd:"isForwards"},s("Os"));v.m(Yf,{dv:"validPortsCache"},s("jE"));v.a(Yf,"targetPort",Yf.prototype.le);
v.defineProperty(Yf,{le:"targetPort"},s("ax"),function(a){this.ax!==a&&(t&&a!==m&&v.c(a,Q,Yf,"targetPort"),this.ax=a)});Yf.prototype.copyPortProperties=Yf.prototype.YH=function(a,b,c,d,e){a===m||(b===m||c===m||d===m)||(d.ka=b.oa.size,e?(d.Xa=b.Xa,d.lk=b.lk):(d.Va=b.Va,d.ck=b.ck),c.of=ec,c.location=b.ub(ec),d.Ka=b.pn(),c.kf())};Yf.prototype.setNoTargetPortProperties=Yf.prototype.hK=function(a,b){b!==m&&(b.ka=new hb(1,1),b.Va=Ub,b.Xa=Ub);a!==m&&(a.location=this.b.F.C)};
Yf.prototype.doMouseMove=Yf.prototype.Sg=function(){if(this.Q){var a=this.b;if(a!==m){this.le=this.findTargetPort(this.wd);if(this.le!==m){var b=this.le.T;if(b instanceof U){this.wd?this.copyPortProperties(b,this.le,this.ne,this.Il,h):this.copyPortProperties(b,this.le,this.me,this.Hl,p);qf(a);return}}this.wd?this.setNoTargetPortProperties(this.ne,this.Il):this.setNoTargetPortProperties(this.me,this.Hl);qf(a)}}};
Yf.prototype.findValidLinkablePort=Yf.prototype.MI=function(a,b){if(a===m)return m;var c=a.T;if(!(c instanceof U))return m;for(;a!==m;){var d=b?a.Xy:a.Zx;if(d===h&&(a.je!==m||a instanceof U)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===p)break;a=a.V}return m};
Yf.prototype.findTargetPort=Yf.prototype.HI=function(a){for(var b=this.b,c=b.F.C,d=this.GC,e=this,g=b.nn(c,d,function(b){return e.findValidLinkablePort(b,a)},m),b=d*d,d=m,g=g.f;g.next();){var i=g.value,j=i.T;if(j instanceof U){var k=i.ub(ec),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;l<b&&(k=this.dv.$(i),k!==m?k&&(d=i,b=l):a&&this.isValidLink(this.Qe,this.rf,j,i)||!a&&this.isValidLink(j,i,this.Re,this.sf)?(this.dv.add(i,h),d=i,b=l):this.dv.add(i,p))}}return d!==m&&(c=d.T,c instanceof U&&(c.sa===m||c.sa.bl))?d:
m};Yf.prototype.isValidFrom=Yf.prototype.oJ=function(a,b){if(a===m||b===m)return this.Wn;if(this.b.pa===this&&(a.sa!==m&&!a.sa.bl||b.Zx!==h))return p;var c=b.JB;if(Infinity>c){if(this.Eb!==m&&a===this.Qe&&b===this.rf)return h;var d=b.je;d===m&&(d="");if(a.Wx(d).count>=c)return p}return h};
Yf.prototype.isValidTo=Yf.prototype.rJ=function(a,b){if(a===m||b===m)return this.Wn;if(this.b.pa===this&&(a.sa!==m&&!a.sa.bl||b.Xy!==h))return p;var c=b.sD;if(Infinity>c){if(this.Eb!==m&&a===this.Re&&b===this.sf)return h;var d=b.je;d===m&&(d="");if(a.Wx(d).count>=c)return p}return h};Yf.prototype.isInSameNode=Yf.prototype.kJ=function(a,b){if(a===m||b===m)return p;if(a===b)return h;var c=a.T,d=b.T;return c!==m&&c===d};
Yf.prototype.isLinked=Yf.prototype.mJ=function(a,b){if(a===m||b===m)return p;var c=a.T;if(!(c instanceof U))return p;var d=a.je;d===m&&(d="");var e=b.T;if(!(e instanceof U))return p;var g=b.je;g===m&&(g="");for(e=e.hf(g);e.next();)if(g=e.value,g.da===c&&g.Vg===d)return h;return p};
Yf.prototype.isValidLink=Yf.prototype.pJ=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==m&&d!==m&&((!b.IB||!d.rD)&&this.isInSameNode(b,d)||(!b.HB||!d.qD)&&this.isLinked(b,d))||this.Eb!==m&&(a!==m&&a.tl(this.Eb)||c!==m&&c.tl(this.Eb))||a!==m&&c!==m&&(a.data===m&&c.data!==m||a.data!==m&&c.data===m)||!Zf(this,a,c,this.Eb)?p:this.sy!==m?this.sy(a,b,c,d,this.Eb):h};
function Zf(a,b,c,d){if(b===m||c===m)return p;var e=a.b.FD;if(e!==$f){if(e===ag){for(e=c.ge;e.next();){var g=e.value;if(g!==d&&g.ga===c)return p}return!bg(a,b,c,d)}if(e===cg){for(e=b.ge;e.next();)if(g=e.value,g!==d&&g.da===b)return p;return!bg(a,b,c,d)}if(e===dg)return b===c?a=h:(e=new ka(U),e.add(c),a=eg(a,e,b,c,d)),!a;if(e===fg)return!bg(a,b,c,d);if(e===hg)return b===c?a=h:(e=new ka(U),e.add(c),a=ig(a,e,b,c,d)),!a}return h}
function bg(a,b,c,d){if(b===c)return h;if(b===m||c===m)return p;for(var e=b.ge;e.next();){var g=e.value;if(g!==d&&g.ga===b&&(g=g.da,g!==b&&bg(a,g,c,d)))return h}return p}function eg(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return p;b.add(c);for(var g=c.ge;g.next();){var i=g.value;if(i!==e&&i.ga===c&&(i=i.da,i!==c&&eg(a,b,i,d,e)))return h}return p}
function ig(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return p;b.add(c);for(var g=c.ge;g.next();){var i=g.value;if(i!==e){var j=i.da,i=i.ga,j=j===c?i:j;if(j!==c&&ig(a,b,j,d,e))return h}}return p}v.a(Yf,"linkValidation",Yf.prototype.sy);v.defineProperty(Yf,{sy:"linkValidation"},s("Uz"),function(a){a!==m&&v.e(a,"function",Yf,"linkValidation");this.Uz=a});function pa(){Yf.call(this);this.name="Linking";this.Kv={};this.Jv=m;this.O=jg;this.Ww=this.Vw=m}v.H("LinkingTool",pa);v.na(pa,Yf);
var jg;pa.Either=jg=v.l(pa,"Either",0);var kg;pa.ForwardsOnly=kg=v.l(pa,"ForwardsOnly",0);var lg;pa.BackwardsOnly=lg=v.l(pa,"BackwardsOnly",0);v.a(pa,"archetypeLinkData",pa.prototype.SA);v.defineProperty(pa,{SA:"archetypeLinkData"},s("Kv"),function(a){this.Kv!==a&&(a!==m&&v.c(a,Object,pa,"archetypeLinkData"),this.Kv=a)});v.a(pa,"archetypeLabelNodeData",pa.prototype.RA);
v.defineProperty(pa,{RA:"archetypeLabelNodeData"},s("Jv"),function(a){if(this.Jv!==a){a!==m&&v.c(a,Object,pa,"archetypeLabelNodeData");var b=this.b;b!==m&&(b=b.I,b!==m&&!(a instanceof U)&&!b.my(a)&&v.g("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a));this.Jv=a}});v.a(pa,"direction",pa.prototype.direction);
v.defineProperty(pa,{direction:"direction"},s("O"),function(a){this.O!==a&&(t&&v.Sa(a,pa,pa,"direction"),this.O=a)});v.a(pa,"startObject",pa.prototype.Ry);v.defineProperty(pa,{Ry:"startObject"},s("Vw"),function(a){this.Vw!==a&&(t&&a!==m&&v.c(a,Q,pa,"startObject"),this.Vw=a)});v.m(pa,{$u:"startPort"},s("Ww"));
pa.prototype.canStart=pa.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||(a.Ja||a.Od)||!a.bl)return p;var b=a.I;return b===m||!(b instanceof P)||!a.F.left||a.pa!==this&&!this.isBeyondDragSize()?p:this.findLinkablePort()!==m};
pa.prototype.findLinkablePort=pa.prototype.EI=function(){var a=this.b;if(a===m)return m;var b=this.Ry;b===m&&(b=a.Yc(a.ec.C,m,m));if(b===m||!(b.T instanceof U))return m;var c=this.direction;if(c===jg||c===kg)if(a=this.findValidLinkablePort(b,p),a!==m)return this.Os=h,a;if(c===jg||c===lg)if(a=this.findValidLinkablePort(b,h),a!==m)return this.Os=p,a;return m};
pa.prototype.doActivate=pa.prototype.Rh=function(){var a=this.b;if(a!==m&&(this.$u===m&&(this.Ww=this.findLinkablePort()),this.$u!==m)){this.Gb(this.name);a.Cc=h;a.rc="hand";a.add(this.me);a.add(this.ne);if(this.wd){this.rf=this.$u;var b=this.rf.T;b instanceof U&&(this.Qe=b);this.copyPortProperties(this.Qe,this.rf,this.me,this.Hl,p)}else this.sf=this.$u,b=this.sf.T,b instanceof U&&(this.Re=b),this.copyPortProperties(this.Re,this.sf,this.ne,this.Il,h);this.dh&&(this.me!==m&&(this.dh.da=this.me),this.ne!==
m&&(this.dh.ga=this.ne),a.add(this.dh));this.Q=h}};pa.prototype.doDeactivate=pa.prototype.ak=function(){this.Q=p;var a=this.b;a!==m&&(a.remove(this.dh),a.remove(this.me),a.remove(this.ne),a.Cc=p,a.rc="",this.Wi())};pa.prototype.doStop=pa.prototype.Ii=function(){Yf.prototype.Ii.call(this);this.Ry=this.Ww=m};
pa.prototype.doMouseUp=pa.prototype.Je=function(){if(this.Q){var a=this.b;if(a===m)return;var b=this.oe=m,c=m,d=m,e=m,g=this.le=this.findTargetPort(this.wd),i=m;g!==m?(i=g.T,i instanceof U&&(this.wd?(this.Qe!==m&&(b=this.Qe,c=this.rf),d=i,e=g):(b=i,c=g,this.Re!==m&&(d=this.Re,e=this.sf)))):this.wd?this.Qe!==m&&this.Wn&&(b=this.Qe,c=this.rf):this.Re!==m&&this.Wn&&(d=this.Re,e=this.sf);if(b!==m||d!==m)b=this.insertLink(b,c,d,e),b!==m?(g===m&&(this.wd?b.fF=a.F.C:b.eF=a.F.C),a.Id&&a.select(b),this.oe=
this.name,a.fa("LinkDrawn",b)):a.I.$A()}this.stopTool()};
pa.prototype.insertLink=pa.prototype.eJ=function(a,b,c,d){var e=this.b;if(e===m)return m;var g=e.I;if(g===m||!(g instanceof P))return m;b===m&&(b=a);b=b.je;b===m&&(b="");d===m&&(d=c);var i=d.je;i===m&&(i="");d=this.SA;if(d instanceof W){if(of(d),g=d.copy(),g instanceof W)return g.da=a,g.Vg=b,g.ga=c,g.Zh=i,e.add(g),g}else if(d!==m&&(d=g.iB(d),d instanceof Object))return g.Xu(d,g.Xb(a.data)),g.Sr(d,b),g.Yu(d,g.Xb(c.data)),g.Ur(d,i),g.NA(d),a=this.RA,a!==m&&g.my(a)&&(a=g.dn(a),a instanceof Object&&(g.$t(a),
a=g.Xb(a),a!==f&&g.MA(d,a))),g=e.Ji(d);return m};function mg(){Yf.call(this);this.name="Relinking";var a=new X;a.Ua="Diamond";a.ka=new hb(8,8);a.fill="cyan";a.cursor="pointer";a.ah=0;this.Jz=a;a=new X;a.Ua="Diamond";a.ka=new hb(8,8);a.fill="cyan";a.cursor="pointer";a.ah=-1;this.DA=a;this.Ub=m;this.gA=new F}v.H("RelinkingTool",mg);v.na(mg,Yf);
mg.prototype.updateAdornments=mg.prototype.$h=function(a){if(a instanceof W){var b=m,c="RelinkFrom";if(a.Da){var d=a.Qn;d!==m&&(a.gb()&&a.canRelinkFrom()&&d.fk()&&d.oa.W())&&(b=a.hn(c),b===m&&(b=this.makeAdornment(d,p),b.hd=c),b!==m&&b.K());a.Pm(c,b)}else a.Bl(c);b=m;c="RelinkTo";a.Da?(d=a.Qn,d!==m&&(a.gb()&&a.canRelinkTo()&&d.fk()&&d.oa.W())&&(b=a.hn(c),b===m&&(b=this.makeAdornment(d,h),b.hd=c),b!==m&&b.K()),a.Pm(c,b)):a.Bl(c)}};
mg.prototype.makeAdornment=mg.prototype.ty=function(a,b){var c=new cf;c.type=ng;var d=b?this.NG:this.wF;d!==m&&c.add(d.copy());c.Hd=a;return c};v.defineProperty(mg,{wF:"fromHandleArchetype"},s("Jz"),function(a){a&&v.c(a,Q,mg,"fromHandleArchetype");this.Jz=a});v.defineProperty(mg,{NG:"toHandleArchetype"},s("DA"),function(a){a&&v.c(a,Q,mg,"toHandleArchetype");this.DA=a});v.m(mg,{handle:"handle"},s("Ub"));
mg.prototype.canStart=mg.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||(a.Ja||a.Od)||!a.zi)return p;var b=a.I;if(b===m||!(b instanceof P)||!a.F.left)return p;b=this.findToolHandleAt(a.ec.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.ec.C,"RelinkTo"));return b!==m};
mg.prototype.doActivate=mg.prototype.Rh=function(){var a=this.b;if(a!==m){var b=this.findToolHandleAt(a.ec.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.ec.C,"RelinkTo"));if(b!==m){var c=b.T;c instanceof cf&&c.Tm instanceof W&&(this.Ub=b,this.Gb(this.name),a.Cc=h,a.rc="hand",this.Os=c===m||"RelinkTo"===c.hd,this.Eb=c.Tm,this.rf=this.Eb.Bc,this.Qe=this.Eb.da,this.sf=this.Eb.md,this.Re=this.Eb.ga,this.gA=this.Eb.oa,a.add(this.me),a.add(this.ne),this.wd?this.copyPortProperties(this.Qe,this.rf,this.me,
this.Hl,h):this.copyPortProperties(this.Re,this.sf,this.ne,this.Il,p),this.Eb!==m&&0<this.Eb.Y&&(this.Qe===m&&(this.Hl!==m&&(this.Hl.ka=new hb(0,0)),this.me!==m&&(this.me.location=this.Eb.h(0))),this.Re===m&&(this.Il!==m&&(this.Il.ka=new hb(0,0)),this.ne!==m&&(this.ne.location=this.Eb.h(this.Eb.Y-1)))),this.dh!==m&&(this.me!==m&&(this.dh.da=this.me),this.ne!==m&&(this.dh.ga=this.ne),a.add(this.dh)),this.Q=h)}}};
mg.prototype.doDeactivate=mg.prototype.ak=function(){this.Q=p;var a=this.b;a!==m&&(a.remove(this.dh),a.remove(this.me),a.remove(this.ne),a.Cc=p,a.rc="",this.Wi())};mg.prototype.doStop=mg.prototype.Ii=function(){Yf.prototype.Ii.call(this);this.Ub=m};
mg.prototype.doMouseUp=mg.prototype.Je=function(){if(this.Q){var a=this.b;if(a===m)return;this.oe=m;var b=this.Qe,c=this.rf,d=this.Re,e=this.sf,g=this.Eb;this.le=this.findTargetPort(this.wd);if(this.le!==m){var i=this.le.T;i instanceof U&&(this.wd?(d=i,e=this.le):(b=i,c=this.le))}else this.Wn?this.wd?e=d=m:c=b=m:g=m;g!==m&&(this.reconnectLink(g,this.wd?d:b,this.wd?e:c,this.wd),this.le===m&&(this.wd?g.fF=a.F.C:g.eF=a.F.C,g.Nb()),a.Id&&(g.Da=h),this.oe=this.name,a.fa("LinkRelinked",g,this.wd?this.sf:
this.rf));og(this.Eb,this.gA)}this.stopTool()};mg.prototype.reconnectLink=mg.prototype.UJ=function(a,b,c,d){var e=this.b;if(e===m)return p;var g=b!==m?b.data:m,g=g!==m?e.I.Xb(g):f,c=c.je!==m?c.je:"",a=a.data;if(a!==m&&g!==f){b=e.I;if(b===m||!(b instanceof P))return p;d?(b.Yu(a,g),b.Ur(a,c)):(b.Xu(a,g),b.Sr(a,c))}else d?(this.Eb.ga=b,this.Eb.Zh=c):(this.Eb.da=b,this.Eb.Vg=c);return h};
function pg(){rf.call(this);this.name="LinkReshaping";var a=new X;a.Ua="Rectangle";a.ka=new hb(6,6);a.fill="cyan";this.sj=a;this.Kw=this.iA=this.Hv=this.Ub=m}v.H("LinkReshapingTool",pg);v.na(pg,rf);var qg;pg.None=qg=v.l(pg,"None",0);var rg;pg.Horizontal=rg=v.l(pg,"Horizontal",1);var sg;pg.Vertical=sg=v.l(pg,"Vertical",2);var tg;pg.All=tg=v.l(pg,"All",3);
pg.prototype.updateAdornments=pg.prototype.$h=function(a){if(a instanceof W){var b=m;if(a.Da){var c=a.path;c!==m&&(a.gb()&&a.canReshape()&&c.fk()&&c.oa.W())&&(b=a.hn(this.name),b===m&&(b=this.makeAdornment(c),b.hd=this.name),b!==m&&(b.location=a.position,b.K()));a.Pm(this.name,b)}else a.Bl(this.name)}};
pg.prototype.makeAdornment=pg.prototype.ty=function(a){var b=new cf;b.type=ng;var c=a.T,d=c.Y,e=ug(c);if(c.ib!==m&&2<d){for(var d=c.xu,g=c.py,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==m){j.ah=i;if(i!==d)if(i===d+1&&e){var k=c.h(d),l=c.h(d+1);Va(k.x,l.x)&&Va(k.y,l.y)&&(l=c.h(d-1));Va(k.x,l.x)?(j.Pn=sg,j.cursor="n-resize"):Va(k.y,l.y)&&(j.Pn=rg,j.cursor="w-resize")}else i===g-1&&e?(k=c.h(g-1),l=c.h(g),Va(k.x,l.x)&&Va(k.y,l.y)&&(k=c.h(g+1)),Va(k.x,l.x)?(j.Pn=sg,j.cursor="n-resize"):Va(k.y,
l.y)&&(j.Pn=rg,j.cursor="w-resize")):i!==g&&(j.Pn=tg,j.cursor="move");b.add(j)}}b.Hd=a}return b};pg.prototype.makeHandle=pg.prototype.YF=function(){var a=this.sr;return a===m?m:a.copy()};v.defineProperty(pg,{sr:"handleArchetype"},s("sj"),function(a){a&&v.c(a,Q,pg,"handleArchetype");this.sj=a});v.m(pg,{handle:"handle"},s("Ub"));v.m(pg,{Sm:"adornedLink"},s("Hv"));
pg.prototype.canStart=pg.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||a.Ja||!a.Xm?p:this.findToolHandleAt(a.ec.C,this.name)!==m};pg.prototype.doActivate=pg.prototype.Rh=function(){var a=this.b;if(a!==m&&(this.Ub=this.findToolHandleAt(a.ec.C,this.name),this.Ub!==m)){var b=this.Ub.T.Tm;b instanceof W&&(this.Hv=b,a.Cc=h,this.iA=b.h(this.Ub.ah),this.Kw=b.ib.copy(),this.Gb(this.name),this.Q=h)}};
pg.prototype.doDeactivate=pg.prototype.ak=function(){this.Wi();this.Kw=this.iA=this.Hv=this.Ub=m;var a=this.b;a!==m&&(a.Cc=p);this.Q=p};pg.prototype.doCancel=pg.prototype.Hi=function(){var a=this.Sm;a!==m&&(a.ib=this.Kw);this.stopTool()};pg.prototype.doMouseMove=pg.prototype.Sg=function(){var a=this.b;this.Q&&a!==m&&(a=this.computeReshape(a.F.C),this.reshape(a))};
pg.prototype.doMouseUp=pg.prototype.Je=function(){var a=this.b;if(this.Q&&a!==m){var b=this.computeReshape(a.F.C);this.reshape(b);b=this.Sm;b!==m&&(b.ib=this.Sm.ib);a.Mi();this.oe=this.name;a.fa("LinkReshaped",this.Sm)}this.stopTool()};
pg.prototype.reshape=pg.prototype.bK=function(a){var b=this.Sm;b.kk();var c=this.handle.ah,d=this.handle.Pn;if(ug(b))if(c===b.xu+1)c=b.xu+1,d==sg?(b.w(c,new E(b.h(c-1).x,a.y)),b.w(c+1,new E(b.h(c+2).x,a.y))):d==rg&&(b.w(c,new E(a.x,b.h(c-1).y)),b.w(c+1,new E(a.x,b.h(c+2).y)));else if(c===b.py-1)c=b.py-1,d===sg?(b.w(c-1,new E(b.h(c-2).x,a.y)),b.w(c,new E(b.h(c+1).x,a.y))):d===rg&&(b.w(c-1,new E(a.x,b.h(c-2).y)),b.w(c,new E(a.x,b.h(c+1).y)));else{var d=c,e=b.h(d),g=b.h(d-1),i=b.h(d+1);Va(g.x,e.x)&&
Va(e.y,i.y)?(Va(g.x,b.h(d-2).x)&&!Va(g.y,b.h(d-2).y)?(e=b.ib,e.gc(d,new E(a.x,g.y)),b.ib=e,c++,d++):b.w(d-1,new E(a.x,g.y)),Va(i.y,b.h(d+2).y)&&!Va(i.x,b.h(d+2).x)?(e=b.ib,e.gc(d+1,new E(i.x,a.y)),b.ib=e):b.w(d+1,new E(i.x,a.y))):Va(g.y,e.y)&&Va(e.x,i.x)?(Va(g.y,b.h(d-2).y)&&!Va(g.x,b.h(d-2).x)?(e=b.ib,e.gc(d,new E(g.x,a.y)),b.ib=e,c++,d++):b.w(d-1,new E(g.x,a.y)),Va(i.x,b.h(d+2).x)&&!Va(i.y,b.h(d+2).y)?(e=b.ib,e.gc(d+1,new E(a.x,i.y)),b.ib=e):b.w(d+1,new E(a.x,i.y))):Va(g.x,e.x)&&Va(e.x,i.x)?(Va(g.x,
b.h(d-2).x)&&!Va(g.y,b.h(d-2).y)?(e=b.ib,e.gc(d,new E(a.x,g.y)),b.ib=e,c++,d++):b.w(d-1,new E(a.x,g.y)),Va(i.x,b.h(d+2).x)&&!Va(i.y,b.h(d+2).y)?(e=b.ib,e.gc(d+1,new E(a.x,i.y)),b.ib=e):b.w(d+1,new E(a.x,i.y))):Va(g.y,e.y)&&Va(e.y,i.y)&&(Va(g.y,b.h(d-2).y)&&!Va(g.x,b.h(d-2).x)?(e=b.ib,e.gc(d,new E(g.x,a.y)),b.ib=e,c++,d++):b.w(d-1,new E(g.x,a.y)),Va(i.y,b.h(d+2).y)&&!Va(i.x,b.h(d+2).x)?(e=b.ib,e.gc(d+1,new E(i.x,a.y)),b.ib=e):b.w(d+1,new E(i.x,a.y)));b.w(c,a.copy())}else b.w(c,a.copy());b.Nh()};
pg.prototype.computeReshape=pg.prototype.SH=function(a){var b=this.Sm,c=this.handle.ah;switch(this.handle.Pn){case tg:return a;case sg:return b=b.h(c),new E(b.x,a.y);case rg:return b=b.h(c),new E(a.x,b.y);default:case qg:return b.h(c)}};
function Bg(){rf.call(this);this.name="Resizing";this.qd=(new hb(1,1)).freeze();this.ni=(new hb(9999,9999)).freeze();this.bi=(new hb(NaN,NaN)).freeze();this.Hk=p;this.ua=m;var a=new X;a.yi=ec;a.Ua="Rectangle";a.ka=new hb(6,6);a.fill="cyan";a.stroke="black";a.Oa=1;a.cursor="pointer";this.sj=a;this.Ub=m;this.Up=0;this.aE=new F;this.Gw=new hb;this.hA=new E;this.gw=new hb(0,0);this.fw=new hb(Infinity,Infinity);this.ew=new hb(1,1)}v.H("ResizingTool",Bg);v.na(Bg,rf);
Bg.prototype.updateAdornments=Bg.prototype.$h=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Da){var c=a.uG;if(c!==m&&(a.gb()&&a.canResize()&&c.fk()&&c.oa.W())&&(b=a.hn(this.name),b===m&&(b=this.makeAdornment(c),b.hd=this.name),b!==m)){var d=c.pn();b.Ka=d;b.location=c.ub(Xb);var e=b.placeholder;if(e!==m){var g=c.pl(),c=c.qa;e.ka=new hb(c.width*g,c.height*g)}Gg(this,b,d)}a.Pm(this.name,b)}else a.Bl(this.name)}};
Bg.prototype.makeAdornment=Bg.prototype.ty=function(a){var b=m,b=a.T.SC;if(b===m){b=new cf;b.type=Hg;var c=new Ig;c.Oi=h;b.add(c);b.add(this.makeHandle(a,Xb));b.add(this.makeHandle(a,dc));b.add(this.makeHandle(a,nc));b.add(this.makeHandle(a,fc));b.add(this.makeHandle(a,oc));b.add(this.makeHandle(a,qc));b.add(this.makeHandle(a,sc));b.add(this.makeHandle(a,pc))}else if(of(b),b=b.copy(),!(b instanceof cf))return m;b.Hd=a;return b};
Bg.prototype.makeHandle=Bg.prototype.YF=function(a,b){var c=this.sr;if(c===m)return m;c=c.copy();c.lb=b;return c};
function Gg(a,b,c){if(b!==m)if(!Tb(b.lb)&&""!==b.cursor)a:{a=b.lb;Sb(a)&&(a=ec);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof w)for(b=b.elements;b.next();)Gg(a,b.value,c)}
v.defineProperty(Bg,{sr:"handleArchetype"},s("sj"),function(a){a&&v.c(a,Q,Bg,"handleArchetype");this.sj=a});v.m(Bg,{handle:"handle"},s("Ub"));v.m(Bg,{Hd:"adornedObject"},s("ua"));Bg.prototype.canStart=Bg.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||a.Ja||!a.Ym||!a.F.left?p:this.findToolHandleAt(a.ec.C,this.name)!==m?h:p};
Bg.prototype.doActivate=Bg.prototype.Rh=function(){var a=this.b;a!==m&&(this.Ub=this.findToolHandleAt(a.ec.C,this.name),this.Ub!==m&&(this.ua=this.Ub.T.Hd,this.Up=this.ua.Ka,this.aE.set(this.ua.qa),this.hA.set(this.ua.T.location),this.Gw.set(this.ua.ka),this.ew=this.computeCellSize(),this.gw=this.computeMinSize(),this.fw=this.computeMaxSize(),a.Cc=h,this.Gb(this.name),this.Q=h))};Bg.prototype.doDeactivate=Bg.prototype.ak=function(){var a=this.b;a!==m&&(this.Wi(),this.ua=this.Ub=m,this.Q=a.Cc=p)};
Bg.prototype.doCancel=Bg.prototype.Hi=function(){this.ua.ka=this.Gw;this.ua.T.location=this.hA;this.stopTool()};Bg.prototype.doMouseMove=Bg.prototype.Sg=function(){var a=this.b;if(this.Q&&a!==m){var b=this.gw,c=this.fw,d=this.ew,e=this.ua.MB(a.F.C),g=this.ua.on;g===Jg&&(g=this.ua.va.Ib);b=this.computeResize(e,this.Ub.lb,b,c,d,!(g===Kg||g===Lg||a.F.shift));this.resize(b);Mg(a)}};
Bg.prototype.doMouseUp=Bg.prototype.Je=function(){var a=this.b;if(this.Q&&a!==m){var b=this.gw,c=this.fw,d=this.ew,e=this.ua.MB(a.F.C),g=this.ua.on;g===Jg&&(g=this.ua.va.Ib);b=this.computeResize(e,this.Ub.lb,b,c,d,!(g===Kg||g===Lg||a.F.shift));this.resize(b);a.Mi();this.oe=this.name;a.fa("PartResized",this.ua,this.Gw)}this.stopTool()};
Bg.prototype.resize=Bg.prototype.cK=function(a){var b=this.b;if(b!==m){var c=this.ua.T,d=c.position.copy(),e=this.ua.qa.copy(),g=this.ua.pn();360<=g?g-=360:0>g&&(g+=360);var i=Math.PI*g/180,j=Math.cos(i),i=Math.sin(i),k=a.width-e.width,e=a.height-e.height,l=90<g&&270>g?1:0;d.x+=(a.x+k*l)*j-(a.y+e*(0<g&&180>g?1:0))*i;d.y+=(a.x+k*(180<g&&360>g?1:0))*i+(a.y+e*l)*j;this.ua.ka=a.size;c.Sh();c.position=d;qf(b)}};
Bg.prototype.computeResize=Bg.prototype.TH=function(a,b,c,d,e,g){Sb(b)&&(b=ec);var i=this.ua.qa,j=i.x,k=i.y,l=i.x+i.width,n=i.y+i.height,r=1;if(!g){var r=i.width,q=i.height;0>=r&&(r=1);0>=q&&(q=1);r=q/r}a=md(a.x,a.y,j,k,e.width,e.height);e=i.copy();0>=b.x?0>=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.y=Math.max(a.y,n-d.height),e.y=Math.min(e.y,n-c.height),e.height=Math.max(n-e.y,c.height),g||(a=e.height/e.width,r<a?(e.height=r*e.width,e.y=n-e.height):
(e.width=e.height/r,e.x=l-e.width))):1<=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,r<a?e.height=r*e.width:(e.width=e.height/r,e.x=l-e.width))):(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=l-e.x,g||(e.height=r*e.width,e.y=k+0.5*(n-k-e.height))):1<=b.x?0>=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.y=Math.max(a.y,n-d.height),e.y=Math.min(e.y,
n-c.height),e.height=Math.max(n-e.y,c.height),g||(a=e.height/e.width,r<a?(e.height=r*e.width,e.y=n-e.height):e.width=e.height/r)):1<=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,r<a?e.height=r*e.width:e.width=e.height/r)):(e.width=Math.max(Math.min(a.x-j,d.width),c.width),g||(e.height=r*e.width,e.y=k+0.5*(n-k-e.height))):0>=b.y?(e.y=Math.max(a.y,n-d.height),e.y=Math.min(e.y,n-c.height),e.height=n-e.y,g||(e.width=
e.height/r,e.x=j+0.5*(l-j-e.width))):1<=b.y&&(e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(e.width=e.height/r,e.x=j+0.5*(l-j-e.width)));return e};Bg.prototype.computeMinSize=Bg.prototype.QH=function(){var a=this.ua.Qd.copy(),b=this.Qd;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Bg.prototype.computeMaxSize=Bg.prototype.PH=function(){var a=this.ua.yd.copy(),b=this.yd;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Bg.prototype.computeCellSize=Bg.prototype.NH=function(){var a=new hb(NaN,NaN),b=this.ua.T;if(b){var c=b.TC;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Yj;isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width);isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height);b=this.b;if((isNaN(a.width)||isNaN(a.height))&&b)c=b.Ob.be,c!==m&&c.vn&&(c=c.cy,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&
(!isNaN(c.height)&&0<c.height)&&(a.height=c.height)),b=b.Cu,b!==m&&(b.visible&&this.vn)&&(c=b.rr,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};v.a(Bg,"minSize",Bg.prototype.Qd);
v.defineProperty(Bg,{Qd:"minSize"},s("qd"),function(a){this.qd.u(a)||(t&&v.c(a,hb,Bg,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.qd.Pa(a))});v.a(Bg,"maxSize",Bg.prototype.yd);v.defineProperty(Bg,{yd:"maxSize"},s("ni"),function(a){this.ni.u(a)||(t&&v.c(a,hb,Bg,"maxSize"),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),this.ni.Pa(a))});v.a(Bg,"cellSize",Bg.prototype.Yj);
v.defineProperty(Bg,{Yj:"cellSize"},s("bi"),function(a){this.bi.u(a)||(t&&v.c(a,hb,Bg,"cellSize"),this.bi.Pa(a))});v.a(Bg,"isGridSnapEnabled",Bg.prototype.vn);v.defineProperty(Bg,{vn:"isGridSnapEnabled"},s("Hk"),function(a){this.Hk!==a&&(v.e(a,"boolean",Bg,"isGridSnapEnabled"),this.Hk=a)});
function Ng(){rf.call(this);this.name="Rotating";this.Uw=45;this.Tw=2;this.ua=m;var a=new X;a.Ua="Ellipse";a.ka=new hb(6,6);a.fill="yellow";a.stroke="black";a.Oa=1;a.cursor="pointer";this.sj=a;this.Ub=m;this.Up=0;this.mA=new E}v.H("RotatingTool",Ng);v.na(Ng,rf);
Ng.prototype.updateAdornments=Ng.prototype.$h=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Da){var c=a.yG;if(c!==m&&(a.gb()&&a.canRotate()&&c.fk()&&c.oa.W())&&(b=a.hn(this.name),b===m&&(b=this.makeAdornment(c),b.hd=this.name),b!==m)){b.Ka=c.pn();var d=m,e=m;c===a||c===a.vb?(d=a.vb,e=a.of):(d=c,e=ec);for(var g=d.qa,e=new E(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==m&&d!==c;)d.transform.wb(e),d=d.V;d=e.y;e=Math.max(e.x-c.qa.width,0);b.of=ec;b.location=c.ub(new K(1,0,50+e,d))}a.Pm(this.name,
b)}else a.Bl(this.name)}};Ng.prototype.makeAdornment=Ng.prototype.ty=function(a){var b=m,b=a.T.XC;if(b===m){b=new cf;b.type=Og;var c=this.sr;c!==m&&b.add(c.copy())}else if(of(b),b=b.copy(),!(b instanceof cf))return m;b.Hd=a;return b};v.defineProperty(Ng,{sr:"handleArchetype"},s("sj"),function(a){a&&v.c(a,Q,Ng,"handleArchetype");this.sj=a});v.m(Ng,{handle:"handle"},s("Ub"));v.m(Ng,{Hd:"adornedObject"},s("ua"));
Ng.prototype.canStart=Ng.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||a.Ja||!a.Zm||!a.F.left?p:this.findToolHandleAt(a.ec.C,this.name)!==m?h:p};Ng.prototype.doActivate=Ng.prototype.Rh=function(){var a=this.b;if(a!==m&&(this.Ub=this.findToolHandleAt(a.ec.C,this.name),this.Ub!==m)){this.ua=this.Ub.T.Hd;var b=this.ua.T,c=b.vb;this.mA=this.ua===b||this.ua===c?c.ub(b.of):this.ua.ub(ec);this.Up=this.ua.Ka;a.Cc=h;this.Gb(this.name);this.Q=h}};
Ng.prototype.doDeactivate=Ng.prototype.ak=function(){var a=this.b;a!==m&&(this.Wi(),this.ua=this.Ub=m,this.Q=a.Cc=p)};Ng.prototype.doCancel=Ng.prototype.Hi=function(){this.rotate(this.Up);this.stopTool()};Ng.prototype.doMouseMove=Ng.prototype.Sg=function(){var a=this.b;this.Q&&a!==m&&(a=this.computeRotate(a.F.C),this.rotate(a))};
Ng.prototype.doMouseUp=Ng.prototype.Je=function(){var a=this.b;if(this.Q&&a!==m){var b=this.computeRotate(a.F.C);this.rotate(b);a.Mi();this.oe=this.name;a.fa("PartRotated",this.ua,this.Up)}this.stopTool()};Ng.prototype.rotate=Ng.prototype.rotate=function(a){this.ua!==m&&(this.ua.Ka=a,qf(this.b))};
Ng.prototype.computeRotate=Ng.prototype.UH=function(a){var a=this.mA.Ph(a),b=this.ua.V;b&&(a-=b.pn(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.kD),180),c=Math.min(Math.abs(this.jD),b/2);!this.b.F.shift&&(0<b&&0<c)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};v.a(Ng,"snapAngleMultiple",Ng.prototype.kD);
v.defineProperty(Ng,{kD:"snapAngleMultiple"},s("Uw"),function(a){this.Uw!==a&&(t&&v.e(a,"number",Ng,"snapAngleMultiple"),this.Uw=a)});v.a(Ng,"snapAngleEpsilon",Ng.prototype.jD);v.defineProperty(Ng,{jD:"snapAngleEpsilon"},s("Tw"),function(a){this.Tw!==a&&(t&&v.e(a,"number",Ng,"snapAngleEpsilon"),this.Tw=a)});function Pg(){rf.call(this);this.name="ClickSelecting"}v.H("ClickSelectingTool",Pg);v.na(Pg,rf);
Pg.prototype.canStart=Pg.prototype.ff=function(){return!this.isEnabled||this.b===m||this.isBeyondDragSize()?p:h};Pg.prototype.doMouseUp=Pg.prototype.Je=function(){this.Q&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};function Qg(){rf.call(this);this.name="Action";this.Ol=m}v.H("ActionTool",Qg);v.na(Qg,rf);
Qg.prototype.canStart=Qg.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m)return p;var b=a.F,c=a.Yc(b.C,function(a){for(;a.V!==m;){if(a.Eu)return a;a=a.V}return m},function(a){return a.Eu});return c!==m?(this.Ol=c,a.Xl=a.Yc(b.C,m,m),h):p};Qg.prototype.doMouseDown=Qg.prototype.pu=function(){if(this.Q){var a=this.b.F,b=this.Ol;b!==m&&(a.ad=b,b.ox!==m&&b.ox(a,b))}else this.canStart()&&this.doActivate()};
Qg.prototype.doMouseMove=Qg.prototype.Sg=function(){if(this.Q){var a=this.b.F,b=this.Ol;b!==m&&(a.ad=b,b.px!==m&&b.px(a,b))}};Qg.prototype.doMouseUp=Qg.prototype.Je=function(){if(this.Q){var a=this.b,b=a.F,c=this.Ol;if(c===m)return;b.ad=c;c.qx!==m&&c.qx(b,c);this.isBeyondDragSize()||sf(c,b,a)}this.stopTool()};Qg.prototype.doCancel=Qg.prototype.Hi=function(){var a=this.b;if(a!==m){var a=a.F,b=this.Ol;if(b===m)return;a.ad=b;b.nx!==m&&b.nx(a,b)}this.stopTool()};
Qg.prototype.doStop=Qg.prototype.Ii=function(){this.Ol=m};function qa(){rf.call(this);this.name="ClickCreating";this.Lv=m;this.rw=h}v.H("ClickCreatingTool",qa);v.na(qa,rf);qa.prototype.canStart=qa.prototype.ff=function(){if(!this.isEnabled||this.vx===m)return p;var a=this.b;if(a===m||(a.Ja||a.Od)||!a.Vm||!a.F.left||this.isBeyondDragSize())return p;if(this.bC){if(2!==a.F.Ge)return p}else if(1!==a.F.Ge)return p;return a.pa!==this&&a.kr(a.F.C,h)!==m?p:h};
qa.prototype.doMouseUp=qa.prototype.Je=function(){var a=this.b;this.Q&&a!==m&&this.insertPart(a.F.C);this.stopTool()};qa.prototype.insertPart=qa.prototype.fJ=function(a){var b=this.b;if(b!==m){var c=this.vx;if(c!==m){this.Gb(this.name);var d=m;c instanceof U||c.constructor===R?(of(c),d=c.copy(),d instanceof R&&b.add(d)):c!==m&&(c=b.I.dn(c),c instanceof Object&&(b.I.$t(c),d=b.dg(c)));d instanceof R&&(d.location=a,b.Id&&b.select(d));b.Mi();this.oe=this.name;b.fa("PartCreated",d);this.Wi()}}};
v.a(qa,"archetypeNodeData",qa.prototype.vx);v.defineProperty(qa,{vx:"archetypeNodeData"},s("Lv"),function(a){this.Lv!==a&&(a!==m&&v.c(a,Object,qa,"archetypeNodeData"),this.Lv=a)});v.a(qa,"isDoubleClick",qa.prototype.bC);v.defineProperty(qa,{bC:"isDoubleClick"},s("rw"),function(a){this.rw!==a&&(v.e(a,"boolean",qa,"isDoubleClick"),this.rw=a)});
function Rg(){rf.call(this);this.name="ContextMenu";this.vz=m;this.Yz=new E;this.$l=m;if(v.Yw===h){this.$l=new cf;this.Xv=m;var a=this;this.EA=function(){a.stopTool()};if(v.yz===p){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 6px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();
return p},p);b.addEventListener("selectstart",function(a){a.preventDefault();return p},p);c.addEventListener("contextmenu",function(a){a.preventDefault();return p},p);document.body&&(document.body.appendChild(b),document.body.appendChild(c));v.ss=b;v.rs=c;v.yz=h}}}v.H("ContextMenuTool",Rg);v.na(Rg,rf);Rg.prototype.canStart=Rg.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||this.isBeyondDragSize()||!a.F.right?p:this.$l!==m||this.findObjectWithContextMenu()!==m?h:p};
Rg.prototype.doStart=Rg.prototype.Rx=function(){var a=this.b;a!==m&&this.Yz.set(a.ec.C)};Rg.prototype.doStop=Rg.prototype.Ii=function(){this.hideDefaultContextMenu();this.hideContextMenu()};Rg.prototype.findObjectWithContextMenu=Rg.prototype.FI=function(){var a=this.b;if(a===m)return m;var b=a.Yc(a.F.C,m,function(a){return!a.sa.Zc});if(b!==m){for(a=b;a!==m;){var c=a.contextMenu;if(c!==m)return a;a=a.V}if(this.$l!==m)return b.T}else if(c=a.contextMenu,c!==m)return a;return m};
Rg.prototype.doActivate=Rg.prototype.Rh=aa();Rg.prototype.doMouseDown=Rg.prototype.pu=function(){this.Q&&Sg(this,p)};Rg.prototype.doMouseUp=Rg.prototype.Je=function(){!this.Q&&this.canStart()&&(this.Q=h);Sg(this,h)};
function Sg(a,b){if(a.ae===m){a.standardMouseSelect();var c=a.findObjectWithContextMenu();if(c!==m){var d=c.contextMenu;d!==m?a.showContextMenu(d,c instanceof Q?c:m):a.showDefaultContextMenu()}else a.showDefaultContextMenu()}else c=a.b,d=c.Yc(c.F.C,m,m),d!==m&&d.Wh(a.ae)?(a.standardMouseClick(m,m),a.stopTool()):(a.stopTool(),b?c.pa.doMouseUp():c.pa.doMouseDown())}Rg.prototype.doMouseMove=Rg.prototype.Sg=function(){this.Q&&this.standardMouseOver()};
Rg.prototype.showContextMenu=Rg.prototype.iK=function(a,b){v.c(a,cf,Rg,"showContextMenu:contextmenu");b!==m&&v.c(b,Q,Rg,"showContextMenu:obj");var c=this.b;if(c!==m){a!==this.ae&&this.hideContextMenu();a.xd="Tool";a.ik=p;c.add(a);if(b!==m){var d=m,e=b.mr();e!==m&&(d=e.data);a.Hd=b;a.data=d}else a.data=c.I;a.Sh();this.positionContextMenu(a,b);this.ae=a;qf(c)}};
Rg.prototype.positionContextMenu=Rg.prototype.RJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.la,b=b.jb;c.x+d.width>b.right&&(c.x-=d.width+5);c.y+d.height>b.bottom&&(c.y-=d.height+5);a.position=c}};Rg.prototype.hideContextMenu=Rg.prototype.YI=function(){var a=this.b;a!==m&&this.ae!==m&&(this.ae.data=m,this.ae.Hd=m,a.remove(this.ae),this.ae=m,this.standardMouseOver(),qf(a))};
Rg.prototype.initializeDefaultButtons=Rg.prototype.bJ=function(){if(this.b===m)return m;var a=new A,b=this.b.Ld;a.add({text:"Copy",gf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",gf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",gf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",gf:function(a){b.pasteSelection(a.F.C)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",gf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",gf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",gf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",gf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",gf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Reset Zoom",gf:function(){b.resetZoom()},
visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",gf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",gf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",gf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});return a};
Rg.prototype.showDefaultContextMenu=Rg.prototype.jK=function(){var a=this.b;if(a!==m){this.Xv===m&&(this.Xv=this.initializeDefaultButtons());this.$l!==this.ae&&this.hideContextMenu();v.ss.innerHTML="";v.rs.addEventListener("click",this.EA,p);var b=this,c=document.createElement("ul");c.className="defaultCXul";v.ss.appendChild(c);c.innerHTML="";for(var d=this.Xv.f;d.next();){var e=d.value,g=e.text,i=e.visible;if("function"!==typeof i||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.RD=e.gf;j.addEventListener("click",function(c){this.RD(a);b.stopTool();c.preventDefault();return p},p);j.textContent=g;i.appendChild(j);c.appendChild(i)}}v.ss.style.display="block";v.rs.style.display="block";this.ae=this.$l}};Rg.prototype.hideDefaultContextMenu=Rg.prototype.ZI=function(){this.ae!==m&&this.ae===this.$l&&(v.ss.style.display="none",v.rs.style.display="none",v.rs.removeEventListener("click",this.EA,p),this.ae=m)};
v.a(Rg,"currentContextMenu",Rg.prototype.ae);v.defineProperty(Rg,{ae:"currentContextMenu"},s("vz"),ba("vz"));v.m(Rg,{HJ:"mouseDownPoint"},s("Yz"));function Tg(){rf.call(this);this.name="DragSelecting";this.am=175;this.Tz=p;var a=new R;a.xd="Tool";a.ik=p;var b=new X;b.name="Shape";b.Ua="Rectangle";b.fill=m;b.stroke="magenta";b.position=new E(0,0);a.add(b);this.Tl=a}v.H("DragSelectingTool",Tg);v.na(Tg,rf);
Tg.prototype.canStart=Tg.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||!a.Id)return p;var b=a.F;return!b.left||a.pa!==this&&(!this.isBeyondDragSize()||b.timestamp-a.ec.timestamp<this.nu||a.kr(b.C,h)!==m)?p:h};Tg.prototype.doActivate=Tg.prototype.Rh=function(){var a=this.b;a!==m&&(this.Q=h,a.Cc=h,a.La=h,a.add(this.$f))};Tg.prototype.doDeactivate=Tg.prototype.ak=function(){var a=this.b;a!==m&&(a.remove(this.$f),a.La=p,this.Q=a.Cc=p,qf(a))};
Tg.prototype.doMouseMove=Tg.prototype.Sg=function(){var a=this.b;if(a!==m&&this.Q&&this.$f!==m){var b=this.computeBoxBounds();this.$f.Ke("Shape").ka=b.size;this.$f.position=b.position;qf(a)}};Tg.prototype.doMouseUp=Tg.prototype.Je=function(){if(this.Q){var a=this.b;a.remove(this.$f);try{a.rc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.rc=""}}this.stopTool()};Tg.prototype.computeBoxBounds=Tg.prototype.MH=function(){var a=this.b;return a===m?new F(0,0,0,0):new F(a.ec.C,a.F.C)};
Tg.prototype.selectInRect=Tg.prototype.gK=function(a){var b=this.b;if(b!==m){var c=b.F;b.fa("ChangingSelection");a=b.ol(a,m,function(a){return a instanceof R&&a.Ax()},this.fC);if(c.Zj)if(c.shift)for(a=a.f;a.next();)c=a.value,c.Da&&(c.Da=p);else for(a=a.f;a.next();)c=a.value,c.Da=!c.Da;else{if(!c.shift){for(var d=new A(R),e=b.selection.f;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.f;d.next();)c=d.value,c.Da=p}for(a=a.f;a.next();)c=a.value,c.Da||(c.Da=h)}b.fa("ChangedSelection")}};
v.a(Tg,"delay",Tg.prototype.nu);v.defineProperty(Tg,{nu:"delay"},s("am"),ba("am"));v.a(Tg,"isPartialInclusion",Tg.prototype.fC);v.defineProperty(Tg,{fC:"isPartialInclusion"},s("Tz"),ba("Tz"));v.a(Tg,"box",Tg.prototype.$f);v.defineProperty(Tg,{$f:"box"},s("Tl"),ba("Tl"));function Ug(){rf.call(this);this.name="Panning";this.jA=new E;this.ai=p;var a=this;this.mD=function(){document.removeEventListener("scroll",a.mD,p);a.stopTool()}}v.H("PanningTool",Ug);v.na(Ug,rf);
Ug.prototype.canStart=Ug.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||!a.Ee&&!a.Fe||!a.F.left||a.pa!==this&&!this.isBeyondDragSize()?p:h};Ug.prototype.doActivate=Ug.prototype.Rh=function(){var a=this.b;a!==m&&(this.ai?(a.F.bubbles=h,document.addEventListener("scroll",this.mD,p)):(a.rc="move",a.Cc=h,this.jA=a.position),this.Q=h)};Ug.prototype.doDeactivate=Ug.prototype.ak=function(){var a=this.b;a!==m&&(a.rc="",this.Q=a.Cc=p)};
Ug.prototype.doCancel=Ug.prototype.Hi=function(){var a=this.b;a!==m&&(a.position=this.jA,a.Cc=p);this.stopTool()};Ug.prototype.doMouseMove=Ug.prototype.Sg=function(){var a=this.b;if(this.Q&&a)if(this.ai)a.F.bubbles=h;else{var b=a.position,c=a.ec.C,d=a.F.C,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.Ee||(e=b.x);a.Fe||(c=b.y);a.position=new E(e,c);a.update()}};v.a(Ug,"bubbles",Ug.prototype.bubbles);v.defineProperty(Ug,{bubbles:"bubbles"},s("ai"),ba("ai"));
function Vg(){rf.call(this);this.name="TextEditing";this.Yv=this.xz=this.gx=m;this.Xw=Wg;this.wi=m;this.$a=Xg;this.Ij=m}v.H("TextEditingTool",Vg);v.na(Vg,rf);var Yg;Vg.LostFocus=Yg=v.l(Vg,"LostFocus",0);var Zg;Vg.MouseDown=Zg=v.l(Vg,"MouseDown",1);var $g;Vg.Tab=$g=v.l(Vg,"Tab",2);var ah;Vg.Enter=ah=v.l(Vg,"Enter",3);Vg.SingleClick=v.l(Vg,"SingleClick",0);var Wg;Vg.SingleClickSelected=Wg=v.l(Vg,"SingleClickSelected",1);
var Xg=v.l(Vg,"StateNone",0),bh=v.l(Vg,"StateActive",1),ch=v.l(Vg,"StateEditing",2),dh=v.l(Vg,"StateEditing2",3),eh=v.l(Vg,"StateValidating",4),fh=v.l(Vg,"StateValidated",5);v.a(Vg,"textBlock",Vg.prototype.yf);v.defineProperty(Vg,{yf:"textBlock"},s("gx"),ba("gx"));v.a(Vg,"currentTextEditor",Vg.prototype.ag);v.defineProperty(Vg,{ag:"currentTextEditor"},s("xz"),ba("xz"));v.a(Vg,"defaultTextEditor",Vg.prototype.sB);v.defineProperty(Vg,{sB:"defaultTextEditor"},s("Yv"),ba("Yv"));v.a(Vg,"starting",Vg.prototype.lD);
v.defineProperty(Vg,{lD:"starting"},s("Xw"),function(a){this.Xw!==a&&(t&&v.Sa(a,Vg,Vg,"starting"),this.Xw=a)});Vg.prototype.canStart=Vg.prototype.ff=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||a.Ja||!a.F.left||this.isBeyondDragSize())return p;a=a.Yc(a.F.C,m,function(a){return a instanceof ma});if(!(a instanceof ma)||!a.qu)return p;a=a.T;return a===m||this.lD===Wg&&!a.Da?p:h};Vg.prototype.doStart=Vg.prototype.Rx=function(){!this.Q&&this.yf!==m&&this.doActivate()};
Vg.prototype.doActivate=Vg.prototype.Rh=function(){if(!this.Q){var a=this.b;if(a!==m){var b=this.yf;b===m&&(b=a.Yc(a.F.C,function(a){return a instanceof ma?a:m}),b=b instanceof ma?b:m);if(b!==m&&(this.yf=b,b.T!==m)){this.Q=h;this.$a=bh;this.Gb(this.name);var c=this.sB,d=p;b.Wy!==m&&(c=b.Wy);c!==m&&!c.kz&&(d=h);if(c===m){c=document.createElement("textarea");c.kz=h;this.Yv=c;var e=this.yf.copy();c.addEventListener("input",function(){e.text=this.value;gh(e,Infinity,Infinity);this.style.width=20+e.la.width*
this.MG+"px";this.rows=e.Mk},p);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==m)if(13==b)c.mx(ah);else{if(9==b)return c.mx($g),a.preventDefault(),p;27==b&&(c.doCancel(),c.b&&c.b.focus())}},p);c.addEventListener("focus",function(){var a=this.textEditingTool;a.$a===bh?a.$a=ch:a.$a===fh?a.$a=dh:a.$a===dh&&(a.$a=ch)},p)}if(c.kz){var g=b.ub(ec),i=a.position,j=a.scale,k=b.pl()*j,l=b.qa.width*k;hh(b,b.font);g=new E((g.x-i.x)*j,(g.y-i.y)*j);c.value=b.text;a.Qh.style.font=
b.font;c.style.font="inherit";c.style.fontSize=100*k+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.Mk;a.Qh.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.Qh.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.MG=k;if(d&&c.onActivate!==f)c.onActivate();this.ag=c;c.focus()}}}};
Vg.prototype.doCancel=Vg.prototype.Hi=function(){this.Ij!==m&&(this.ag.style.border=this.Ij,this.Ij=m);this.stopTool()};Vg.prototype.doMouseUp=Vg.prototype.Je=function(){!this.Q&&this.canStart()&&this.doActivate()};Vg.prototype.doMouseDown=Vg.prototype.pu=function(){this.Q&&this.mx(Zg)};
Vg.prototype.acceptText=Vg.prototype.mx=function(a){switch(a){case Zg:if(this.$a===fh||this.$a===dh)this.ag.focus();else if(this.$a===bh||this.$a===ch)this.$a=eh,mh(this);break;case Yg:case ah:case $g:if(ah===a&&this.gx.Fu===h)break;if(this.$a===bh||this.$a===ch)this.$a=eh,mh(this)}};
function mh(a){if(a.yf!==m&&a.ag!==m){var b=a.yf,c=a.yf.text,d=a.ag.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.yf,c,e)){a.$a=ch;b.hr!==m&&b.hr(a,c,e);a.Ij===m&&(a.Ij=a.ag.style.border,a.ag.style.border="3px solid red");a.ag.focus();return}a.$a=fh;c!==e&&(a.yf.text=e);a.oe=a.name;b=a.b;b!==m&&b.fa("TextEdited",a.yf,c);a.stopTool();b!==m&&b.focus()}a.Ij!==m&&(a.ag.style.border=a.Ij,a.Ij=m)}
Vg.prototype.doDeactivate=Vg.prototype.ak=function(){var a=this.b;if(a!==m){this.Q&&this.Wi();this.$a=Xg;this.yf=m;if(this.ag!==m){var b=this.ag;if(b.onDeactivate!==f)b.onDeactivate();b!==m&&a.Qh.removeChild(b)}this.Q=p}};Vg.prototype.isValidText=Vg.prototype.qJ=function(a,b,c){v.c(a,ma,Vg,"isValidText:textblock");var d=this.Yr;if(d!==m&&!d(a,b,c))return p;d=a.Yr;return d!==m&&!d(a,b,c)?p:h};v.a(Vg,"textValidation",Vg.prototype.Yr);
v.defineProperty(Vg,{Yr:"textValidation"},s("wi"),function(a){this.wi!==a&&(this.wi=a)});function af(){rf.call(this);this.name="ToolManager";this.Zz=new A(rf);this.$z=new A(rf);this.aA=new A(rf);this.Lz=this.Mz=1E3;this.zs=this.Vv=m;this.bA=uf}v.H("ToolManager",af);v.na(af,rf);var uf;af.WheelScroll=uf=v.l(af,"WheelScroll",0);var tf;af.WheelZoom=tf=v.l(af,"WheelZoom",1);v.a(af,"mouseWheelBehavior",af.prototype.wl);v.defineProperty(af,{wl:"mouseWheelBehavior"},s("bA"),ba("bA"));
af.prototype.initializeStandardTools=af.prototype.cJ=function(){this.IA=new Qg;this.MC=new mg;this.mC=new pg;this.VC=new Bg;this.ZC=new Ng;this.oC=new pa;this.be=new wf;this.AB=new Tg;this.EC=new Ug;this.eB=new Rg;this.bv=new Vg;this.aB=new qa;this.bB=new Pg};
af.prototype.doMouseDown=af.prototype.pu=function(){var a=this.b;if(a!==m){var b=a.ca;b.Cx&&0!==b.mk&&v.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ie.length,c=0;c<b;c++){var d=this.ie.Z(c);if(d.canStart()){a.pa=d;a.pa===d&&(d.Q||d.doActivate(),d.doMouseDown());return}}1===a.F.button&&(this.wl===uf?this.wl=tf:this.wl===tf&&(this.wl=uf));this.doActivate();this.standardWaitAfter(this.fy)}};
af.prototype.doMouseMove=af.prototype.Sg=function(){var a=this.b;if(a!==m){if(this.Q)for(var b=this.fg.length,c=0;c<b;c++){var d=this.fg.Z(c);if(d.canStart()){a.pa=d;a.pa===d&&(d.Q||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.Q?this.fy:this.WB)}};af.prototype.doCurrentObjectChanged=af.prototype.kF=function(a,b){var c=this.$j;c!==m&&!(b!==m&&(b===c||b.Wh(c)))&&this.hideToolTip()};
af.prototype.doWaitAfter=af.prototype.oF=function(){this.b&&this.b.ma&&(this.doMouseHover(),this.Q||this.doToolTip())};af.prototype.doMouseHover=af.prototype.jI=function(){var a=this.b;if(a!==m){var b=a.F;b.ad===m&&(b.ad=a.Yc(b.C,m,m));var c=b.ad;if(c!==m)for(;c!==m;){a=this.Q?c.Er:c.Fr;if(a!==m&&(a(b,c),b.ud))break;c=c.V}else a=this.Q?a.Er:a.Fr,a!==m&&a(b)}};
af.prototype.doToolTip=af.prototype.kI=function(){var a=this.b;if(a!==m){var b=a.F;b.ad===m&&(b.ad=a.Yc(b.C,m,m));b=b.ad;if(b!==m){if(!(b===this.$j||b.Wh(this.$j))){for(;b!==m;){a=b.as;if(a!==m){this.showToolTip(a,b);return}b=b.V}this.hideToolTip()}}else a=a.as,a!==m?this.showToolTip(a,m):this.hideToolTip()}};
af.prototype.showToolTip=af.prototype.kK=function(a,b){v.c(a,cf,af,"showToolTip:tooltip");b!==m&&v.c(b,Q,af,"showToolTip:obj");var c=this.b;if(c!==m){a!==this.$j&&this.hideToolTip();a.xd="Tool";a.ik=p;c.add(a);if(b!==m&&b!==this.zs){var d=m,e=b.T;e!==m&&(d=e.data);a.Hd=b;a.data=d}else b===m&&(a.data=c.I);if(b===m||b!==this.zs)a.Sh(),this.positionToolTip(a,b);this.Vv=a;this.zs=b;qf(c)}};
af.prototype.positionToolTip=af.prototype.SJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.la,b=b.jb;c.x+d.width>b.right&&(c.x-=d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};af.prototype.hideToolTip=af.prototype.$I=function(){if(this.$j!==m){var a=this.b;a!==m&&(this.$j.data=m,this.$j.Hd=m,a.remove(this.$j),this.zs=this.Vv=m,qf(a))}};v.m(af,{$j:"currentToolTip"},s("Vv"));
af.prototype.doMouseUp=af.prototype.Je=function(){this.cancelWaitAfter();if(this.Q){var a=this.b;if(a===m)return;for(var b=this.gg.length,c=0;c<b;c++){var d=this.gg.Z(c);if(d.canStart()){a.pa=d;a.pa===d&&(d.Q||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};af.prototype.doMouseWheel=af.prototype.lF=function(){this.standardMouseWheel()};af.prototype.doKeyDown=af.prototype.Px=function(){var a=this.b;a!==m&&a.Ld.doKeyDown()};
af.prototype.doKeyUp=af.prototype.Qx=function(){var a=this.b;a!==m&&a.Ld.doKeyUp()};af.prototype.doCancel=af.prototype.Hi=function(){zf!==m&&zf.doCancel();rf.prototype.Hi.call(this)};af.prototype.findTool=af.prototype.Le=function(a){v.e(a,"string",af,"findTool:name");for(var b=this.ie.length,c=0;c<b;c++){var d=this.ie.Z(c);if(d.name===a)return d}b=this.fg.length;for(c=0;c<b;c++)if(d=this.fg.Z(c),d.name===a)return d;b=this.gg.length;for(c=0;c<b;c++)if(d=this.gg.Z(c),d.name===a)return d;return m};
af.prototype.replaceTool=af.prototype.tG=function(a,b){v.e(a,"string",af,"replaceTool:name");b!==m&&(v.c(b,rf,af,"replaceTool:newtool"),b.b&&b.b!==this.b&&v.g("Cannot share tools between Diagrams: "+b.toString()),b.uf(this.b));for(var c=this.ie.length,d=0;d<c;d++){var e=this.ie.Z(d);if(e.name===a)return b!==m?this.ie.Wu(d,b):this.ie.Se(d),e}c=this.fg.length;for(d=0;d<c;d++)if(e=this.fg.Z(d),e.name===a)return b!==m?this.fg.Wu(d,b):this.fg.Se(d),e;c=this.gg.length;for(d=0;d<c;d++)if(e=this.gg.Z(d),
e.name===a)return b!==m?this.gg.Wu(d,b):this.gg.Se(d),e;return m};function nh(a,b,c,d){v.e(b,"string",af,"replaceStandardTool:name");v.c(d,A,af,"replaceStandardTool:list");c!==m&&(v.c(c,rf,af,"replaceStandardTool:newtool"),c.b&&c.b!==a.b&&v.g("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.uf(a.b));a.Le(b)?a.tG(b,c):c!==m&&d.add(c)}v.m(af,{ie:"mouseDownTools"},s("Zz"));v.m(af,{fg:"mouseMoveTools"},s("$z"));v.m(af,{gg:"mouseUpTools"},s("aA"));v.a(af,"hoverDelay",af.prototype.WB);
v.defineProperty(af,{WB:"hoverDelay"},s("Mz"),ba("Mz"));v.a(af,"holdDelay",af.prototype.fy);v.defineProperty(af,{fy:"holdDelay"},s("Lz"),ba("Lz"));v.a(af,"actionTool",af.prototype.IA);v.defineProperty(af,{IA:"actionTool"},function(){return this.Le("Action")},function(a){nh(this,"Action",a,this.ie)});v.a(af,"relinkingTool",af.prototype.MC);v.defineProperty(af,{MC:"relinkingTool"},function(){return this.Le("Relinking")},function(a){nh(this,"Relinking",a,this.ie)});v.a(af,"linkReshapingTool",af.prototype.mC);
v.defineProperty(af,{mC:"linkReshapingTool"},function(){return this.Le("LinkReshaping")},function(a){nh(this,"LinkReshaping",a,this.ie)});v.a(af,"resizingTool",af.prototype.VC);v.defineProperty(af,{VC:"resizingTool"},function(){return this.Le("Resizing")},function(a){nh(this,"Resizing",a,this.ie)});v.a(af,"rotatingTool",af.prototype.ZC);v.defineProperty(af,{ZC:"rotatingTool"},function(){return this.Le("Rotating")},function(a){nh(this,"Rotating",a,this.ie)});v.a(af,"linkingTool",af.prototype.oC);
v.defineProperty(af,{oC:"linkingTool"},function(){return this.Le("Linking")},function(a){nh(this,"Linking",a,this.fg)});v.a(af,"draggingTool",af.prototype.be);v.defineProperty(af,{be:"draggingTool"},function(){return this.Le("Dragging")},function(a){nh(this,"Dragging",a,this.fg)});v.a(af,"dragSelectingTool",af.prototype.AB);v.defineProperty(af,{AB:"dragSelectingTool"},function(){return this.Le("DragSelecting")},function(a){nh(this,"DragSelecting",a,this.fg)});v.a(af,"panningTool",af.prototype.EC);
v.defineProperty(af,{EC:"panningTool"},function(){return this.Le("Panning")},function(a){nh(this,"Panning",a,this.fg)});v.a(af,"contextMenuTool",af.prototype.eB);v.defineProperty(af,{eB:"contextMenuTool"},function(){return this.Le("ContextMenu")},function(a){nh(this,"ContextMenu",a,this.gg)});v.a(af,"textEditingTool",af.prototype.bv);v.defineProperty(af,{bv:"textEditingTool"},function(){return this.Le("TextEditing")},function(a){nh(this,"TextEditing",a,this.gg)});v.a(af,"clickCreatingTool",af.prototype.aB);
v.defineProperty(af,{aB:"clickCreatingTool"},function(){return this.Le("ClickCreating")},function(a){nh(this,"ClickCreating",a,this.gg)});v.a(af,"clickSelectingTool",af.prototype.bB);v.defineProperty(af,{bB:"clickSelectingTool"},function(){return this.Le("ClickSelecting")},function(a){nh(this,"ClickSelecting",a,this.gg)});
function Ye(){v.Hb(this);this.L=m;this.Cb=new A(R);this.qb="";this.tw=p;this.Ng=this.hj=this.gj=this.fj=this.ej=this.cj=this.bj=this.dj=this.aj=this.jj=this.$i=this.ij=this.Zi=this.Yi=h;this.bE=[]}v.H("Layer",Ye);Ye.prototype.uf=ba("L");
Ye.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.Cb.f;j.next();){var k=j.value.constructor;k===R?c++:k===U?d++:k===V?e++:k===W?g++:k===cf&&i++}j="";0<c&&(j+=c+" Parts ");0<d&&(j+=d+" Nodes ");0<e&&(j+=e+" Groups ");0<g&&(j+=g+" Links ");0<i&&(j+=i+" Adornments ");if(1<a)for(c=this.Cb.f;c.next();)d=c.value,j+="\n    "+d.toString(a-1),(e=d.data)&&v.fc(e)&&(j+=" #"+v.fc(e)),d instanceof U?j+=" "+ye(e):d instanceof W&&(j+=
" "+ye(d.da)+" "+ye(d.ga));return b+" "+this.Cb.count+": "+j};Ye.prototype.findObjectAt=Ye.prototype.Yc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.Cb,e=p;this.b.jb.ea(a)&&(e=h);for(var g=new E,i=d.length;i--;){var j=d.Z(i);if(!(e===h&&j.Xe===p)&&j.gb()&&(cb(g.set(a),j.Zd),j=j.Yc(g,b,c),j!==m&&(b!==m&&(j=b(j)),j&&(c===m||c(j)))))return j}return m};
Ye.prototype.findObjectsAt=Ye.prototype.mn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);!(d instanceof A)&&!(d instanceof ka)&&(d=new A(Q));var e=this.Cb,g=p;this.b.jb.ea(a)&&(g=h);for(var i=new E,j=e.length;j--;){var k=e.Z(j);!(g===h&&k.Xe===p)&&k.gb()&&(cb(i.set(a),k.Zd),k.mn(i,b,c,d)&&(b!==m&&(k=b(k)),k&&(c===m||c(k))&&d.add(k)))}return d};
Ye.prototype.findObjectsIn=Ye.prototype.ol=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=p);!(e instanceof A)&&!(e instanceof ka)&&(e=new A(Q));var g=this.Cb,i=p;this.b.jb.gl(a)&&(i=h);for(var j=g.length;j--;){var k=g.Z(j);!(i===h&&k.Xe===p)&&(k.gb()&&k.ol(a,b,c,d,e))&&(b!==m&&(k=b(k)),k&&(c===m||c(k))&&e.add(k))}return e};
Ye.prototype.findObjectsNear=Ye.prototype.nn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof A)&&!(e instanceof ka)&&(e=new A(Q));var g=this.Cb,i=p;this.b.jb.ea(a)&&(i=h);for(var j=new E,k=g.length;k--;){var l=g.j[k];if(!(i===h&&l.Xe===p)&&l.gb()){cb(j.set(a),l.Zd);var n=new E(a.x+b,a.y);cb(n,l.Zd);l.nn(j,n,c,d,e)&&(c!==m&&(l=c(l)),l&&(d===m||d(l))&&e.add(l))}}return e};da=Ye.prototype;
da.cg=function(a,b){if(this.visible){var c=this.Cb,d=b.jb,e=[];if(b.mm)for(var g=c.length,i=0;i<g;i++){var j=c.j[i];j.$D=i;if(j instanceof W&&((j.ti===If||j.ti===oh)&&e.push(j),j.Zk===p))continue;j.oa.Me(d)?(j.cg(a,b),j.Xe=h):j.Xe=p}else{g=c.length;for(i=0;i<g;i++)if(j=c.j[i],j.Xe){if(j instanceof W&&((j.ti===If||j.ti===oh)&&e.push(j),j.Zk===p))continue;j.cg(a,b)}}this.bE=e}};da.d=function(a,b,c,d,e){var g=this.b;g!==m&&g.ke(ve,a,this,b,c,d,e)};
da.dk=function(a,b,c){var d=this.Cb;b.s=this;if(a>=d.count)a=d.count;else if(d.Z(a)===b)return-1;d.gc(a,b);b.tr();d=this.b;d!==m&&(c?ph(d):d.dk(b));b instanceof V&&this.Zu(b);return a};da.vd=function(a,b,c){var d=this.Cb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.Z(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.ur();d.Se(a);d=this.b;d!==m&&(c?ph(d):d.vd(b));b.s=m;return a};
da.Zu=function(a){for(;a!==m;){if(a.sa===this){var b=a;if(b.hc.next()){for(var c=-1,d=-1,e=this.Cb.j,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b&&(c=i,0<=d))break;if(0>d&&j.Ta===b&&(d=i,0<=c))break}0>d&&(d=0);d<c&&(e=this.Cb,e.Se(c),e.gc(d,b))}}a=a.Ta}};da.clear=function(){for(var a=this.Cb.zf(),b=a.length,c=0;c<b;c++)a[c].Xe=p,this.vd(-1,a[c])};v.m(Ye,{Si:"parts"},function(){return this.Cb.f});v.m(Ye,{NJ:"partsBackwards"},function(){return this.Cb.wn});v.m(Ye,{b:"diagram"},s("L"));
v.a(Ye,"name",Ye.prototype.name);v.defineProperty(Ye,{name:"name"},s("qb"),function(a){v.e(a,"string",Ye,"name");var b=this.qb;if(b!==a){var c=this.b;if(c!==m){""===b&&v.g("Cannot rename default Layer to: "+a);for(c=c.zr;c.next();)c.value.name===a&&v.g("Layer.name is already present in this diagram: "+a)}this.qb=a;this.d("name",b,a)}});v.a(Ye,"isTemporary",Ye.prototype.Zc);
v.defineProperty(Ye,{Zc:"isTemporary"},s("tw"),function(a){var b=this.tw;b!==a&&(v.e(a,"boolean",Ye,"isTemporary"),this.tw=a,this.d("isTemporary",b,a))});v.a(Ye,"visible",Ye.prototype.visible);v.defineProperty(Ye,{visible:"visible"},s("Ng"),function(a){var b=this.Ng;if(b!==a){v.e(a,"boolean",Ye,"visible");this.Ng=a;this.d("visible",b,a);for(a=this.Cb.f;a.next();)a.value.updateAdornments();a=this.b;a!==m&&ph(a)}});v.a(Ye,"allowCopy",Ye.prototype.Hh);
v.defineProperty(Ye,{Hh:"allowCopy"},s("Yi"),function(a){var b=this.Yi;b!==a&&(v.e(a,"boolean",Ye,"allowCopy"),this.Yi=a,this.d("allowCopy",b,a))});v.a(Ye,"allowDelete",Ye.prototype.Uj);v.defineProperty(Ye,{Uj:"allowDelete"},s("Zi"),function(a){var b=this.Zi;b!==a&&(v.e(a,"boolean",Ye,"allowDelete"),this.Zi=a,this.d("allowDelete",b,a))});v.a(Ye,"allowTextEdit",Ye.prototype.$m);
v.defineProperty(Ye,{$m:"allowTextEdit"},s("ij"),function(a){var b=this.ij;b!==a&&(v.e(a,"boolean",Ye,"allowTextEdit"),this.ij=a,this.d("allowTextEdit",b,a))});v.a(Ye,"allowGroup",Ye.prototype.Um);v.defineProperty(Ye,{Um:"allowGroup"},s("$i"),function(a){var b=this.$i;b!==a&&(v.e(a,"boolean",Ye,"allowGroup"),this.$i=a,this.d("allowGroup",b,a))});v.a(Ye,"allowUngroup",Ye.prototype.an);
v.defineProperty(Ye,{an:"allowUngroup"},s("jj"),function(a){var b=this.jj;b!==a&&(v.e(a,"boolean",Ye,"allowUngroup"),this.jj=a,this.d("allowUngroup",b,a))});v.a(Ye,"allowLink",Ye.prototype.bl);v.defineProperty(Ye,{bl:"allowLink"},s("aj"),function(a){var b=this.aj;b!==a&&(v.e(a,"boolean",Ye,"allowLink"),this.aj=a,this.d("allowLink",b,a))});v.a(Ye,"allowRelink",Ye.prototype.zi);
v.defineProperty(Ye,{zi:"allowRelink"},s("dj"),function(a){var b=this.dj;b!==a&&(v.e(a,"boolean",Ye,"allowRelink"),this.dj=a,this.d("allowRelink",b,a))});v.a(Ye,"allowMove",Ye.prototype.Vj);v.defineProperty(Ye,{Vj:"allowMove"},s("bj"),function(a){var b=this.bj;b!==a&&(v.e(a,"boolean",Ye,"allowMove"),this.bj=a,this.d("allowMove",b,a))});v.a(Ye,"allowPrint",Ye.prototype.Wm);
v.defineProperty(Ye,{Wm:"allowPrint"},s("cj"),function(a){var b=this.cj;b!==a&&(v.e(a,"boolean",Ye,"allowPrint"),this.cj=a,this.d("allowPrint",b,a))});v.a(Ye,"allowReshape",Ye.prototype.Xm);v.defineProperty(Ye,{Xm:"allowReshape"},s("ej"),function(a){var b=this.ej;b!==a&&(v.e(a,"boolean",Ye,"allowReshape"),this.ej=a,this.d("allowReshape",b,a))});v.a(Ye,"allowResize",Ye.prototype.Ym);
v.defineProperty(Ye,{Ym:"allowResize"},s("fj"),function(a){var b=this.fj;b!==a&&(v.e(a,"boolean",Ye,"allowResize"),this.fj=a,this.d("allowResize",b,a))});v.a(Ye,"allowRotate",Ye.prototype.Zm);v.defineProperty(Ye,{Zm:"allowRotate"},s("gj"),function(a){var b=this.gj;b!==a&&(v.e(a,"boolean",Ye,"allowRotate"),this.gj=a,this.d("allowRotate",b,a))});v.a(Ye,"allowSelect",Ye.prototype.Id);
v.defineProperty(Ye,{Id:"allowSelect"},s("hj"),function(a){var b=this.hj;b!==a&&(v.e(a,"boolean",Ye,"allowSelect"),this.hj=a,this.d("allowSelect",b,a))});
function C(a){function b(a){var b=a.toLowerCase(),c=new A("function");e.add(a,c);e.add(b,c);g.add(a,a);g.add(b,a)}function c(){document.removeEventListener("DOMContentLoaded",c,p);qh(d)}v.Hb(this);v.Az=[];this.bc=h;this.Ae=17;var d=this;document.body!==m?qh(this):document.addEventListener("DOMContentLoaded",c,p);this.Bb=new A(Ye);this.vA=this.uA=this.xA=this.wA=this.Ab=this.Ak=this.ma=m;this.kb=(new E(NaN,NaN)).freeze();this.Jb=1;this.et=1E-4;this.$s=100;this.Gd=new Za;this.Yt=(new E(NaN,NaN)).freeze();
this.Gs=(new F(NaN,NaN,NaN,NaN)).freeze();this.uk=rh;this.yk=Wb;this.vj=rh;this.jm=Wb;this.Ls=this.Ks=Xb;this.tg=new ka(Q);this.hi=h;this.bm=new ja(W,F);this.Ho=h;this.PD=250;this.OD=1E3;this.kg=m;this.ls=(new rb(16,16,16,16)).freeze();this.Bz=h;this.Oq=this.Mg=p;this.Po=h;this.jx=p;this.Iz=16;this.Jf=new re;this.mc=new re;this.kc=new re;this.ci=m;this.Ot=-1;this.Zw=p;this.aw=new ja("string",A);this.$v=new ja("string","string");var e=new ja("string",A),g=new ja("string","string");b("BackgroundSingleClicked");
b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");
b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.aw=e;this.$v=g;this.nt=new ka(U);this.Yk=new ka(V);this.Us=new ka(W);this.Cb=new ka(R);this.Rs=h;this.Oz=p;this.Vt=$f;this.Uv=this.Zv=this.Ut=m;this.ys="";this.Ao="auto";this.lh=this.Fh=this.wh=this.ht=this.xh=this.yh=this.zh=this.kh=this.mh=this.jh=m;this.Ek=h;this.Iv=p;this.Rv=m;this.Gk=this.ui=this.mz=p;this.wa=h;this.Qf=
m;var i=this;this.Wz=function(a){if(a.I===i.I&&i.wa){i.wa=p;try{var b=a.Mc;""===a.he&&b===ve&&sh(i,a.object,a.propertyName)}finally{i.wa=h}}};this.Xz=function(a){if(a.I===i.I&&i.wa){i.wa=p;try{var b=a.Mc,c=a.he;if(""!==c)if(b===ve)if("linkFromKey"===c){var d=a.object,e=i.Ji(d);if(e!==m){var g=a.newValue,u=i.Th(g);e.da=u}}else if("linkToKey"===c)d=a.object,e=i.Ji(d),e!==m&&(g=a.newValue,u=i.Th(g),e.ga=u);else if("linkFromPortId"===c){if(d=a.object,e=i.Ji(d),e!==m){var x=a.newValue;"string"===typeof x&&
(e.Vg=x)}}else if("linkToPortId"===c)d=a.object,e=i.Ji(d),e!==m&&(x=a.newValue,"string"===typeof x&&(e.Zh=x));else if("nodeGroupKey"===c){var d=a.object,B=i.dg(d);if(B!==m){var G=a.newValue;if(G!==f){var I=i.Th(G);B.Ta=I instanceof V?I:m}else B.Ta=m}}else if("linkLabelKeys"===c){if(d=a.object,e=i.Ji(d),e!==m){var y=a.oldValue,J=a.newValue;if(v.isArray(y))for(var z=v.xb(y),H=0;H<z;H++){var fa=v.mb(y,H),u=i.Th(fa);u!==m&&(u.fe=m)}if(v.isArray(J)){z=v.xb(J);for(H=0;H<z;H++)fa=v.mb(J,H),u=i.Th(fa),u!==
m&&(u.fe=e)}}}else if("nodeCategory"===c){var d=a.object,S=i.dg(d),T=a.newValue;S!==m&&"string"===typeof T&&(S.hd=T)}else if("linkCategory"===c){var d=a.object,ga=i.Ji(d),T=a.newValue;ga!==m&&"string"===typeof T&&(ga.hd=T)}else if("nodeDataArray"===c){var na=a.oldValue;th(i,na);var ra=a.newValue;uh(i,ra)}else"linkDataArray"===c&&(na=a.oldValue,th(i,na),ra=a.newValue,vh(i,ra));else if(b===we)ra=a.newValue,ra instanceof Object&&("nodeDataArray"===c?wh(i,ra):"linkDataArray"===c?xh(i,ra):"linkLabelKeys"===
c&&(e=i.Ji(a.object),u=i.Th(ra),e!==m&&u!==m&&(u.fe=e)));else if(b===xe)na=a.oldValue,na instanceof Object&&("nodeDataArray"===c?yh(i,na):"linkDataArray"===c?yh(i,na):"linkLabelKeys"===c&&(u=i.sF(na),u!==m&&(u.fe=m)));else{if(b===ue&&"SourceChanged"===c){var B=i.dg(a.object),Da=a.propertyName;B!==m&&"string"===typeof Da&&B.ic(Da)}}else if(b===ve){var Wa=a.propertyName,d=a.object;if(d===i.I){if("nodeKeyProperty"===Wa||"nodeCategoryProperty"===Wa||"linkFromKeyProperty"===Wa||"linkToKeyProperty"===Wa||
"linkFromPortIdProperty"===Wa||"linkToPortIdProperty"===Wa||"nodeIsLinkLabelProperty"===Wa||"linkLabelKeysProperty"===Wa||"nodeIsGroupProperty"===Wa||"nodeGroupKeyProperty"===Wa||"linkCategoryProperty"===Wa)i.ca.ab||i.Al()}else sh(i,d,Wa)}else if(b===we||b===xe){var fb=a.Mc===we,ab=fb?a.Oe:a.Pe,Pa=fb?a.newValue:a.oldValue,gb=i.Jk.$(a.object);if(gb instanceof Array)for(a=0;a<gb.length;a++){var bb=gb[a];"number"===typeof ab&&(fb?Pa instanceof Object&&zh(bb,Pa,ab):bb.vd(ab))}}else if(b===ue){var Zb=
a.propertyName;if("S"!==Zb[0]){if("CommittingTransaction"!==Zb){if("FinishedUndo"===Zb||"FinishedRedo"===Zb)i.ca.rh=h,Ah(i),i.ca.rh=p;i.Kf&&i.pa.standardMouseOver();for(var Xc=i.selection.f;Xc.next();)Xc.value.updateAdornments()}i.Oq=h;i.update();Mg(i)}else"StartingFirstTransaction"===Zb&&(!i.Ye&&!i.Kf)&&(i.Oq=h,i.Po&&(i.Mg=h),i.update())}}finally{i.wa=h}}};this.Gf=new ja(Object,R);this.Jk=new ja(Object,Array);this.zj=p;this.Zi=this.Yi=this.cs=this.qh=h;this.es=this.ds=p;this.js=this.hs=this.hj=this.gj=
this.fj=this.ej=this.cj=this.bj=this.dj=this.aj=this.gs=this.jj=this.$i=this.ij=h;this.Sz=p;this.is=this.fs=this.Js=this.Is=h;this.Dt=this.Ct=16;this.Bt=p;this.Fd=(new rb(5)).freeze();this.Gt=(new ka(R)).freeze();this.at=999999999;this.mm=this.yj=this.xj=h;this.bp=this.ap=p;this.Sc=m;this.ks=h;this.Kf=p;this.Jc=m;this.fA=1;this.HA=(new F(NaN,NaN,NaN,NaN)).freeze();this.Ds=(new F(NaN,NaN,NaN,NaN)).freeze();this.Ye=p;this.st=new ka;Bh(this);Ch(this);this.Xl=this.Qw=this.Pc=m;this.Ob=new af;this.Ob.initializeStandardTools();
this.pa=this.mu=this.Ob;this.Ld=new oa;this.I=new P;this.ui=h;this.sb=new Dh;this.ui=p;a===f&&(a=document.createElement("div"));this.Kz=new Eh;Fh(this,a);this.wq=this.TG=m;this.bc=p}v.H("Diagram",C);
function Ch(a){a.qi=new ja("string",R);var b=new U,c=new ma;c.bind(new Te("text","",ye));b.add(c);a.VD=b;a.qi.add("",b);b=new U;c=new ma;c.stroke="brown";c.bind(new Te("text","",ye));b.add(c);a.qi.add("Comment",b);b=new U;b.ik=p;b.yx=p;c=new X;c.Ua="Ellipse";c.fill="black";c.stroke=m;c.ka=new hb(3,3);b.add(c);a.qi.add("LinkLabel",b);a.Dk=new ja("string",V);b=new V;b.Rn="GROUPPANEL";b.type=Gh;c=new ma;c.font="bold 12pt sans-serif";c.bind(new Te("text","",ye));b.add(c);c=new w(Hh);c.name="GROUPPANEL";
var d=new X;d.Ua="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Ig;d.padding=new rb(5,5,5,5);c.add(d);b.add(c);a.SD=b;a.Dk.add("",b);a.Dj=new ja("string",W);b=new W;c=new X;c.Oi=h;b.add(c);c=new X;c.Jl="Standard";c.fill="black";c.stroke=m;b.add(c);a.UD=b;a.Dj.add("",b);b=new W;c=new X;c.Oi=h;c.stroke="brown";b.add(c);a.Dj.add("Comment",b);b=new w;c=new ma;c.bind(new Te("text","",ye));b.add(c);a.TD=b;b=new cf;b.type=Hh;c=new X;c.fill=m;c.stroke="magenta";c.Oa=2;b.add(c);
c=new Ig;c.margin=new rb(1,1,1,1);b.add(c);a.Ew=b;a.ow=b;b=new cf;b.type=ng;c=new X;c.Oi=h;c.fill=m;c.stroke="magenta";c.Oa=0;b.add(c);a.ww=b}
function qh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);document.body.removeChild(c);a.Ae=d-b}
C.prototype.toString=function(a){a===f&&(a=0);var b="";this.id&&(b=this.id);this.Qh&&this.Qh.id&&(b=this.Qh.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Bb.f;c.next();)b+="\n  "+c.value.toString(a-1);return b};C.prototype.dumpReferences=C.prototype.CB=function(){for(var a=this.zr;a.next();){var b=a.value;v.trace(b.toString());for(b=b.Si;b.next();)b.value.CB()}};C.prototype.checkProperties=C.prototype.LH=function(){return v.WE(this)};
C.fromDiv=function(a){var b=a;"string"===typeof a&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.L instanceof C?b.L:m};v.a(C,"div",C.prototype.Qh);
v.defineProperty(C,{Qh:"div"},s("Ab"),function(a){a!==m&&v.c(a,HTMLDivElement,C,"div");if(this.Ab!==a){var b=this.Ab;if(b!==m){delete b.L;b.innerHTML="";this.ma!==m&&(this.ma.L=m,this.ma.removeEventListener("touchstart",this.vD,p),this.ma.removeEventListener("touchmove",this.uD,p),this.ma.removeEventListener("touchend",this.tD,p));b=this.Ut;if(b!==m){for(var c=b.Zz,d=c.length,e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.$z;d=c.length;for(e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.aA;d=c.length;for(e=0;e<
d;e++)c.j[e].cancelWaitAfter()}b.cancelWaitAfter();this.Ak=this.ma=m;window.removeEventListener("resize",this.vy,p);window.removeEventListener("mousemove",this.Fn,h);window.removeEventListener("mousedown",this.En,h);window.removeEventListener("mouseup",this.Hn,h);window.removeEventListener("mousewheel",this.hg,h);window.removeEventListener("DOMMouseScroll",this.hg,h);window.removeEventListener("mouseout",this.Gn,h)}this.Ab=m;if(a!==m){if(b=a.L)b.Qh=m;Fh(this,a)}}});
function Eh(){this.zA=h;this.UG=p;this.VG=212;this.iE="63ad05bbe23a1786468a4c741b6d2e";if(this.iE===this._tk)this.Jo=h;else{for(var a="p",b=window[v.rb("76a715b2f73f148a")][v.rb("72ba13b5")],c=b[v.rb("76ad18b4f73e")],d=b[v.rb("73a612b6fb191d")](v.rb("35e7"))+2;d<c;d++)a+=b[d];c=a[v.rb("73a612b6fb191d")](v.rb(v.vE));if(this.Jo=!(0<c&&c<a[v.rb("73a612b6fb191d")](v.rb("35")))){a=document[v.rb("69bc0fbfe6051381469f4c")];c=a.length;for(d=0;d<c;d++)if(b=a[d][v.rb("79bb0581f63a1e97")],b!==m){for(var e=b.length,
g=0;g<e;g++)if(b[g][v.rb("69ad1ab6e0221496778e4767")]==v.rb("02cncncn")){var i=b[g][v.rb("69bc0fbfe6")][v.rb("78a704b7e6242f8b53a8507f1b7b")];if(!i)return;if(-1!==i.indexOf(v.rb(v.XE))&&-1!==i.indexOf(v.rb(v.YE))){this.Jo=p;break}}if(this.Jo===p)break}}this.WG=new E(NaN,NaN)}}Eh.prototype.gv=function(a){a.ND();return 0<this.Jo&&this!==this.zA?h:p};Eh.prototype.t=Eh.prototype.vK=function(){this.zA=m};
function Fh(a,b){(b===f||b===m)&&v.g("Diagram setup requires an argument DIV.");a.Ab!==m&&v.g("Diagram has already completed setup.");"string"===typeof b?a.Ab=document.getElementById(b):b instanceof HTMLDivElement?a.Ab=b:v.g("No DIV or DIV id supplied: "+b);a.Ab===m&&v.g("Invalid DIV id; could not get element with id: "+b);a.Ab.L!==f&&v.g("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Ab,m).position&&(a.Ab.style.position="relative");a.Ab.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.Ab.innerHTML="";a.Ab.L=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.Ab.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.zIndex="2";c.width=a.Ab.clientWidth||1;c.height=a.Ab.clientHeight||1;document.defaultView&&document.defaultView.getComputedStyle&&
(a.wA=parseInt(document.defaultView.getComputedStyle(c,m).paddingLeft,10)||0,a.xA=parseInt(document.defaultView.getComputedStyle(c,m).paddingTop,10)||0,a.uA=parseInt(document.defaultView.getComputedStyle(c,m).borderLeftWidth,10)||0,a.vA=parseInt(document.defaultView.getComputedStyle(c,m).borderTopWidth,10)||0);a.qw=0;a.pw=0;if(document.body){var d=document.body.parentNode;a.qw=d.offsetTop||0;a.pw=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;
a.qw=b.offsetTop||0;a.pw=b.offsetLeft||0}},p);c.L=a;a.ma=c;a.Ak=c.getContext("2d");d=a.Ak;a.ND=d[v.rb("69ad0287f137159745844d7e")][v.rb("78a118b7")](d,1,0,0,1,0,0);a.MD=d[v.rb("7eba17a4ca3b1a8346")][v.rb("78a118b7")](d,v.gv,4,4);a.Ab.insertBefore(c,a.Ab.firstChild);if(a.Bz!==m){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.ma.width+"px";d.style.height=
a.ma.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.ma.width+"px";e.style.height=a.ma.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.Ab.appendChild(d);a.Ab.appendChild(e);d.appendChild(g);e.appendChild(i);d.onscroll=a.dA;d.onmousedown=a.eA;d.L=a;d.qA=h;e.onscroll=a.dA;e.onmousedown=a.eA;e.L=a;e.rA=h;a.Pj=d;a.Qj=e;a.oA=g;a.pA=
i}a.preventDefault=function(a){a.preventDefault();return p};a.Fn=function(b){if(a.isEnabled){var c=a.mc;window.TouchEvent&&c.ei!==m&&c.ei instanceof window.TouchEvent?(b.preventDefault(),b.simulated=h,a.wq=b):(a.mc=a.kc,a.kc=c,Ih(a,b,c,h),Jh(b,new E,b.target.L)||(a.pa.doMouseMove(),a.pa.isBeyondDragSize()&&Kh(a)))}};a.En=function(b){if(a.isEnabled){var c=a.mc;if(a.wq!==m)a.wq=b,b.preventDefault();else if(a.mc=a.kc,a.kc=c,Ih(a,b,c,h),c.Ge=b.detail,a.Jf=c.copy(),c.ei.simulated===h)b.preventDefault(),
b.simulated=h;else if(t&&t.Cy&&(window.Cy=a.mn(c.C).j,t.trace(window.Cy)),zf=m,a.pa.doMouseDown(),1===b.button)return b.preventDefault(),p}};a.Hn=function(b){if(a.isEnabled){var c=a.mc;a.wq!==m?(a.wq=m,b.preventDefault()):(a.mc=a.kc,a.kc=c,Ih(a,b,c,h),c.Ge=b.detail,b.target.L&&(c.xf=b.target.L),Lh(a,b,new E,c.xf)||(a.pa.doMouseUp(),Bf(a),Mh(a,c,b)))}};a.hg=function(b){if(a.isEnabled){var c=a.mc;a.mc=a.kc;a.kc=c;Ih(a,b,c,h);c.bubbles=h;c.Fi=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;a.pa.doMouseWheel();
Mh(a,c,b)}};a.Gn=function(){if(a.isEnabled){var b=a.pa;b.cancelWaitAfter();b instanceof af&&b.hideToolTip()}};a.vy=function(){var b=a.ma,c=a.Ab,d=0;a.bp&&(d=a.Ae);var e=0;a.ap&&(e=a.Ae);if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)a.yj=h,a.hi=h;qf(a)};a.vD=function(b){if(a.isEnabled){a.Zw=p;if(1<b.touches.length){a.pa.doCancel();if(a.Ek&&v.yA)return b.preventDefault(),b.cancelBubble=h,p;Kh(a);b.cancelBubble=p;return h}var c=a.mc;a.mc=a.kc;a.kc=c;c.b=a;var d=a.ph(b.targetTouches[0]);c.bd=
a.bs(d);c.C=d;c.Xg=0;c.button=0;c.Ge=1;c.Fi=0;c.ud=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.xf=b.target.L?b.target.L:m;c.ad=m;a.Jf=c.copy();zf=m;a.pa.doMouseDown();var e=c.copy();a.Ot=setTimeout(function(){e.button=2;a.F=e;a.Zw=h;a.pa.doMouseUp()},850);Mh(a,c,b)}};a.uD=function(b){if(a.isEnabled){if(1<b.touches.length){a.pa.doCancel();Kh(a);if(a.Ek&&v.yA)return b.preventDefault(),b.cancelBubble=h,p;b.cancelBubble=p;return h}var c=a.mc;a.mc=a.kc;a.kc=c;var d=m,e,g=m;0<b.changedTouches.length?
g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.L?(e=d.L.ph(g),i=d.L):(e=a.ph(b.changedTouches[0]),i=a);c.C=e;c.bd=i.bs(e)}else a.mc!==m?(c.C=a.mc.C,c.bd=a.mc.bd,d=a.mc.xf):a.Jf!==m&&(c.C=a.Jf.C,c.bd=a.Jf.bd,d=a.Jf.xf);c.Xg=0;c.button=0;c.Ge=1;c.Fi=0;c.ud=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.xf=d===m?b.target.L:d.L?d.L:m;c.ad=m;a.pa.isBeyondDragSize()&&Kh(a);if(!Jh(g?g:b,new E,c.xf))a.pa.doMouseMove(),
Mh(a,c,b)}};a.tD=function(b){if(a.isEnabled){Kh(a);if(a.Zw)return b.preventDefault(),p;var c=a.mc;a.mc=a.kc;a.kc=c;if(!(1<b.touches.length)){var d=m,e,g=m;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.L?(e=d.L.ph(g),i=d.L):(e=a.ph(b.changedTouches[0]),i=a);c.C=e;c.bd=i.bs(e)}else a.mc!==m?(c.C=a.mc.C,c.bd=a.mc.bd,d=a.mc.xf):a.Jf!==m&&(c.C=a.Jf.C,c.bd=a.Jf.bd,d=a.Jf.xf);c.Xg=0;
c.button=0;c.Ge=1;c.Fi=0;c.ud=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.xf=d===m?b.target.L:d.L?d.L:m;c.ad=m;if(!Lh(a,g?g:b,new E,c.xf))a.pa.doMouseUp(),Mh(a,c,b)}}};c.addEventListener("touchstart",a.vD,p);c.addEventListener("touchmove",a.uD,p);c.addEventListener("touchend",a.tD,p);c.addEventListener("gesturestart",function(){a.Ek!==p&&(a.fA=a.scale,a.pa.doCancel())},p);c.addEventListener("gesturechange",function(b){if(a.Ek!==p){var c=a.ph(b),d=a.rk;a.rk=c;a.scale=a.fA*b.scale;a.rk=d}},p);
c.addEventListener("mousemove",a.Fn,p);c.addEventListener("mousedown",a.En,p);c.addEventListener("mouseup",a.Hn,p);c.addEventListener("mousewheel",a.hg,p);c.addEventListener("DOMMouseScroll",a.hg,p);c.addEventListener("mouseout",a.Gn,p);c.addEventListener("keydown",a.TF,p);c.addEventListener("keyup",a.UF,p);c.addEventListener("selectstart",function(a){a.preventDefault();return p},p);c.addEventListener("contextmenu",function(a){a.preventDefault();return p},p);window.addEventListener("resize",a.vy,
p);c.tabIndex=0;Nh(a)}}C.prototype.focus=function(){this.ma.focus()};function Nh(a,b){b===f&&(b=a.Ak);b.Gv="";b.Nl="";b.Ml=""}function Bh(a){var b=new Ye;b.name="Background";a.Wq(b);b=new Ye;b.name="";a.Wq(b);b=new Ye;b.name="Foreground";a.Wq(b);b=new Ye;b.name="Adornment";b.Zc=h;a.Wq(b);b=new Ye;b.name="Tool";b.Zc=h;a.Wq(b);b=new Ye;b.name="Grid";b.Id=p;b.Zc=h;a.sE(b,a.jn("Background"))}
function Oh(a){a.Pc=new w(Ph);a.Pc.name="GRID";var b=new X;b.Ua="LineH";b.stroke="lightgray";b.Oa=0.5;b.Uh=1;a.Pc.add(b);b=new X;b.Ua="LineH";b.stroke="gray";b.Oa=0.5;b.Uh=5;a.Pc.add(b);b=new X;b.Ua="LineH";b.stroke="gray";b.Oa=1;b.Uh=10;a.Pc.add(b);b=new X;b.Ua="LineV";b.stroke="lightgray";b.Oa=0.5;b.Uh=1;a.Pc.add(b);b=new X;b.Ua="LineV";b.stroke="gray";b.Oa=0.5;b.Uh=5;a.Pc.add(b);b=new X;b.Ua="LineV";b.stroke="gray";b.Oa=1;b.Uh=10;a.Pc.add(b);b=new R;b.add(a.Pc);b.xd="Grid";b.jy=p;b.FC=p;b.Ar="GRID";
a.add(b);a.Cb.remove(b);a.Pc.visible=p}
C.prototype.dA=function(){var a=this.L;if(a.nA){a.Bt=h;var b=a.sc,c=a.jb,d=b.width,e=c.width,g=b.height,i=c.height,j=b.right,k=c.right,l=b.bottom,n=c.bottom,r=b.x,q=c.x,b=b.y,c=c.y;if(e<d||i<g)this.qA&&a.Ee?a.position=new E(this.scrollLeft+r,a.position.y):this.rA&&a.Fe&&(a.position=new E(a.position.x,this.scrollTop+b)),Qh(a),ph(a),a.Bt=p,a.yj=p;else{var u=a.scale;this.qA&&a.Ee&&(r<q&&(a.position=new E(this.scrollLeft+r,a.position.y)),j>k&&(a.position=new E(-(a.Pj.Ae-a.ma.width)+this.scrollLeft-a.ma.width/
u+a.sc.right,a.position.y)));this.rA&&a.Fe&&(b<c&&(a.position=new E(a.position.x,this.scrollTop+b)),l>n&&(a.position=new E(a.position.x,-(a.Qj.scrollHeight-a.ma.height)+this.scrollTop-a.ma.height/u+a.sc.bottom)));Qh(a);a.Bt=p;a.yj=p;ph(a);b=a.sc;c=a.jb;j=b.right;k=c.right;l=b.bottom;n=c.bottom;r=b.x;q=c.x;b=b.y;c=c.y;e>=d&&(r>=q&&j<=k)&&(a.oA.style.width="1px");i>=g&&(b>=c&&l<=n)&&(a.pA.style.height="1px");Rh(a)}}};C.prototype.eA=function(){this.L.nA=h};
C.prototype.computeBounds=C.prototype.$d=function(){0<this.tg.count&&Ah(this);if(this.Yx.W()){var a=this.Yx.copy();a.sx(this.padding);return a}for(var b=h,c=this.Bb,d=c.length,e=0;e<d;e++){var g=c.j[e];if(g.visible&&!g.Zc)for(var g=g.Cb,i=g.length,j=0;j<i;j++){var k=g.j[j];k.jy&&k.gb()&&(k=k.oa,k.W()&&(b?(b=p,a=k.copy()):a.ok(k)))}}b&&(a=new F(0,0,0,0));a.sx(this.padding);return a};
function Sh(a,b){if((b||a.Kf)&&!a.bc&&a.sc.W()){a.bc=h;var c=a.uk;b&&a.vj!==rh&&(c=a.vj);var d=c!==rh?ai(a,c):a.scale,c=a.jb.copy(),e=a.ma.width/d,g=a.ma.height/d;a.position.ta();var i=a.yk;b&&Ob(a.jm)&&(i=a.jm);bi(a,a.kb,a.sc,e,g,i);a.position.freeze();a.scale=d;a.bc=p;d=a.jb;d.bk(c)||a.Kr(c,d)}}
function ai(a,b){var c=a.sc;if(!c.W())return 1;var d=c.width,c=c.height,e=a.ma.width,g=a.ma.height,i=e/d,j=g/c,k=1;return b===ci?(k=Math.min(j,i),1<k&&(k=1),k):b===di?(k=j>i?(g-a.Ae)/c:(e-a.Ae)/d,1<k&&(k=1),k):a.scale}C.prototype.zoomToFit=C.prototype.BK=function(){this.scale=ai(this,ci);qf(this)};
C.prototype.alignDocument=C.prototype.fH=function(a,b){this.xj&&ei(this,this.$d());var c=this.sc,d=this.jb,e=this.bc;this.bc=h;this.position=new E(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.bc=e;this.Ye||qf(this)};
function bi(a,b,c,d,e,g){Ob(g)&&(d>c.width&&(b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)));d<c.width?(g=b.x+d/2,g=Math.min(g,c.right-d/2),g=Math.max(g,c.left+d/2),b.x=g-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d);e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e);isFinite(b.x)||(b.x=-a.padding.left);isFinite(b.y)||(b.y=-a.padding.top)}
C.prototype.findPartAt=C.prototype.kr=function(a,b){var c=b?Tf(this,a,function(a){return a.T},function(a){return a.Ax()}):this.Yc(a,function(a){return a.T});return c instanceof R?c:m};C.prototype.findObjectAt=C.prototype.Yc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.Bb.wn;for(Ah(this);d.next();){var e=d.value;if(e.visible&&(e=e.Yc(a,b,c),e!==m))return e}return m};
function Tf(a,b,c,d){c===f&&(c=m);d===f&&(d=m);var e=a.Bb.wn;for(Ah(a);e.next();)if(a=e.value,a.visible&&!a.Zc&&(a=a.Yc(b,c,d),a!==m))return a;return m}C.prototype.findObjectsAt=C.prototype.mn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);if(!(d instanceof A)||!(d instanceof ka))d=new A(Q);Ah(this);for(var e=this.Bb.wn;e.next();){var g=e.value;g.visible&&g.mn(a,b,c,d)}return d};
C.prototype.findObjectsIn=C.prototype.ol=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=p);if(!(e instanceof A)||!(e instanceof ka))e=new A(Q);Ah(this);for(var g=this.Bb.wn;g.next();){var i=g.value;i.visible&&i.ol(a,b,c,d,e)}return e};C.prototype.findObjectsNear=C.prototype.nn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof A)&&!(e instanceof ka)&&(e=new A(Q));Ah(this);for(var g=this.Bb.wn;g.next();){var i=g.value;i.visible&&i.nn(a,b,c,d,e)}return e};
function Kh(a){-1!==a.Ot&&(clearTimeout(a.Ot),a.Ot=-1)}function Ih(a,b,c,d){c.b=a;d?(d=a.ph(b),c.bd=a.bs(d),c.C=d):(c.bd=a.kc.bd,c.C=a.kc.C);a=0;b.ctrlKey&&(a+=1);b.altKey&&(a+=2);b.shiftKey&&(a+=4);c.Xg=a;c.button=b.button;c.Ge=1;c.Fi=0;c.ud=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.xf=b.target.L?b.target.L:m;c.ad=m}
function Mh(a,b,c){if(b.bubbles)return t&&(t.trace&&t.TB)&&t.trace("NOT handled "+c.type+" "+b.toString()),h;t&&(t.trace&&t.TB)&&t.trace("handled "+c.type+" "+a.pa.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&"touchstart"!==c.type&&c.preventDefault();c.cancelBubble=h;return p}
C.prototype.TF=function(a){if(this.L.isEnabled){var b=this.L.kc;Ih(this.L,a,b,p);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.L.pa.doKeyDown();return(187===a.which||189===a.which||48===a.which||107===a.which||109===a.which)&&a.ctrlKey===h?(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=p,Event.stop&&(v.g("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),p):Mh(this.L,b,a)}};
C.prototype.UF=function(a){if(this.L.isEnabled){var b=this.L.kc;Ih(this.L,a,b,p);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.L.pa.doKeyUp();return Mh(this.L,b,a)}};
C.prototype.ph=function(a){if(this.Iv){var b=this.ma,c=0,d=0;if(b.offsetParent!==f){do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent)}c+=this.wA+this.uA+this.pw;d+=this.xA+this.vA+this.qw;b=a.pageX-c;a=a.pageY-d;this.Gd!==m&&(a=new E(b,a),cb(a,this.Gd),b=a.x,a=a.y);return new E(b,a)}b=this.ma;c=b.getBoundingClientRect();d=a.clientX-c.left*(b.width/c.width);a=a.clientY-c.top*(b.height/c.height);this.Gd!==m&&(a=new E(d,a),cb(a,this.Gd),d=a.x,a=a.y);return new E(d,a)};
v.a(C,"alternateCoordinates",C.prototype.EE);v.defineProperty(C,{EE:m},s("Iv"),function(a){v.e(a,"boolean",C,"alternateCoordinates");this.Iv=a});C.prototype.invalidateDocumentBounds=C.prototype.Mi=function(){if(!this.Ye&&(fi(this),this.jx===p)){this.jx=h;var a=this;setTimeout(function(){a.ma===m||a.Mg===h||(Mg(a),a.jx=p)},a.Iz)}};function Mg(a){a.Ye||Ah(a);a.xj&&ei(a,a.$d());Sh(a);!a.bc&&a.yj&&gi(a);for(a=a.st.f;a.next();)Mg(a.value)}
C.prototype.redraw=C.prototype.VJ=function(){!this.bc&&!this.Ye&&(ph(this),Rh(this),Qh(this),fi(this),this.update())};C.prototype.isUpdateRequested=C.prototype.nJ=s("Mg");function qf(a){!a.bc&&!a.Ye&&a.Mg===p&&(a.Mg=h,setTimeout(function(){a.Mg&&(a.update(),a.Mg=p)},a.Iz))}
C.prototype.update=C.prototype.update=function(){if(!(this.Ab===m||this.Ye))if(!this.Po||this.Mg){this.Po&&(this.Po=p);this.Ye=h;this.vy();this.Mg=p;Ah(this);var a=p;if(!this.Kf||this.Oq&&this.ks)hi(this),this.Oq=p,a=h;Ah(this);this.sc.W()||ei(this,this.$d());a&&(this.Kf||(ii(this),ji(this)),this.fa("LayoutCompleted"));Ah(this);!this.bc&&this.yj&&!gi(this)&&(gi(this),a&&(this.Kf||(ii(this),ji(this)),this.fa("LayoutCompleted")));a&&!this.Kf&&(this.Kf=h);this.cg();this.Ye=p}};
function ii(a){a.vj!==rh?a.scale=ai(a,a.vj):a.uk!==rh&&(a.scale=ai(a,a.uk));var b=a.position;if(b.W())a.position=b;else{b=new E;b.Sn(a.sc,a.YB);var c=a.jb,c=new F(0,0,c.width,c.height),d=new E;d.Sn(c,a.ZB);c=a.zD(d);a.position=new E(b.x-c.x,b.y-c.y);Sh(a,h)}a.fa("InitialLayoutCompleted");a=a.ca;a!==m&&a.clear()}
function Ah(a){for(var b=0;23>b;b++){var c=a.tg.f;if(c===m||0===a.tg.count)break;a.tg=new ka(Q);for(var d=a,e=a.tg;c.next();){var g=c.value,i=g.constructor;i===V&&ki(d,g)}for(c.reset();c.next();)d=c.value,i=d.constructor,i!==U&&i!==R||(d.ek()?(gh(d,Infinity,Infinity),d.pc()):e.add(d));for(c.reset();c.next();)d=c.value,i=d.constructor,i===W&&(d.ek()?(gh(d,Infinity,Infinity),d.pc(),li(d)):e.add(d));for(c.reset();c.next();)d=c.value,i=d.constructor,i===cf&&(d.ek()?(gh(d,Infinity,Infinity),d.pc()):e.add(d))}}
function ki(a,b){for(var c=b.hc,d=[];c.next();){var e=c.value,g=e.constructor;g===V?(e.ac||e.Hc||e.ii)&&ki(a,e):g===W?d.push(e):(gh(e,Infinity,Infinity),e.pc())}c=d.length;for(e=0;e<c;e++)g=d[e],gh(g,Infinity,Infinity),g.pc();gh(b,Infinity,Infinity);b.pc()}
C.prototype.cg=function(a){this.Ab===m&&v.g("No div specified");this.ma===m&&v.g("No canvas specified");a||(a=this.Ak);var b=a!==this.Ak;if(b)Nh(this);else if(!this.hi)return;if(0<this.bm.count){for(var c=this.bm.f;c.next();)og(c.key,c.value);this.bm.clear()}a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.ma.width,this.ma.height);c=this.Gd;c.reset();1!==this.Jb&&c.scale(this.Jb);var d=this.kb;(0!==d.x||0!==d.y)&&c.translate(-d.x,-d.y);a.setTransform(c.m11,c.m12,c.m21,c.m22,c.Qa,c.Ra);t&&t.TE&&(a.fillStyle=
"red",a.fillRect(0,0,8,8),a.lineWidth=8,a.strokeStyle="rgba(255,255,0,.6)",c=this.jb,a.strokeRect(c.x,c.y,c.width,c.height),a.fillStyle="rgba(0,255,0,.2)",a.fillRect(this.sc.x,this.sc.y,this.sc.width,this.sc.height));c=this.Bb.length;for(d=0;d<c;d++)this.Bb.j[d].cg(a,this);this.Kz?this.Kz.gv(this)&&this.MD():this.ph=aa();b?Nh(this):this.hi=this.mm=p};function fi(a){if(a.xj===p||a.Mg===p)a.xj=h,qf(a)}
function ph(a,b){if(a.hi===p&&(b===f||a.jb.Me(b)))a.hi=h,qf(a);for(var c=a.st.f;c.next();)ph(c.value)}function Rh(a){a.yj===p&&(a.yj=h)}function Qh(a){a.mm===p&&(a.mm=h)}
function gi(a){var b=a.ma;if(b!==m){var c=a.Ab,d=b.width,e=b.height,g=a.HA.copy(),i=p,j=0;a.bp&&(j=a.Ae);var k=0;a.ap&&(k=a.Ae);if(c.clientWidth!==b.width+j||c.clientHeight!==b.height+k)b.width=c.clientWidth-j,b.height=c.clientHeight-k,Nh(a);a.yj=p;if(!a.Bz||a.Bt)(d!==b.width||e!==b.height)&&a.update();else{var l=a.jb,n=a.sc,r=n.width,c=n.height,q=l.width,j=l.height,u=n.x,x=l.x,B=n.right,G=l.right,k=n.y,I=l.y,n=n.bottom,l=l.bottom,y="1px";a.UB&&a.Ee&&(q+1<r?(y=r-q+b.width+"px",a.Pj.scrollLeft=a.position.x-
u):u+1<x?(y=x-u+b.width+"px",a.Pj.scrollLeft=a.Pj.scrollWidth-a.Pj.clientWidth):B>G+1&&(y=B-G+b.width+"px",a.Pj.scrollLeft=a.position.x));r="1px"!==y;r!==a.ap&&(b.height="1px"===y?b.height+a.Ae:b.height-a.Ae,Nh(a),i=h);a.ap=r;a.oA.style.width=y;r="1px";a.VB&&a.Fe&&(j+1<c?(r=c-j+b.height+"px",a.Qj.scrollTop=a.position.y-k):k+1<I?(r=I-k+b.height+"px",a.Qj.scrollTop=a.Qj.scrollHeight-a.Qj.clientHeight):n>l+1&&(r=n-l+b.height+"px",a.Qj.scrollTop=a.position.y));c="1px"!==r;c!==a.bp&&(b.width="1px"===r?
b.width+a.Ae:b.width-a.Ae,Nh(a),i=h);a.bp=c;a.pA.style.height=r;c=b.width;j=b.height;a.Qj.style.height=j+"px";a.Qj.style.width=a.bp?c+a.Ae+"px":c+"px";a.Pj.style.width=c+"px";a.Pj.style.height=a.ap?j+a.Ae+"px":j+"px";a.nA=p;return d!==b.width||e!==b.height?(l=a.jb,a.Kr(g,l,i?h:f),a.update(),p):h}}}function mi(a,b){for(var c=a.Bb,d=c.count,e=0;e<d;e++)c.Z(e).name===b&&v.g("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}
v.a(C,"addsToTemporaryLayer",C.prototype.Yq);v.defineProperty(C,{Yq:m},s("mz"),function(a){v.e(a,"boolean",C,"addsToTemporaryLayer");this.mz=a});
C.prototype.add=C.prototype.add=function(a){v.c(a,R,C,"add:part");var b=this.Yq?"Tool":a.xd,c=this.jn(b);c===m&&(c=this.jn(""));c===m&&v.g('Cannot add a Part when unable find a Layer named "'+b+'" and there is no default Layer');a.sa!==c&&(b=a.b===this?c.dk(99999999,a,h):c.dk(99999999,a),0<=b&&this.ke(we,"parts",c,m,a,m,b),this.Mi(),a.r(ni),b=a.xr,b!==m&&b(a,m,c))};
C.prototype.dk=function(a){if(a instanceof U){if(this.nt.add(a),a instanceof V){var b=a.Ta;b===m?this.Yk.add(a):b.Qk.add(a);b=a.sb;b!==m&&(b.b=this)}}else a instanceof W?this.Us.add(a):a.constructor===R&&this.Cb.add(a);if(b=a.data){a instanceof cf||this.Gf.add(b,a);var c=this;oi(a,a,function(a){pi(c,a)})}(a.Hc===h||a.ii===h)&&this.tg.add(a);qi(a,h);a.gb()&&(ph(this),fi(this))};
C.prototype.vd=function(a){if(a instanceof U){if(this.nt.remove(a),a instanceof V){var b=a.Ta;b===m?this.Yk.remove(a):b.Qk.remove(a);b=a.sb;b!==m&&(b.b=m)}}else a instanceof W?this.Us.remove(a):a.constructor===R&&this.Cb.remove(a);if(b=a.data){a instanceof cf||this.Gf.remove(b);var c=this;oi(a,a,function(a){ri(c,a)})}this.tg.remove(a);a.gb()&&(ph(this),fi(this))};
C.prototype.remove=C.prototype.remove=function(a){v.c(a,R,C,"remove:part");var b=a.sa;if(b!==m&&b.b===this){a.Da=p;a.r(si);a.kl();var c=b.vd(-1,a);0<=c&&this.ke(xe,"parts",b,a,m,c,m);c=a.xr;c!==m&&c(a,b,m);this.Mi();this.pa.standardMouseOver()}};C.prototype.addLayer=C.prototype.Wq=function(a){v.c(a,Ye,C,"addLayer:layer");mi(this,a.name);a.uf(this);var b=this.Bb,c=b.count-1;if(!a.Zc)for(;0<=c&&b.Z(c).Zc;)c--;b.gc(c+1,a);fi(this)};
C.prototype.addLayerBefore=C.prototype.sE=function(a,b){v.c(a,Ye,C,"addLayer:layer");mi(this,a.name);a.uf(this);for(var c=this.Bb.count,d=0;d<c;d++)if(this.Bb.Z(d)===b){this.Bb.gc(d,a);break}fi(this)};C.prototype.addLayerAfter=C.prototype.bH=function(a,b){v.c(a,Ye,C,"addLayer:layer");mi(this,a.name);a.uf(this);for(var c=this.Bb.count,d=0;d<c;d++)if(this.Bb.Z(d)===b){this.Bb.gc(d+1,a);break}fi(this)};
C.prototype.removeLayer=C.prototype.ZJ=function(a){if(""!==a.name&&this.Bb.remove(a)){for(var b=a.Cb.copy().f;b.next();){var c=b.value,d=c.xd;c.xd="";d!==a.name&&(c.xd=d)}fi(this)}};C.prototype.findLayer=C.prototype.jn=function(a){for(var b=this.zr;b.next();){var c=b.value;if(c.name===a)return c}return m};C.prototype.addChangedListener=C.prototype.rx=function(a){v.e(a,"function",C,"addChangedListener:listener");this.ci===m&&(this.ci=new A("function"));this.ci.add(a)};
C.prototype.removeChangedListener=C.prototype.Iy=function(a){v.e(a,"function",C,"removeChangedListener:listener");this.ci!==m&&(this.ci.remove(a),0===this.ci.count&&(this.ci=m))};C.prototype.eu=function(a){this.La||this.ca.SB(a);if(this.ci!==m)for(var b=this.ci.f;b.next();){var c=b.value;c(a)}};C.prototype.raiseChangedEvent=C.prototype.ke=function(a,b,c,d,e,g,i){g===f&&(g=m);i===f&&(i=m);var j=new te;j.b=this;j.Mc=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Pe=g;j.newValue=e;j.Oe=i;this.eu(j)};
C.prototype.raiseChanged=C.prototype.d=function(a,b,c,d,e){this.ke(ve,a,this,b,c,d,e)};v.m(C,{ca:"undoManager"},function(){return this.Qf.ca});v.a(C,"skipsUndoManager",C.prototype.La);v.defineProperty(C,{La:"skipsUndoManager"},s("ui"),function(a){v.e(a,"boolean",C,"skipsUndoManager");this.ui=a});
C.prototype.changeState=C.prototype.ar=function(a,b){if(a!==m&&a.b===this){var c=this.Gk;try{this.Gk=h;var d=a.Mc;if(d===ve){var e=a.object,g=a.propertyName,i=a.$(b);v.bb(e,g,i);if(e instanceof Q){var j=e.T;j!==m&&j.Pg()}}else if(d===we){var k=a.object,l=a.Oe,e=a.newValue;if(k instanceof w){if("number"===typeof l&&e instanceof Q){var n=k;b?n.vd(l):n.gc(l,e);j=k.T;j!==m&&j.Pg()}}else if(k instanceof Ye){var r=a.Pe===h;if("number"===typeof l&&e instanceof R){var q=k;b?(e.Pg(),q.vd(l,e,r)):q.dk(l,e,
r)}}else v.g("unknown ChangedEvent.Insert object: "+a.toString())}else d===xe?(k=a.object,l=a.Pe,e=a.oldValue,k instanceof w?"number"===typeof l&&e instanceof Q&&(n=k,b?n.gc(l,e):n.vd(l)):k instanceof Ye?(r=a.Oe===h,"number"===typeof l&&e instanceof R&&(q=k,b?q.dk(l,e,r):(e.Pg(),q.vd(l,e,r)))):v.g("unknown ChangedEvent.Remove object: "+a.toString())):d!==ue&&v.g("unknown ChangedEvent: "+a.toString())}finally{this.Gk=c}}};C.prototype.startTransaction=C.prototype.Gb=function(a){return this.ca.Gb(a)};
C.prototype.commitTransaction=C.prototype.Md=function(a){return this.ca.Md(a)};C.prototype.rollbackTransaction=C.prototype.Nr=function(){return this.ca.Nr()};C.prototype.updateAllTargetBindings=C.prototype.zK=function(){for(var a=this.Si;a.next();)a.value.ic();for(a=this.hk;a.next();)a.value.ic();for(a=this.links;a.next();)a.value.ic()};
C.prototype.Kr=function(a,b,c){if(!this.bc){Qh(this);ph(this);Rh(this);fi(this);var d=this.sb;d!==m&&(d.Hu&&!c&&(a.width!==b.width||a.height!==b.height))&&d.r();Sh(this);this.fa("ViewportBoundsChanged",c?{}:m,a);ji(this)}};
function ji(a){var b=a.Pc;if(b!==m&&b.visible){for(var c,d=c=1,e=b.xa.length,g=0;g<e;g++){var i=b.xa.j[g],j=i.Uh;2>j||("LineV"===i.Ua?d=d*j/nd(d,j):c=c*j/nd(c,j))}e=b.rr;c=new hb(c*e.width,d*e.height);a=a.jb;a.W()&&(b.width=a.width+2*c.width,b.height=a.height+2*c.height,a=md(a.x,a.y,0,0,c.width,c.height),b.T.location=new E(a.x-c.width,a.y-c.height))}}C.prototype.clearSelection=C.prototype.Ex=function(){this.fa("ChangingSelection");pf(this);this.fa("ChangedSelection")};
function pf(a){a=a.selection;if(0<a.count){for(var b=a.zf(),c=b.length,d=0;d<c;d++)b[d].Da=p;a.ta();a.clear();a.freeze()}}C.prototype.select=C.prototype.select=function(a){if(a!==m&&a.sa.b===this&&(!a.Da||1<this.selection.count))this.fa("ChangingSelection"),pf(this),a.Da=h,this.fa("ChangedSelection")};C.prototype.selectCollection=C.prototype.My=function(a){this.fa("ChangingSelection");pf(this);for(a=a.f;a.next();)a.value.Da=h;this.fa("ChangedSelection")};
C.prototype.scroll=function(a,b,c){c===f&&(c=1);var d="up"===b||"down"===b,e;"pixel"===a?e=c:"line"===a?e=c*(d?this.Qr:this.Pr):"page"===a?0!==window.innerHeight&&(e=Math.max(window.innerHeight-(d?this.Qr:this.Pr),0),e*=c):v.g("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:v.g("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};C.prototype.scrollToRect=C.prototype.eK=function(a){var b=this.jb;b.gl(a)||(a=a.fu,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};C.prototype.centerRect=C.prototype.KH=function(a){var b=this.jb,a=a.fu;a.x-=b.width/2;a.y-=b.height/2;this.position=a};C.prototype.transformDocToView=C.prototype.bs=function(a){var b=this.Gd;b.reset();1!==this.Jb&&b.scale(this.Jb);var c=this.kb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.Gd)};
C.prototype.transformViewToDoc=C.prototype.zD=function(a){var b=this.Gd;b.reset();1!==this.Jb&&b.scale(this.Jb);var c=this.kb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return cb(a.copy(),this.Gd)};var rh;C.None=rh=v.l(C,"None",0);var ci;C.Uniform=ci=v.l(C,"Uniform",1);var di;C.UniformToFill=di=v.l(C,"UniformToFill",2);var $f;C.CycleAll=$f=v.l(C,"CycleAll",10);var dg;C.CycleNotDirected=dg=v.l(C,"CycleNotDirected",11);var fg;
C.CycleNotDirectedFast=fg=v.l(C,"CycleNotDirectedFast",12);var hg;C.CycleNotUndirected=hg=v.l(C,"CycleNotUndirected",13);var ag;C.CycleDestinationTree=ag=v.l(C,"CycleDestinationTree",14);var cg;C.CycleSourceTree=cg=v.l(C,"CycleSourceTree",15);v.a(C,"validCycle",C.prototype.FD);v.defineProperty(C,{FD:"validCycle"},s("Vt"),function(a){var b=this.Vt;b!==a&&(v.Sa(a,C,C,"validCycle"),this.Vt=a,this.d("validCycle",b,a))});v.m(C,{zr:"layers"},function(){return this.Bb.f});v.a(C,"isModelReadOnly",C.prototype.Od);
v.defineProperty(C,{Od:"isModelReadOnly"},function(){var a=this.Qf;return a===m?p:a.Ja},function(a){var b=this.Qf;b!==m&&(b.Ja=a)});v.a(C,"isReadOnly",C.prototype.Ja);v.defineProperty(C,{Ja:"isReadOnly"},s("zj"),function(a){var b=this.zj;b!==a&&(v.e(a,"boolean",C,"isReadOnly"),this.zj=a,this.d("isReadOnly",b,a))});v.a(C,"isEnabled",C.prototype.isEnabled);
v.defineProperty(C,{isEnabled:"isEnabled"},s("qh"),function(a){var b=this.qh;b!==a&&(v.e(a,"boolean",C,"isEnabled"),this.qh=a,this.d("isEnabled",b,a))});v.a(C,"allowClipboard",C.prototype.bu);v.defineProperty(C,{bu:"allowClipboard"},s("cs"),function(a){var b=this.cs;b!==a&&(v.e(a,"boolean",C,"allowClipboard"),this.cs=a,this.d("allowClipboard",b,a))});v.a(C,"allowCopy",C.prototype.Hh);
v.defineProperty(C,{Hh:"allowCopy"},s("Yi"),function(a){var b=this.Yi;b!==a&&(v.e(a,"boolean",C,"allowCopy"),this.Yi=a,this.d("allowCopy",b,a))});v.a(C,"allowDelete",C.prototype.Uj);v.defineProperty(C,{Uj:"allowDelete"},s("Zi"),function(a){var b=this.Zi;b!==a&&(v.e(a,"boolean",C,"allowDelete"),this.Zi=a,this.d("allowDelete",b,a))});v.a(C,"allowDragOut",C.prototype.cu);
v.defineProperty(C,{cu:"allowDragOut"},s("ds"),function(a){var b=this.ds;b!==a&&(v.e(a,"boolean",C,"allowDragOut"),this.ds=a,this.d("allowDragOut",b,a))});v.a(C,"allowDrop",C.prototype.QA);v.defineProperty(C,{QA:"allowDrop"},s("es"),function(a){var b=this.es;b!==a&&(v.e(a,"boolean",C,"allowDrop"),this.es=a,this.d("allowDrop",b,a))});v.a(C,"allowTextEdit",C.prototype.$m);
v.defineProperty(C,{$m:"allowTextEdit"},s("ij"),function(a){var b=this.ij;b!==a&&(v.e(a,"boolean",C,"allowTextEdit"),this.ij=a,this.d("allowTextEdit",b,a))});v.a(C,"allowGroup",C.prototype.Um);v.defineProperty(C,{Um:"allowGroup"},s("$i"),function(a){var b=this.$i;b!==a&&(v.e(a,"boolean",C,"allowGroup"),this.$i=a,this.d("allowGroup",b,a))});v.a(C,"allowUngroup",C.prototype.an);
v.defineProperty(C,{an:"allowUngroup"},s("jj"),function(a){var b=this.jj;b!==a&&(v.e(a,"boolean",C,"allowUngroup"),this.jj=a,this.d("allowUngroup",b,a))});v.a(C,"allowInsert",C.prototype.Vm);v.defineProperty(C,{Vm:"allowInsert"},s("gs"),function(a){var b=this.gs;b!==a&&(v.e(a,"boolean",C,"allowInsert"),this.gs=a,this.d("allowInsert",b,a))});v.a(C,"allowLink",C.prototype.bl);
v.defineProperty(C,{bl:"allowLink"},s("aj"),function(a){var b=this.aj;b!==a&&(v.e(a,"boolean",C,"allowLink"),this.aj=a,this.d("allowLink",b,a))});v.a(C,"allowRelink",C.prototype.zi);v.defineProperty(C,{zi:"allowRelink"},s("dj"),function(a){var b=this.dj;b!==a&&(v.e(a,"boolean",C,"allowRelink"),this.dj=a,this.d("allowRelink",b,a))});v.a(C,"allowMove",C.prototype.Vj);
v.defineProperty(C,{Vj:"allowMove"},s("bj"),function(a){var b=this.bj;b!==a&&(v.e(a,"boolean",C,"allowMove"),this.bj=a,this.d("allowMove",b,a))});v.a(C,"allowPrint",C.prototype.Wm);v.defineProperty(C,{Wm:"allowPrint"},s("cj"),function(a){var b=this.cj;b!==a&&(v.e(a,"boolean",C,"allowPrint"),this.cj=a,this.d("allowPrint",b,a))});v.a(C,"allowReshape",C.prototype.Xm);
v.defineProperty(C,{Xm:"allowReshape"},s("ej"),function(a){var b=this.ej;b!==a&&(v.e(a,"boolean",C,"allowReshape"),this.ej=a,this.d("allowReshape",b,a))});v.a(C,"allowResize",C.prototype.Ym);v.defineProperty(C,{Ym:"allowResize"},s("fj"),function(a){var b=this.fj;b!==a&&(v.e(a,"boolean",C,"allowResize"),this.fj=a,this.d("allowResize",b,a))});v.a(C,"allowRotate",C.prototype.Zm);
v.defineProperty(C,{Zm:"allowRotate"},s("gj"),function(a){var b=this.gj;b!==a&&(v.e(a,"boolean",C,"allowRotate"),this.gj=a,this.d("allowRotate",b,a))});v.a(C,"allowSelect",C.prototype.Id);v.defineProperty(C,{Id:"allowSelect"},s("hj"),function(a){var b=this.hj;b!==a&&(v.e(a,"boolean",C,"allowSelect"),this.hj=a,this.d("allowSelect",b,a))});v.a(C,"allowUndo",C.prototype.tx);
v.defineProperty(C,{tx:"allowUndo"},s("hs"),function(a){var b=this.hs;b!==a&&(v.e(a,"boolean",C,"allowUndo"),this.hs=a,this.d("allowUndo",b,a))});v.a(C,"allowZoom",C.prototype.Zq);v.defineProperty(C,{Zq:"allowZoom"},s("js"),function(a){var b=this.js;b!==a&&(v.e(a,"boolean",C,"allowZoom"),this.js=a,this.d("allowZoom",b,a))});v.a(C,"hasVerticalScrollbar",C.prototype.VB);
v.defineProperty(C,{VB:"hasVerticalScrollbar"},s("Js"),function(a){var b=this.Js;b!==a&&(v.e(a,"boolean",C,"hasVerticalScrollbar"),this.Js=a,this.d("hasVerticalScrollbar",b,a),Sh(this))});v.a(C,"hasHorizontalScrollbar",C.prototype.UB);v.defineProperty(C,{UB:"hasHorizontalScrollbar"},s("Is"),function(a){var b=this.Is;b!==a&&(v.e(a,"boolean",C,"hasHorizontalScrollbar"),this.Is=a,this.d("hasHorizontalScrollbar",b,a),Sh(this))});v.a(C,"allowHorizontalScroll",C.prototype.Ee);
v.defineProperty(C,{Ee:"allowHorizontalScroll"},s("fs"),function(a){var b=this.fs;b!==a&&(v.e(a,"boolean",C,"allowHorizontalScroll"),this.fs=a,this.d("allowHorizontalScroll",b,a),Sh(this))});v.a(C,"allowVerticalScroll",C.prototype.Fe);v.defineProperty(C,{Fe:"allowVerticalScroll"},s("is"),function(a){var b=this.is;b!==a&&(v.e(a,"boolean",C,"allowVerticalScroll"),this.is=a,this.d("allowVerticalScroll",b,a),Sh(this))});v.a(C,"scrollHorizontalLineChange",C.prototype.Pr);
v.defineProperty(C,{Pr:"scrollHorizontalLineChange"},s("Ct"),function(a){var b=this.Ct;b!==a&&(v.e(a,"number",C,"scrollHorizontalLineChange"),0>a&&v.ha(a,">= 0",C,"scrollHorizontalLineChange"),this.Ct=a,this.d("scrollHorizontalLineChange",b,a))});v.a(C,"scrollVerticalLineChange",C.prototype.Qr);
v.defineProperty(C,{Qr:"scrollVerticalLineChange"},s("Dt"),function(a){var b=this.Dt;b!==a&&(v.e(a,"number",C,"scrollVerticalLineChange"),0>a&&v.ha(a,">= 0",C,"scrollVerticalLineChange"),this.Dt=a,this.d("scrollVerticalLineChange",b,a))});v.a(C,"lastInput",C.prototype.F);v.defineProperty(C,{F:"lastInput"},s("kc"),function(a){t&&v.c(a,re,C,"lastInput");this.kc=a});v.a(C,"firstInput",C.prototype.ec);v.defineProperty(C,{ec:"firstInput"},s("Jf"),function(a){t&&v.c(a,re,C,"firstInput");this.Jf=a});
v.a(C,"currentCursor",C.prototype.rc);v.defineProperty(C,{rc:"currentCursor"},s("ys"),function(a){v.e(a,"string",C,"currentCursor");this.ys===a||""===a&&this.ys===this.Ao||(this.ys=a,""!==a?(this.ma.style.cursor=a,document.body.style.cursor=a):(this.ma.style.cursor=this.Nx,document.body.style.cursor=this.Nx))});v.a(C,"defaultCursor",C.prototype.Nx);
v.defineProperty(C,{Nx:"defaultCursor"},s("Ao"),function(a){v.e(a,"string",C,"defaultCursor");var b=this.Ao;b!==a&&(this.Ao=a,this.d("defaultCursor",b,a))});v.a(C,"hasGestureZoom",C.prototype.DF);v.defineProperty(C,{DF:"hasGestureZoom"},s("Ek"),function(a){var b=this.Ek;b!==a&&(v.e(a,"boolean",C,"hasGestureZoom"),this.Ek=a,this.d("hasGestureZoom",b,a))});v.a(C,"click",C.prototype.click);
v.defineProperty(C,{click:"click"},s("jh"),function(a){var b=this.jh;b!==a&&(a!==m&&v.e(a,"function",C,"click"),this.jh=a,this.d("click",b,a))});v.a(C,"doubleClick",C.prototype.ll);v.defineProperty(C,{ll:"doubleClick"},s("mh"),function(a){var b=this.mh;b!==a&&(a!==m&&v.e(a,"function",C,"doubleClick"),this.mh=a,this.d("doubleClick",b,a))});v.a(C,"contextClick",C.prototype.dr);
v.defineProperty(C,{dr:"contextClick"},s("kh"),function(a){var b=this.kh;b!==a&&(a!==m&&v.e(a,"function",C,"contextClick"),this.kh=a,this.d("contextClick",b,a))});v.a(C,"mouseOver",C.prototype.Gr);v.defineProperty(C,{Gr:"mouseOver"},s("zh"),function(a){var b=this.zh;b!==a&&(a!==m&&v.e(a,"function",C,"mouseOver"),this.zh=a,this.d("mouseOver",b,a))});v.a(C,"mouseHover",C.prototype.Fr);
v.defineProperty(C,{Fr:"mouseHover"},s("yh"),function(a){var b=this.yh;b!==a&&(a!==m&&v.e(a,"function",C,"mouseHover"),this.yh=a,this.d("mouseHover",b,a))});v.a(C,"mouseHold",C.prototype.Er);v.defineProperty(C,{Er:"mouseHold"},s("xh"),function(a){var b=this.xh;b!==a&&(a!==m&&v.e(a,"function",C,"mouseHold"),this.xh=a,this.d("mouseHold",b,a))});v.a(C,"mouseDragOver",C.prototype.yC);
v.defineProperty(C,{yC:"mouseDragOver"},s("ht"),function(a){var b=this.ht;b!==a&&(a!==m&&v.e(a,"function",C,"mouseDragOver"),this.ht=a,this.d("mouseDragOver",b,a))});v.a(C,"mouseDrop",C.prototype.Dr);v.defineProperty(C,{Dr:"mouseDrop"},s("wh"),function(a){var b=this.wh;b!==a&&(a!==m&&v.e(a,"function",C,"mouseDrop"),this.wh=a,this.d("mouseDrop",b,a))});v.a(C,"toolTip",C.prototype.as);
v.defineProperty(C,{as:"toolTip"},s("Fh"),function(a){var b=this.Fh;b!==a&&(a!==m&&v.c(a,cf,C,"toolTip"),this.Fh=a,this.d("toolTip",b,a))});v.a(C,"contextMenu",C.prototype.contextMenu);v.defineProperty(C,{contextMenu:"contextMenu"},s("lh"),function(a){var b=this.lh;b!==a&&(a!==m&&v.c(a,cf,C,"contextMenu"),this.lh=a,this.d("contextMenu",b,a))});v.a(C,"commandHandler",C.prototype.Ld);
v.defineProperty(C,{Ld:"commandHandler"},s("Rv"),function(a){var b=this.Rv;b!==a&&(v.c(a,oa,C,"commandHandler"),a.b!==m&&v.g("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==m&&b.uf(m),this.Rv=a,a.uf(this))});v.a(C,"toolManager",C.prototype.Ob);v.defineProperty(C,{Ob:"toolManager"},s("Ut"),function(a){var b=this.Ut;b!==a&&(v.c(a,af,C,"toolManager"),a.b!==m&&v.g("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==m&&b.uf(m),this.Ut=a,a.uf(this))});
v.a(C,"defaultTool",C.prototype.mu);v.defineProperty(C,{mu:"defaultTool"},s("Zv"),function(a){var b=this.Zv;b!==a&&(v.c(a,rf,C,"defaultTool"),this.Zv=a,this.pa===b&&(this.pa=a))});v.a(C,"currentTool",C.prototype.pa);v.defineProperty(C,{pa:"currentTool"},s("Uv"),function(a){var b=this.Uv;b!==m&&(b.Q&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());a===m&&(a=this.mu);a!==m&&(v.c(a,rf,C,"currentTool"),this.Uv=a,a.uf(this),a.doStart())});v.m(C,{selection:"selection"},s("Gt"));
v.a(C,"maxSelectionCount",C.prototype.rC);v.defineProperty(C,{rC:"maxSelectionCount"},s("at"),function(a){var b=this.at;if(b!==a)if(v.e(a,"number",C,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.at=a,this.d("maxSelectionCount",b,a),!this.ca.ab&&(a=this.selection.count-a,0<a)){this.fa("ChangingSelection");for(var b=this.selection.zf(),c=0;c<a;c++)b[c].Da=p;this.fa("ChangedSelection")}}else v.ha(a,">= 0",C,"maxSelectionCount")});v.a(C,"nodeSelectionAdornmentTemplate",C.prototype.BC);
v.defineProperty(C,{BC:"nodeSelectionAdornmentTemplate"},s("Ew"),function(a){var b=this.Ew;b!==a&&(v.c(a,cf,C,"nodeSelectionAdornmentTemplate"),this.Ew=a,this.d("nodeSelectionAdornmentTemplate",b,a))});v.a(C,"groupSelectionAdornmentTemplate",C.prototype.QB);v.defineProperty(C,{QB:"groupSelectionAdornmentTemplate"},s("ow"),function(a){var b=this.ow;b!==a&&(v.c(a,cf,C,"groupSelectionAdornmentTemplate"),this.ow=a,this.d("groupSelectionAdornmentTemplate",b,a))});
v.a(C,"linkSelectionAdornmentTemplate",C.prototype.nC);v.defineProperty(C,{nC:"linkSelectionAdornmentTemplate"},s("ww"),function(a){var b=this.ww;b!==a&&(v.c(a,cf,C,"linkSelectionAdornmentTemplate"),this.ww=a,this.d("linkSelectionAdornmentTemplate",b,a))});v.a(C,"isModified",C.prototype.OF);v.defineProperty(C,{OF:"isModified"},function(){var a=this.ca;return a===m?this.Rz:a.il!==m?h:this.Rz&&this.tj!==a.Li},function(a){v.e(a,"boolean",C,"isModified");this.Rz=a;var b=this.ca;!a&&b&&(this.tj=b.Li)});
v.a(C,"model",C.prototype.I);v.defineProperty(C,{I:"model"},s("Qf"),function(a){var b=this.Qf;if(b!==a){v.c(a,D,C,"model");b!==m&&(b.ca!==a.ca&&b.ca.MF)&&v.g("Do not replace a Diagram.model while a transaction is in progress.");this.Kf=p;this.Po=h;this.Mg=p;var c=this.Ye;this.Ye=h;b!==m&&(b.Iy(this.Xz),b instanceof P&&th(this,b.eg),th(this,b.Zg));this.Qf=a;a.rx(this.Wz);uh(this,a.Zg);a instanceof P&&vh(this,a.eg);a.Iy(this.Wz);a.rx(this.Xz);this.Ye=c;qf(this);b!==m&&(a.ca.isEnabled=b.ca.isEnabled)}});
function sh(a,b,c){var d=a.dg(b);if(d!==m&&"string"===typeof c)d.ic(c);else{d=m;for(a=a.Jk.f;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];i.Ze!==m&&(i=i.Ze.$(b),i!==m&&(d===m&&(d=[]),d.push(i)))}if(d!==m)break}b=d;if(b!==m&&"string"===typeof c)for(d=0;d<b.length;d++)b[d].ic(c)}}function pi(a,b){var c=b.Aj;if(v.isArray(c)){var d=a.Jk.$(c);if(d===m)a.Jk.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function ri(a,b){var c=b.Aj;if(v.isArray(c)){var d=a.Jk.$(c);if(d!==m)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Jk.remove(c);break}}}
C.prototype.clear=C.prototype.clear=function(){var a=m;this.Pc!==m&&(a=this.Pc.T);this.I.clear();for(var b=this.Bb.length,c=0;c<b;c++)this.Bb.j[c].clear();this.tg.clear();this.bm.clear();this.nt.clear();this.Yk.clear();this.Us.clear();this.Cb.clear();this.Gf.clear();this.Jk.clear();this.Gt.ta();this.Gt.clear();this.Gt.freeze();this.Xl=this.Qw=m;this.Ds=(new F(NaN,NaN,NaN,NaN)).freeze();a!==m&&(this.add(a),this.Cb.remove(a))};
C.prototype.reset=C.prototype.reset=function(){this.bc=h;this.clear();this.Bb=new A(Ye);this.kb=(new E(NaN,NaN)).freeze();this.Jb=1;this.et=1E-4;this.$s=100;this.Yt=(new E(NaN,NaN)).freeze();this.Gs=(new F(NaN,NaN,NaN,NaN)).freeze();this.uk=rh;this.yk=Wb;this.vj=rh;this.jm=Wb;this.Ls=this.Ks=Xb;this.ls=(new rb(16,16,16,16)).freeze();this.Rs=h;this.Vt=$f;this.Ao="auto";this.Qf=this.lh=this.Fh=this.wh=this.ht=this.xh=this.yh=this.zh=this.kh=this.mh=this.jh=m;this.zj=p;this.Zi=this.Yi=this.cs=this.qh=
h;this.es=this.ds=p;this.is=this.fs=this.Js=this.Is=this.js=this.hs=this.hj=this.gj=this.fj=this.ej=this.cj=this.bj=this.dj=this.aj=this.gs=this.jj=this.$i=this.ij=h;this.Dt=this.Ct=16;this.Fd=(new rb(5)).freeze();this.at=999999999;this.Sc=m;Bh(this);Ch(this);this.Pc=m;this.I=new P;this.ui=h;this.sb=new Dh;this.bc=this.ui=p};
C.prototype.rebuildParts=C.prototype.Al=function(){for(var a=[],b=this.selection.f;b.next();){var c=b.value.data;c&&a.push(c)}b=this.I;b instanceof P&&th(this,b.eg);th(this,b.Zg);uh(this,b.Zg);b instanceof P&&vh(this,b.eg);for(b=0;b<a.length;b++)if(c=this.dg(a[b]))c.Da=h};function uh(a,b){if(b!==m){for(var c=a.I,d=v.xb(b),e=0;e<d;e++){var g=v.mb(b,e);c.Bi(g)?wh(a,g,p):xh(a,g)}if(c instanceof P){for(e=0;e<d;e++)g=v.mb(b,e),c.Bi(g)&&ti(a,g);for(c=a.links;c.next();)ui(c.value)}a.gy(p)}}
function wh(a,b,c){if(!(b===f||b===m)&&!a.ca.ab&&!a.Gf.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof R&&(of(e),e=e.copy(),e instanceof R&&(e.kj=d,a.add(e),e.data=b,c&&ti(a,b)))}}C.prototype.getCategoryForNodeData=C.prototype.LB=function(a){var b=this.I,c=b.LB(a),d=p;b instanceof P&&(d=b.my(a));d&&""===c&&(c="LinkLabel");return c};
C.prototype.findTemplateForNodeData=C.prototype.JI=function(a,b){var c=p,d=this.I;d instanceof P&&(c=d.hy(a));c?(c=this.dy.$(b),c===m&&(c=this.dy.$(""),c===m&&(v.lE===f&&(v.lE=h,v.trace('No Group template found for category "'+b+'"'),v.trace("  Using default group template")),c=this.SD))):(c=this.Dy.$(b),c===m&&(c=this.Dy.$(""),c===m&&(v.oE===f&&(v.oE=h,v.trace('No Node template found for category "'+b+'"'),v.trace("  Using default node template")),c=this.VD)));return c instanceof R?c:m};
function ti(a,b){var c=a.I;if(c instanceof P){var d=c.Xb(b);if(d!==f){var e=c.DB(d),g=a.dg(b);if(e!==m&&g!==m&&g instanceof U){for(e=e.f;e.next();){var i=e.value;if(c.Bi(i)){if(g instanceof V&&c.qr(i)===d){var j=a.dg(i);j!==m&&(j.Ta=g)}}else if(j=a.Ji(i),j!==m){c.qn(i)===d&&(j.da=g);c.rn(i)===d&&(j.ga=g);for(var i=c.ql(i),k=0;k<i.length;k++)if(i[k]===d){g.fe=j;break}}}c.Ug(d)}c=c.qr(b);c!==f&&(c=a.Th(c),c instanceof V&&(g.Ta=c))}}}
function vh(a,b){if(b!==m){for(var c=v.xb(b),d=0;d<c;d++)xh(a,v.mb(b,d));a.gy(p)}}
function xh(a,b){if(!(b===f||b===m)&&!a.ca.ab&&!a.Gf.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof W&&(of(d),d=d.copy(),d instanceof W)){d.kj=c;var c=a.I,e=c.qn(b);e!==f&&(e=a.Th(e),e instanceof U&&(d.da=e));e=c.yF(b);d.Vg=e;e=c.rn(b);e!==f&&(e=a.Th(e),e instanceof U&&(d.ga=e));e=c.AF(b);d.Zh=e;c=c.ql(b);if(v.isArray(c))for(var e=v.xb(c),g=0;g<e;g++){var i=a.Th(v.mb(c,g));i!==m&&(i.fe=d)}a.add(d);d.data=b}}}
C.prototype.getCategoryForLinkData=C.prototype.KB=function(a){return this.I.KB(a)};C.prototype.findTemplateForLinkData=C.prototype.II=function(a,b){var c=this.ry.$(b);c===m&&(c=this.ry.$(""),c===m&&(v.nE===f&&(v.nE=h,v.trace('No Link template found for category "'+b+'"'),v.trace("  Using default link template")),c=this.UD));return c instanceof W?c:m};function th(a,b){for(var c=v.xb(b),d=0;d<c;d++)yh(a,v.mb(b,d))}
function yh(a,b){if(!(b===f||b===m)){var c=a.dg(b);if(c instanceof R){var d=c.sa;if(!(d===m||d.b!==a)){var e=a.I;if(e instanceof P&&c instanceof U){var g=e.Xb(c.data);if(g!==f){for(var i=c.ge;i.next();){var j=i.value.data;e.bg(g,j)}c.Ni&&(i=c.fe,i!==m&&(j=i.data,e.bg(g,j)));if(c instanceof V)for(i=c.hc;i.next();)j=i.value.data,e.Bi(j)&&e.bg(g,j)}}c.Da=p;e=d.vd(-1,c);0<=e&&a.ke(xe,"parts",d,c,m,e,m);e=c.xr;e!==m&&e(c,d,m)}}}}
C.prototype.findPartForKey=C.prototype.GI=function(a){if(a===m||a===f)return m;a=this.I.Tg(a);if(a===m)return m;a=this.Gf.$(a);return a instanceof R?a:m};C.prototype.findNodeForKey=C.prototype.Th=function(a){if(a===m||a===f)return m;a=this.I.Tg(a);if(a===m)return m;a=this.Gf.$(a);return a instanceof U?a:m};C.prototype.findPartForData=C.prototype.dg=function(a){if(a===m)return m;a=this.Gf.$(a);return a instanceof R?a:m};
C.prototype.findNodeForData=C.prototype.sF=function(a){if(a===m)return m;a=this.Gf.$(a);return a instanceof U?a:m};C.prototype.findLinkForData=C.prototype.Ji=function(a){if(a===m)return m;a=this.Gf.$(a);return a instanceof W?a:m};v.a(C,"nodeTemplate",C.prototype.gG);v.defineProperty(C,{gG:"nodeTemplate"},function(){return this.qi.$("")},function(a){var b=this.qi.$("");b!==a&&(v.c(a,R,C,"nodeTemplate"),this.qi.add("",a),this.d("nodeTemplate",b,a),this.ca.ab||this.Al())});v.a(C,"nodeTemplateMap",C.prototype.Dy);
v.defineProperty(C,{Dy:"nodeTemplateMap"},s("qi"),function(a){var b=this.qi;b!==a&&(v.c(a,ja,C,"nodeTemplateMap"),this.qi=a,this.d("nodeTemplateMap",b,a),this.ca.ab||this.Al())});v.a(C,"groupTemplate",C.prototype.CF);v.defineProperty(C,{CF:"groupTemplate"},function(){return this.Dk.$("")},function(a){var b=this.Dk.$("");b!==a&&(v.c(a,V,C,"groupTemplate"),this.Dk.add("",a),this.d("groupTemplate",b,a),this.ca.ab||this.Al())});v.a(C,"groupTemplateMap",C.prototype.dy);
v.defineProperty(C,{dy:"groupTemplateMap"},s("Dk"),function(a){var b=this.Dk;b!==a&&(v.c(a,ja,C,"groupTemplateMap"),this.Dk=a,this.d("groupTemplateMap",b,a),this.ca.ab||this.Al())});v.a(C,"linkTemplate",C.prototype.XF);v.defineProperty(C,{XF:"linkTemplate"},function(){return this.Dj.$("")},function(a){var b=this.Dj.$("");b!==a&&(v.c(a,W,C,"linkTemplate"),this.Dj.add("",a),this.d("linkTemplate",b,a),this.ca.ab||this.Al())});v.a(C,"linkTemplateMap",C.prototype.ry);
v.defineProperty(C,{ry:"linkTemplateMap"},s("Dj"),function(a){var b=this.Dj;b!==a&&(v.c(a,ja,C,"linkTemplateMap"),this.Dj=a,this.d("linkTemplateMap",b,a),this.ca.ab||this.Al())});v.a(C,"isMouseCaptured",C.prototype.Cc);
v.defineProperty(C,{Cc:"isMouseCaptured"},s("Sz"),function(a){var b=this.ma;a?(this.F.bubbles=p,b.removeEventListener("mousemove",this.Fn,p),b.removeEventListener("mousedown",this.En,p),b.removeEventListener("mouseup",this.Hn,p),b.removeEventListener("mousewheel",this.hg,p),b.removeEventListener("DOMMouseScroll",this.hg,p),b.removeEventListener("mouseout",this.Gn,p),window.addEventListener("mousemove",this.Fn,h),window.addEventListener("mousedown",this.En,h),window.addEventListener("mouseup",this.Hn,
h),window.addEventListener("mousewheel",this.hg,h),window.addEventListener("DOMMouseScroll",this.hg,h),window.addEventListener("mouseout",this.Gn,h),window.addEventListener("selectstart",this.preventDefault,p)):(window.removeEventListener("mousemove",this.Fn,h),window.removeEventListener("mousedown",this.En,h),window.removeEventListener("mouseup",this.Hn,h),window.removeEventListener("mousewheel",this.hg,h),window.removeEventListener("DOMMouseScroll",this.hg,h),window.removeEventListener("mouseout",
this.Gn,h),window.removeEventListener("selectstart",this.preventDefault,p),b.addEventListener("mousemove",this.Fn,p),b.addEventListener("mousedown",this.En,p),b.addEventListener("mouseup",this.Hn,p),b.addEventListener("mousewheel",this.hg,p),b.addEventListener("DOMMouseScroll",this.hg,p),b.addEventListener("mouseout",this.Gn,p));this.Sz=a});v.a(C,"position",C.prototype.position);
v.defineProperty(C,{position:"position"},s("kb"),function(a){var b=this.kb;if(!b.u(a)){v.c(a,E,C,"position");var c=this.jb.copy();c.x=b.x;c.y=b.y;b.su(a)?a=b:this.bc||(this.bc=h,b=this.scale,bi(this,a,this.sc,this.ma.width/b,this.ma.height/b,this.yk),this.bc=p);this.kb=a.B();this.Kr(c,this.jb);qf(this)}});v.a(C,"grid",C.prototype.Cu);
v.defineProperty(C,{Cu:"grid"},function(){this.Pc===m&&Oh(this);return this.Pc},function(a){var b=this.Pc;b!==a&&(b===m&&(Oh(this),b=this.Pc),v.c(a,w,C,"grid"),a.type!==Ph&&v.g("Diagram.grid must be a Panel of type Panel.Grid"),b.V.remove(b),this.Pc=a,a.name="GRID",b.V.add(a),ph(this),this.d("grid",b,a))});v.m(C,{jb:"viewportBounds"},function(){var a=this.kb,b=this.Jb,c=this.ma,d=this.HA;d.Xd(a.x,a.y,Math.max(c.width,0)/b,Math.max(c.height,0)/b);return d});v.a(C,"fixedBounds",C.prototype.Yx);
v.defineProperty(C,{Yx:"fixedBounds"},s("Gs"),function(a){var b=this.Gs;b.u(a)||(v.c(a,F,C,"fixedBounds"),this.Gs=a=a.B(),fi(this),this.d("fixedBounds",b,a))});v.m(C,{sc:"documentBounds"},s("Ds"));function ei(a,b){var c=a.Ds;c.u(b)||(b=b.B(),a.Ds=b,a.xj=p,Sh(a),a.fa("DocumentBoundsChanged",m,c.copy()),Rh(a))}v.a(C,"scale",C.prototype.scale);
v.defineProperty(C,{scale:"scale"},s("Jb"),function(a){var b=this.Jb;if(b!==a){v.i(a,C,"scale");this.Jb=a;var c=a;a<this.Ri&&(c=this.Ri);a>this.Qi&&(c=this.Qi);if(!isNaN(a)&&!this.bc&&!this.Ye){this.bc=h;var d=this.jb.copy(),e=this.ma.width/c,g=this.ma.height/c;d.width=this.ma.width/b;d.height=this.ma.height/b;var i=this.rk.copy();if(isNaN(i.x))switch(this.ju){case uc:i.x=0;break;case vc:i.x=e-1;break;case ec:i.x=e/2;break;case Wb:case Cc:i.x=e/2}if(isNaN(i.y))switch(this.ju){case tc:i.y=0;break;
case wc:i.y=g-1;break;case ec:i.y=g/2;break;case Wb:case Cc:i.y=g/2}var j=this.position,a=new E(j.x+i.x/b-i.x/a,j.y+i.y/b-i.y/a);bi(this,a,this.sc,e,g,this.yk);this.position=a;this.bc=p;e=this.jb;this.Jb=c;this.Kr(d,e)}ph(this);Rh(this)}});v.a(C,"autoScale",C.prototype.xx);v.defineProperty(C,{xx:"autoScale"},s("uk"),function(a){var b=this.uk;b!==a&&(v.Sa(a,C,C,"autoScale"),this.uk=a,this.d("autoScale",b,a),a!==rh&&Sh(this))});v.a(C,"initialAutoScale",C.prototype.GF);
v.defineProperty(C,{GF:"initialAutoScale"},s("vj"),function(a){var b=this.vj;b!==a&&(v.Sa(a,C,C,"initialAutoScale"),this.vj=a,this.d("initialAutoScale",b,a))});v.a(C,"initialViewportSpot",C.prototype.ZB);v.defineProperty(C,{ZB:"initialViewportSpot"},s("Ls"),function(a){var b=this.Ls;b!==a&&(v.c(a,K,C,"initialViewportSpot"),Ob(a)||v.g("initialViewportSpot must be a real Spot: "+a),this.Ls=a,this.d("initialViewportSpot",b,a))});v.a(C,"initialDocumentSpot",C.prototype.YB);
v.defineProperty(C,{YB:"initialDocumentSpot"},s("Ks"),function(a){var b=this.Ks;b!==a&&(v.c(a,K,C,"initialDocumentSpot"),Ob(a)||v.g("initialViewportSpot must be a real Spot: "+a),this.Ks=a,this.d("initialDocumentSpot",b,a))});v.a(C,"minScale",C.prototype.Ri);v.defineProperty(C,{Ri:"minScale"},s("et"),function(a){v.i(a,C,"minScale");var b=this.et;b!==a&&0<a?(this.et=a,this.d("minScale",b,a),a>this.scale&&(this.scale=a)):v.ha(a,"> 0",C,"minScale")});v.a(C,"maxScale",C.prototype.Qi);
v.defineProperty(C,{Qi:"maxScale"},s("$s"),function(a){v.i(a,C,"maxScale");var b=this.$s;b!==a&&0<a?(this.$s=a,this.d("maxScale",b,a),a<this.scale&&(this.scale=a)):v.ha(a,"> 0",C,"maxScale")});v.a(C,"zoomPoint",C.prototype.rk);v.defineProperty(C,{rk:"zoomPoint"},s("Yt"),function(a){this.Yt.u(a)||(v.c(a,E,C,"zoomPoint"),this.Yt=a=a.B(),fi(this))});v.a(C,"contentAlignment",C.prototype.ju);
v.defineProperty(C,{ju:"contentAlignment"},s("yk"),function(a){var b=this.yk;b.u(a)||(v.c(a,K,C,"contentAlignment"),this.yk=a=a.B(),this.d("contentAlignment",b,a),Sh(this))});v.a(C,"initialContentAlignment",C.prototype.HF);v.defineProperty(C,{HF:"initialContentAlignment"},s("jm"),function(a){var b=this.jm;b.u(a)||(v.c(a,K,C,"initialContentAlignment"),this.jm=a=a.B(),this.d("initialContentAlignment",b,a))});v.a(C,"padding",C.prototype.padding);
v.defineProperty(C,{padding:"padding"},s("Fd"),function(a){"number"===typeof a?a=new rb(a):v.c(a,rb,C,"padding");var b=this.Fd;b.u(a)||(this.Fd=a=a.B(),fi(this),this.d("padding",b,a))});v.m(C,{hk:"nodes"},function(){return this.nt.f});v.m(C,{links:"links"},function(){return this.Us.f});v.m(C,{Si:"parts"},function(){return this.Cb.f});v.a(C,"layout",C.prototype.sb);
v.defineProperty(C,{sb:"layout"},s("Sc"),function(a){var b=this.Sc;b!==a&&(v.c(a,Dh,C,"layout"),b!==m&&(b.b=m,b.group=m),this.Sc=a,a.b=this,a.group=m,this.ks=h,this.d("layout",b,a))});C.prototype.layoutDiagram=C.prototype.sJ=function(a){Ah(this);a&&this.gy(h);hi(this)};C.prototype.invalidateAllLayouts=C.prototype.gy=function(a){for(var b=this.Yk.f;b.next();)vi(this,b.value,a);this.sb!==m&&(a?this.sb.Ne=p:this.sb.r())};
function vi(a,b,c){if(b!==m){for(var d=b.Qk.f;d.next();)vi(a,d.value,c);b.sb!==m&&(c?b.sb.Ne=p:b.sb.r())}}function hi(a){for(var b=a.Yk.f;b.next();)wi(a,b.value);b=a.sb;b!==m&&!b.Ne&&(b.doLayout(a),b.Ne=h);a.ks=p}function wi(a,b){if(b!==m){for(var c=b.Qk.f;c.next();)wi(a,c.value);c=b.sb;c!==m&&!c.Ne&&(b.cA=!b.location.W(),c.doLayout(b),b.r(xi),c.Ne=h,ki(a,b))}}v.a(C,"isTreePathToChildren",C.prototype.nf);
v.defineProperty(C,{nf:"isTreePathToChildren"},s("Rs"),function(a){var b=this.Rs;if(b!==a&&(v.e(a,"boolean",C,"isTreePathToChildren"),this.Rs=a,this.d("isTreePathToChildren",b,a),!this.ca.ab))for(a=this.hk;a.next();)yi(a.value)});v.a(C,"isCollapsingExpanding",C.prototype.mf);v.defineProperty(C,{mf:m},s("Oz"),ba("Oz"));function zi(a,b){var c=a.aw.$(b);if(c!==m)return c;c=a.aw.$(b.toLowerCase());if(c!==m)return c;v.g("Unknown DiagramEvent name: "+b);return m}
C.prototype.addDiagramListener=C.prototype.LA=function(a,b){v.e(a,"string",C,"addDiagramListener:name");v.e(b,"function",C,"addDiagramListener:listener");var c=zi(this,a);c!==m&&c.add(b)};C.prototype.removeDiagramListener=C.prototype.NC=function(a,b){v.e(a,"string",C,"removeDiagramListener:name");v.e(b,"function",C,"addDiagramListener:listener");var c=zi(this,a);c!==m&&c.remove(b)};
C.prototype.raiseDiagramEvent=C.prototype.fa=function(a,b,c){t&&v.e(a,"string",C,"raiseDiagramEvent:name");var d=zi(this,a),e=new se;e.b=this;var g=this.$v.$(a),a=g!==m?g:this.$v.$(a.toLowerCase());e.name=a;b!==f&&(e.av=b);c!==f&&(e.Nu=c);for(b=d.f;b.next();)c=b.value,c(e);return e.cancel};function Wf(a,b){for(var c=a.ol(b,function(a){return a.T},function(a){return a instanceof W},h).f;c.next();){var d=c.value;d.Te===If&&d.Nb()}}
function Ai(a,b){if(b!==m&&b.canAvoid()){for(var c=b.getAvoidableRectangle(),d=a.Jc.el,e=a.Jc.dl,g=c.x+c.width,i=c.y+c.height,j=c.x;j<g;j+=d){for(var k=c.y;k<i;k+=e)Bi(a.Jc,j,k);Bi(a.Jc,j,i)}for(k=c.y;k<i;k+=e)Bi(a.Jc,g,k);Bi(a.Jc,g,i)}}function Ci(a,b){if(a.Jc!==m&&!a.Jc.tn&&(b===m||b.canAvoid()))a.Jc.tn=h}
function Jh(a,b,c){if(zf!==m){c instanceof C||(c=m);var d=Gf;c!==d&&(d!==m&&d.Ob.be!==m&&d.Ob.be.zB(),c!==m&&c.Ob.be!==m&&c.Ob.be.yB());Gf=c;if(c===m)return h;d=c.Ob.be;d!==m&&(a!==m&&(b=c.ph(a)),c.kc.C=b,d.mF());return h}return p}
function Lh(a,b,c,d){if(zf!==m){d===m&&(d=m);var e=Gf;d!==e&&(e!==m&&e.Ob.be!==m&&e.Ob.be.zB(),d!==m&&d.Ob.be!==m&&d.Ob.be.yB());Gf=d;if(d===m)return zf.doCancel(),h;if(d!==a)return a=c,b!==m&&(a=d.ph(b)),d.kc.C=a,b=d.Ob.be,b!==m&&b.nF(),zf!==m&&zf.doCancel(),h}return p}v.a(C,"autoScrollRegion",C.prototype.VA);
v.defineProperty(C,{VA:"autoScrollRegion"},s("ls"),function(a){"number"===typeof a?a=new rb(a):v.c(a,rb,C,"autoScrollRegion");var b=this.ls;b.u(a)||(this.ls=a=a.B(),fi(this),this.d("autoScrollRegion",b,a))});
function Vf(a){if(a.kg===m){a.kg={};var b;b=a.pa!==a.Ob.be?a.OD:a.PD;a.kg.isEnabled=h;var c=setInterval(function(){var b=c;a.kg!==m&&a.kg.isEnabled&&(a.kg=m,clearInterval(b),b=Uf(a,a.Mv),b.bk(a.position)||(a.position=b,a.F.C=a.zD(a.Mv),a.pa.doMouseMove(),a.xj=h,ei(a,a.$d()),a.hi=h,a.update(),Vf(a)))},b);a.kg.id=c}}function Bf(a){a.kg!==m&&(a.kg.isEnabled&&clearInterval(a.kg.id),a.kg=m)}
function Uf(a,b){var c=a.position,d=a.VA;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.jb,g=new F(0,0,e.width,e.height),e=new E(0,0);if(b.x>=g.x&&b.x<g.x+d.left){var i=Math.max(a.Pr,1),i=i|0;e.x-=i;b.x<g.x+d.left/2&&(e.x-=i);b.x<g.x+d.left/4&&(e.x-=4*i)}else b.x<=g.x+g.width&&b.x>g.x+g.width-d.right&&(i=Math.max(a.Pr,1),i|=0,e.x+=i,b.x>g.x+g.width-d.right/2&&(e.x+=i),b.x>g.x+g.width-d.right/4&&(e.x+=4*i));b.y>=g.y&&b.y<g.y+d.top?(i=Math.max(a.Qr,1),i|=0,e.y-=i,b.y<g.y+d.top/2&&
(e.y-=i),b.y<g.y+d.top/4&&(e.y-=4*i)):b.y<=g.y+g.height&&b.y>g.y+g.height-d.bottom&&(i=Math.max(a.Qr,1),i|=0,e.y+=i,b.y>g.y+g.height-d.bottom/2&&(e.y+=i),b.y>g.y+g.height-d.bottom/4&&(e.y+=4*i));e.bk(new E(0,0))||(d=a.scale,c=new E(c.x+e.x/d,c.y+e.y/d));return c}
C.prototype.makeImage=C.prototype.uJ=function(a){if(this.ma===m)return m;"object"!==typeof a&&v.g("properties argument must be an Object.");this.Ho=p;Nh(this);var b=document.createElement("canvas");b.width=this.ma.width;b.height=this.ma.height;var c=b.getContext("2d");ph(this);this.cg(c);Nh(this);this.Ho=h;c=new Image;c.src=b.toDataURL(a.type,a.details);return c};
C.prototype.makeImageData=C.prototype.vJ=function(a){if(this.ma===m)return"";"object"!==typeof a&&v.g("properties argument must be an Object.");this.Ho=p;Nh(this);var b=document.createElement("canvas");b.width=this.ma.width;b.height=this.ma.height;var c=b.getContext("2d");ph(this);this.cg(c);Nh(this);this.Ho=h;return b.toDataURL(a.type,a.details)};
C.prototype.renderJson=C.prototype.ig=function(a){this.nh=new ja;this.ng=new ta;a instanceof Object&&a._tabString!==f&&(this.ng.AA=a._tabString);Di(this,this);this.nh.clear();a=this.ng.toString();this.ng=m;return a};
function Di(a,b){if(b instanceof Object&&(!(b instanceof R)||b.gb()))if(!(b instanceof Q)||b.visible)if(!(b instanceof Ye)||b.visible){var c=a.ng;if(b instanceof E)c.add('"'+Sa(b)+'"');else if(b instanceof hb)c.add('"'+jb(b)+'"');else if(b instanceof F)c.add('"'+ob(b)+'"');else if(b instanceof rb)c.add('"'+vb(b)+'"');else if(b instanceof K)c.add('"'+Nb(b)+'"');else{var d;b instanceof zd?d=a.nh.$(b):b instanceof Ce&&(d=a.nh.$(b));d="number"===typeof d?d:-1;-1<d?c.add('{ "class":"ref", "id":'+d+" }"):
(c.uj++,c.add('{ "class": "'+v.Ki(b)+'"'),d=-1,b instanceof zd?(d=a.nh.count,a.nh.add(b,d)):b instanceof Ce&&(d=a.nh.count,a.nh.add(b,d)),-1<d&&c.add(', "id":'+d),b instanceof Q?b.ig():Ei(a,b,Object.getPrototypeOf(b)),c.add(" }"),Aa(c))}}}function Ei(a,b,c){if(c&&c.constructor!==Object&&(Ei(a,b,Object.getPrototypeOf(c)),c.constructor&&(c=c.constructor.YG,c instanceof Array)))for(var d=0;d<c.length;d++){var e=c[d];if("string"===typeof e){var g=v.Wa(b,e);Fi(a,e,g)}}}
function Fi(a,b,c){if(c!==f){var d=a.ng;d.add(",");Ea(d);d.add('"'+b+'": ');Gi(a,c)}}
function Gi(a,b){var c=a.ng;if(b===f)c.add("undefined");else if(b===m)c.add("null");else if(b===h)c.add("true");else if(b===p)c.add("false");else if("string"===typeof b)c.add(a.I.quote(b));else if("number"===typeof b)Infinity===b&&c.add("9e9999"),-Infinity===b&&c.add("-9e9999"),isNaN(b)?c.add('{"class":"NaN"}'):c.add(b.toString());else if("function"===typeof b)c.add("null");else if(v.isArray(b)){c=a.ng;c.uj++;for(var d=v.xb(b),e=p,g=0;g<d;g++){var i=v.mb(b,g);if("object"===typeof i){e=h;break}}c.add("[");
e&&Ea(c);for(g=0;g<d;g++)i=v.mb(b,g),i!==f&&(0<g&&(c.add(","),e&&Ea(c)),Gi(a,i));e&&c.add(" ");c.add("]");Aa(c)}else if(b instanceof ha)c.add(a.I.quote(b.toString()));else if(b instanceof ja){c=a.ng;c.uj++;c.add("{");Ea(c);d=b.f;for(e=h;d.next();)g=d.key,i=d.value,e?e=p:(c.add(","),Ea(c)),c.add('"'+g+'": '),Gi(a,i);c.add(" }");Aa(c)}else if(b instanceof A||b instanceof ka||b.f!==f){c=a.ng;c.uj++;c.add("[");Ea(c);d=b.f;for(e=0;d.next();)g=d.value,g!==f&&(0<e&&(c.add(","),Ea(c)),Gi(a,g),e++);c.add(" ]");
Aa(c)}else b instanceof Object?Di(a,b):c.add(b.toString())}C.inherit=function(a,b){v.na(a,b)};function Hi(a){C.call(this,a);this.cu=h;this.Vj=p;this.Ja=h;this.ju=Yb;this.sb=new Ii}v.H("Palette",Hi);v.na(Hi,C);
function Ji(a){C.call(this,a);this.bc=h;this.si=m;var a=new R,b=new X;b.stroke="magenta";b.Oa=2;b.fill=m;b.name="BOXSHAPE";a.Rn="BOXSHAPE";a.Ar="BOXSHAPE";a.add(b);this.Tl=a;a=new Ki;a.uf(this);this.Ob.ie.gc(0,a);var c=this;this.DC=function(){Li(c)};this.CC=function(){c.si!==m&&(fi(c),ph(c))};this.Ja=h;this.Hh=this.Id=p;this.xx=ci;this.Ob.wl=tf;this.bc=p}v.H("Overview",Ji);v.na(Ji,C);
Ji.prototype.cg=function(){this.Ab===m&&v.g("No div specified");this.ma===m&&v.g("No canvas specified");if(this.hi){var a=this.si;if(a!==m){var b=this.Ak;b.Gv="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.ma.width,this.ma.height);var c=this.Gd;c.reset();1!==this.Jb&&c.scale(this.scale);(0!==this.position.x||0!==this.position.y)&&c.translate(-this.kb.x,-this.kb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.Qa,c.Ra);for(var d=this.jb,e=a.Bb.length,c=0;c<e;c++)for(var g=b,i=d,j=a.Bb.j[c].Cb,k=j.length,
l=0;l<k;l++){var n=j.j[l];n.oa.Me(i)&&n.cg(g,this)}a=this.Bb.length;for(c=0;c<a;c++)this.Bb.j[c].cg(b,this);this.hi=this.mm=p}}};v.a(Ji,"observed",Ji.prototype.hG);
v.defineProperty(Ji,{hG:"observed"},s("si"),function(a){var b=this.si;a!==m&&v.c(a,C,Ji,"observed");b!==a&&!(a instanceof Ji)&&(b!==m&&(this.remove(this.$f),b.NC("ViewportBoundsChanged",this.DC),b.NC("DocumentBoundsChanged",this.CC),b.st.remove(this)),this.si=a,a!==m&&(a.LA("ViewportBoundsChanged",this.DC),a.LA("DocumentBoundsChanged",this.CC),a.st.add(this),this.add(this.$f),Li(this)),fi(this),this.d("observed",b,a))});v.a(Ji,"box",Ji.prototype.$f);
v.defineProperty(Ji,{$f:"box"},s("Tl"),function(a){var b=this.Tl;b!==a&&(this.Tl=a,this.d("box",b,a))});function Li(a){var b=a.$f;if(b!==m){var c=a.si;if(c!==m){a.hi=h;var c=c.jb,d=b.Qn;d.ka=new hb(c.width,c.height);a=2/a.scale;d instanceof X&&(d.Oa=a);b.location=new E(c.x-a/2,c.y-a/2)}}}Ji.prototype.$d=function(){var a=this.si;return a===m?new F(0,0,0,0):a.sc};Ji.prototype.Kr=function(a){this.bc||(Qh(this),ph(this),Rh(this),fi(this),Li(this),this.fa("ViewportBoundsChanged",a))};
function Ki(){rf.call(this);this.name="MoveBox"}v.na(Ki,rf);Ki.prototype.doStart=Ki.prototype.Rx=function(){this.Q=this.b.Cc=h};Ki.prototype.doMouseMove=Ki.prototype.Sg=function(){if(this.Q){var a=this.b;if(!(a===m||a.si===m)){var b=a.si,c=b.jb,d=a.F.C;b.position=new E(d.x-c.width/2,d.y-c.height/2);qf(a)}}};Ki.prototype.doMouseUp=Ki.prototype.Je=function(){this.Q&&this.doMouseMove();this.stopTool()};Ki.prototype.doStop=Ki.prototype.Ii=function(){this.Q=p;var a=this.b;a.Cc=p;Li(a)};
function Ce(a){v.Hb(this);this.Ha=p;a===f?(this.N=Me,this.Wl="black"):"string"===typeof a?(this.N=Me,this.Wl=a):(t&&v.Sa(a,Ce,Ce,"constructor:type"),this.N=a,this.Wl="black");a=this.N;a===Ne?(this.Em=Yb,this.em=gc):this.em=a===Oe?this.Em=ec:this.Em=Ub;this.Lt=0;this.Es=NaN;this.qz=this.rz=this.Ff=this.ut=this.Df=m}v.H("Brush",Ce);var Me;Ce.Solid=Me=v.l(Ce,"Solid",0);var Ne;Ce.Linear=Ne=v.l(Ce,"Linear",1);var Oe;Ce.Radial=Oe=v.l(Ce,"Radial",2);var Mi;Ce.Pattern=Mi=v.l(Ce,"Pattern",2);
Ce.prototype.copy=Ce.prototype.copy=function(){var a=new Ce;a.N=this.N;a.Wl=this.Wl;a.Em=this.Em;a.em=this.em;a.Lt=this.Lt;a.Es=this.Es;this.Df!==m&&(a.Df=this.Df.copy());a.ut=this.ut;return a};Ce.prototype.Ga=function(){this.freeze();Object.freeze(this);return this};Ce.prototype.freeze=function(){this.Ha=h;this.Df!==m&&this.Df.freeze();return this};Ce.prototype.ta=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.Ha=p;this.Df!==m&&this.Df.ta();return this};
Ce.prototype.toString=function(){var a="Brush(";if(this.type===Me)a+=this.color;else if(a=this.type===Ne?a+"Linear ":this.type===Oe?a+"Radial ":this.type===Mi?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.cn!==m)for(var b=this.cn.f;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Ce.prototype.addColorStop=Ce.prototype.addColorStop=function(a,b){v.v(this);(a===m||1<a||0>a)&&v.ha(a,"0 <= loc <= 1",Ce,"addColorStop:loc");v.e(b,"string",Ce,"addColorStop:color");this.Df===m&&(this.Df=new ja("number","string"));this.Df.add(a,b);this.N===Me&&(this.type=Ne);this.Ff=m};v.a(Ce,"type",Ce.prototype.type);
v.defineProperty(Ce,{type:"type"},s("N"),function(a){v.v(this,a);v.Sa(a,Ce,Ce,"type");this.N=a;Sb(this.start)&&(a===Ne?this.start=Yb:a===Oe&&(this.start=ec));Sb(this.end)&&(a===Ne?this.end=gc:a===Oe&&(this.end=ec));this.Ff=m});v.a(Ce,"color",Ce.prototype.color);v.defineProperty(Ce,{color:"color"},s("Wl"),function(a){v.v(this,a);v.e(a,"string",Ce,"color");this.Wl=a;this.Ff=m});v.a(Ce,"start",Ce.prototype.start);
v.defineProperty(Ce,{start:"start"},s("Em"),function(a){v.v(this,a);a instanceof K||v.uc(a,"Spot",Ce,"start");this.Em=a.B();this.Ff=m});v.a(Ce,"end",Ce.prototype.end);v.defineProperty(Ce,{end:"end"},s("em"),function(a){v.v(this,a);a instanceof K||v.uc(a,"Spot",Ce,"end");this.em=a.B();this.Ff=m});v.a(Ce,"startRadius",Ce.prototype.Vn);v.defineProperty(Ce,{Vn:"startRadius"},s("Lt"),function(a){v.v(this,a);v.i(a,Ce,"startRadius");0>a&&v.ha(a,">= zero",Ce,"startRadius");this.Lt=a;this.Ff=m});
v.a(Ce,"endRadius",Ce.prototype.gn);v.defineProperty(Ce,{gn:"endRadius"},s("Es"),function(a){v.v(this,a);v.i(a,Ce,"endRadius");0>a&&v.ha(a,">= zero",Ce,"endRadius");this.Es=a;this.Ff=m});v.a(Ce,"colorStops",Ce.prototype.cn);v.defineProperty(Ce,{cn:"colorStops"},s("Df"),function(a){v.v(this,a);t&&v.c(a,ja,Ce,"colorStops");this.Df=a;this.Ff=m});v.a(Ce,"pattern",Ce.prototype.pattern);v.defineProperty(Ce,{pattern:"pattern"},s("ut"),function(a){v.v(this,a);this.ut=a;this.Ff=m});
Ce.randomColor=function(a,b){a===f&&(a=128);t&&(v.i(a,Ce,"randomColor:min"),(0>a||255<a)&&v.ha(a,"0 <= min <= 255",Ce,"randomColor:min"));b===f&&(b=Math.max(a,255));t&&(v.i(b,Ce,"randomColor:max"),(b<a||255<b)&&v.ha(b,"min <= max <= 255",Ce,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};
function Q(){v.Hb(this);this.Jj=m;this.qb="";this.bf=this.Ng=h;this.gh=this.hh=m;this.kb=(new E(NaN,NaN)).freeze();this.Sd=(new hb(NaN,NaN)).freeze();this.qd=Mc;this.ni=Jc;this.Gd=new Za;this.Ql=new Za;this.tm=new Za;this.Jb=1;this.Pb=0;this.Fg=Jg;this.Dp=(new rb(0)).freeze();this.zc=(new F(NaN,NaN,NaN,NaN)).freeze();this.Yb=(new F(NaN,NaN,NaN,NaN)).freeze();this.Ic=(new F(0,0,NaN,NaN)).freeze();this.Hc=this.ac=this.Fk=this.lm=h;this.Xp=m;this.sg=Ub;this.pg=10;this.og=Ni;this.rg=0;this.Ro=m;this.To=
this.So=p;this.Uo=Infinity;this.Lg=Ub;this.Ig=10;this.Hg=Ni;this.Kg=0;this.Hq=m;this.Jq=this.Iq=p;this.Kq=Infinity;this.fd=m;this.ia=Wb;this.kp=p;this.ho=Wb;this.lq=0;this.Oj=1;this.J=0;this.lj=1;this.oq=-Infinity;this.nq=0;this.pq=Ec;this.qq=Oi;this.uo="";this.lh=this.Fh=this.wh=this.Lp=this.Kp=this.xh=this.yh=this.zh=this.Np=this.Mp=this.kh=this.mh=this.jh=m;this.ep=p;this.Qb=this.ao=this.eo=this.co=this.bo=m;this.Sl=p;this.zk=m;this.CA=new F(NaN,NaN,NaN,NaN);this.no=p;this.oo=m;this.Rl=p;this.Rk=
m}v.H("GraphObject",Q);
Q.prototype.fb=function(a){a.qb=this.qb;a.Ng=this.Ng;a.bf=this.bf;a.hh=this.hh;a.gh=this.gh;a.kb.Pa(this.kb);a.Sd.Pa(this.Sd);a.qd=this.qd.B();a.ni=this.ni.B();a.Jb=this.Jb;a.Pb=this.Pb;a.Fg=this.Fg;a.Dp.Pa(this.Dp);a.zc.Pa(this.zc);a.Yb.Pa(this.Yb);a.Ic.Pa(this.Ic);a.Xp=this.Xp;a.sg=this.sg.B();a.pg=this.pg;a.og=this.og;a.rg=this.rg;a.Ro=this.Ro;a.So=this.So;a.To=this.To;a.Uo=this.Uo;a.Lg=this.Lg.B();a.Ig=this.Ig;a.Hg=this.Hg;a.Kg=this.Kg;a.Hq=this.Hq;a.Iq=this.Iq;a.Jq=this.Jq;a.Kq=this.Kq;a.ia=
this.ia.B();a.kp=this.kp;a.ho=this.ho.B();a.lq=this.lq;a.Oj=this.Oj;a.J=this.J;a.lj=this.lj;a.oq=this.oq;a.nq=this.nq;a.pq=this.pq.B();a.qq=this.qq;a.uo=this.uo;a.jh=this.jh;a.mh=this.mh;a.kh=this.kh;a.Mp=this.Mp;a.Np=this.Np;a.zh=this.zh;a.yh=this.yh;a.xh=this.xh;a.Kp=this.Kp;a.Lp=this.Lp;a.wh=this.wh;a.Fh=this.Fh;a.lh=this.lh;a.ep=this.ep;a.bo=this.bo;a.co=this.co;a.eo=this.eo;a.ao=this.ao;a.Qb=this.Qb;a.Sl=this.Sl;if(this.zk instanceof Array){a.zk=this.zk.slice(0);for(var b=0;b<this.zk.length;b++){var c=
this.zk[b];a[c]=this[c]}}a.Rl=this.Rl};Q.prototype.Rg=function(a){a.fd=m;a.Rk=m;a.K()};Q.prototype.copy=Q.prototype.copy=function(){var a=new this.constructor;this.fb(a);return a};Q.prototype.toString=function(){return v.Ki(Object.getPrototypeOf(this))+"#"+v.fc(this)};var Pi;Q.None=Pi=v.l(Q,"None",0);var Jg;Q.Default=Jg=v.l(Q,"Default",0);var Cd;Q.Fill=Cd=v.l(Q,"Fill",3);var Kg;Q.Uniform=Kg=v.l(Q,"Uniform",1);var Lg;Q.UniformToFill=Lg=v.l(Q,"UniformToFill",2);var Qi;
Q.Vertical=Qi=v.l(Q,"Vertical",4);var Ri;Q.Horizontal=Ri=v.l(Q,"Horizontal",5);Q.prototype.ke=function(a,b,c,d,e,g,i){var j=this.T;if(j!==m&&(j.zl(a,b,c,d,e,g,i),this.Sl&&(c===this&&a===ve)&&(a=this.mr(),a!==m)))for(c=this.Qb.f;c.next();)d=c.value,e=a.data,g=d.Un,g!==m&&(e=a.Ke(g)),e!==m&&(d.DD(this,e,b),g=d.Un,g!==m&&(e=a,""!==g&&(e=a.Ke(g)),e!==m&&(g=d.Gl,g!==m&&(i=a,""!==g&&(i=a.Ke(g)),i!==m&&d.ED(i,e,b)))))};Q.prototype.d=function(a,b,c){this.ke(ve,a,this,b,c)};
function Si(a,b,c,d,e){var g=a.zc,i=a.tm;i.reset();Ti(a,i,b,c,d,e);a.tm=i;g.x=b;g.y=c;g.width=d;g.height=e;i.iy()||i.yD(g)}Q.prototype.GB=function(a,b){if(this.bf===p)return p;var c=this.qa,d=a.Gi(b);return db(a.x,a.y,0,0,0,c.height)<d||db(a.x,a.y,0,c.height,c.width,c.height)<d||db(a.x,a.y,c.width,c.height,c.width,0)<d||db(a.x,a.y,c.width,0,0,0)<d?h:p};
function Ui(a,b,c,d){if(a instanceof w)for(var e=a.xa.length;e--;){var g=a.xa.j[e];if(g.visible){var i=g.oa,j=a.oa;i.x>j.width||(i.y>j.height||0>i.x+i.width||0>i.y+i.height)||(Ui(g,b,c,d),i=g,b!==m&&(i=b(i)),i&&(c===m||c(i))&&d.add(g))}}}
Q.prototype.containsPoint=Q.prototype.ea=function(a){t&&v.c(a,E,Q,"containsPoint:p");var b=Bb(this.transform,a),c=this.oa;if(!c.W())return p;if(v.Yw){var d=this.qa,e=this.pl()*(this.b!==m?this.b.scale:1),g=1/e;if(10>d.width*e&&10>d.height*e)return ub(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Hd!==f||this instanceof X?ub(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.ea(b))?this.oo&&!this.oo.ea(b)?p:this.gh!==m&&c.ea(b)||this.hh!==m&&this.Ic.ea(a)?h:this.Ci(a):p};
Q.prototype.Ci=function(a){var b=this.qa;return ub(0,0,b.width,b.height,a.x,a.y)};Q.prototype.containsRect=Q.prototype.gl=function(a){t&&v.c(a,F,Q,"containsRect:r");if(0===this.Ka)return this.oa.gl(a);var b=this.qa,b=new F(0,0,b.width,b.height),c=this.transform;return b.ea(c.Vh(new E(a.x,a.y)))&&b.ea(c.Vh(new E(a.x,a.bottom)))&&b.ea(c.Vh(new E(a.right,a.bottom)))&&b.ea(c.Vh(new E(a.right,a.y)))};
Q.prototype.containedInRect=Q.prototype.Lx=function(a,b){t&&v.c(a,F,Q,"containedInRect:r");if(b===f)return a.gl(this.oa);var c=this.qa;return!a.ea(b.wb(new E(0,0)))||!a.ea(b.wb(new E(0,c.height)))||!a.ea(b.wb(new E(c.width,c.height)))||!a.ea(b.wb(new E(c.width,0)))?p:h};
Q.prototype.intersectsRect=Q.prototype.Me=function(a,b){t&&v.c(a,F,Q,"intersectsRect:r");if(b===f&&(b=this.transform,0===this.Ka))return a.Me(this.oa);var c=this.qa,d=b,e=new E(0,0),g=new E(0,c.height),i=new E(c.width,c.height),j=new E(c.width,0);if(a.ea(d.wb(e))||a.ea(d.wb(g))||a.ea(d.wb(i))||a.ea(d.wb(j)))return h;c=new F(0,0,c.width,c.height);return c.ea(d.Vh(new E(a.x,a.y)))||c.ea(d.Vh(new E(a.x,a.bottom)))||c.ea(d.Vh(new E(a.right,a.bottom)))||c.ea(d.Vh(new E(a.right,a.y)))||id(a,e,g)||id(a,
g,i)||id(a,i,j)||id(a,j,e)?h:p};Q.prototype.getDocumentPoint=Q.prototype.ub=function(a){Sb(a)&&v.g("Spot must be real");var b=this.qa,a=new E(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.Zd.wb(a);return a};Q.prototype.getDocumentAngle=Q.prototype.pn=function(){var a=this.Zd;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};Q.prototype.getDocumentScale=Q.prototype.pl=function(){var a=this.Jb;return this.V!==m?a*this.V.pl():a};Q.prototype.getLocalPoint=Q.prototype.MB=function(a){return this.Zd.Vh(a.copy())};
Q.prototype.getNearestIntersectionPoint=Q.prototype.Bu=function(a,b,c){var d=this.transform.copy();d.Du();if(this.Ih!==m)return ed(this.oa,a,b,c);if(!(this instanceof w)||this instanceof w&&this.background!==m){var e=Bb(d,a),b=Bb(d,b),a=new E,b=ed(new F(0,0,this.qa.width,this.qa.height),e,b,a),a=Bb(this.transform,a);c.x=a.x;c.y=a.y;return b}if(this instanceof w&&(this.Ih===m||this.Ih===f)){e=this.xa.j;a=Bb(d,a);d=Bb(d,b);c.set(d);for(var g=(d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y),b=p,i=e.length,j=
new E,k=0;k<i;k++){var l=e[k];l.visible&&l.Bu(a,d,j)&&(b=h,l=(a.x-j.x)*(a.x-j.x)+(a.y-j.y)*(a.y-j.y),l<g&&(g=l,c.set(j)))}c.transform(this.transform);return b}v.g("Unknown GraphObject case");return p};
function gh(a,b,c,d,e){if(a.ac!==p){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.ka,i=0;a.Oa&&(i=a.Oa);var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof w;switch(Vi(a)){case Pi:i=g=0;j&&(c=b=Infinity);break;case Cd:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case Ri:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case Qi:isFinite(c)&&c>e&&(i=c),g=0,j&&(b=Infinity)}var j=a.yd,k=a.Qd;g>j.width&&k.width<
j.width&&(g=j.width);i>j.height&&k.height<j.height&&(i=j.height);d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.Ka;if(90===g||270===g)g=b,b=c,c=g,g=d,d=e,e=g;a.zc.ta();a.Br(b,c,d,e);a.zc.freeze();a.zc.W()||v.g("Non-real measuredBounds has been set");a.ac=p}}da=Q.prototype;
da.pc=function(a,b,c,d,e){Wi(this);var g=this.CA;g.set(this.Yb);this.Yb.ta();if(this.Hc===p){var i=this.Yb;i.x=a;i.y=b;i.width=c;i.height=d}else this.Ai(a,b,c,d);this.Yb.freeze();this.oo=e===f?m:e;e!==f?this.no=h:this.V&&(c=this.V.Ic,d=this.la,this.Ih!==m&&(d=this.Yb),e=b+d.height,i=a+d.width,this.no=!(0<=a&&i<=c.width&&0<=b&&e<=c.height),this instanceof ma&&(this.Zs>d.height&&(this.no=h),this.sm.Yh>d.width&&(this.no=h)));this.Yb.W()||v.g("Non-real actualBounds has been set");Xi(this,g,this.Yb)};
da.Ai=aa();function Yi(a,b,c,d,e){var g=a.oa;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.ka.W()){var g=a.zc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=Vi(a);c===d&&g===e&&(b=Pi);switch(b){case Pi:if(c>d||g>e)a.ac=h,gh(a,c>d?d:c,g>e?e:g);break;case Cd:a.ac=h;gh(a,d,e,0,0);break;case Ri:a.ac=h;gh(a,d,g,0,0);break;case Qi:a.ac=h,gh(a,c,e,0,0)}}}
function Xi(a,b,c){a.Hc=p;var d=a.T;if(d!==m){var e=d.b;if(e!==m)if(Zi(d),a instanceof R){d=p;if(e.xj===p){var g=e.sc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-2*i.right,g=g.height-2*i.bottom;b.W()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.ot===h||!b.u(c))&&qi(a,d)}else if($i(a,d),aj(a),b=a.T,b!==m&&(b.Rj===a||b.Wk===a||b.Xk===a))b.ot=h}}function $i(a,b){a.je!==m&&(b.ot=h);if(a instanceof w)for(var c=a.xa,d=c.length,e=0;e<d;e++)$i(c.j[e],b)}
da.cg=function(a,b){if(this.Ng){var c=p;if(this instanceof R){c=h;if(!this.gb())return;if(this.Lf){var d=this.Dm;a.shadowOffsetX=d.x*b.scale;a.shadowOffsetY=d.y*b.scale;a.shadowColor=this.Cm;a.shadowBlur=this.Bm}}var e=p;this.T&&(e=this.T.ul);var g=this.Yb;if(!(0===g.width||0===g.height||isNaN(g.x)||isNaN(g.y))){var d=this.transform,i=this.V,j=this.Ql;j.reset();i!==m&&j.multiply(i.Zd);j.multiply(this.Gd);if(j=this.no){t&&t.pF&&t.trace("clip"+this.toString());var k=i.qa;if(this.oo)var l=this.oo,n=
Math.max(l.x,Math.max(g.x,k.x)),r=Math.max(l.y,Math.max(g.y,k.y)),q=Math.abs(n-Math.min(l.right,Math.min(g.right,k.right))),l=Math.abs(r-Math.min(l.bottom,Math.min(g.bottom,k.bottom)));else n=Math.max(g.x,k.x),r=Math.max(g.y,k.y),q=Math.min(g.right,k.right)-n,l=Math.min(g.bottom,k.bottom)-r;if(n>g.width+g.x||g.x>k.width+k.x||r>g.height+g.y||g.y>k.height+k.y)return;a.save();a.beginPath();a.rect(n,r,q,l);a.clip()}this.gh!==m&&(bj(this,a,this.gh,h,h),a.fillRect(g.x,g.y,g.width,g.height));d.iy()||a.transform(d.m11,
d.m12,d.m21,d.m22,d.Qa,d.Ra);this.hh!==m&&(r=this.qa,k=g=0,n=r.width,r=r.height,q=0,this instanceof X&&(r=this.va.hb,g=r.x,k=r.y,n=r.width,r=r.height,q=this.Eh),bj(this,a,this.hh,h),a.fillRect(g-q/2,k-q/2,n+q,r+q));if(e&&(this.hh!==m||this.gh!==m||i!==m&&i.Rl||i!==m&&i.type===Hh&&i.Eq!==this)){this.Rl=h;var u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.Rl=p;this.gr(a,b);e&&this.Rl===h&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=
u[2]);c&&e&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);j?(a.restore(),Nh(b,a)):d.iy()||(c=1/(d.m11*d.m22-d.m12*d.m21),a.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.Ra-d.m22*d.Qa),c*(d.m12*d.Qa-d.m11*d.Ra)))}}};da.gr=aa();
da.ig=function(){var a=this.b;if(a!==m){Fi(a,"naturalBounds",this.qa);Fi(a,"actualBounds",this.oa);0!==this.Ka&&Fi(a,"angle",this.Ka);1!==this.scale&&Fi(a,"scale",this.scale);var b=this.Zd;Fi(a,"allTransforms",[b.m11,b.m12,b.m21,b.m22,b.Qa,b.Ra]);this.background!==m&&Fi(a,"background",this.background);this.Ih!==m&&Fi(a,"areaBackground",this.Ih)}};
function bj(a,b,c,d,e){if(c!==m)if("string"===typeof c)d?b.Ml!==c&&(b.fillStyle=c,b.Ml=c):b.Nl!==c&&(b.strokeStyle=c,b.Nl=c);else if(c.type===Me)c=c.color,d?b.Ml!==c&&(b.fillStyle=c,b.Ml=c):b.Nl!==c&&(b.strokeStyle=c,b.Nl=c);else{var g,i=a.qa,j=i.width,i=i.height;if(c.Ff&&c.type===Mi||c.rz==j&&c.qz==i)g=c.Ff;else{var k,l,n,r=n=0;e&&(a=a.oa,j=a.width,i=a.height,n=a.x,r=a.y);c.start instanceof E?(a=c.start.x,e=c.start.y):c.start instanceof K?(a=c.start.x*j,e=c.start.y*i):(a=ec.x*j,e=ec.y*i);c.end instanceof
E?(k=c.end.x,l=c.end.y):c.end instanceof K?(k=c.end.x*j,l=c.end.y*i):c.type===Ne?(k=gc.x*j,l=gc.y*i):(k=ec.x*j,l=ec.y*i);a+=n;k+=n;e+=r;l+=r;c.type===Ne?g=b.createLinearGradient(a,e,k,l):c.type===Oe?(n=isNaN(c.gn)?Math.max(j,i)/2:c.gn,isNaN(c.Vn)?(g=0,n=Math.max(j,i)/2):g=c.Vn,g=b.createRadialGradient(a,e,g,k,l,n)):c.type===Mi?g=b.createPattern(c.pattern,"repeat"):v.uc(c.type,"Brush type");if(c.type!==Mi&&(n=c.cn))for(n=n.f;n.next();)g.addColorStop(n.key,n.value);c.Ff=g;c.rz=j;c.qz=i}d?b.Ml!==g&&
(b.fillStyle=g,b.Ml=g):b.Nl!==g&&(b.strokeStyle=g,b.Nl=g)}}Q.prototype.isContainedBy=Q.prototype.Wh=function(a){if(a instanceof w)a:{if(!(this===a||a===m))for(var b=this.V;b!==m;){if(b===a){a=h;break a}b=b.V}a=p}else a=p;return a};Q.prototype.isVisibleObject=Q.prototype.fk=function(){if(!this.visible)return p;var a=this.V;return a!==m?a.fk():h};
function cj(a){if(a.lm===h){var b=a.Gd;b.reset();if(!a.Yb.W()||!a.zc.W()){a.lm=p;return}b.translate(a.Yb.x,a.Yb.y);b.translate(-a.la.x,-a.la.y);var c=a.qa;Ti(a,b,c.x,c.y,c.width,c.height);a.lm=p;a.Fk=h}a.Fk===h&&(a.V===m?(a.Ql.set(a.Gd),a.Fk=p):a.V.Zd!==m&&(b=a.Ql,b.reset(),b.multiply(a.V.Ql),b.multiply(a.Gd),a.Fk=p))}
function Ti(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.Ka){var i=ec;a.of&&Ob(a.of)&&(i=a.of);var j=new E;if(a instanceof R&&a.vb!==a){c=a.vb;d=c.qa;j.Dl(d.x,d.y,d.width,d.height,i);c.tm.wb(j);j.offset(-c.la.x,-c.la.y);for(i=c.V;i!==m&&i!==a;)i.tm.wb(j),j.offset(-i.la.x,-i.la.y),i=i.V}else j.Dl(c,d,e,g,i);b.rotate(a.Ka,j.x,j.y)}}
Q.prototype.K=function(){if(this.ac!==h){this.Hc=this.ac=h;if(this.V!==m)this.V.ac=p,this.V.K();else{var a=this.b;a!==m&&(a.tg.add(this),this instanceof U&&!a.ca.ab&&this.kf(),qf(a))}if(this instanceof w)for(var a=this.N===Hh,b=this.xa.j,c=b.length,d=0;d<c;d++){var e=b[d];(a||!e.ka.W()||Vi(e)!==Pi)&&e.K()}aj(this)}};function dj(a){if(a.ac===p&&(a.ac=h,a.Hc=h,a instanceof w))for(var a=a.xa.j,b=a.length,c=0;c<b;c++)dj(a[c])}
function ej(a){if(a.Hc===p){if(a.V!==m)ej(a.V);else{var b=a.b;b!==m&&(b.tg.add(a),a instanceof U&&a.kf(),qf(b))}a.Hc=h}}function Wi(a){if(a.lm===p&&(a.lm=h,a.Fk=h,a instanceof w))for(a=a.elements;a.next();)fj(a.value)}function fj(a){a.Fk=h;if(a instanceof w)for(a=a.elements;a.next();)fj(a.value)}function aj(a){if(a.V!==m)aj(a.V);else{var b=a.b;b!==m&&a.Yb.W()&&ph(b,a.Yb)}}
function Vi(a){var b=a.bh,c=a.V;if(c&&c.N===gj)return hj(a,c.td(a.ld),c.td(a.jd));if(c&&c.N===Hh&&c.Eq===a)return Cd;if(b===Jg){if(c){if(c.Eq===a)return Cd;a=c.Ox;return a===Jg?Pi:a}return Pi}return b}function hj(a,b,c){var d=a.bh;if(d!==Jg)return d;var e=d=f;switch(b.bh){case Qi:e=h;break;case Cd:e=h}switch(c.bh){case Ri:d=h;break;case Cd:d=h}a=a.V.Ox;d=d===f&&(a===Ri||a===Cd)?h:p;e=e===f&&(a===Qi||a===Cd)?h:p;return d===h&&e===h?Cd:d===h?Ri:e===h?Qi:Pi}v.a(Q,"segmentOrientation",Q.prototype.Rr);
v.defineProperty(Q,{Rr:"segmentOrientation"},s("qq"),function(a){var b=this.qq;b!==a&&(t&&v.Sa(a,W,Q,"segmentOrientation"),this.qq=a,this.K(),this.d("segmentOrientation",b,a))});v.a(Q,"segmentIndex",Q.prototype.ah);v.defineProperty(Q,{ah:"segmentIndex"},s("oq"),function(a){t&&v.e(a,"number",Q,"segmentIndex");var a=Math.round(a),b=this.oq;b!==a&&(this.oq=a,this.K(),this.d("segmentIndex",b,a))});v.a(Q,"segmentFraction",Q.prototype.Ky);
v.defineProperty(Q,{Ky:"segmentFraction"},s("nq"),function(a){t&&v.e(a,"number",Q,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.nq;b!==a&&(this.nq=a,this.K(),this.d("segmentFraction",b,a))});v.a(Q,"segmentOffset",Q.prototype.Ly);v.defineProperty(Q,{Ly:"segmentOffset"},s("pq"),function(a){var b=this.pq;b.u(a)||(t&&v.c(a,E,Q,"segmentOffset"),this.pq=a=a.B(),this.K(),this.d("segmentOffset",b,a))});v.a(Q,"stretch",Q.prototype.bh);
v.defineProperty(Q,{bh:"stretch"},s("Fg"),function(a){var b=this.Fg;b!==a&&(t&&v.Sa(a,Q,Q,"stretch"),this.Fg=a,this.K(),this.d("stretch",b,a))});v.a(Q,"name",Q.prototype.name);v.defineProperty(Q,{name:"name"},s("qb"),function(a){var b=this.qb;b!==a&&(t&&v.e(a,"string",Q,"name"),this.qb=a,this.d("name",b,a))});v.a(Q,"visible",Q.prototype.visible);
v.defineProperty(Q,{visible:"visible"},s("Ng"),function(a){var b=this.Ng;b!==a&&(t&&v.e(a,"boolean",Q,"visible"),this.Ng=a,this.d("visible",b,a),b=this.V,b!==m?b.K():this instanceof R&&(this.K(),Zi(this),a?(this.r(ij),this.$h()):(this.r(jj),this.Pg())),aj(this),kj(this))});v.a(Q,"areaBackground",Q.prototype.Ih);
v.defineProperty(Q,{Ih:"areaBackground"},s("gh"),function(a){var b=this.gh;if(b!==a&&(a===m||"string"===typeof a||a instanceof Ce))a instanceof Ce&&a.freeze(),this.gh=a,aj(this),this.d("areaBackground",b,a)});v.a(Q,"background",Q.prototype.background);v.defineProperty(Q,{background:"background"},s("hh"),function(a){var b=this.hh;if(b!==a&&(a===m||"string"===typeof a||a instanceof Ce))a instanceof Ce&&a.freeze(),this.hh=a,aj(this),this.d("background",b,a)});
v.m(Q,{T:"part"},function(){if(this instanceof R)return this;if(this.Rk)return this.Rk;var a;for(a=this.V;a;){if(a instanceof R)return this.Rk=a;a=a.V}return m});Q.prototype.Cl=ba("Jj");v.m(Q,{V:"panel"},s("Jj"));v.m(Q,{sa:"layer"},function(){var a=this.T;return a!==m?a.sa:m});v.m(Q,{b:"diagram"},function(){var a=this.T;return a!==m?a.b:m},{configurable:h});v.a(Q,"position",Q.prototype.position);
v.defineProperty(Q,{position:"position"},s("kb"),function(a){var b=this.kb;if(!b.u(a)){t&&v.c(a,E,Q,"position");if(this instanceof R){if(!a.W())return;var c=this.li,d=this.Vs,e=c.copy();c.Xd(a.x+d.x,a.y+d.y);c.u(e)||this.d("location",e,c);if(this.Hc===p){this.kb=a=a.B();lj(this);Wi(this);this.d("position",b,a);return}}this.kb=a=a.B();ej(this);Wi(this);this.d("position",b,a)}});v.m(Q,{oa:"actualBounds"},s("Yb"));v.a(Q,"scale",Q.prototype.scale);
v.defineProperty(Q,{scale:"scale"},s("Jb"),function(a){var b=this.Jb;b!==a&&(t&&v.i(a,Q,"scale"),0>=a&&v.g("GraphObject.scale must be greater than zero"),this.Jb=a,Wi(this),this.K(),this.d("scale",b,a))});v.a(Q,"angle",Q.prototype.Ka);v.defineProperty(Q,{Ka:"angle"},s("Pb"),function(a){var b=this.Pb;b!==a&&(t&&v.i(a,Q,"angle"),this.Pb=a,this.K(),Wi(this),this.d("angle",b,a))});v.a(Q,"desiredSize",Q.prototype.ka);
v.defineProperty(Q,{ka:"desiredSize"},s("Sd"),function(a){var b=this.Sd;b.u(a)||(t&&v.c(a,hb,Q,"desiredSize"),this.Sd=a=a.B(),this.K(),this instanceof X&&this.lf(),this.d("desiredSize",b,a))});v.a(Q,"width",Q.prototype.width);v.defineProperty(Q,{width:"width"},function(){return this.Sd.width},function(a){if(this.Sd.width!==a){t&&v.e(a,"number",Q,"width");var b=this.Sd;this.Sd=a=(new hb(a,this.Sd.height)).freeze();this.K();this instanceof X&&this.lf();this.d("desiredSize",b,a)}});v.a(Q,"height",Q.prototype.height);
v.defineProperty(Q,{height:"height"},function(){return this.Sd.height},function(a){if(this.Sd.height!==a){t&&v.e(a,"number",Q,"height");var b=this.Sd;this.Sd=a=(new hb(this.Sd.width,a)).freeze();this.K();this instanceof X&&this.lf();this.d("desiredSize",b,a)}});v.a(Q,"minSize",Q.prototype.Qd);
v.defineProperty(Q,{Qd:"minSize"},s("qd"),function(a){var b=this.qd;b.u(a)||(t&&v.c(a,hb,Q,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.qd=a,this.K(),this.d("minSize",b,a))});v.a(Q,"maxSize",Q.prototype.yd);v.defineProperty(Q,{yd:"maxSize"},s("ni"),function(a){var b=this.ni;b.u(a)||(t&&v.c(a,hb,Q,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.ni=a,this.K(),this.d("maxSize",b,a))});
v.m(Q,{la:"measuredBounds"},s("zc"));v.m(Q,{qa:"naturalBounds"},s("Ic"),{configurable:h});v.a(Q,"margin",Q.prototype.margin);v.defineProperty(Q,{margin:"margin"},s("Dp"),function(a){"number"===typeof a?a=new rb(a):t&&v.c(a,rb,Q,"margin");var b=this.Dp;b.u(a)||(this.Dp=a=a.B(),this.K(),this.d("margin",b,a))});v.m(Q,{transform:m},function(){this.lm===h&&cj(this);return this.Gd});v.m(Q,{Zd:m},function(){this.Fk===h&&cj(this);return this.Ql});v.a(Q,"alignment",Q.prototype.lb);
v.defineProperty(Q,{lb:"alignment"},s("ia"),function(a){var b=this.ia;b.u(a)||(t?v.c(a,K,Q,"alignment"):Sb(a)&&!Tb(a)&&v.g("alignment must be a real Spot or Spot.Default"),this.ia=a=a.B(),ej(this),this.d("alignment",b,a))});v.a(Q,"column",Q.prototype.jd);v.defineProperty(Q,{jd:"column"},s("J"),function(a){t&&v.i(a,Q,"column");var a=Math.round(a),b=this.J;b!==a&&(0>a&&v.ha(a,">= 0",Q,"column"),this.J=a,this.K(),this.d("column",b,a))});v.a(Q,"columnSpan",Q.prototype.dB);
v.defineProperty(Q,{dB:"columnSpan"},s("lj"),function(a){t&&v.i(a,Q,"columnSpan");var a=Math.round(a),b=this.lj;b!==a&&(1>a&&v.ha(a,">= 1",Q,"columnSpan"),this.lj=a,this.K(),this.d("columnSpan",b,a))});v.a(Q,"row",Q.prototype.ld);v.defineProperty(Q,{ld:"row"},s("lq"),function(a){t&&v.i(a,Q,"row");var a=Math.round(a),b=this.lq;b!==a&&(0>a&&v.ha(a,">= 0",Q,"row"),this.lq=a,this.K(),this.d("row",b,a))});v.a(Q,"rowSpan",Q.prototype.rowSpan);
v.defineProperty(Q,{rowSpan:"rowSpan"},s("Oj"),function(a){t&&v.i(a,Q,"rowSpan");var a=Math.round(a),b=this.Oj;b!==a&&(1>a&&v.ha(a,">= 1",Q,"rowSpan"),this.Oj=a,this.K(),this.d("rowSpan",b,a))});v.a(Q,"isPanelMain",Q.prototype.Oi);v.defineProperty(Q,{Oi:"isPanelMain"},s("kp"),function(a){var b=this.kp;b!==a&&(t&&v.e(a,"boolean",Q,"isPanelMain"),this.kp=a,this.K(),this.d("isPanelMain",b,a))});v.a(Q,"alignmentFocus",Q.prototype.yi);
v.defineProperty(Q,{yi:"alignmentFocus"},s("ho"),function(a){var b=this.ho;b.u(a)||(t?v.c(a,K,Q,"alignmentFocus"):Sb(a)&&!Tb(a)&&v.g("alignmentFocus must be a real Spot or Spot.Default"),this.ho=a=a.B(),this.K(),this.d("alignmentFocus",b,a))});v.a(Q,"portId",Q.prototype.je);
v.defineProperty(Q,{je:"portId"},s("Xp"),function(a){var b=this.Xp;if(b!==a){t&&a!==m&&v.e(a,"string",Q,"portId");var c=this.T;c!==m&&!(c instanceof U)&&(v.g("portID being set on a Link: "+a),c=m);b!==m&&c&&mj(c,this);this.Xp=a;a!==m&&c&&(c.lc===m&&wj(c),zj(c,this));this.d("portId",b,a)}});function Aj(a){var b={value:m};Bj(a,b);return b.value}function Bj(a,b){var c=a.V;return c===m||!Bj(c,b)&&a.visible?(b.value=a,p):h}function kj(a){var b=a.T;b instanceof U&&(a=a.b)&&!a.ca.ab&&b.kf()}
v.a(Q,"toSpot",Q.prototype.Xa);v.defineProperty(Q,{Xa:"toSpot"},s("Lg"),function(a){var b=this.Lg;b.u(a)||(t&&v.c(a,K,Q,"toSpot"),this.Lg=a=a.B(),this.d("toSpot",b,a),kj(this))});v.a(Q,"toEndSegmentLength",Q.prototype.lk);v.defineProperty(Q,{lk:"toEndSegmentLength"},s("Ig"),function(a){var b=this.Ig;b!==a&&(t&&v.e(a,"number",Q,"toEndSegmentLength"),0>a&&v.ha(a,">= 0",Q,"toEndSegmentLength"),this.Ig=a,this.d("toEndSegmentLength",b,a),kj(this))});v.a(Q,"toEndSegmentDirection",Q.prototype.Zr);
v.defineProperty(Q,{Zr:"toEndSegmentDirection"},s("Hg"),function(a){var b=this.Hg;b!==a&&(t&&v.Sa(a,U,Q,"toEndSegmentDirection"),this.Hg=a,this.d("toEndSegmentDirection",b,a),kj(this))});v.a(Q,"toShortLength",Q.prototype.$r);v.defineProperty(Q,{$r:"toShortLength"},s("Kg"),function(a){var b=this.Kg;b!==a&&(t&&v.e(a,"number",Q,"toShortLength"),this.Kg=a,this.d("toShortLength",b,a),kj(this))});v.a(Q,"toLinkable",Q.prototype.Xy);
v.defineProperty(Q,{Xy:"toLinkable"},s("Hq"),function(a){var b=this.Hq;b!==a&&(t&&a!==m&&v.e(a,"boolean",Q,"toLinkable"),this.Hq=a,this.d("toLinkable",b,a))});v.a(Q,"toLinkableDuplicates",Q.prototype.qD);v.defineProperty(Q,{qD:"toLinkableDuplicates"},s("Iq"),function(a){var b=this.Iq;b!==a&&(t&&v.e(a,"boolean",Q,"toLinkableDuplicates"),this.Iq=a,this.d("toLinkableDuplicates",b,a))});v.a(Q,"toLinkableSelfNode",Q.prototype.rD);
v.defineProperty(Q,{rD:"toLinkableSelfNode"},s("Jq"),function(a){var b=this.Jq;b!==a&&(t&&v.e(a,"boolean",Q,"toLinkableSelfNode"),this.Jq=a,this.d("toLinkableSelfNode",b,a))});v.a(Q,"toMaxLinks",Q.prototype.sD);v.defineProperty(Q,{sD:"toMaxLinks"},s("Kq"),function(a){var b=this.Kq;b!==a&&(t&&v.i(a,Q,"toMaxLinks"),0>a&&v.ha(a,">= 0",Q,"toMaxLinks"),this.Kq=a,this.d("toMaxLinks",b,a))});v.a(Q,"fromSpot",Q.prototype.Va);
v.defineProperty(Q,{Va:"fromSpot"},s("sg"),function(a){var b=this.sg;b.u(a)||(t&&v.c(a,K,Q,"fromSpot"),this.sg=a=a.B(),this.d("fromSpot",b,a),kj(this))});v.a(Q,"fromEndSegmentLength",Q.prototype.ck);v.defineProperty(Q,{ck:"fromEndSegmentLength"},s("pg"),function(a){var b=this.pg;b!==a&&(t&&v.e(a,"number",Q,"fromEndSegmentLength"),0>a&&v.ha(a,">= 0",Q,"fromEndSegmentLength"),this.pg=a,this.d("fromEndSegmentLength",b,a),kj(this))});v.a(Q,"fromEndSegmentDirection",Q.prototype.nr);
v.defineProperty(Q,{nr:"fromEndSegmentDirection"},s("og"),function(a){var b=this.og;b!==a&&(t&&v.Sa(a,U,Q,"fromEndSegmentDirection"),this.og=a,this.d("fromEndSegmentDirection",b,a),kj(this))});v.a(Q,"fromShortLength",Q.prototype.or);v.defineProperty(Q,{or:"fromShortLength"},s("rg"),function(a){var b=this.rg;b!==a&&(t&&v.e(a,"number",Q,"fromShortLength"),this.rg=a,this.d("fromShortLength",b,a),kj(this))});v.a(Q,"fromLinkable",Q.prototype.Zx);
v.defineProperty(Q,{Zx:"fromLinkable"},s("Ro"),function(a){var b=this.Ro;b!==a&&(t&&a!==m&&v.e(a,"boolean",Q,"fromLinkable"),this.Ro=a,this.d("fromLinkable",b,a))});v.a(Q,"fromLinkableDuplicates",Q.prototype.HB);v.defineProperty(Q,{HB:"fromLinkableDuplicates"},s("So"),function(a){var b=this.So;b!==a&&(t&&v.e(a,"boolean",Q,"fromLinkableDuplicates"),this.So=a,this.d("fromLinkableDuplicates",b,a))});v.a(Q,"fromLinkableSelfNode",Q.prototype.IB);
v.defineProperty(Q,{IB:"fromLinkableSelfNode"},s("To"),function(a){var b=this.To;b!==a&&(t&&v.e(a,"boolean",Q,"fromLinkableSelfNode"),this.To=a,this.d("fromLinkableSelfNode",b,a))});v.a(Q,"fromMaxLinks",Q.prototype.JB);v.defineProperty(Q,{JB:"fromMaxLinks"},s("Uo"),function(a){var b=this.Uo;b!==a&&(t&&v.i(a,Q,"fromMaxLinks"),0>a&&v.ha(a,">= 0",Q,"fromMaxLinks"),this.Uo=a,this.d("fromMaxLinks",b,a))});v.a(Q,"cursor",Q.prototype.cursor);
v.defineProperty(Q,{cursor:"cursor"},s("uo"),function(a){var b=this.uo;b!==a&&(v.e(a,"string",Q,"cursor"),this.uo=a,this.d("cursor",b,a))});v.a(Q,"click",Q.prototype.click);v.defineProperty(Q,{click:"click"},s("jh"),function(a){var b=this.jh;b!==a&&(a!==m&&v.e(a,"function",Q,"click"),this.jh=a,this.d("click",b,a))});v.a(Q,"doubleClick",Q.prototype.ll);
v.defineProperty(Q,{ll:"doubleClick"},s("mh"),function(a){var b=this.mh;b!==a&&(a!==m&&v.e(a,"function",Q,"doubleClick"),this.mh=a,this.d("doubleClick",b,a))});v.a(Q,"contextClick",Q.prototype.dr);v.defineProperty(Q,{dr:"contextClick"},s("kh"),function(a){var b=this.kh;b!==a&&(a!==m&&v.e(a,"function",Q,"contextClick"),this.kh=a,this.d("contextClick",b,a))});v.a(Q,"mouseEnter",Q.prototype.xy);
v.defineProperty(Q,{xy:"mouseEnter"},s("Mp"),function(a){var b=this.Mp;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseEnter"),this.Mp=a,this.d("mouseEnter",b,a))});v.a(Q,"mouseLeave",Q.prototype.yy);v.defineProperty(Q,{yy:"mouseLeave"},s("Np"),function(a){var b=this.Np;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseLeave"),this.Np=a,this.d("mouseLeave",b,a))});v.a(Q,"mouseOver",Q.prototype.Gr);
v.defineProperty(Q,{Gr:"mouseOver"},s("zh"),function(a){var b=this.zh;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseOver"),this.zh=a,this.d("mouseOver",b,a))});v.a(Q,"mouseHover",Q.prototype.Fr);v.defineProperty(Q,{Fr:"mouseHover"},s("yh"),function(a){var b=this.yh;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseHover"),this.yh=a,this.d("mouseHover",b,a))});v.a(Q,"mouseHold",Q.prototype.Er);
v.defineProperty(Q,{Er:"mouseHold"},s("xh"),function(a){var b=this.xh;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseHold"),this.xh=a,this.d("mouseHold",b,a))});v.a(Q,"mouseDragEnter",Q.prototype.xC);v.defineProperty(Q,{xC:"mouseDragEnter"},s("Kp"),function(a){var b=this.Kp;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseDragEnter"),this.Kp=a,this.d("mouseDragEnter",b,a))});v.a(Q,"mouseDragLeave",Q.prototype.wy);
v.defineProperty(Q,{wy:"mouseDragLeave"},s("Lp"),function(a){var b=this.Lp;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseDragLeave"),this.Lp=a,this.d("mouseDragLeave",b,a))});v.a(Q,"mouseDrop",Q.prototype.Dr);v.defineProperty(Q,{Dr:"mouseDrop"},s("wh"),function(a){var b=this.wh;b!==a&&(a!==m&&v.e(a,"function",Q,"mouseDrop"),this.wh=a,this.d("mouseDrop",b,a))});v.a(Q,"actionDown",Q.prototype.ox);
v.defineProperty(Q,{ox:"actionDown"},s("bo"),function(a){var b=this.bo;b!==a&&(a!==m&&v.e(a,"function",Q,"actionDown"),this.bo=a,this.d("actionDown",b,a))});v.a(Q,"actionUp",Q.prototype.qx);v.defineProperty(Q,{qx:"actionUp"},s("eo"),function(a){var b=this.eo;b!==a&&(a!==m&&v.e(a,"function",Q,"actionUp"),this.eo=a,this.d("actionUp",b,a))});v.a(Q,"actionMove",Q.prototype.px);
v.defineProperty(Q,{px:"actionMove"},s("co"),function(a){var b=this.co;b!==a&&(a!==m&&v.e(a,"function",Q,"actionMove"),this.co=a,this.d("actionMove",b,a))});v.a(Q,"actionCancel",Q.prototype.nx);v.defineProperty(Q,{nx:"actionCancel"},s("ao"),function(a){var b=this.ao;b!==a&&(a!==m&&v.e(a,"function",Q,"actionCancel"),this.ao=a,this.d("actionCancel",b,a))});v.a(Q,"toolTip",Q.prototype.as);
v.defineProperty(Q,{as:"toolTip"},s("Fh"),function(a){var b=this.Fh;b!==a&&(a!==m&&v.c(a,cf,Q,"toolTip"),this.Fh=a,this.d("toolTip",b,a))});v.a(Q,"contextMenu",Q.prototype.contextMenu);v.defineProperty(Q,{contextMenu:"contextMenu"},s("lh"),function(a){var b=this.lh;b!==a&&(a!==m&&v.c(a,cf,Q,"contextMenu"),this.lh=a,this.d("contextMenu",b,a))});v.a(Q,"isActionable",Q.prototype.Eu);
v.defineProperty(Q,{Eu:"isActionable"},s("ep"),function(a){var b=this.ep;b!==a&&(v.e(a,"boolean",Q,"isActionable"),this.ep=a,this.d("isActionable",b,a))});v.a(Q,"pickable",Q.prototype.FC);v.defineProperty(Q,{FC:"pickable"},s("bf"),function(a){var b=this.bf;b!==a&&(v.e(a,"boolean",Q,"pickable"),this.bf=a,this.d("pickable",b,a))});
Q.prototype.bind=Q.prototype.bind=function(a){a.df=this;var b=this.mr();b!==m&&Cj(b)&&v.g("Cannot add a Binding to a template that has already been copied: "+a);this.Qb===m&&(this.Qb=new A(Te));this.Qb.add(a)};Q.prototype.findTemplateBinder=Q.prototype.mr=function(){for(var a=this instanceof w?this:this.V;a!==m;){if(a.vk!==m&&a instanceof w)return a;a=a.V}return m};var Dj;
Q.make=Dj=function(a,b){var c=m,d=m;if("function"===typeof a)d=a;else if("string"===typeof a){var e=Ej.$(a);"function"===typeof e?c=e():d=ea[a]}c===m&&((d===m||!d.constructor)&&v.g("GraphObject.make requires a class function or class name, not: "+a),c=new d);e=1;c instanceof C&&1<arguments.length&&(d=arguments[1],"string"===typeof d||d instanceof HTMLDivElement?(c.Qh=m,Fh(c,d),e++):v.g("Unknown argument to Diagram constructor: "+d));for(;e<arguments.length;e++)if(d=arguments[e],"string"===typeof d)if(c instanceof
ma)c.text=d;else if(c instanceof X)c.Ua=d;else if(c instanceof Fj)c.source=d;else if(c instanceof w){var g=v.nl(w,d);g!==m?c.type=g:v.g("Unknown Panel type as an argument to GraphObject.make: "+d)}else c instanceof Ce?(g=v.nl(Ce,d),g!==m?c.type=g:v.g("Unknown Brush type as an argument to GraphObject.make: "+d)):c instanceof zd?(g=v.nl(zd,d),g!==m?c.type=g:v.g("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof qe?(g=v.nl(qe,d),g!==m?c.type=g:v.g("Unknown PathSegment type as an argument to GraphObject.make: "+
d)):v.g("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof Q)c instanceof w||v.g("A GraphObject can only be added to a Panel, not to: "+c),c.add(d);else if(d instanceof Gj)c instanceof w||v.g("A RowColumnDefinition can only be added to a Panel, not to: "+c),g=d.Gu?c.de(d.index):c.td(d.index),v.c(d,Gj,Gj,"copyFrom:pd"),d.Gu?g.height=d.height:g.width=d.width,g.pf=d.pf,g.zd=d.zd,g.lb=d.lb,g.Vr=d.Vr,g.Qb=d.Qb;else if(d instanceof ha)c instanceof W&&d.Kd===W?d===If||
d===oh?c.Te=d:d===Hj||d===Ij||d===Jj?c.He=d:d===Kj||d===Lj||d===Mj?c.au=d:d===Nj||d===Oi||v.g("Unknown Link enum value for a Link property: "+d):c instanceof w&&d.Kd===w?c.type=d:c instanceof ma&&d.Kd===ma?c.cz=d:c instanceof Q&&d.Kd===W?0===d.name.indexOf("Orient")?c.Rr=d:v.g("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof Q&&d.Kd===Q?c.bh=d:c instanceof C&&d.Kd===C?c.xx=d:c instanceof Ce&&d.Kd===Ce?c.type=d:c instanceof zd&&d.Kd===zd?c.type=d:c instanceof
qe&&d.Kd===qe?c.type=d:c instanceof Te&&d.Kd===Te?c.mode=d:c instanceof te&&d.Kd===te?c.Mc=d:c instanceof Y&&d.Kd===Y?0===d.name.indexOf("Alignment")?c.lb=d:0===d.name.indexOf("Arrangement")?c.Jd=d:0===d.name.indexOf("Compaction")?c.iu=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.vf=d:0===d.name.indexOf("Style")?c.BD=d:v.g("Unknown enum value: "+d):c instanceof Z&&d.Kd===Z?0===d.name.indexOf("Aggressive")?c.PA=d:0===d.name.indexOf("Cycle")?c.lB=d:0===d.name.indexOf("Init")?
c.$B=d:0===d.name.indexOf("Layer")?c.iC=d:v.g("Unknown enum value: "+d):c instanceof Ii&&d.Kd===Ii?d===Oj||d===Pj||d===Qj||d===Rj?c.vf=d:d===Sj||d===Tj?c.Jd=d:d===Uj||d===Vj?c.lb=d:v.g("Unknown enum value: "+d):c instanceof Wj&&d.Kd===Wj?d===Xj||d===Yj||d===Zj||d===$j||d===ak?c.vf=d:d===bk||d===ck||d===dk||d===ek?c.direction=d:d===fk||d===gk||d===hk||d===ik?c.Jd=d:d===jk||d===kk?c.Jr=d:v.g("Unknown enum value: "+d):v.g("No property to set for this enum value: "+d);else if(d instanceof Te)c instanceof
Q||c instanceof Gj?c.bind(d):v.g("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof Bd)c instanceof zd?c.tc.add(d):v.g("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof qe)c instanceof Bd?c.tb.add(d):v.g("A PathSegment can only be added to a PathFigure, not to: "+c);else if(d instanceof Object)if(d.constructor!==Object&&v.g("Can only get property values from a plain Object, not a: "+d),c instanceof Ce){var g={},
i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}v.Ny(c,g)}else c instanceof Gj?(d.row!==f?(g=d.row,(g===f||g===m||Infinity===g||isNaN(g)||0>g)&&v.g("Must specify non-negative integer row for RowColumnDefinition "+d),c.Ik=h,c.U=g):d.column!==f?(g=d.column,(g===f||g===m||Infinity===g||isNaN(g)||0>g)&&v.g("Must specify non-negative integer column for RowColumnDefinition "+d),c.Ik=p,c.U=g):v.g("Must specify row or column value in a RowColumnDefinition "+d),g=v.aF(d,"row","column"),
v.Ny(c,g)):v.Ny(c,d);else v.g('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+c);return c};var Ej;Q.Builders=Ej=new ja("string","function");
Ej.add("Button",function(){var a=new Ce(Ne);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Ce(Ne);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=Dj(w,Hh,{Eu:h},Dj(X,{name:"ButtonBorder",Ua:"RoundedRectangle",fill:a,stroke:"gray"}));c.xy=function(a,c){var g=c.Z(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.yy=function(b,c){var g=c.Z(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
Ej.add("TreeExpanderButton",function(){var a=Dj("Button",Dj(X,{name:"ButtonIcon",Ua:"MinusLine",ka:new hb(6,6)},(new Te("figure","isTreeExpanded",function(a,c){var d=m,e=c.V;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Ey("")),{visible:p},(new Te("visible","isTreeLeaf",function(a){return!a})).Ey(""));a.click=function(a,c){var d=c.T;if(d instanceof U){var e=d.b;e===m||e.Ja||(a.ud=h,d.Pd?e.Ld.cr(d):e.Ld.jr(d))}};return a});
Ej.add("SubGraphExpanderButton",function(){var a=Dj("Button",Dj(X,{name:"ButtonIcon",Ua:"MinusLine",ka:new hb(6,6)},(new Te("figure","isSubGraphExpanded",function(a,c){var d=m,e=c.V;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Ey("")));a.click=function(a,c){var d=c.T;if(d instanceof V){var e=d.b;e===m||e.Ja||(a.ud=h,d.ee?e.Ld.br(d):e.Ld.ir(d))}};return a});
Ej.add("ContextMenuButton",function(){var a=Dj("Button");a.bh=Ri;var b=a.Ke("ButtonBorder");b instanceof X&&(b.Ua="Rectangle",b.n=new K(0,0,2,2),b.o=new K(1,1,-2,-2));return a});
function w(a){Q.call(this);a===f?0===arguments.length?this.N=Og:v.g("invalid argument to Panel constructor: undefined"):(v.Sa(a,w,w,"type"),this.N=a);this.xa=new A(Q);this.Fd=(new rb).freeze();this.xo=Wb;this.Ib=Jg;this.ug=p;this.N===Ph&&(this.ug=h);this.ze=[];this.qe=[];this.po=this.mq=lk;this.rm=this.Mm=0;this.Nm=Kg;this.Yo=(new hb(10,10)).freeze();this.Zo=(new E(0,0)).freeze();this.vk=this.Zl=m;this.uw="";this.Mf=this.Aj=m;this.nm="category";this.Ze=m;this.sk=new F(NaN,NaN,NaN,NaN);this.gE=new F(0,
0,0,0);this.ZG=new hb(0,0);this.Eq=m}v.H("Panel",w);v.na(w,Q);
w.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.N=this.N;a.Fd.Pa(this.Fd);a.xo=this.xo.B();a.Ib=this.Ib;if(0<this.ze.length){for(var b=[],c=this.ze,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.Cl(a);b[e]=g}a.ze=b}if(0<this.qe.length){b=[];c=this.qe;d=c.length;for(e=0;e<d;e++)c[e]!==f&&(g=c[e].copy(),g.Cl(a),b[e]=g);a.qe=b}a.mq=this.mq;a.po=this.po;a.Mm=this.Mm;a.rm=this.rm;a.Nm=this.Nm;a.Yo.Pa(this.Yo);a.Zo.Pa(this.Zo);a.ug=this.ug;a.Zl=this.Zl;a.vk=this.vk;a.uw=this.uw;a.Aj=this.Aj;
a.Mf=this.Mf;a.nm=this.nm;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};w.prototype.Rg=function(a){Q.prototype.Rg.call(this,a);a.xa=this.xa;for(var b=a.xa.f;b.next();)b.value.Jj=a};
w.prototype.copy=w.prototype.copy=function(){var a=Q.prototype.copy.call(this);if(a instanceof w){var b=this.xa;if(0<b.length)for(var c=b.length,d=0;d<c;d++){var e=b.j[d].copy(),g=a;e.Cl(g);e.Rk=m;var i=g.xa,j=i.count;i.gc(j,e);i=g.T;if(i!==m){var k=g.b;k!==m&&k.ca.ab||i.ke(we,"elements",g,m,e,m,j)}}return a}return m};w.prototype.toString=function(){return"Panel("+this.type+")#"+v.fc(this)};var Og;w.Position=Og=v.l(w,"Position",0);w.Horizontal=v.l(w,"Horizontal",1);var Gh;
w.Vertical=Gh=v.l(w,"Vertical",2);var Hg;w.Spot=Hg=v.l(w,"Spot",3);var Hh;w.Auto=Hh=v.l(w,"Auto",4);var gj;w.Table=gj=v.l(w,"Table",5);w.Viewbox=v.l(w,"Viewbox",6);var mk;w.TableRow=mk=v.l(w,"TableRow",7);var nk;w.TableColumn=nk=v.l(w,"TableColumn",8);var ng;w.Link=ng=v.l(w,"Link",9);var Ph;w.Grid=Ph=v.l(w,"Grid",10);v.m(w,{elements:"elements"},function(){return this.xa.f});v.m(w,{qa:"naturalBounds"},s("Ic"));v.a(w,"padding",w.prototype.padding);
v.defineProperty(w,{padding:"padding"},s("Fd"),function(a){"number"===typeof a?a=new rb(a):v.c(a,rb,w,"padding");var b=this.Fd;b.u(a)||(this.Fd=a=a.B(),this.K(),this.d("padding",b,a))});v.a(w,"type",w.prototype.type);v.defineProperty(w,{type:"type"},s("N"),function(a){var b=this.N;b!==a&&(t&&v.Sa(a,w,w,"type"),this.N=a,this.N===Ph&&(this.ug=h),this.K(),this.d("type",b,a))});v.a(w,"defaultAlignment",w.prototype.Ei);
v.defineProperty(w,{Ei:"defaultAlignment"},s("xo"),function(a){var b=this.xo;b.u(a)||(t&&v.c(a,K,w,"defaultAlignment"),this.xo=a=a.B(),this.K(),this.d("defaultAlignment",b,a))});v.a(w,"defaultStretch",w.prototype.Ox);v.defineProperty(w,{Ox:"defaultStretch"},s("Ib"),function(a){var b=this.Ib;b!==a&&(v.Sa(a,Q,w,"defaultStretch"),this.Ib=a,this.K(),this.d("defaultStretch",b,a))});v.a(w,"viewboxStretch",w.prototype.bz);
v.defineProperty(w,{bz:"viewboxStretch"},s("Nm"),function(a){var b=this.Nm;b!==a&&(v.Sa(a,Q,w,"viewboxStretch"),this.Nm=a,this.d("viewboxStretch",b,a))});v.a(w,"gridCellSize",w.prototype.rr);v.defineProperty(w,{rr:"gridCellSize"},s("Yo"),function(a){var b=this.Yo;b.u(a)||(v.c(a,hb,w,"gridCellSize"),(!a.W()||0===a.width||0===a.height)&&v.g("Invalid Panel.gridCellSize: "+a),this.Yo=a.B(),this.b!==m&&this===this.b.Cu&&ji(this.b),aj(this),this.d("gridCellSize",b,a))});v.a(w,"gridOrigin",w.prototype.by);
v.defineProperty(w,{by:"gridOrigin"},s("Zo"),function(a){var b=this.Zo;b.u(a)||(v.c(a,E,w,"gridOrigin"),a.W()||v.g("Invalid Panel.gridOrigin: "+a),this.Zo=a.B(),aj(this),this.d("gridOrigin",b,a))});da=w.prototype;
da.gr=function(a,b){if(this.N===Ph){var c=this.pl()*b.scale;0>=c&&(c=1);var d=this.rr,e=d.width,d=d.height,g=this.qa,i=g.width,g=g.height,j=Math.ceil(i/e),k=Math.ceil(g/d),l=this.by;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var n=[],r=this.xa.j,q=this.xa.length,u=0;u<q;u++){var x=[];n.push(x);var B=r[u];if(B.visible)for(var B="LineV"===B.Ua,G=u+1;G<q;G++){var I=r[G];I.visible&&"LineV"===I.Ua===B&&(I=I.Uh,2<=I&&x.push(I))}}r=this.xa.length;for(q=0;q<r;q++)if(B=this.xa.j[q],B.visible){u=n[q];
x=B.Uh;if("LineV"===B.Ua){a.lineWidth=B.Oa;bj(this,a,B.stroke,p);a.beginPath();for(G=B=Math.floor(-l.x/e);G<=B+j&&!(I=G*e+l.x,0<=I&&(I<i&&ok(G,x,u))&&(a.moveTo(I,0),a.lineTo(I,g),2>e*x*c));G++);}else{a.lineWidth=B.Oa;bj(this,a,B.stroke,p);a.beginPath();for(G=B=Math.floor(-l.y/d);G<=B+k&&!(I=G*d+l.y,0<=I&&(I<=g&&ok(G,x,u))&&(a.moveTo(0,I),a.lineTo(i,I),2>d*x*c));G++);}a.stroke()}a.restore();Nh(b,a)}else{c=this.xa.length;for(e=0;e<c;e++)this.xa.j[e].cg(a,b)}};
da.ig=function(){Q.prototype.ig.call(this);var a=this.b;a!==m&&(Fi(a,"type",this.type),this.bz!==Kg&&Fi(a,"viewboxStretch",this.bz),Fi(a,"elements",this.elements))};function ok(a,b,c){if(0!==a%b)return p;for(var b=c.length,d=0;d<b;d++)if(0===a%c[d])return p;return h}
da.Br=function(a,b,c,d){var e=this.sk;e.width=0;e.height=0;var g=this.ka,i=this.Qd;c===f&&(c=i.width,d=i.height);var c=Math.max(c/this.scale,i.width),d=Math.max(d/this.scale,i.height),j=this.yd;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.xa,n=l.length;if(0===n){var r=this.Ic;kb(r,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);Si(this,
0,0,r.width,r.height)}else{var q=this.N.qb;switch(q){case "Position":var u=a,x=b,B=c,G=d;e.x=0;e.y=0;e.width=0;for(var I=e.height=0;I<n;I++){var y=l.j[I];if(y.visible||y===this.vb){var J=y.margin,z=J.right+J.left,H=J.top+J.bottom;gh(y,u,x,B,G);var fa=y.la,S=Math.max(fa.width+z,0),T=Math.max(fa.height+H,0),ga=y.position.x,na=y.position.y;isFinite(ga)||(ga=0);isFinite(na)||(na=0);nb(e,ga,na,S,T)}}break;case "Vertical":for(var ra=a,Da=c,Wa=d,fb=[],ab=0;ab<n;ab++){var Pa=l.j[ab];if(Pa.visible||Pa===this.vb){var gb=
Vi(Pa);if(gb!==Pi&&gb!==Qi)fb.push(Pa);else{var bb=Pa.margin,Zb=bb.right+bb.left,Xc=bb.top+bb.bottom;gh(Pa,ra,Infinity,Da,Wa);var Xa=Pa.la,Fc=Math.max(Xa.width+Zb,0),Dd=Math.max(Xa.height+Xc,0);e.width=Math.max(e.width,Fc);e.height+=Dd}}}var rc=fb.length;if(0!==rc){this.ka.width?ra=Math.min(this.ka.width,this.yd.width):0!==e.width&&(ra=Math.min(e.width,this.yd.width));for(ab=0;ab<rc;ab++)if(Pa=fb[ab],Pa.visible||Pa===this.vb)bb=Pa.margin,Zb=bb.right+bb.left,Xc=bb.top+bb.bottom,gh(Pa,ra,Infinity,Da,
Wa),Xa=Pa.la,Fc=Math.max(Xa.width+Zb,0),Dd=Math.max(Xa.height+Xc,0),e.width=Math.max(e.width,Fc),e.height+=Dd}break;case "Horizontal":for(var Vb=b,hc=c,Gc=d,Hb=[],Ib=0;Ib<n;Ib++){var Jb=l.j[Ib];if(Jb.visible||Jb===this.vb){var De=Vi(Jb);if(De!==Pi&&De!==Ri)Hb.push(Jb);else{var Oc=Jb.margin,od=Oc.right+Oc.left,Hc=Oc.top+Oc.bottom;gh(Jb,Infinity,Vb,hc,Gc);var xc=Jb.la,fd=Math.max(xc.width+od,0),sb=Math.max(xc.height+Hc,0);e.width+=fd;e.height=Math.max(e.height,sb)}}}var yc=Hb.length;if(0!==yc){this.ka.height?
Vb=Math.min(this.ka.height,this.yd.height):0!==e.height&&(Vb=Math.min(e.height,this.yd.height));for(Ib=0;Ib<yc;Ib++)if(Jb=Hb[Ib],Jb.visible||Jb===this.vb)Oc=Jb.margin,od=Oc.right+Oc.left,Hc=Oc.top+Oc.bottom,gh(Jb,Infinity,Vb,hc,Gc),xc=Jb.la,fd=Math.max(xc.width+od,0),sb=Math.max(xc.height+Hc,0),e.width+=fd,e.height=Math.max(e.height,sb)}break;case "Spot":a:{var Ed=a,Fd=b,sa=c,Fa=d,zc=pk(this,l,n),mb=zc.margin,Pc,Gd,pd=mb.right+mb.left,Kb=mb.top+mb.bottom;gh(zc,Ed,Fd,sa,Fa);var wb=zc.la,qd=wb.width,
Qc=wb.height,Rc=Math.max(qd+pd,0),Td=Math.max(Qc+Kb,0);e.x=-mb.left;e.y=-mb.top;e.width=Rc;e.height=Td;for(var Ud=0;Ud<n;Ud++){var ic=l.j[Ud];if(ic!==zc&&(ic.visible||ic===this.vb)){mb=ic.margin;Pc=mb.right+mb.left;Gd=mb.top+mb.bottom;gh(ic,Ed,Fd,0,0);var wb=ic.la,Rc=Math.max(wb.width+Pc,0),Td=Math.max(wb.height+Gd,0),$b=ic.lb;Tb($b)&&($b=this.Ei);Ob($b)||($b=ec);var $a=ic.yi;Tb($a)&&($a=ec);nb(e,$b.x*qd+$b.offsetX-($a.x*wb.width-$a.offsetX)-mb.left,$b.y*Qc+$b.offsetY-($a.y*wb.height-$a.offsetY)-
mb.top,Rc,Td)}}var Db=zc.bh;Db===Jg&&(Db=Vi(zc));switch(Db){case Pi:break a;case Cd:if(!isFinite(Ed)&&!isFinite(Fd))break a;break;case Ri:if(!isFinite(Ed))break a;break;case Qi:if(!isFinite(Fd))break a}wb=zc.la;qd=wb.width;Qc=wb.height;Rc=Math.max(qd+pd,0);Td=Math.max(Qc+Kb,0);mb=zc.margin;e.x=-mb.left;e.y=-mb.top;e.width=Rc;e.height=Td;for(Ud=0;Ud<n;Ud++)if(ic=l.j[Ud],ic!==zc&&(ic.visible||ic===this.vb))mb=ic.margin,Pc=mb.right+mb.left,Gd=mb.top+mb.bottom,wb=ic.la,Rc=Math.max(wb.width+Pc,0),Td=Math.max(wb.height+
Gd,0),$b=ic.lb,Tb($b)&&($b=this.Ei),Ob($b)||($b=ec),$a=ic.yi,Tb($a)&&($a=ec),nb(e,$b.x*qd+$b.offsetX-($a.x*wb.width-$a.offsetX)-mb.left,$b.y*Qc+$b.offsetY-($a.y*wb.height-$a.offsetY)-mb.top,Rc,Td)}break;case "Auto":var rd=a,ac=b,xb=c,Vd=d,Lb=pk(this,l,n),bc=Lb.margin,Wd=bc.right+bc.left,Ee=bc.top+bc.bottom;gh(Lb,rd,ac,xb,Vd);var sd=Lb.la,gd=Math.max(sd.width+Wd,0),Ic=Math.max(sd.height+Ee,0),cc=(new E).Dl(0,0,gd,Ic,qk(Lb)),Hd=(new E).Dl(0,0,gd,Ic,rk(Lb)),ef=new F(cc,Hd),Xd=rd,Yd=ac;isFinite(rd)&&
(Xd=ef.width);isFinite(ac)&&(Yd=ef.height);for(var he=new hb(0,0),td=0;td<n;td++){var ud=l.j[td];if(ud!==Lb&&(ud.visible||ud===this.vb)){var bc=ud.margin,ib=bc.right+bc.left,pb=bc.top+bc.bottom;gh(ud,Xd,Yd,xb,Vd);sd=ud.la;gd=Math.max(sd.width+ib,0);Ic=Math.max(sd.height+pb,0);he=new hb(Math.max(gd,he.width),Math.max(Ic,he.height))}}if(1===n)e.width=gd,e.height=Ic;else{var $c=qk(Lb),ia=rk(Lb),Ua,Ba;ia.x!==$c.x&&ia.y!==$c.y&&(Ua=he.width/Math.abs(ia.x-$c.x),Ba=he.height/Math.abs(ia.y-$c.y));var yb=
0;Lb instanceof X&&(yb=Lb.Oa*Lb.scale);Ua+=Math.abs($c.offsetX)+Math.abs(ia.offsetX)+yb;Ba+=Math.abs($c.offsetY)+Math.abs(ia.offsetY)+yb;var jc=Lb.bh;jc===Jg&&(jc=Vi(Lb));switch(jc){case Pi:Vd=xb=0;break;case Cd:isFinite(rd)&&(Ua=rd);isFinite(ac)&&(Ba=ac);break;case Ri:isFinite(rd)&&(Ua=rd);Vd=0;break;case Qi:xb=0,isFinite(ac)&&(Ba=ac)}Lb instanceof X&&(Lb.Bg?Lb.mj=m:Lb.va=m);dj(Lb);gh(Lb,Ua,Ba,xb,Vd);e.width=Lb.la.width+Wd;e.height=Lb.la.height+Ee}break;case "Table":for(var vd=a,wd=b,Ra=n,Qb=c,ff=
d,Jf=[],Ca=0;Ca<Ra;Ca++){var la=l.j[Ca];if(la instanceof w&&(la.type===mk||la.type===nk))for(var ie=la.xa,Id=ie.length,Eb=0;Eb<Id;Eb++){var xd=ie.j[Eb];la.type===mk?xd.ld=la.ld:la.type===nk&&(xd.jd=la.jd);Jf.push(xd)}else Jf.push(la)}for(var Ra=Jf.length,Jd=[],Ca=0;Ca<Ra;Ca++)la=Jf[Ca],la.ac=h,la.Hc=h,Jd[la.ld]||(Jd[la.ld]=[]),Jd[la.ld][la.jd]||(Jd[la.ld][la.jd]=[]),Jd[la.ld][la.jd].push(la);for(var Th=[],gf=[],vg=[],hf={count:0},je={count:0},jf=vd,ke=wd,za,yd,ih=Jd.length,Ca=0;Ca<ih;Ca++)if(Jd[Ca]){var cl=
Jd[Ca].length,zb=this.de(Ca);sk(zb,0);for(Eb=0;Eb<cl;Eb++)if(Jd[Ca][Eb]){var Ab=this.td(Eb);Th[Eb]===f&&(sk(Ab,0),Th[Eb]=h);for(var Zd=Jd[Ca][Eb],Uh=Zd.length,kf=0;kf<Uh;kf++)if(la=Zd[kf],la.visible||la===this.vb)if(1<la.Oj||1<la.lj)gf.push(la);else{var Sc=hj(la,zb,Ab);if(Sc!==Pi&&!la.ka.W())hf[Eb]===f&&(hf[Eb]=-1,hf.count++),je[Ca]===f&&(je[Ca]=-1,je.count++),vg.push(la),gh(la,Infinity,Infinity,Qb,ff);else{var wg=isFinite(Ab.width)?Ab.width:vd,jh=isFinite(zb.height)?zb.height:wd,Rb=new hb(Math.max(Ab.pf,
Math.min(wg,Ab.zd)),Math.max(zb.pf,Math.min(jh,zb.zd))),kc=la.margin,lf=kc.right+kc.left,Ac=kc.top+kc.bottom;gh(la,Infinity,Infinity,Qb,ff);var $d=la.la,Fe=Math.max($d.width+lf,0),hd=Math.max($d.height+Ac,0);za=this.de(Ca);yd=Math.max(hd-za.Fa,0);yd>ke&&(yd=ke);sk(za,za.Fa+yd);ke=Math.max(ke-yd,0);za=this.td(Eb);yd=Math.max(Fe-za.Fa,0);yd>jf&&(yd=jf);sk(za,za.Fa+yd);jf=Math.max(jf-yd,0)}}}}for(var Ge=0,le=0,Ra=this.gu,Ca=0;Ca<Ra;Ca++)this.qe[Ca]!==f&&(Ge+=this.td(Ca).Fa);Ra=this.Tu;for(Ca=0;Ca<Ra;Ca++)this.ze[Ca]!==
f&&(le+=this.de(Ca).Fa);jf=Math.max(vd-Ge,0);ke=Math.max(wd-le,0);Ra=vg.length;for(Ca=0;Ca<Ra;Ca++){var la=vg[Ca],zb=this.de(la.ld),Ab=this.td(la.jd),xg=la.la,kc=la.margin,lf=kc.right+kc.left,Ac=kc.top+kc.bottom;hf[la.jd]=Math.max(xg.width+lf-Ab.De,0);je[la.ld]=Math.max(xg.height+Ac-zb.De,0)}var Vh=0,Kf=0;for(Ca in je)"count"!==Ca&&(Vh+=je[Ca]);for(Ca in hf)"count"!==Ca&&(Kf+=hf[Ca]);for(Ca=0;Ca<Ra;Ca++)if(la=vg[Ca],la.visible||la===this.vb){zb=this.de(la.ld);Ab=this.td(la.jd);wg=isFinite(Ab.width)?
Ab.width:isFinite(jf)?Ab.De+hf[la.jd]/Kf*jf:Ab.De||jf;jh=isFinite(zb.height)?zb.height:isFinite(ke)?zb.De+je[la.ld]/Vh*ke:zb.De||ke;Rb=new hb(Math.max(Ab.pf,Math.min(wg,Ab.zd)),Math.max(zb.pf,Math.min(jh,zb.zd)));Sc=hj(la,zb,Ab);switch(Sc){case Ri:Rb.height=Infinity;break;case Qi:Rb.width=Infinity}kc=la.margin;lf=kc.right+kc.left;Ac=kc.top+kc.bottom;dj(la);gh(la,Rb.width,Rb.height,Ab.pf,zb.pf);$d=la.la;Fe=Math.max($d.width+lf,0);hd=Math.max($d.height+Ac,0);sk(zb,Math.max(zb.Fa,hd));sk(Ab,Math.max(Ab.Fa,
Fe))}Ra=gf.length;for(Ca=0;Ca<Ra;Ca++)if(la=gf[Ca],la.visible||la===this.vb){zb=this.de(la.ld);Ab=this.td(la.jd);Rb=new hb(Math.max(Ab.pf,Math.min(vd,Ab.zd)),Math.max(zb.pf,Math.min(wd,zb.zd)));Sc=hj(la,zb,Ab);switch(Sc){case Cd:0!==Ab.De&&(Rb.width=Math.min(Rb.width,Ab.De));0!==zb.De&&(Rb.height=Math.min(Rb.height,zb.De));break;case Ri:0!==Ab.De&&(Rb.width=Math.min(Rb.width,Ab.De));break;case Qi:0!==zb.De&&(Rb.height=Math.min(Rb.height,zb.De))}isFinite(Ab.width)&&(Rb.width=Ab.width);isFinite(zb.height)&&
(Rb.height=zb.height);for(var me=new hb(0,0),lc=1;lc<la.Oj&&!(la.ld+lc>=this.Tu);lc++)za=this.de(la.ld+lc),me.height+=Math.max(za.pf,isNaN(za.Be)?za.zd:Math.min(za.Be,za.zd));for(lc=1;lc<la.lj&&!(la.jd+lc>=this.gu);lc++)za=this.td(la.jd+lc),me.width+=Math.max(za.pf,isNaN(za.Be)?za.zd:Math.min(za.Be,za.zd));Rb.width+=me.width;Rb.height+=me.height;kc=la.margin;lf=kc.right+kc.left;Ac=kc.top+kc.bottom;gh(la,Rb.width,Rb.height,Qb,ff);for(var $d=la.la,Fe=Math.max($d.width+lf,0),hd=Math.max($d.height+Ac,
0),yg=0,lc=0;lc<la.Oj;lc++)za=this.de(la.ld+lc),yg+=za.Fa||0;if(yg<hd)for(var Ld=hd-yg;0<Ld;){var Bc=za.Fa||0;isNaN(za.height)&&za.zd>Bc&&(sk(za,Math.min(za.zd,Bc+Ld)),za.Fa!==Bc&&(Ld-=za.Fa-Bc));if(-1===za.index-1)break;za=this.de(za.index-1)}for(var He=0,lc=0;lc<la.lj;lc++)za=this.td(la.jd+lc),He+=za.Fa||0;if(He<Fe)for(Ld=Fe-He;0<Ld;){Bc=za.Fa||0;isNaN(za.width)&&za.zd>Bc&&(sk(za,Math.min(za.zd,Bc+Ld)),za.Fa!==Bc&&(Ld-=za.Fa-Bc));if(-1===za.index-1)break;za=this.td(za.index-1)}}for(var mf=0,Ie=
0,Sc=Vi(this),zg=this.ka,Ag=this.yd,ae=le=Ge=0,Lf=0,Ra=this.gu,Ca=0;Ca<Ra;Ca++)this.qe[Ca]!==f&&(za=this.td(Ca),isFinite(za.width)?ae+=za.width:tk(za)===uk?ae+=za.Fa:Ge+=za.Fa);var mf=isFinite(zg.width)?Math.min(zg.width,Ag.width):Sc!==Pi&&isFinite(vd)?vd:Ge,mf=Math.max(mf,this.Qd.width),mf=Math.max(mf-ae,0),Cg=Math.max(mf/Ge,1);isFinite(Cg)||(Cg=1);for(Ca=0;Ca<Ra;Ca++)this.qe[Ca]!==f&&(za=this.td(Ca),!isFinite(za.width)&&tk(za)!==uk&&sk(za,za.Fa*Cg),za.kb=e.width,e.width+=za.Fa);Ra=this.Tu;for(Ca=
0;Ca<Ra;Ca++)this.ze[Ca]!==f&&(za=this.de(Ca),isFinite(za.height)?Lf+=za.height:tk(za)===uk?Lf+=za.Fa:le+=za.Fa);var Ie=isFinite(zg.height)?Math.min(zg.height,Ag.height):Sc!==Pi&&isFinite(wd)?wd:le,Ie=Math.max(Ie,this.Qd.height),Ie=Math.max(Ie-Lf,0),Je=Math.max(Ie/le,1);isFinite(Je)||(Je=1);for(Ca=0;Ca<Ra;Ca++)this.ze[Ca]!==f&&(za=this.de(Ca),!isFinite(za.height)&&tk(za)!==uk&&sk(za,za.Fa*Je),za.kb=e.height,e.height+=za.Fa);this.eE=Jd;break;case "Viewbox":var nj=a,oj=b,Ln=c,Mn=d;1<n&&v.g("Viewbox Panel cannot contain more than one GraphObject.");
var be=l.j[0];be.Jb=1;dj(be);gh(be,Infinity,Infinity,Ln,Mn);var Wh=be.la,pj=be.margin,Nn=pj.right+pj.left,On=pj.top+pj.bottom;if(isFinite(nj)||isFinite(oj)){var Cp=be.scale,Pn=Wh.width,Qn=Wh.height,Rn=Math.max(nj-Nn,0),Sn=Math.max(oj-On,0);be.Jb=this.Nm===Kg?be.Jb*Math.min(Rn/Pn,Sn/Qn):be.Jb*Math.max(Rn/Pn,Sn/Qn);Cp!==be.scale&&(be.ac=h,gh(be,Infinity,Infinity,Ln,Mn))}Wh=be.la;e.width=isFinite(nj)?nj:Math.max(Wh.width+Nn,0);e.height=isFinite(oj)?oj:Math.max(Wh.height+On,0);break;case "Link":var Tn=
this instanceof cf?this.Tm:this;if(0===n){var qj=this.Ic;kb(qj,0,0);var Md=this.la;Md.Xd(0,0,0,0)}else{var rj=this.Xo(),Ke=this.rj(),Le=Ke.copy();Le.x=0;Le.y=0;var Dg,kh=this.jw();Dg=this.Y!==f?this.Y:kh.count;for(var sj=new E(Infinity,Infinity),Eg=0;Eg<Dg;Eg++){var Un=kh.j[Eg];sj.x=Math.min(Un.x,sj.x);sj.y=Math.min(Un.y,sj.y)}this.li=new E(Ke.x,Ke.y);this.ih.clear();rj!==m&&(vk(rj,Ke.width,Ke.height),Md=rj.la,Le.ok(Md),this.ih.add(Md));for(var Fg=m,gg=m,Mf=m,Eg=0;Eg<n;Eg++){var mc=l.j[Eg];if(mc!==
rj)if(mc.Oi&&mc instanceof X)vk(mc,Ke.width,Ke.height),Md=mc.la,Le.ok(Md),this.ih.add(Md);else if(2>Dg)gh(mc,Infinity,Infinity),Md=mc.la,Le.ok(Md),this.ih.add(Md);else{Fg===m&&(Fg=new Za,gg=new E,Mf=new E);var Nf=mc.ah,Wn=mc.Ky,dl=mc.yi;Sb(dl)&&(dl=ec);var tj=mc.Rr,Dp=mc.Ly,Xh,Yh,uj=0;if(Nf<-Dg||Nf>=Dg){var Xn=Tn.vC,vj=Tn.uC;tj!==Oi&&(uj=wk(tj,vj),mc.Ka=uj);Xh=Xn.x-Ke.x;Yh=Xn.y-Ke.y}else{var nf,lh;if(0<=Nf)nf=kh.j[Nf],lh=Nf<Dg-1?kh.j[Nf+1]:nf;else{var el=Dg+Nf;nf=kh.j[el];lh=0<el?kh.j[el-1]:nf}vj=
0<=Nf?nf.Ph(lh):lh.Ph(nf);tj!==Oi&&(uj=wk(tj,vj),mc.Pb=uj);Xh=nf.x+(lh.x-nf.x)*Wn-Ke.x;Yh=nf.y+(lh.y-nf.y)*Wn-Ke.y}gh(mc,Infinity,Infinity);var Md=mc.la,qj=mc.qa,Zh=0;mc instanceof X&&(Zh=mc.Oa);var Yn=qj.width+Zh,Zn=qj.height+Zh;Fg.reset();Fg.translate(-Md.x,-Md.y);Fg.scale(mc.scale,mc.scale);Fg.rotate(mc.Ka,Yn/2,Zn/2);var $n=new F(0,0,Yn,Zn);gg.Sn($n,dl);Fg.wb(gg);var Ep=-gg.x+Zh/2,Fp=-gg.y+Zh/2;Mf.set(Dp);isNaN(Mf.x)&&(Mf.x=0<=Nf?gg.x+3:-(gg.x+3));isNaN(Mf.y)&&(Mf.y=-(gg.y+3));Mf.rotate(vj);Xh+=
Mf.x;Yh+=Mf.y;var $h=$n;$h.set(Md);$h.x=Xh+Ep;$h.y=Yh+Fp;this.ih.add($h);Le.ok($h)}}if(this.$e)for(var ao=this.Xh;ao.next();)gh(ao.value,Infinity,Infinity);this.sk=Le;var xj=this.li;xj&&xj.Xd(xj.x+Le.x,xj.y+Le.y);kb(e,Le.width||0,Le.height||0)}break;case "Grid":break;default:v.g("Unknown panel type: "+q)}var ne=e.width,oe=e.height,yj=this.padding,Gp=yj.top+yj.bottom,ne=ne+(yj.left+yj.right),oe=oe+Gp;isFinite(g.width)&&(ne=g.width);isFinite(g.height)&&(oe=g.height);ne=Math.min(j.width,ne);oe=Math.min(j.height,
oe);ne=Math.max(i.width,ne);oe=Math.max(i.height,oe);ne=Math.max(c,ne);oe=Math.max(d,oe);e.width=ne;e.height=oe;r=this.Ic;kb(r,ne,oe);Si(this,0,0,ne,oe)}};function pk(a,b,c){for(var d=0;d<c;d++){var e=b.j[d];if(e.Oi===h)return a.Eq=e}b=b.j[0];return a.Eq=b}
da.Ai=function(a,b,c,d){var e=this.sk,g=this.xa,i=g.length,j=this.gE;j.reset();if(0===i){var k=this.oa;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.ka.W()){var l=Vi(this),n=this.zc,r=n.width,q=n.height;r===c&&q===d&&(l=Pi);switch(l){case Pi:if(r>c||q>d)this.K(),gh(this,r>c?c:r,q>d?d:q);break;case Cd:this.ac=h;gh(this,c,d,0,0);break;case Ri:this.ac=h;gh(this,c,q,0,0);break;case Qi:this.ac=h,gh(this,r,d,0,0)}}k=this.oa;k.x=a;k.y=b;k.width=c;k.height=d;var u=this.N.qb;switch(u){case "Position":for(var x=
e.x+this.padding.left,B=e.y+this.padding.top,G=0;G<i;G++){var I=g.j[G],y=I.la,J=I.margin,z=I.position.x,H=I.position.y;j.x=isNaN(z)?-x:z-x;j.y=isNaN(H)?-B:H-B;j.x+=J.left;j.y+=J.top;j.width=y.width;j.height=y.height;I.visible&&I.pc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var fa=this.padding.left,S=this.padding.top,T=0;T<i;T++){var ga=fa,na=g.j[T],ra=na.la,Da=na.margin,Wa=Da.left+Da.right,fb=ra.width,ab=Vi(na);if(isNaN(na.ka.width)&&ab===Cd||ab===Ri)fb=Math.max(e.width-Wa,0);var Pa=fb+
Wa,gb=na.lb;Tb(gb)&&(gb=this.Ei);Ob(gb)||(gb=ec);j.x=ga+gb.offsetX+Da.left+(e.width*gb.x-Pa*gb.x);j.y=S+gb.offsetY+Da.top;j.width=fb;j.height=ra.height;na.visible&&(na.pc(j.x,j.y,j.width,j.height),S+=ra.height+Da.bottom+Da.top)}break;case "Horizontal":for(var bb=this.padding.top,Zb=this.padding.left,Xc=0;Xc<i;Xc++){var Xa=bb,Fc=g.j[Xc],Dd=Fc.la,rc=Fc.margin,Vb=rc.top+rc.bottom,hc=Dd.height,Gc=Vi(Fc);if(isNaN(Fc.ka.height)&&Gc===Cd||Gc===Qi)hc=Math.max(e.height-Vb,0);var Hb=hc+Vb,Ib=Fc.lb;Tb(Ib)&&
(Ib=this.Ei);Ob(Ib)||(Ib=ec);j.x=Zb+Ib.offsetX+rc.left;j.y=Xa+Ib.offsetY+rc.top+(e.height*Ib.y-Hb*Ib.y);j.width=Dd.width;j.height=hc;Fc.visible&&(Fc.pc(j.x,j.y,j.width,j.height),Zb+=Dd.width+rc.left+rc.right)}break;case "Spot":var Jb=pk(this,g,i),De=Jb.la,Oc=De.width,od=De.height,Hc=this.padding,xc=Hc.left,fd=Hc.top;j.x=xc-e.x;j.y=fd-e.y;Jb.pc(j.x,j.y,Oc,od);for(var sb=0;sb<i;sb++){var yc=g.j[sb];if(yc!==Jb){var Ed=yc.la,Fd=Ed.width,sa=Ed.height,Fa=yc.lb;Tb(Fa)&&(Fa=this.Ei);Ob(Fa)||(Fa=ec);var zc=
yc.yi;Tb(zc)&&(zc=ec);j.x=Fa.x*Oc+Fa.offsetX-(zc.x*Fd-zc.offsetX);j.y=Fa.y*od+Fa.offsetY-(zc.y*sa-zc.offsetY);j.x-=e.x;j.y-=e.y;yc.visible&&yc.pc(xc+j.x,fd+j.y,Fd,sa)}}break;case "Auto":var mb=pk(this,g,i),Pc=mb.la,Gd=0;mb instanceof X&&(Gd=mb.Oa);var pd=new F(0,0,Pc.width-Gd,Pc.height-Gd),Kb=new F(0,0,1,1),wb=mb.margin,qd=wb.left,Qc=wb.top,Rc=this.padding,Td=Rc.left,Ud=Rc.top;j.x=qd;j.y=Qc;j.width=Pc.width;j.height=Pc.height;mb.pc(Td+j.x,Ud+j.y,j.width,j.height);var ic=qk(mb),$b=rk(mb),$a=(new E).Sn(pd,
ic),Db=(new E).Sn(pd,$b);Kb.x=$a.x;Kb.y=$a.y;Kb.cv(Db);Kb.x+=qd+Td+Gd/2;Kb.y+=Qc+Ud+Gd/2;for(var rd=0;rd<i;rd++){var ac=g.j[rd];if(ac!==mb){var xb=ac.la,wb=ac.margin,Vd=Math.max(xb.width+wb.right+wb.left,0),Lb=Math.max(xb.height+wb.top+wb.bottom,0),bc=ac.lb;Tb(bc)&&(bc=this.Ei);Ob(bc)||(bc=ec);j.x=Kb.width*bc.x+bc.offsetX-Vd*bc.x+wb.left+Kb.x;j.y=Kb.height*bc.y+bc.offsetY-Lb*bc.y+wb.top+Kb.y;j.width=Kb.width;j.height=Kb.height;ac.visible&&(ub(Kb.x,Kb.y,Kb.width,Kb.height,j.x,j.y,xb.width,xb.height)?
ac.pc(j.x,j.y,xb.width,xb.height):ac.pc(j.x,j.y,xb.width,xb.height,new F(Kb.x,Kb.y,Kb.width,Kb.height)))}}break;case "Table":for(var Wd=this.eE,Ee,sd,gd=Wd.length,Ic=0,cc=0;cc<gd;cc++)Wd[cc]&&(Ic=Math.max(Ic,Wd[cc].length));for(var Hd=Math.min(this.Mm,gd-1);Hd!==gd&&(this.ze[Hd]===f||0===this.ze[Hd].Fa);)Hd++;for(var Hd=Math.min(Hd,gd-1),ef=-this.ze[Hd].kb,Xd=Math.min(this.rm,Ic-1);Xd!==Ic&&(this.qe[Xd]===f||0===this.qe[Xd].Fa);)Xd++;for(var Xd=Math.min(Xd,Ic-1),Yd=-this.qe[Xd].kb,cc=0;cc<gd;cc++)if(Wd[cc]){var Ic=
Wd[cc].length,he=this.de(cc);sd=he.kb+ef;for(var td=0;td<Ic;td++)if(Wd[cc][td]){var ud=this.td(td);Ee=ud.kb+Yd;for(var ib=Wd[cc][td],pb=ib.length,$c=0;$c<pb;$c++){for(var ia=ib[$c],Ua=ia.la,Ba=new hb(0,0),yb=1;yb<ia.rowSpan&&!(cc+yb>=this.Tu);yb++){var jc=this.de(cc+yb);Ba.height+=jc.Fa}for(yb=1;yb<ia.dB&&!(td+yb>=this.gu);yb++){var vd=this.td(td+yb);Ba.width+=vd.Fa}var wd=ud.Fa+Ba.width,Ra=he.Fa+Ba.height;j.x=Ee;j.y=sd;j.width=wd;j.height=Ra;var Qb=Ee,ff=sd,Jf=wd,Ca=Ra,la=ia.lb.copy();if(Tb(la)){la.Pa(this.Ei);
Ob(la)||la.Pa(ec);var ie=ud.lb;Ob(ie)&&(la.x=ie.x,la.offsetX=ie.offsetX);var Id=he.lb;Ob(Id)&&(la.y=Id.y,la.offsetY=Id.offsetY)}Ob(la)||(la=ec);var Eb=Ua.width,xd=Ua.height,Jd=ia.yd,Th=ia.Qd,Eb=Math.min(Jd.width,Eb),xd=Math.min(Jd.height,xd),Eb=Math.max(Th.width,Eb),xd=Math.max(Th.height,xd),gf=ia.margin,vg=gf.left+gf.right,hf=gf.top+gf.bottom,je=hj(ia,he,ud);if(isNaN(ia.ka.width)&&je===Cd||je===Ri)Eb=Math.max(wd-vg,0);if(isNaN(ia.ka.height)&&je===Cd||je===Qi)xd=Math.max(Ra-hf,0);var jf=xd+hf;j.x+=
j.width*la.x-(Eb+vg)*la.x+la.offsetX+gf.left;j.y+=j.height*la.y-jf*la.y+la.offsetY+gf.top;ia.visible&&(ub(Qb,ff,Jf,Ca,j.x,j.y,Eb,xd)?ia.pc(j.x,j.y,Eb,xd):ia.pc(j.x,j.y,Eb,xd,new F(Qb,ff,Jf,Ca)))}}}for(cc=0;cc<i;cc++)if(ia=g.j[cc],ia instanceof w&&(ia.type===mk||ia.type===nk)){ia.Ql=this.Zd.copy();ia.zc=this.la.B();var ke=this.oa.copy();ke.x=0;ke.y=0;ke.freeze();ia.Ic=this.qa.B()}break;case "Viewbox":var za=g.j[0],yd=za.la,ih=za.margin,cl=ih.top+ih.bottom,zb=Math.max(yd.width+(ih.right+ih.left),0),
Ab=Math.max(yd.height+cl,0),Zd=za.lb;Tb(Zd)&&(Zd=this.Ei);Ob(Zd)||(Zd=ec);j.x=e.width*Zd.x-zb*Zd.x+Zd.offsetX;j.y=e.height*Zd.y-Ab*Zd.y+Zd.offsetY;j.width=yd.width;j.height=yd.height;za.pc(j.x,j.y,j.width,j.height);break;case "Link":var Uh=this.Xo(),kf=0;if(Uh!==m&&kf<this.ih.count){var Sc=this.ih.j[kf];kf++;Uh.pc(Sc.x-this.sk.x,Sc.y-this.sk.y,Sc.width,Sc.height)}for(var wg=0;wg<i;wg++){var jh=g.j[wg];jh!==Uh&&kf<this.ih.count&&(Sc=this.ih.j[kf],kf++,jh.pc(Sc.x-this.sk.x,Sc.y-this.sk.y,Sc.width,Sc.height))}var Rb=
this.jw(),kc=Rb.count;if(2<=kc&&this.$e)for(var lf=this.Xh;lf.next();){var Ac=lf.value,$d=kc,Fe=Rb,hd=Ac.ah,Ge=Ac.Ky,le=Ac.yi;Sb(le)&&(le=ec);var xg=Ac.Rr,Vh=Ac.Ly,Kf=f,me=f,lc=0;if(hd<-$d||hd>=$d){var yg=this.vC,Ld=this.uC;xg!==Oi&&(lc=wk(xg,Ld),Ac.Ka=lc);Kf=yg.x;me=yg.y}else{var Bc=f,He=f;if(0<=hd)Bc=Fe.j[hd],He=hd<$d-1?Fe.j[hd+1]:Bc;else var mf=$d+hd,Bc=Fe.j[mf],He=0<mf?Fe.j[mf-1]:Bc;Ld=0<=hd?Bc.Ph(He):He.Ph(Bc);xg!==Oi&&(lc=wk(xg,Ld),Ac.Ka=lc);Kf=Bc.x+(He.x-Bc.x)*Ge;me=Bc.y+(He.y-Bc.y)*Ge}var Ie=
new Za;Ie.scale(Ac.scale,Ac.scale);Ie.rotate(Ac.Ka,0,0);var zg=Ac.qa,Ag=new F(0,0,zg.width,zg.height),ae=new E;ae.Sn(Ag,le);Ie.wb(ae);var Lf=-ae.x,Cg=-ae.y,Je=Vh.copy();isNaN(Je.x)&&(Je.x=0<=hd?ae.x+3:-(ae.x+3));isNaN(Je.y)&&(Je.y=-(ae.y+3));Je.rotate(Ld);Kf+=Je.x;me+=Je.y;Ie.yD(Ag);Lf+=Ag.x;Cg+=Ag.y;Ac.position=new E(Kf+Lf,me+Cg)}break;case "Grid":break;default:v.g("Unknown panel type: "+u)}}};
da.Ci=function(a){var b=this.qa;if(ub(0,0,b.width,b.height,a.x,a.y)){for(var c=this.xa.length,b=new E;c--;){var d=this.xa.j[0];if(d.visible||d===this.vb)if(cb(b.set(a),d.transform),d.ea(b))return h}return this.hh===m&&this.gh===m?p:h}return p};function xk(a,b,c){c(a,b);if(b instanceof w)for(b=b.elements;b.next();)xk(a,b.value,c)}function oi(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof w&&oi(a,d,c)}}
function yk(a,b,c){if(c(b))return b;if(b instanceof w)for(b=b.elements;b.next();){var d=yk(a,b.value,c);if(d!==m)return b.Hf(),d}return m}w.prototype.findObject=w.prototype.Ke=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof w&&!c.NF()&&(c=c.Ke(a),c!==m))return c}return m};Q.prototype.findObjectByPred=w.prototype.FB=function(a){return a(this)?this:zk(this,a)};
function zk(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof w&&(d=zk(d,b),d!==m))return d}return m}
w.prototype.Yc=function(a,b,c){if(this.bf===p)return m;b===f&&(b=m);c===f&&(c=m);if(this.Hc)return m;var d=this.qa,e=1/this.pl();if(ub(-(5*e),-(5*e),d.width+10*e,d.height+10*e,a.x,a.y)){if(!this.ug)for(var g=this.xa.length,e=new E;g--;){var i=this.xa.j[g];if(i.visible||i===this.vb){cb(e.set(a),i.transform);var j=m;i instanceof w?j=i.Yc(e,b,c):i.bf===h&&i.ea(e)&&(j=i);if(j!==m&&(b!==m&&(j=b(j)),j&&(c===m||c(j))))return j}}return this.background===m&&this.Ih===m?m:ub(0,0,d.width,d.height,a.x,a.y)?this:
m}return m};w.prototype.mn=function(a,b,c,d){if(this.bf===p)return p;b===f&&(b=m);c===f&&(c=m);!(d instanceof A)&&!(d instanceof ka)&&(d=new A(Q));var e=this.qa;if(ub(0,0,e.width,e.height,a.x,a.y)){if(!this.ug)for(var g=this.xa.length,e=new E;g--;){var i=this.xa.j[g];if(i.visible||i===this.vb)if(cb(e.set(a),i.transform),(i instanceof w?i.mn(e,b,c,d):i.ea(e))&&i.bf!==p)b!==m&&(i=b(i)),i&&(c===m||c(i))&&d.add(i)}return this.background!==m||this.Ih!==m}return p};
w.prototype.ol=function(a,b,c,d,e,g){if(this.bf===p)return p;g===f&&(g=new Za);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.Lx(a,g))return Ui(this,b,c,e),h;if(this.Me(a,g)){if(!this.ug)for(var i=this.xa.length;i--;){var j=this.xa.j[i];if(j.visible||j===this.vb){var k=j.oa,l=this.oa;if(!(k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height)){if(j instanceof w)k=j.ol(a,b,c,d,e,g.copy());else{var k=j,l=a,n=d,r=g.copy();k.bf===p?k=p:(r===f&&(r=new Za),r.multiply(k.transform),k=n?k.Me(l,
r):k.Lx(l,r))}k&&(b!==m&&(j=b(j)),j&&(c===m||c(j))&&e.add(j))}}}return d}return p};
w.prototype.nn=function(a,b,c,d,e){if(this.bf===p)return p;c===f&&(c=m);d===f&&(d=m);var g=this.qa,i=a.Gi(b);if(0<a.x&&a.x<g.width&&0<a.y&&a.y<g.height||db(a.x,a.y,0,0,0,g.height)<i||db(a.x,a.y,0,g.height,g.width,g.height)<i||db(a.x,a.y,g.width,g.height,g.width,0)<i||db(a.x,a.y,g.width,0,0,0)<i){if(!this.ug)for(var g=new E,i=new E,j=this.xa.length;j--;){var k=this.xa.j[j];if(k.visible||k===this.vb){var l=k.oa,n=this.oa;if(!(l.x>n.width||l.y>n.height||0>l.x+l.width||0>l.y+l.height))if(l=k.transform,
cb(g.set(a),l),cb(i.set(b),l),k instanceof w?k.nn(g,i,c,d,e):k.GB(g,i))c!==m&&(k=c(k)),k&&(d===m||d(k))&&e.add(k)}}return h}return p};function qk(a){var b=a.n;if(b===f||b===Wb)b=m;b===m&&a instanceof X&&(a=a.va,a!==m&&(b=a.n));b===m&&(b=Xb);return b}function rk(a){var b=a.o;if(b===f||b===Wb)b=m;b===m&&a instanceof X&&(a=a.va,a!==m&&(b=a.o));b===m&&(b=nc);return b}w.prototype.add=w.prototype.add=function(a){v.c(a,Q,w,"add:element");this.gc(this.xa.count,a)};w.prototype.elt=w.prototype.Z=function(a){return this.xa.Z(a)};
w.prototype.insertAt=w.prototype.gc=function(a,b){b instanceof R&&v.g("Cannot add a Part to a Panel: "+b);if(this===b||this.Wh(b))this===b&&v.g("Cannot make a Panel contain itself: "+this.toString()),v.g("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());this.N===Ph&&!(b instanceof X)&&v.g("Can only add Shapes to a Grid Panel, not: "+b);b.Cl(this);b.Rk=m;if(this.oy!==m){var c=b.data;c!==m&&"object"===typeof c&&(this.Ze===m&&(this.Ze=new ja(Object,
w)),this.Ze.add(c,b))}c=this.xa;c.gc(a,b);a>=c.count&&(a=c.count-1);this.K();b.K();c=this.T;if(c!==m){var d=this.b;d!==m&&d.ca.ab||c.ke(we,"elements",this,m,b,m,a)}};w.prototype.remove=w.prototype.remove=function(a){v.c(a,Q,w,"remove:element");for(var b=this.xa,c=b.count,d=-1,e=0;e<c;e++)if(b.j[e]===a){d=e;break}-1!==d&&this.vd(d)};w.prototype.removeAt=w.prototype.Se=function(a){t&&v.i(a,w,"removeAt:idx");0<=a&&this.vd(a)};
w.prototype.vd=function(a){var b=this.xa,c=b.Z(a);c.Rk=m;if(this.Ze!==m){var d=c.data;"object"===typeof d&&this.Ze.remove(d)}b.Se(a);this.ac=p;this.K();b=this.T;b!==m&&(d=this.b,d!==m&&d.ca.ab||b.ke(xe,"elements",this,c,m,a,m))};v.m(w,{Tu:"rowCount"},function(){return this.ze.length});
w.prototype.getRowDefinition=w.prototype.de=function(a){t&&v.i(a,w,"getRowDefinition:idx");0>a&&v.ha(a,">= 0",w,"getRowDefinition:idx");var a=Math.round(a),b=this.ze;if(b[a]===f){var c=new Gj;c.Cl(this);c.Ik=h;c.U=a;b[a]=c}return b[a]};w.prototype.removeRowDefinition=w.prototype.$J=function(a){t&&v.i(a,w,"removeRowDefinition:idx");0>a&&v.ha(a,">= 0",w,"removeRowDefinition:idx");var a=Math.round(a),b=this.ze;b[a]&&(b[a]=f)};v.m(w,{gu:"columnCount"},function(){return this.qe.length});
w.prototype.getColumnDefinition=w.prototype.td=function(a){t&&v.i(a,w,"getColumnDefinition:idx");0>a&&v.ha(a,">= 0",w,"getColumnDefinition:idx");var a=Math.round(a),b=this.qe;if(b[a]===f){var c=new Gj;c.Cl(this);c.Ik=h;c.U=a;b[a]=c}return b[a]};w.prototype.removeColumnDefinition=w.prototype.YJ=function(a){t&&v.i(a,w,"removeColumnDefinition:idx");0>a&&v.ha(a,">= 0",w,"removeColumnDefinition:idx");var a=Math.round(a),b=this.qe;b[a]&&(b[a]=f)};v.a(w,"rowSizing",w.prototype.$C);
v.defineProperty(w,{$C:"rowSizing"},s("mq"),function(a){var b=this.mq;b!==a&&(a!==lk&&a!==uk&&v.g("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.mq=a,this.K(),this.d("rowSizing",b,a))});v.a(w,"columnSizing",w.prototype.cB);
v.defineProperty(w,{cB:"columnSizing"},s("po"),function(a){var b=this.po;b!==a&&(a!==lk&&a!==uk&&v.g("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.po=a,this.K(),this.d("columnSizing",b,a))});v.a(w,"topIndex",w.prototype.RG);v.defineProperty(w,{RG:"topIndex"},s("Mm"),function(a){var b=this.Mm;b!==a&&((!isFinite(a)||0>a)&&v.g("topIndex must be greater than zero and a real number. Was "+a),this.Mm=a,ej(this),this.d("topIndex",b,a))});
v.a(w,"leftIndex",w.prototype.VF);v.defineProperty(w,{VF:"leftIndex"},s("rm"),function(a){var b=this.rm;b!==a&&((!isFinite(a)||0>a)&&v.g("leftIndex must be greater than zero and a real number. Was "+a),this.rm=a,ej(this),this.d("leftIndex",b,a))});v.a(w,"data",w.prototype.data);
v.defineProperty(w,{data:"data"},s("Zl"),function(a){var b=this.Zl;if(b!==a){var c=this instanceof R&&!(this instanceof cf);c&&v.e(a,"object",w,"data");of(this);this.Zl=a;var d=this.b;d!==m&&(c?(b!==m&&d.Gf.remove(b),a!==m&&d.Gf.add(a,this)):(c=this.V,c!==m&&c.Ze!==m&&(b!==m&&c.Ze.remove(b),a!==m&&c.Ze.add(a,this))));this.d("data",b,a);d!==m&&d.ca.ab||a!==m&&this.ic()}});function Cj(a){a=a.vk;return a!==m&&a.Ha}
function of(a){var b=a.vk;if(b===m)a.data!==m&&v.g("Template cannot have .data be non-null: "+a),a.vk=b=new A(Te);else if(b.Ha)return;var c=new A(Q);xk(a,a,function(a,d){var e=d.Qb;if(e!==m){d.Sl=p;for(var g=e.f;g.next();){e=g.value;e.mode===Ve&&(d.Sl=h);var i=e.Un;if(i!==m){var q=a;""!==i&&(q=a.Ke(i));q!==m&&(c.add(q),q.Aq===f&&(q.Aq=new A(Te)),q.Aq.add(e))}b.add(e)}}if(d instanceof w){if(0<d.ze.length){g=d.ze;i=g.length;for(q=0;q<i;q++){var u=g[q];if(u!==f&&u.Qb!==m)for(var x=u.Qb.f;x.next();)e=
x.value,e.df=u,e.$w=2,e.Pt=u.index,b.add(e)}}if(0<d.qe.length){g=d.qe;i=g.length;for(q=0;q<i;q++)if(u=g[q],u!==f&&u.Qb!==m)for(x=u.Qb.f;x.next();)e=x.value,e.df=u,e.$w=1,e.Pt=u.index,b.add(e)}}});for(var d=c.f;d.next();){var e=d.value;if(e.Aq!==f){e.Sl=h;for(var g=e.Aq.f;g.next();){var i=g.value;e.Qb===m&&(e.Qb=new A(Te));e.Qb.add(i)}}delete e.Aq}for(d=b.f;d.next();)e=d.value,g=e.df,g!==m&&(e.df=m,g===a?e.Gl="":(g instanceof Gj&&(g=g.V),e.Gl=""!==g.name?g.name:g.name="_"+v.fc(g)));b.freeze()}
w.prototype.updateTargetBindings=w.prototype.ic=function(a){var b=this.vk;if(b!==m){a===f&&(a="");for(b=b.f;b.next();){var c=b.value,d=c.Qy;if(!(""!==a&&d!==a)&&(d=c.Vy,!(c.fB===m&&""===d))){var d=this.data,e=c.Un;e!==m&&(d=this.Ke(e));if(d===m)t&&v.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.Gl;if(""!==g){if(e=this.Ke(g),e===m)continue}else c.df!==m&&(e=c.df);g=c.$w;if(0!==g){if(!(e instanceof w))continue;1===g?e=e.td(c.Pt):2===g&&(e=e.de(c.Pt))}e!==
f&&c.ED(e,d)}}}}};v.a(w,"itemArray",w.prototype.oy);v.defineProperty(w,{oy:"itemArray"},s("Aj"),function(a){var b=this.Aj;if(b!==a){t&&(a!==m&&!v.isArray(a))&&v.g("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.b;c!==m&&b!==m&&ri(c,this);this.Aj=a;c!==m&&a!==m&&pi(c,this);this.d("itemArray",b,a);c!==m&&c.ca.ab||this.Hy()}});
w.prototype.rebuildItemElements=w.prototype.Hy=function(){for(;0<this.xa.length;)this.vd(0);var a=this.oy;if(a!==m)for(var b=v.xb(a),c=0;c<b;c++)zh(this,v.mb(a,c))};
function zh(a,b,c){if(!(b===f||b===m)){var d=a.getCategoryForItemData(b),e=a.gC,g=m;e!==m&&(g=e.$(d));g===m&&(v.mE===f&&(v.mE=h,v.trace('No item template Panel found for category "'+d+'" on '+a),v.trace("  Using default item template.")),g=a.b.TD);g instanceof w&&(of(g),e=g.copy(),"object"===typeof b&&(a.Ze===m&&(a.Ze=new ja(Object,w)),a.Ze.add(b,e)),"number"===typeof c?a.gc(c,e):a.add(e),e.uw=d,e.data=b)}}w.prototype.isItemPanel=w.prototype.NF=function(){return this.Aj!==m||this.Mf!==m};
v.a(w,"itemTemplate",w.prototype.RF);v.defineProperty(w,{RF:"itemTemplate"},function(){return this.Mf===m?m:this.Mf.$("")},function(a){this.Mf===m&&(this.Mf=new ja("string",w));var b=this.Mf.$("");b!==a&&(v.c(a,w,w,"itemTemplate"),a instanceof R&&v.g("itemTemplate must not be a Part: "+a),this.Mf.add("",a),this.d("itemTemplate",b,a),a=this.b,a!==m&&a.ca.ab||this.Hy())});v.a(w,"itemTemplateMap",w.prototype.gC);
v.defineProperty(w,{gC:"itemTemplateMap"},s("Mf"),function(a){var b=this.Mf;if(b!==a){v.c(a,ja,w,"itemTemplateMap");for(var c=a.f;c.next();){var d=c.value;d instanceof R&&v.g("Template in itemTemplateMap must not be a Part: "+d)}this.Mf=a;this.d("itemTemplateMap",b,a);a=this.b;a!==m&&a.ca.ab||this.Hy()}});v.a(w,"itemCategoryProperty",w.prototype.QF);
v.defineProperty(w,{QF:"itemCategoryProperty"},s("nm"),function(a){var b=this.nm;b!==a&&("string"!==typeof a&&"function"!==typeof a&&v.uc(a,"string or function",w,"itemCategoryProperty"),this.nm=a,this.d("itemCategoryProperty",b,a))});
w.prototype.getCategoryForItemData=w.prototype.OI=function(a){if(a===m)return"";var b=this.nm;if("function"===typeof b)b=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";b=v.Wa(a,b)}else return"";if(b===f)return"";if("string"===typeof b)return b;t&&v.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};v.a(w,"isAtomic",w.prototype.KF);
v.defineProperty(w,{KF:"isAtomic"},s("ug"),function(a){var b=this.ug;b!==a&&(v.e(a,"boolean",w,"isAtomic"),this.ug=a,this.d("isAtomic",b,a))});function Gj(){v.Hb(this);this.Jj=m;this.Ik=h;this.U=0;this.Be=NaN;this.Ok=0;this.Nk=Infinity;this.ia=Wb;this.kb=this.Fa=0;this.Qb=m;this.xq=Ak;this.Fg=Jg}v.H("RowColumnDefinition",Gj);
Gj.prototype.copy=function(){var a=new Gj;a.Ik=this.Ik;a.U=this.U;a.Be=this.Be;a.Ok=this.Ok;a.Nk=this.Nk;a.ia=this.ia;a.Fa=this.Fa;a.kb=this.kb;a.Fg=this.Fg;a.xq=this.xq;a.Qb=this.Qb;return a};var Ak;Gj.Default=Ak=v.l(Gj,"Default",0);var uk;Gj.None=uk=v.l(Gj,"None",1);var lk;Gj.ProportionalExtra=lk=v.l(Gj,"ProportionalExtra",2);Gj.prototype.Cl=ba("Jj");function sk(a,b){a.Fa=isNaN(a.Be)?Math.max(Math.min(a.Nk,b),a.Ok):Math.max(Math.min(a.Nk,a.Be),a.Ok)}
Gj.prototype.rd=function(a,b,c,d,e){var g=this.Jj;if(g!==m){g.K();for(var i=this.Gu,j=g.xa,k=j.length,l=0;l<k;l++){var n=j.j[l];(i?n.ld:n.jd)===this.index&&n.K()}g.ke(ve,a,this,b,c,d,e);if(this.Qb!==m&&(b=g.mr(),b!==m&&(b=b.data,b!==m)))for(c=this.Qb.f;c.next();)c.value.DD(this,b,a)}};v.m(Gj,{V:"panel"},s("Jj"));v.m(Gj,{Gu:"isRow"},s("Ik"));v.m(Gj,{index:"index"},s("U"));v.a(Gj,"height",Gj.prototype.height);
v.defineProperty(Gj,{height:"height"},s("Be"),function(a){var b=this.Be;b!==a&&(t&&v.e(a,"number",Gj,"height"),0>a&&v.ha(a,">= 0",Gj,"height"),this.Be=a,sk(this,this.Fa),this.rd("size",b,a))});v.a(Gj,"width",Gj.prototype.width);v.defineProperty(Gj,{width:"width"},s("Be"),function(a){var b=this.Be;b!==a&&(t&&v.e(a,"number",Gj,"width"),0>a&&v.ha(a,">= 0",Gj,"width"),this.Be=a,sk(this,this.Fa),this.rd("size",b,a))});v.a(Gj,"minimum",Gj.prototype.pf);
v.defineProperty(Gj,{pf:"minimum"},s("Ok"),function(a){var b=this.Ok;b!==a&&(t&&v.e(a,"number",Gj,"minimum"),(0>a||!isFinite(a))&&v.ha(a,">= 0",Gj,"minimum"),this.Ok=a,sk(this,this.Fa),this.rd("minimum",b,a))});v.a(Gj,"maximum",Gj.prototype.zd);v.defineProperty(Gj,{zd:"maximum"},s("Nk"),function(a){var b=this.Nk;b!==a&&(t&&v.e(a,"number",Gj,"maximum"),0>a&&v.ha(a,">= 0",Gj,"maximum"),this.Nk=a,sk(this,this.Fa),this.rd("maximum",b,a))});v.a(Gj,"alignment",Gj.prototype.lb);
v.defineProperty(Gj,{lb:"alignment"},s("ia"),function(a){var b=this.ia;b.u(a)||(t&&v.c(a,K,Gj,"alignment"),this.ia=a.B(),this.rd("alignment",b,a))});v.a(Gj,"stretch",Gj.prototype.bh);v.defineProperty(Gj,{bh:"stretch"},s("Fg"),function(a){var b=this.Fg;b!==a&&(t&&v.Sa(a,Q,Gj,"stretch"),this.Fg=a,this.rd("stretch",b,a))});v.a(Gj,"sizing",Gj.prototype.Vr);v.defineProperty(Gj,{Vr:"sizing"},s("xq"),function(a){var b=this.xq;b!==a&&(t&&v.Sa(a,Gj,Gj,"sizing"),this.xq=a,this.rd("sizing",b,a))});
function tk(a){if(a.Vr===Ak){var b=a.Jj;return a.Gu?b.$C:b.cB}return a.Vr}v.m(Gj,{De:"actual"},s("Fa"));v.m(Gj,{position:"position"},s("kb"));Gj.prototype.bind=Gj.prototype.bind=function(a){a.df=this;var b=this.V;b!==m&&(b=b.mr(),b!==m&&Cj(b)&&v.g("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));this.Qb===m&&(this.Qb=new A(Te));this.Qb.add(a)};
function X(){Q.call(this);this.va=m;this.Oo="None";this.Bg=p;this.Wo=Jg;this.mj=m;this.oc=this.Ve="black";this.Eh=1;this.Gm="butt";this.Hm="miter";this.Im=10;this.Ch=this.Bh=Wb;this.Wp=this.Vp=0;this.lp=h;this.hE=new F;this.gm=this.Lm="None";this.dp=1}v.H("Shape",X);v.na(X,Q);
X.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.va=this.va;a.Oo=this.Oo;a.Bg=this.Bg;a.Wo=this.Wo;a.mj=this.mj;a.Ve=this.Ve;a.oc=this.oc;a.Eh=this.Eh;a.Gm=this.Gm;a.Hm=this.Hm;a.Im=this.Im;a.Bh=this.Bh.B();a.Ch=this.Ch.B();a.Vp=this.Vp;a.Wp=this.Wp;a.lp=this.lp;a.Lm=this.Lm;a.gm=this.gm;a.dp=this.dp};X.prototype.toString=function(){return"Shape("+("None"!==this.Ua?this.Ua:"None"!==this.Jl?this.Jl:this.Au)+")#"+v.fc(this)};
X.prototype.gr=function(a){if(!(this.oc===m&&this.Ve===m)){this.Ve!==m&&bj(this,a,this.Ve,h);this.oc!==m&&bj(this,a,this.oc,p);a.lineWidth=this.Eh;a.lineJoin=this.Hm;a.lineCap=this.Gm;a.miterLimit=this.Im;var b=p;this.T&&(b=this.T.ul);var c=h;this.oc!==m&&this.Ve===m&&(c=p);var d=this.va;if(d!==m)if(d.N===Kd)a.beginPath(),a.moveTo(d.Kb,d.Wb),a.lineTo(d.xc,d.Gc),this.Ve!==m&&a.fill(),this.oc!==m&&a.stroke();else if(d.N===Nd){var e=d.Kb,g=d.Wb,i=d.xc,d=d.Gc,j=Math.min(e,i),k=Math.min(g,d),e=Math.abs(i-
e),g=Math.abs(d-g);this.Ve!==m&&a.fillRect(j,k,e,g);if(this.oc!==m){if(c&&b){var l=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.strokeRect(j,k,e,g);c&&b&&(a.shadowOffsetX=l[0],a.shadowOffsetY=l[1],a.shadowBlur=l[2])}}else if(d.N===Od)e=d.Kb,g=d.Wb,i=d.xc,d=d.Gc,j=Math.abs(i-e)/2,k=Math.abs(d-g)/2,e=Math.min(e,i)+j,g=Math.min(g,d)+k,a.beginPath(),a.moveTo(e,g-k),a.bezierCurveTo(e+Dc*j,g-k,e+j,g-Dc*k,e+j,g),a.bezierCurveTo(e+j,g+Dc*k,e+Dc*j,g+k,
e,g+k),a.bezierCurveTo(e-Dc*j,g+k,e-j,g+Dc*k,e-j,g),a.bezierCurveTo(e-j,g-Dc*k,e-Dc*j,g-k,e,g-k),a.closePath(),this.Ve!==m&&a.fill(),this.oc!==m&&(c&&b&&(l=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),c&&b&&(a.shadowOffsetX=l[0],a.shadowOffsetY=l[1],a.shadowBlur=l[2]));else if(d.N===Ad){g=d.Ck;d=g.length;for(e=0;e<d;e++){c=g.j[e];a.beginPath();a.moveTo(c.Ma,c.Na);i=c.tb.j;j=i.length;for(k=0;k<j;k++){var n=i[k];switch(n.N){case Sd:a.moveTo(n.aa,
n.ba);break;case Rd:a.lineTo(n.aa,n.ba);break;case ce:a.bezierCurveTo(n.Kj,n.Lj,n.Sk,n.Tk,n.Uk,n.Vk);break;case de:a.quadraticCurveTo(n.Kj,n.Lj,n.Uk,n.Vk);break;case ee:var r=Math.PI/180;a.arc(n.Ul,n.Vl,n.Mr,n.jk*r,(n.jk+n.Fl)*r,0>n.Fl?h:p);break;default:v.g("Segment not of valid type")}n.ji&&a.closePath()}c.fp===h&&this.Ve!==m?(a.fill(),c=h):c=c.Lf?p:h;this.oc!==m&&(c&&b&&(l=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),c&&b&&(a.shadowOffsetX=
l[0],a.shadowOffsetY=l[1],a.shadowBlur=l[2]))}}}};X.prototype.ig=function(){Q.prototype.ig.call(this);var a=this.b;a!==m&&(Fi(a,"fill",this.fill),Fi(a,"geometry",this.pr),this.on!==Jg&&Fi(a,"geometryStretch",this.on),Fi(a,"stroke",this.stroke),"butt"!==this.Sy&&Fi(a,"strokeCap",this.Sy),"miter"!==this.Ty&&Fi(a,"strokeJoin",this.Ty),10!==this.Uy&&Fi(a,"strokeMiterLimit",this.Uy),Fi(a,"strokeWidth",this.Oa))};
X.prototype.getDocumentPoint=X.prototype.ub=function(a){Sb(a)&&v.g("Spot must be real");var b=this.qa,c=this.Oa,a=new E(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.Zd.wb(a);return a};
X.prototype.Ci=function(a,b){var c=this.va;if(c===m||this.fill===m&&this.stroke===m)return p;var d=c.hb,e=this.Oa/2;c.type===Kd&&!b&&(e+=2);var g=this.hE;g.set(d);g.jf(e+2,e+2);if(!g.ea(a))return p;d=e+1E-4;if(c.type===Kd){if(this.stroke===m)return p;d=(c.aa-c.Ma)*(a.x-c.Ma)+(c.ba-c.Na)*(a.y-c.Na);return 0>(c.Ma-c.aa)*(a.x-c.aa)+(c.Na-c.ba)*(a.y-c.ba)||0>d?p:Tc(c.Ma,c.Na,c.aa,c.ba,e,a.x,a.y)}if(c.type===Nd){var i=c.Ma,j=c.Na,k=c.aa,l=c.ba,c=Math.min(i,k),n=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-
j);g.x=c;g.y=n;g.width=i;g.height=j;if(this.fill===m){g.jf(-d,-d);if(g.ea(a))return p;g.jf(d,d)}this.stroke!==m&&g.jf(e,e);return g.ea(a)}if(c.type===Od){i=c.Ma;j=c.Na;k=c.aa;l=c.ba;c=Math.min(i,k);n=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j/=2;c=a.x-(c+g);n=a.y-(n+j);if(this.fill===m){g-=d;j-=d;if(0>=g||0>=j||1>=c*c/(g*g)+n*n/(j*j))return p;g+=d;j+=d}this.stroke!==m&&(g+=e,j+=e);return 0>=g||0>=j?p:1>=c*c/(g*g)+n*n/(j*j)}if(c.type===Ad)return this.fill===m?pe(c,a.x,a.y,e):c.ea(a,e,1<
this.Oa,b);v.g("Unknown Geometry type");return p};
X.prototype.Br=function(a,b,c,d){var e=this.ka,g=this.Eh,a=Math.max(a,0),b=Math.max(b,0),i;this.Bg?i=this.va.hb:(Bk[this.Ua]===f&&v.g("Unsupported Figure:"+this.Ua),i=Bk[this.Ua].hb);var j=i.width,k=i.height,l=i.width;i=i.height;switch(Vi(this)){case Pi:d=c=0;break;case Cd:l=Math.max(a-g,0);i=Math.max(b-g,0);break;case Ri:l=Math.max(a-g,0);d=0;break;case Qi:c=0,i=Math.max(b-g,0)}isFinite(e.width)&&(l=e.width);isFinite(e.height)&&(i=e.height);var e=this.yd,n=this.Qd,c=Math.max(c/this.scale,n.width)-
g,d=Math.max(d/this.scale,n.height)-g,l=Math.min(e.width,l);i=Math.min(e.height,i);l=isFinite(l)?Math.max(c,l):Math.max(j,c);i=isFinite(i)?Math.max(d,i):Math.max(k,d);c=this.on;c=this.Bg?c===Jg?Cd:c:c===Jg?Bk[this.Ua].Ib:c;switch(c){case Pi:break;case Cd:j=l;k=i;break;case Kg:l=Math.min(l/j,i/k);isFinite(l)||(l=1);j*=l;k*=l;break;default:v.g(c+"is not a valid geometryStretch.")}if(this.Bg){d=this.pr;i=j;c=k;l=d.copy();d=d.hb;i/=d.width;c/=d.height;isFinite(i)||(i=1);isFinite(c)||(c=1);if(!(1===i&&
1===c)){switch(l.type){case Kd:case Nd:case Od:l.Kb*=i;l.Wb*=c;l.xc*=i;l.Gc*=c;break;case Ad:d=l.tc;e=d.length;for(n=0;n<e;n++){var r=d.j[n];r.Ma*=i;r.Na*=c;for(var r=r.tb,q=r.length,u=0;u<q;u++){var x=r.j[u];switch(x.type){case Rd:case Sd:x.aa*=i;x.ba*=c;break;case ce:x.Kj*=i;x.Lj*=c;x.Sk*=i;x.Tk*=c;x.xc*=i;x.Gc*=c;break;case de:x.Ad*=i;x.tf*=c;x.aa*=i;x.ba*=c;break;case ee:x.ya*=i;x.za*=c;x.Mr*=i;x.Pu!==f&&(x.Pu*=c);break;default:v.g("Unknown Segment type: "+x.type)}}}}l.Ea=h}this.va=l}else if(this.va===
m||this.va.Ns!==a||this.va.Ms!==b)l=j,i=k,d=this.ka,c=d.width,d=d.height,l!==f&&(!isNaN(l)&&isFinite(l))&&(c=l),i!==f&&(!isNaN(i)&&isFinite(i))&&(d=i),isFinite(c)||(c=100),isFinite(d)||(d=100),e=f,"None"!==this.Jl?e=Ck(this.Jl):"None"!==this.Au?e=Ck(this.Au):(n=Dk[this.Ua],"string"===typeof n&&(n=Dk[n]),n===f&&v.g("Unknown Shape.figure: "+this.Ua),e=n(this,c,d),e.qd=new hb(c,d)),e===f&&(n=Dk.Rectangle)&&(e=n(this,c,d)),e.Ns=l,e.Ms=i,this.va=e;i=this.va.hb;Si(this,i.x-g/2,i.y-g/2,0===a&&0===j?0:i.width+
g,0===b&&0===k?0:i.height+g)};function vk(a,b,c){if(a.ac!==p){a.zc.ta();var d=a.Eh*a.Jb;Si(a,-(d/2),-(d/2),b+d,c+d);b=a.zc;c=a.yd;d=a.Qd;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.zc.freeze();a.zc.W()||v.g("Non-real measuredBounds has been set");a.ac=p}}X.prototype.Ai=function(a,b,c,d){Yi(this,a,b,c,d)};
X.prototype.Bu=function(a,b,c){var d=this.transform.copy();d.Du();var e=Bb(d,a),g=Bb(d,b),i=this.Oa/2,d=this.va;d===m&&(gh(this,Infinity,Infinity),d=this.va);var j=d.hb,k=p;if(d.type===Kd)if(1.5>=this.Oa)k=cd(d.Kb,d.Wb,d.xc,d.Gc,e.x,e.y,g.x,g.y,c);else{d.Kb===d.xc?(a=i,k=0):(a=(d.Gc-d.Wb)/(d.xc-d.Kb),k=i/Math.sqrt(1+a*a),a*=k);i=[];b=new E;cd(d.Kb+a,d.Wb+k,d.xc+a,d.Gc+k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;cd(d.Kb-a,d.Wb-k,d.xc-a,d.Gc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;cd(d.Kb+a,d.Wb+k,d.Kb-
a,d.Wb-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;cd(d.xc+a,d.Gc+k,d.xc-a,d.Gc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);if(0===i.length)return p;k=h;g=Infinity;for(j=0;j<i.length;j++){var d=i[j],l=(d.x-e.x)*(d.x-e.x)+(d.y-e.y)*(d.y-e.y);l<g&&(g=l,c.x=d.x,c.y=d.y)}}else if(d.type===Nd)k=ed(j.copy().jf(i,i),e,g,c);else if(d.type===Od)a:if(d=j.copy().jf(i,i),0===d.width)k=cd(d.x,d.y,d.x,d.y+d.height,e.x,e.y,g.x,g.y,c);else if(0===d.height)k=cd(d.x,d.y,d.x+d.width,d.y,e.x,e.y,g.x,g.y,c);else{var a=d.width/2,n=d.height/
2,k=d.x+a,d=d.y+n,b=9999;e.x!==g.x&&(b=(e.y-g.y)/(e.x-g.x));if(9999>Math.abs(b)){g=e.y-d-b*(e.x-k);if(0>a*a*b*b+n*n-g*g){c.x=NaN;c.y=NaN;k=p;break a}j=Math.sqrt(a*a*b*b+n*n-g*g);i=(-(a*a*b*g)+a*n*j)/(n*n+a*a*b*b)+k;n=(-(a*a*b*g)-a*n*j)/(n*n+a*a*b*b)+k;a=b*(i-k)+g+d;d=b*(n-k)+g+d;k=Math.abs((e.x-i)*(e.x-i))+Math.abs((e.y-a)*(e.y-a));b=Math.abs((e.x-n)*(e.x-n))+Math.abs((e.y-d)*(e.y-d));k<b?(c.x=i,c.y=a):(c.x=n,c.y=d)}else{i=n*n;k=e.x-k;k=i-i/(a*a)*k*k;if(0>k){c.x=NaN;c.y=NaN;k=p;break a}j=Math.sqrt(k);
a=d+j;d-=j;k=Math.abs(a-e.y);b=Math.abs(d-e.y);k<b?(c.x=e.x,c.y=a):(c.x=e.x,c.y=d)}k=h}else if(d.type===Ad){var r,q,u,x=e.x,B=e.y,G=g.x,I=g.y,y=new E,g=e.Gi(g);c.x=G;c.y=I;for(j=0;j<d.tc.count;j++){q=d.tc.j[j];var J=q.tb;r=q.Ma;q=q.Na;for(var z=r,H=q,fa,S,T=0;T<J.count;T++){fa=J.j[T];S=fa.type;l=fa.aa;u=fa.ba;var ga=p;switch(S){case Sd:z=l;H=u;break;case Rd:ga=Ek(r,q,l,u,x,B,G,I,y);break;case ce:ga=fa.Ad;S=fa.tf;var na=fa.Mn,ra=fa.Nn,ga=Zc(r,q,ga,S,na,ra,l,u,x,B,G,I,0.5,y);break;case de:ga=(r+2*fa.Ad)/
3;S=(q+2*fa.tf)/3;na=(2*fa.Ad+l)/3;ra=(2*fa.Ad+l)/3;ga=Zc(r,q,ga,S,na,ra,l,u,x,B,G,I,0.5,y);break;case ee:u=fe(fa);S=u.length;for(j=0;j<S;j++)n=u[j],0===j&&Ek(r,q,n.Kl,n.Ll,x,B,G,I,y)&&(l=Fk(e,y,g,c),l<g&&(g=l,k=h)),Zc(n.Kl,n.Ll,n.hv,n.jv,n.iv,n.kv,n.pk,n.qk,x,B,G,I,0.5,y)&&(l=Fk(e,y,g,c),l<g&&(g=l,k=h));l=n.pk;u=n.qk;break;default:v.g("Unknown Segment type: "+fa.type)}r=l;q=u;ga&&(l=Fk(e,y,g,c),l<g&&(g=l,k=h));fa.aC&&(l=z,u=H,Ek(r,q,l,u,x,B,G,I,y)&&(l=Fk(e,y,g,c),l<g&&(g=l,k=h)))}}e=b.x-a.x;d=b.y-
a.y;a=Math.sqrt(e*e+d*d);c.x-=e/a*i;c.y-=d/a*i}else v.g("Invalid Geometry type");if(!k)return p;b=Bb(this.transform,c);c.x=b.x;c.y=b.y;return h};function Fk(a,b,c,d){a=a.Gi(b);return a<c?(d.x=b.x,d.y=b.y,a):c}
function Ek(a,b,c,d,e,g,i,j,k){var l=p,n=(e-i)*(b-d)-(g-j)*(a-c);if(0===n)return p;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/n;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/n;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){if(e=b<d?b:d,a=b<d?d:b,(k.y>e||Ta(k.y,e))&&(k.y<a||Ta(k.y,a)))l=h}else if(e=a<c?a:c,a=a<c?c:a,(k.x>e||Ta(k.x,e))&&(k.x<a||Ta(k.x,a)))l=h;return l}
X.prototype.containedInRect=X.prototype.Lx=function(a,b){if(b===f)return a.gl(this.oa);var c=this.va;c===m&&(gh(this,Infinity,Infinity),c=this.va);var c=c.hb,d=this.Oa/2;return!a.ea(b.wb(new E(c.x-d,c.y-d)))||!a.ea(b.wb(new E(c.x-d,c.bottom+d)))||!a.ea(b.wb(new E(c.right+d,c.bottom+d)))||!a.ea(b.wb(new E(c.right+d,c.y-d)))?p:h};
X.prototype.intersectsRect=X.prototype.Me=function(a){function b(a,b){i.x=a*c.m11+b*c.m21+c.Qa;i.y=a*c.m12+b*c.m22+c.Ra}if(a.gl(this.oa))return h;var c=this.transform.copy();c.Du();var d=a.left,e=a.right,g=a.top,a=a.bottom,i=new E;b(d,g);if(this.Ci(i,h))return h;b(e,g);if(this.Ci(i,h))return h;b(d,a);if(this.Ci(i,h))return h;b(e,a);if(this.Ci(i,h))return h;var j=new E,k=new E;j.x=e;j.y=g;i.x=d;i.y=g;if(Gk(this,i,j,k))return h;i.x=e;i.y=a;if(Gk(this,i,j,k))return h;j.x=d;j.y=a;if(Gk(this,i,j,k))return h;
i.x=d;i.y=g;return Gk(this,i,j,k)?h:p};function Gk(a,b,c,d){if(!a.Bu(b,c,d))return p;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;b<g?(i=b,a=g):(i=g,a=b);return d>=i&&d<=a}a<e?(i=a,a=e):i=e;return c>=i&&c<=a}
X.prototype.GB=function(a,b){if(this.fill!==m&&this.Ci(a,h))return h;var c=a.Gi(b),d=c;1.5<this.Oa&&(c=this.Oa/2+Math.sqrt(c),c*=c);var e=this.va;e===m&&(gh(this,Infinity,Infinity),e=this.va);var g=e.Kb,i=e.Wb,j=e.xc,k=e.Gc;if(e.type===Kd){var e=db(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=(0<=(j-g)*(a.x-g)+(k-i)*(a.y-i)&&0<=l?c:d))return h}else if(e.type===Nd){if(db(a.x,a.y,g,i,g,k)<=c||db(a.x,a.y,g,i,j,i)<=c||db(a.x,a.y,j,i,j,k)<=c||db(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===Od){var e=
a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,n=Math.abs(k-i)/2;if(0===l||0===n)return e=db(a.x,a.y,g,i,j,k),e<=c?h:p;g=new E(Infinity,Infinity);dd(e,d,0,0,-l,-n,l,n,g);dd(e,d,0,n,-l,-n,l,n,g);dd(e,d,0,-n,-l,-n,l,n,g);dd(e,d,0,l,-l,-n,l,n,g);dd(e,d,0,-l,-l,-n,l,n,g);dd(e,d,l/2,n/2,-l,-n,l,n,g);dd(e,d,-l/2,n/2,-l,-n,l,n,g);dd(e,d,l/2,-n/2,-l,-n,l,n,g);dd(e,d,-l/2,-n/2,-l,-n,l,n,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===Ad){k=e.hb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;if(a.x>
j&&a.x<g&&a.y>k&&a.y<i&&db(a.x,a.y,g,i,g,k)>c&&db(a.x,a.y,g,i,j,i)>c&&db(a.x,a.y,j,k,g,k)>c&&db(a.x,a.y,j,k,j,i)>c)return p;c=Math.sqrt(c);if(this.fill===m?pe(e,a.x,a.y,c):e.ea(a,c,h))return h}return p};v.a(X,"geometry",X.prototype.pr);v.defineProperty(X,{pr:"geometry"},function(){return this.mj?this.mj:this.va},function(a){var b=this.va;b!==a&&(a!==m?(t&&v.c(a,zd,X,"geometry"),this.mj=this.va=a.freeze()):this.mj=this.va=m,this.Bg=h,this.K(),this.d("geometry",b,a))});
X.prototype.lf=function(){this.Bg?this.mj=m:this.va=m;this.K()};v.a(X,"fill",X.prototype.fill);v.defineProperty(X,{fill:"fill"},s("Ve"),function(a){var b=this.Ve;if(b!==a&&(a===m||"string"===typeof a||a instanceof Ce))a instanceof Ce&&a.freeze(),this.Ve=a,aj(this),this.d("fill",b,a)});v.a(X,"stroke",X.prototype.stroke);
v.defineProperty(X,{stroke:"stroke"},s("oc"),function(a){var b=this.oc;if(b!==a&&(a===m||"string"===typeof a||a instanceof Ce))a instanceof Ce&&a.freeze(),this.oc=a,aj(this),this.d("stroke",b,a)});v.a(X,"strokeWidth",X.prototype.Oa);v.defineProperty(X,{Oa:"strokeWidth"},s("Eh"),function(a){var b=this.Eh;b!==a&&(t&&v.i(a,X,"strokeWidth"),0<=a&&(this.Eh=a,this.K(),this.d("strokeWidth",b,a)))});v.a(X,"strokeCap",X.prototype.Sy);
v.defineProperty(X,{Sy:"strokeCap"},s("Gm"),function(a){var b=this.Gm;b!==a&&("string"===typeof a&&("butt"===a||"round"===a||"square"===a)?(this.Gm=a,aj(this),this.d("strokeCap",b,a)):v.ha(a,'"butt", "round", or "square"',X,"strokeCap"))});v.a(X,"strokeJoin",X.prototype.Ty);
v.defineProperty(X,{Ty:"strokeJoin"},s("Hm"),function(a){var b=this.Hm;b!==a&&("string"===typeof a&&("miter"===a||"bevel"===a||"round"===a)?(this.Hm=a,aj(this),this.d("strokeJoin",b,a)):v.ha(a,'"miter", "bevel", or "round"',X,"strokeJoin"))});v.a(X,"strokeMiterLimit",X.prototype.Uy);v.defineProperty(X,{Uy:"strokeMiterLimit"},s("Im"),function(a){var b=this.Im;b!==a&&(t&&v.i(a,X,"strokeMiterLimit"),0<a&&(this.Im=a,aj(this),this.d("strokeMiterLimit",b,a)))});v.a(X,"figure",X.prototype.Ua);
v.defineProperty(X,{Ua:"figure"},s("Oo"),function(a){var b=this.Oo;if(b!==a){t&&v.e(a,"string",X,"figure");var c=Dk[a];"function"===typeof c?c=a:(c=Dk[a.toLowerCase()])||v.g("Unknown Shape.figure: "+a);b!==c&&(this.Oo=c,this.Bg=p,this.lf(),this.d("figure",b,c))}});v.a(X,"toArrow",X.prototype.Jl);
v.defineProperty(X,{Jl:"toArrow"},s("Lm"),function(a){var b=this.Lm;a===h?a="Standard":a===p&&(a="None");if(b!==a){t&&v.e(a,"string",X,"toArrow");var c=Ck(a);c instanceof zd?c=a:(c=Ck(a.toLowerCase()))||v.g("Unknown Shape.toArrow: "+a);b!==c&&(this.Lm=c,this.Bg=p,this.lf(),Hk(this,c),this.d("toArrow",b,c))}});v.a(X,"fromArrow",X.prototype.Au);
v.defineProperty(X,{Au:"fromArrow"},s("gm"),function(a){var b=this.gm;a===h?a="Standard":a===p&&(a="None");if(b!==a){t&&v.e(a,"string",X,"fromArrow");var c=Ck(a);c instanceof zd?c=a:(c=Ck(a.toLowerCase()))||v.g("Unknown Shape.fromArrow: "+a);b!==c&&(this.gm=c,this.Bg=p,this.lf(),Hk(this,c),this.d("fromArrow",b,c))}});
function Hk(a,b){var c=a.b;if(!(c!==m&&c.ca.ab)){a.Rr=Ik;c=qc;switch(b){case "halfarrowtop":c=nc;break;case "halftriangletop":c=nc;break;case "openrighttriangletop":c=nc;break;case "opentriangletop":c=nc}"None"!==a.Lm?(a.ah=-1,a.yi=c):"None"!==a.gm&&(a.ah=0,a.yi=new K(1-c.x,c.y))}}v.defineProperty(X,{n:"spot1"},s("Bh"),function(a){v.c(a,K,X,"spot1");var b=this.Bh;b.u(a)||(this.Bh=a=a.B(),this.K(),this.d("spot1",b,a))});
v.defineProperty(X,{o:"spot2"},s("Ch"),function(a){v.c(a,K,X,"spot2");var b=this.Ch;b.u(a)||(this.Ch=a=a.B(),this.K(),this.d("spot2",b,a))});v.defineProperty(X,{Fb:"parameter1"},s("Vp"),function(a){var b=this.Vp;b!==a&&(this.Vp=a,this.K(),this.d("parameter1",b,a))});v.defineProperty(X,{Lr:"parameter2"},s("Wp"),function(a){var b=this.Wp;b!==a&&(this.Wp=a,this.K(),this.d("parameter2",b,a))});
v.m(X,{qa:"naturalBounds"},function(){if(this.va!==m)return this.Ic.Pa(this.va.hb),this.Ic;var a=this.ka;return new F(0,0,a.width,a.height)});v.a(X,"isRectangular",X.prototype.PF);v.defineProperty(X,{PF:"isRectangular"},s("lp"),function(a){var b=this.lp;b!==a&&(t&&v.e(a,"boolean",X,"isRectangular"),this.lp=a,this.K(),this.d("isRectangular",b,a))});v.a(X,"geometryStretch",X.prototype.on);
v.defineProperty(X,{on:"geometryStretch"},s("Wo"),function(a){var b=this.Wo;b!==a&&(v.Sa(a,Q,X,"geometryStretch"),this.Wo=a,this.d("geometryStretch",b,a))});v.a(X,"interval",X.prototype.Uh);v.defineProperty(X,{Uh:"interval"},s("dp"),function(a){var b=this.dp;t&&v.i(a,X,"interval");a=Math.floor(a);b!==a&&0<=a&&(this.dp=a,this.K(),this.d("interval",b,a))});
function ma(){Q.call(this);this.gd="";this.oc="black";this.fi="13px sans-serif";this.Ce="start";this.ip=h;this.Ss=p;this.$k=Jk;this.Zs=this.Mk=0;this.qj=this.yw=this.zw=m;this.sm={};this.Mo=p;this.Td=this.wi=this.Gq=m}v.H("TextBlock",ma);v.na(ma,Q);
ma.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.gd=this.gd;a.oc=this.oc;a.fi=this.fi;a.Ce=this.Ce;a.ip=this.ip;a.Ss=this.Ss;a.$k=this.$k;a.Mk=this.Mk;a.Zs=this.Zs;a.zw=this.zw;a.yw=this.yw;a.qj=this.qj;a.sm=this.sm;a.Mo=this.Mo;a.Gq=this.Gq;a.wi=this.wi;a.Td=this.Td};ma.prototype.toString=function(){return 22<this.gd.length?'TextBlock("'+this.gd.substring(0,20)+'"...)':'TextBlock("'+this.gd+'")'};var Kk;ma.None=Kk=v.l(ma,"None",0);var Lk;ma.WrapFit=Lk=v.l(ma,"WrapFit",1);var Jk;
ma.WrapDesiredSize=Jk=v.l(ma,"WrapDesiredSize",2);ma.prototype.K=function(){Q.prototype.K.call(this);this.qj=this.yw=this.zw=m};v.a(ma,"font",ma.prototype.font);v.defineProperty(ma,{font:"font"},s("fi"),function(a){var b=this.fi;b!==a&&(t&&v.e(a,"string",ma,"font"),this.fi=a,this.K(),this.d("font",b,a))});v.a(ma,"text",ma.prototype.text);v.defineProperty(ma,{text:"text"},s("gd"),function(a){var b=this.gd,a=a!==m&&a!==f?a.toString():"";b!==a&&(this.gd=a,this.K(),this.d("text",b,a))});
v.a(ma,"textAlign",ma.prototype.textAlign);v.defineProperty(ma,{textAlign:"textAlign"},s("Ce"),function(a){var b=this.Ce;b!==a&&(t&&v.e(a,"string",ma,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.Ce=a,aj(this),this.d("textAlign",b,a)):v.ha(a,'"start", "end", "left", "right", or "center"',ma,"textAlign"))});
v.m(ma,{qa:"naturalBounds"},function(){if(!this.Ic.W()){var a=Mk(this,this.gd,this.font,{},999999).width,b=Nk(this,a,{}),c=this.ka;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);kb(this.Ic,a,b)}return this.Ic});v.a(ma,"isMultiline",ma.prototype.Fu);v.defineProperty(ma,{Fu:"isMultiline"},s("ip"),function(a){var b=this.ip;b!==a&&(t&&v.e(a,"boolean",ma,"isMultiline"),this.ip=a,this.K(),this.d("isMultiline",b,a))});v.a(ma,"wrap",ma.prototype.cz);
v.defineProperty(ma,{cz:"wrap"},s("$k"),function(a){var b=this.$k;b!==a&&(t&&v.Sa(a,ma,ma,"wrap"),this.$k=a,this.K(),this.d("wrap",b,a))});v.a(ma,"stroke",ma.prototype.stroke);v.defineProperty(ma,{stroke:"stroke"},s("oc"),function(a){var b=this.oc;if(b!==a&&(a===m||"string"===typeof a||a instanceof Ce))a instanceof Ce&&a.freeze(),this.oc=a,aj(this),this.d("stroke",b,a)});v.m(ma,{tJ:"lineCount"},s("Mk"));v.a(ma,"editable",ma.prototype.qu);
v.defineProperty(ma,{qu:"editable"},s("Mo"),function(a){var b=this.Mo;b!==a&&(t&&v.e(a,"boolean",ma,"editable"),this.Mo=a,this.d("editable",b,a))});v.a(ma,"textEditor",ma.prototype.Wy);v.defineProperty(ma,{Wy:"textEditor"},s("Gq"),function(a){var b=this.Gq;b!==a&&(a instanceof HTMLElement||v.g("textEditor must be an HTMLElement"),this.Gq=a,this.d("textEditor",b,a))});v.a(ma,"errorFunction",ma.prototype.hr);
v.defineProperty(ma,{hr:"errorFunction"},s("Td"),function(a){var b=this.Td;b!==a&&(a!==m&&v.e(a,"function",ma,"errorFunction"),this.Td=a,this.d("errorFunction",b,a))});
ma.prototype.gr=function(a,b){if(this.oc!==m&&0!==this.gd.length){var c=this.fi;if(c!==m){var d=this.qa.width,e=hh(this,c);a.Gv!==c&&(a.font=c,a.Gv=c);a.textAlign=this.Ce;bj(this,a,this.oc,h);this.Ss&&(bj(this,a,this.oc,p),a.lineWidth=0.05*e);var c=this.sm,g=0,i=p,j=this.Zd.wb(new E(0,0)),k=this.Zd.wb(new E(0,e)),j=j.Gi(k),k=b.scale;3>j*k*k&&(i=h);j=c.Jh.length;for(k=0;k<j;k++){var l=c.Jh[k],n=c.cl[k];l>d&&(l=d);var r=a,q=g,u=e,x=i,B=0;"start"===this.Ce||"left"===this.Ce?B=0:"end"===this.Ce||"right"===
this.Ce?B=d:"center"===this.Ce?B=d/2:v.g("textAlign must be start, end, left, right, or center");x?r.fillRect(0+B-l/2,q+0.25*u,l,1):(r.fillText(n,0+B,q+u-0.25*u),this.Ss&&("end"===this.Ce||"right"===this.Ce?B-=l:"center"===this.Ce&&(B-=l/2),r.moveTo(0+B,q+u-0.2*u),r.lineTo(0+B+l,q+u-0.2*u),r.stroke()));g+=e}}}};
ma.prototype.Br=function(a,b,c,d){var e={},g=0,i=0;if(isNaN(this.ka.width)){g=this.gd;if(0===g.length)g=0;else if(this.Fu){for(var j=i=0,k=p,l={fh:0};!k;){var n=Ok(g,j,l);-1===n&&(n=g.length,k=h);j=Pk(g.substr(j,n-j).replace(/^\s+|\s+$/g,""),this.fi);j>i&&(i=j);j=l.fh}g=i}else i=Ok(g,0,{}),0<=i&&(g=g.substr(0,i)),g=j=Pk(g,this.fi);g=Math.min(g,a/this.scale)}else g=this.ka.width;this.V&&(g=Math.min(g,this.V.yd.width),g=Math.max(g,this.V.Qd.width));i=Nk(this,g,e);i=isNaN(this.ka.height)?Math.min(i,
b/this.scale):this.ka.height;if(this.cz===Lk||isNaN(this.ka.width))g=e.Yh;g=Math.max(c,g);i=Math.max(d,i);kb(this.Ic,g,i);Si(this,0,0,g,i);this.sm=e};ma.prototype.Ai=function(a,b,c,d){Yi(this,a,b,c,d)};
function Mk(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");d.Yh===f&&(d.Yh=0);d.Jh===f&&(d.Jh=[]);d.cl===f&&(d.cl=[]);var g=0,i;if(a.$k===Kk)return d.fh=1,d.Yh=Pk(b,c),d.Jh.push(d.Yh),d.cl.push(b),new hb(d.Yh,hh(a,c));a.qj===m&&(a.qj=hh(a,c));var a=a.qj,j=b,k=0;0===j.length&&(k=1,d.Jh.push(0),d.cl.push(j));for(;0<j.length;){for(var l=Qk(j),j=j.substr(l.length);Pk(l,c)>e;){var n=1,b=Pk(l.substr(0,n),c);for(i=0;b<=e;)n++,i=b,b=Pk(l.substr(0,n),c);1===n?(d.Jh[k]=b,g=Math.max(g,b)):(d.Jh[k]=i,g=Math.max(g,i));
n--;1>n&&(n=1);d.cl[k]=l.substr(0,n);k++;l=l.substr(n)}i=Qk(j);for(b=Pk(l+i,c);0<i.length&&b<=e;)l+=i,j=j.substr(i.length),i=Qk(j),b=Pk((l+i).replace(/^\s+|\s+$/g,""),c);l=l.replace(/^\s+|\s+$/g,"");""!==l&&(0===i.length?(d.Jh.push(b),g=Math.max(g,b)):(i=Pk(l,c),d.Jh.push(i),g=Math.max(g,i)),d.cl.push(l),k++)}d.fh=k;d.Yh=Math.max(d.Yh,g);return new hb(d.Yh,a*d.fh)}function Qk(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}
function Pk(a,b){v.It!==b&&(v.Ht.font=b,v.It=b);return v.Ht.measureText(a).width}function hh(a,b){if(a.qj!==m)return a.qj;v.It!==b&&(v.Ht.font=b,v.It=b);var c=0;v.iw[b]!==f&&5E3>v.Hz?c=v.iw[b]:(c=1.3*v.Ht.measureText("M").width,v.iw[b]=c,v.Hz++);return c}function Ok(a,b,c){c.fh===f&&(c.fh=0);var d=a.indexOf("\r",b);-1===d&&(d=a.indexOf("\n",b));0<=d&&(c.fh="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1);return d}
function Nk(a,b,c){var d=a.gd,e=a.fi,g=hh(a,e);if(0===d.length)return c.Yh=0,a.Mk=1,g;if(!a.Fu){var i=Ok(d,0,{});0<=i&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,n={fh:0},r=p;!r;)l=Ok(d,k,n),-1===l&&(l=d.length,r=h),k<=l&&(k=d.substr(k,l-k),a.$k!==Kk?(c.fh=0,k=Mk(a,k,e,c,b),i+=k.height,j+=c.fh):(Mk(a,k,e,c,Infinity),i+=g,j++)),k=n.fh;a.Mk=j;return a.Zs=i}
ma.prototype.ig=function(){Q.prototype.ig.call(this);var a=this.b;if(a!==m){var b=this.sm;b!==m&&(Fi(a,"sizeArray",b.Jh),Fi(a,"textArray",b.cl),Fi(a,"font",this.font),Fi(a,"stroke",this.stroke),Fi(a,"textAlign",this.textAlign))}};v.a(ma,"textValidation",ma.prototype.Yr);v.defineProperty(ma,{Yr:"textValidation"},s("wi"),function(a){var b=this.wi;b!==a&&(a!==m&&v.e(a,"function",ma,"textValidation"),this.wi=a,this.d("textValidation",b,a))});
function Fj(){Q.call(this);this.If=m;this.zq="";this.vi=(new F(NaN,NaN,NaN,NaN)).freeze();this.im=Cd;this.Km=this.Td=m;this.Fj=p}v.H("Picture",Fj);v.na(Fj,Q);Fj.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.If=this.If;a.zq=this.zq;a.vi.Pa(this.vi);a.im=this.im;a.Td=this.Td};Fj.prototype.toString=function(){return"Picture("+this.source+")#"+v.fc(this)};v.a(Fj,"element",Fj.prototype.element);
v.defineProperty(Fj,{element:"element"},s("If"),function(a){var b=this.If;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||v.g("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a.onerror=function(a){c.Td!==m&&c.Td(c,a)};this.If=a;this.d("element",b,a);a.complete===h||a.complete===f?(this.Fj=h,this.ka.W()||(this.ac=p,this.K())):(v.ix.push(this),v.vt===m&&(v.vt=setInterval(function(){for(var a=[],b=v.ix,c=b.length,
i=0;i<c;i++){var j=b[i];Rk(j)||a.push(j)}0===a.length&&(clearInterval(v.vt),v.vt=m);v.ix=a},600)))}});function Rk(a){var b=a.If;if(!b)return h;if(!b.complete)return p;if(a.Fj===h)return h;a.Fj=h;if(a.b)a.ka.W()||(a.ac=p,a.K()),ph(a.b);else{var a=v.Az,c=a.length;if(0===c)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.L&&a.push(e.parentElement.L)}c=a.length;for(b=0;b<c;b++)ph(a[b])}return h}
function Sk(a){var b=document.createElement("canvas").getContext("2d");b.drawImage(a.If,0,0);try{b.getImageData(0,0,1,1),a.Km=p}catch(c){a.Km=h}}v.a(Fj,"source",Fj.prototype.source);v.defineProperty(Fj,{source:"source"},s("zq"),function(a){var b=this.zq;if(b!==a)if(v.e(a,"string",Fj,"source"),this.zq=a,this.d("source",b,a),b=v.YD,b[a]!==f)this.element=b[a];else{var c=new Image;c.src=a;this.element=b[a]=c}});v.a(Fj,"sourceRect",Fj.prototype.wf);
v.defineProperty(Fj,{wf:"sourceRect"},s("vi"),function(a){var b=this.vi;b.u(a)||(v.c(a,F,Fj,"sourceRect"),this.vi=a=a.B(),this.d("sourceRect",b,a))});v.a(Fj,"imageStretch",Fj.prototype.XB);v.defineProperty(Fj,{XB:"imageStretch"},s("im"),function(a){var b=this.im;b!==a&&(v.Sa(a,Q,Fj,"imageStretch"),this.im=a,this.d("imageStretch",b,a))});v.a(Fj,"errorFunction",Fj.prototype.hr);
v.defineProperty(Fj,{hr:"errorFunction"},s("Td"),function(a){var b=this.Td;if(b!==a){a!==m&&v.e(a,"function",Fj,"errorFunction");this.Td=a;if(this.If){var c=this;this.If.onerror=function(a){c.Td!==m&&c.Td(c,a)}}this.d("errorFunction",b,a)}});
Fj.prototype.gr=function(a,b){if(!b.Ho&&(this.Km===m&&Sk(this),this.Km))return;var c=this.If;if(c!==m){var d=c.src;(d===m||""===d)&&v.g("Element has no source attribute: "+c);var d=this.qa,e=0,g=0,i=c.naturalWidth,j=c.naturalHeight;if(!(0===i||0===j)){i===f&&c.videoWidth&&(i=c.videoWidth||d.width);j===f&&c.videoHeight&&(j=c.videoHeight||d.height);this.wf.W()&&(e=this.vi.x,g=this.vi.y,i=this.vi.width,j=this.vi.height);var k=i,l=j,n=this.im;switch(n){case Pi:if(this.wf.W())break;e+=Math.max((k-d.width)/
2,0);g+=Math.max((l-d.height)/2,0);i=Math.min(d.width,k);j=Math.min(d.height,l);break;case Cd:k=d.width;l=d.height;break;case Kg:case Lg:n===Kg?(n=Math.min(d.height/l,d.width/k),k*=n,l*=n):n===Lg&&(n=Math.max(d.height/l,d.width/k),k*=n,l*=n,e+=(k-d.width)/2,g+=(l-d.height)/2,i*=1/(k/d.width),j*=1/(l/d.height),k=d.width,l=d.height)}a.drawImage(c,e,g,i,j,Math.max((d.width-k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}}};v.m(Fj,{qa:"naturalBounds"},s("Ic"));
Fj.prototype.Br=function(a,b,c,d){var e=this.ka,g=Vi(this),i=this.If;!this.Fj&&(i&&i.complete)&&(this.Fj=h);i===m&&(b=a=0);g!==Cd&&g!==Ri?isFinite(e.width)?a=e.width:i!==m&&this.Fj!==p&&(a=this.wf.W()?this.wf.width:i.naturalWidth):(isFinite(a)||(a=this.wf.W()?this.wf.width:i.naturalWidth),c=0);g!==Cd&&g!==Qi?isFinite(e.height)?b=e.height:i!==m&&this.Fj!==p&&(b=this.wf.W()?this.wf.height:i.naturalHeight):(isFinite(b)||(b=this.wf.W()?this.wf.height:i.naturalHeight),d=0);e=this.yd;g=this.Qd;c=Math.max(c/
this.scale,g.width);d=Math.max(d/this.scale,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);i!==m&&!i.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0));kb(this.Ic,a,b);Si(this,0,0,a,b)};Fj.prototype.Ai=function(a,b,c,d){Yi(this,a,b,c,d)};
Fj.prototype.ig=function(){Q.prototype.ig.call(this);var a=this.b;if(a!==m){Fi(a,"source",this.source);Fi(a,"imageStretch",this.XB);this.wf.W()&&Fi(a,"sourceRect",this.wf);var b,c;this instanceof Fj&&this.element!==m&&(c=a.nh.$(v.fc(this.element)));b="number"===typeof c?c:-1;if(-1<b)a=a.ng,a.add(","),Ea(a),a.add('"base64": { "class":"ref", "id":'+b+" }");else{c=this.If;b=c.naturalWidth;var d=c.naturalHeight;this.Km===m&&Sk(this);if(!(this.Fj===p||this.Km===h||0===b||0===d)){b===f&&c.videoWidth&&(b=
c.videoWidth);d===f&&c.videoHeight&&(d=c.videoHeight);var e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(c,0,0);c=e.toDataURL();b=-1;this instanceof Fj&&this.element!==m&&(v.sn(this.element),b=a.nh.count,a.nh.add(v.fc(this.element),b));-1<b?(a=a.ng,a.add(","),Ea(a),a.add('"base64": { "id":'+b+', "value":"'+c+'" }')):Fi(a,"base64",c)}}}};function L(){this.k=new zd;this.$b=m}
function M(a,b,c,d,e){a.k===m&&v.g("StreamGeometryContext has been closed");e!==f&&e===h?(a.$b===m&&v.g("Need to call beginFigure first"),d=new qe(Sd),d.aa=b,d.ba=c,a.$b.tb.add(d)):(a.$b=new Bd,a.$b.Ma=b,a.$b.Na=c,a.$b.vr=d,a.k.tc.add(a.$b))}function O(a){a.k===m&&v.g("StreamGeometryContext has been closed");a.$b===m&&v.g("Need to call beginFigure first");var b=a.$b.tb.length;0<b&&a.$b.tb.j[b-1].close()}
function Tk(a){a.k===m&&v.g("StreamGeometryContext has been closed");a.$b===m&&v.g("Need to call beginFigure first");a.$b.ul=p}L.prototype.moveTo=function(a,b,c){this.k===m&&v.g("StreamGeometryContext has been closed");this.$b===m&&v.g("Need to call beginFigure first");var d=new qe(Sd);d.aa=a;d.ba=b;c&&d.close();this.$b.tb.add(d)};
L.prototype.lineTo=function(a,b,c){this.k===m&&v.g("StreamGeometryContext has been closed");this.$b===m&&v.g("Need to call beginFigure first");var d=new qe(Rd);d.aa=a;d.ba=b;c&&d.close();this.$b.tb.add(d)};function N(a,b,c,d,e,g,i,j){a.k===m&&v.g("StreamGeometryContext has been closed");a.$b===m&&v.g("Need to call beginFigure first");var k=new qe(ce);k.Ad=b;k.tf=c;k.Mn=d;k.Nn=e;k.aa=g;k.ba=i;j&&k.close();a.$b.tb.add(k)}
function Qd(a,b,c,d,e){a.k===m&&v.g("StreamGeometryContext has been closed");a.$b===m&&v.g("Need to call beginFigure first");var g=new qe(de);g.Ad=b;g.tf=c;g.aa=d;g.ba=e;a.$b.tb.add(g)}L.prototype.arcTo=function(a,b,c,d,e,g,i){this.k===m&&v.g("StreamGeometryContext has been closed");this.$b===m&&v.g("Need to call beginFigure first");var j=new qe(ee);j.jk=a;j.Fl=b;j.ya=c;j.za=d;j.Mr=e;g&&(j.Pu=g);i&&j.close();this.$b.tb.add(j)};
function Uk(a,b,c,d,e,g,i,j,k,l,n,r,q,u){var x=1-k,a=a*x+c*k,b=b*x+d*k,c=c*x+e*k,d=d*x+g*k,e=e*x+i*k,g=g*x+j*k,j=a*x+c*k,i=b*x+d*k,c=c*x+e*k,d=d*x+g*k;l.x=a;l.y=b;n.x=j;n.y=i;r.x=j*x+c*k;r.y=i*x+d*k;q.x=c;q.y=d;u.x=e;u.y=g}function Vk(a){var a=Wk(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return b}
function Wk(a){for(var b=Xk(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=0===a%2?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[2*g]=i;c[2*g+1]=Yk(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function Yk(a,b,c,d,e,g,i,j){c=a-c;i=e-i;0===c||0===i?0===c?(i=(g-j)/i,j=a,e=i*j+(g-i*e)):(d=(b-d)/c,j=e,e=d*j+(b-d*a)):(d=(b-d)/c,i=(g-j)/i,a=b-d*a,j=(g-i*e-a)/(d-i),e=d*j+a);return new E(j,e)}
function Xk(a){for(var b=[],c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new E(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d));b.push(b[0]);return b}
var Dk={None:"Rectangle",Rectangle:function(a,b,c){a=new zd;a.type=Nd;a.Ma=0;a.Na=0;a.aa=b;a.ba=c;return a},Circle:function(a,b,c){a=new zd;a.Ib=Kg;a.type=Od;a.Ma=0;a.Na=0;a.aa=b;a.ba=c;a.n=new K(0.156,0.156);a.o=new K(0.844,0.844);return a},Connector:"Ellipse",Ellipse:function(a,b,c){a=new zd;a.type=Od;a.Ma=0;a.Na=0;a.aa=b;a.ba=c;a.n=new K(0.156,0.156);a.o=new K(0.844,0.844);return a},TriangleRight:function(a,b,c){var a=new zd,d=new Bd,e=new qe;e.aa=b;e.ba=0.5*c;d.tb.add(e);b=new qe;b.aa=0;b.ba=
c;d.tb.add(b.close());a.tc.add(d);a.n=new K(0,0.25);a.o=new K(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new zd,d=new Bd,e=new qe;e.aa=b;e.ba=0;d.tb.add(e);e=new qe;e.aa=0.5*b;e.ba=c;d.tb.add(e.close());a.tc.add(d);a.n=new K(0.25,0);a.o=new K(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new zd,d=new Bd;d.Ma=b;d.Na=c;var e=new qe;e.aa=0;e.ba=0.5*c;d.tb.add(e);c=new qe;c.aa=b;c.ba=0;d.tb.add(c.close());a.tc.add(d);a.n=new K(0.5,0.25);a.o=new K(1,0.75);return a},TriangleUp:function(a,
b,c){var a=new zd,d=new Bd;d.Ma=b;d.Na=c;var e=new qe;e.aa=0;e.ba=c;d.tb.add(e);c=new qe;c.aa=0.5*b;c.ba=0;d.tb.add(c.close());a.tc.add(d);a.n=new K(0.25,0.5);a.o=new K(0.75,1);return a},Line1:function(a,b,c){a=new zd;a.type=Kd;a.Ma=0;a.Na=0;a.aa=b;a.ba=c;return a},Line2:function(a,b,c){a=new zd;a.type=Kd;a.Ma=b;a.Na=0;a.aa=0;a.ba=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new zd;a.type=Kd;a.Ma=0;a.Na=c/2;a.aa=b;a.ba=c/2;return a},LineV:function(a,b,c){a=new zd;a.type=Kd;a.Ma=b/2;a.Na=
0;a.aa=b/2;a.ba=c;return a},Curve1:function(a,b,c){a=new L;M(a,0,0,p);N(a,Dc*b,0,1*b,(1-Dc)*c,b,c);return a.k},Curve2:function(a,b,c){a=new L;M(a,0,0,p);N(a,0,Dc*c,(1-Dc)*b,c,b,c);return a.k},Curve3:function(a,b,c){a=new L;M(a,1*b,0,p);N(a,1*b,Dc*c,Dc*b,1*c,0,1*c);return a.k},Curve4:function(a,b,c){a=new L;M(a,1*b,0,p);N(a,(1-Dc)*b,0,0,(1-Dc)*c,0,1*c);return a.k},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new L;M(a,0.5*b,0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.k;b.n=
new K(0.25,0.5);b.o=new K(0.75,1);return b},Decision:"Diamond",Diamond:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.75);return b},Pentagon:function(a,b,c){var a=Xk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;5>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.2,0.22);b.o=new K(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var a=Xk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);
for(var e=1;6>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.07,0.25);b.o=new K(0.93,0.75);return b},Heptagon:function(a,b,c){var a=Xk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;7>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.2,0.15);b.o=new K(0.8,0.85);return b},Octagon:function(a,b,c){var a=Xk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;8>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.15,0.15);b.o=new K(0.85,0.85);return b},Nonagon:function(a,b,c){var a=Xk(9),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;9>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.17,0.13);b.o=new K(0.82,0.82);return b},Decagon:function(a,b,c){var a=Xk(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.16,0.16);b.o=new K(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=Xk(12),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.16,0.16);b.o=new K(0.84,0.84);return b},
FivePointedStar:function(a,b,c){var a=Wk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.312,0.383);b.o=new K(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=Wk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.17,0.251);b.o=new K(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=Wk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;14>e;e++)d.lineTo(a[e].x*b,
a[e].y*c);O(d);b=d.k;b.n=new K(0.363,0.361);b.o=new K(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=Wk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;16>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.252,0.255);b.o=new K(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=Wk(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;18>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.355,0.361);b.o=new K(0.645,0.651);return b},TenPointedStar:function(a,b,c){var a=Wk(10),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;20>e;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.281,0.261);b.o=new K(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=Vk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.312,0.383);b.o=new K(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=Vk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)N(d,a[e].x*
b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.17,0.251);b.o=new K(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=Vk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.363,0.361);b.o=new K(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=Vk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*
b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.252,0.255);b.o=new K(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=Vk(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.355,0.361);b.o=new K(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=Vk(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,
a[e+2].y*c);O(d);b=d.k;b.n=new K(0.281,0.261);b.o=new K(0.723,0.748);return b},Cloud:function(a,b,c){a=new L;M(a,0.08034461*b,0.1944299*c,h);N(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);N(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);N(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);N(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*c);N(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*
c,0.9147671*b,0.3194596*c);N(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);N(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);N(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);N(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);N(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);N(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*b,0.870098*c);N(a,-0.02812061*b,0.9032597*
c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);N(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);N(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);O(a);b=a.k;b.n=new K(0.1,0.1);b.o=new K(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new L;M(a,0,0,h);N(a,1*b,0,1*b,1*c,0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.511,0.19);b.o=new K(0.776,0.76);return b},FramedRectangle:function(a,b,c){var d=new L,
e=a?a.Fb:0,a=a?a.Lr:0;0===e&&(e=0.1);0===a&&(a=0.1);M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);M(d,e*b,a*c,p,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.k;b.n=new K(e,a);b.o=new K(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new L;M(a,0,0,h);N(a,Dc*b,0,1*b,(0.5-Dc/2)*c,1*b,0.5*c);N(a,1*b,(0.5+Dc/2)*c,Dc*b,1*c,0,1*c);O(a);b=a.k;b.n=new K(0,0.2);b.o=new K(0.75,0.8);return b},Heart:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);
N(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);N(a,0*b,0,0.45*b,0,0.5*b,0.3*c);N(a,0.55*b,0,1*b,0,1*b,0.3*c);N(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);O(a);b=a.k;b.n=new K(0.15,0.29);b.o=new K(0.86,0.68);return b},Spade:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);N(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);N(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);N(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);N(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);N(a,0.4*b,0.8*c,0,0.8*c,0,0.5*c);N(a,0,0.25*c,0.4*b,0.2*c,0.49*
b,0.01*c);O(a);b=a.k;b.n=new K(0.19,0.26);b.o=new K(0.8,0.68);return b},Club:function(a,b,c){a=new L;M(a,0.4*b,0.6*c,h);N(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);N(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-
i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+
e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);O(a);b=a.k;b.n=new K(0.06,0.39);b.o=new K(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new L,a=0.5;M(d,0.5*b,0,h);d.arcTo(270,180,0.5*b,0.5*b,0.5*b);N(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;M(d,(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,0.5*
b,c*e,a*b);O(d);M(d,0.5*b,0,p);d.arcTo(270,-180,0.5*b,0.5*b,0.5*b);Tk(d);e=0.75;M(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,0.5*b,c*e,a*b);O(d);b=d.k;b.Ib=Kg;return b},Peace:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,b,0.5*c,h);N(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);N(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);N(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);N(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);M(a,0.5*b,0.1*c,h,h);N(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-d)*c,0.9*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.5+
d)*b,0.9*c,0.5*b,0.9*c);N(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);N(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*
c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+
g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.k;b.n=new K(0.146,0.146);b.o=new K(0.853,0.853);b.Ib=Kg;return b},NotAllowed:function(a,b,c){var a=0.5*Dc,d=0.5,e=new L;M(e,0.5*b,(0.5-d)*c,h);N(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,(0.5-a)*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5+
a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,(0.5+a)*b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=0.4*Dc,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);Uk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new E(0,0),n=new E(0,0),r=new E(0,0);Uk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,r,l,n);var q=new E(0,0),u=new E(0,0),x=new E(0,0);Uk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,q,
u,x,k,k);var B=new E(0,0),G=new E(0,0),I=new E(0,0);Uk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,I,B,G);M(e,I.x*b,I.y*c,h,h);N(e,B.x*b,B.y*c,G.x*b,G.y*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);N(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(I.x*b,I.y*c);O(e);M(e,x.x*b,x.y*c,h,h);e.lineTo(r.x*b,r.y*c);N(e,l.x*b,l.y*c,n.x*b,n.y*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,q.x*b,q.y*c,u.x*b,u.y*c,x.x*b,x.y*c);O(e);
e.k.Ib=Kg;return e.k},Fragile:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);N(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);N(a,0.25*b,0.5*c,0,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,
0.4);return b},HourGlass:function(a,b,c){a=new L;M(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);O(a);return a.k},Lightning:function(a,b,c){a=new L;M(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);O(a);return a.k},Parallelogram1:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.1);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=
new K(a,0);b.o=new K(1-a,1);return b},Input:"Output",Output:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);O(a);b=a.k;b.n=new K(0.1,0);b.o=new K(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.25);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.25);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*
b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);b=d.k;b.n=new K(0.5-a/2,0.5-a/2);b.o=new K(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new L;M(d,0.3*b,0,h);d.lineTo(0.5*b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*
b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);O(d);b=d.k;b.n=new K(0.5-a,0.5-a);b.o=new K(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.1);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-
a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);return d.k},ThinX:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);O(a);return a.k},RightTriangle:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=
new K(0,0.5);b.o=new K(0.5,1);return b},RoundedIBeam:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);N(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);return a.k},RoundedRectangle:function(a,b,c){var d=a?a.Fb:0;0>=d&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*Dc,e=new L;M(e,d,0,h);e.lineTo(b-d,0);N(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);N(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);N(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);N(e,0,a,a,0,d,0);O(e);b=e.k;1<a?(b.n=new K(0,
0,a,a),b.o=new K(1,1,-a,-a)):(b.n=Xb,b.o=nc);return b},Border:function(a,b,c){a=a?a.Fb:0;0>=a&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new L;M(d,a,0,h);d.lineTo(b-a,0);N(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);N(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);N(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);N(d,0,0,0,0,a,0);O(d);b=d.k;b.n=Xb;b.o=nc;return b},SquareIBeam:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*c);
d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);O(d);return d.k},Trapezoid:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.2);var d=new L;M(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.Fb:0,d=new L;M(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*
b,1*c);O(d);b=d.k;b.n=new K(0.1,0);b.o=new K(0.9,1);return b},GenderMale:function(a,b,c){var a=new L,d=0.4*Dc,e=0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);M(a,(0.5-e)*b,0.5*c,h);N(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);Uk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new E(i.x,i.y);Uk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.56,g,g,i,j,k);g=new E(i.x,i.y);a.lineTo((0.1*l.x+0.855)*b,0.1*l.y*c);a.lineTo(0.85*
b,0.1*l.y*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,(0.1*g.y+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=0.35*Dc;M(a,0.5*b,(0.5-e)*c,h,h);N(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*b,(0.5-d)*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);
N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5-d)*c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);M(a,(0.5-e)*b,0.5*c,h);b=a.k;b.n=new K(0.202,0.257);b.o=new K(0.692,0.839);b.Ib=Kg;return b},GenderFemale:function(a,b,c){var a=new L,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.525+e)*b,(0.5+d+g)*c,h);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-
d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);O(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h,h);N(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*
c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);M(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.k;b.n=new K(0.232,0.136);b.o=new K(0.782,0.611);b.Ib=Kg;return b},PlusLine:function(a,b,c){a=new L;M(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},XLine:function(a,b,c){a=new L;M(a,
0,1*c,p);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.k},AsteriskLine:function(a,b,c){var a=new L,d=0.2/Math.SQRT2;M(a,d*b,(1-d)*c,p);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.k},CircleLine:function(a,b,c){var a=0.5*Dc,d=new L;M(d,1*b,0.5*c,p);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,
0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.k;b.n=new K(0.146,0.146);b.o=new K(0.853,0.853);b.Ib=Kg;return b},Pie:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);N(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);N(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},PiePiece:function(a,b,c){var a=0.5*(Dc/Math.SQRT2),d=Math.SQRT2/2,e=1-Math.SQRT2/
2,g=new L;M(g,b,c,h);N(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);O(g);return g.k},StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new L;M(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);O(e);b=e.k;a&&Tb(a.n)&&(a.n=new K(d/2,d/2));a&&Tb(a.o)&&(a.o=new K(1-d/2,1-d/2));return b},LogicImplies:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,p);d.lineTo(1*b,0.5*c);d.lineTo((1-
a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.k;b.n=new K(0,0);b.o=new K(0.8,0.5);return b},LogicIff:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,p);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.k;b.n=new K(0.2,0);b.o=new K(0.8,0.5);return b},LogicNot:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(1*b,0);a.lineTo(1*b,1*c);return a.k},LogicAnd:function(a,b,c){a=new L;M(a,0,1*c,p);a.lineTo(0.5*
b,0);a.lineTo(1*b,1*c);b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,1);return b},LogicOr:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.k;b.n=new K(0.219,0);b.o=new K(0.78,0.409);return b},LogicXor:function(a,b,c){a=new L;M(a,0.5*b,0,p);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=0.5*Dc;N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.Ib=
Kg;return b},LogicTruth:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},LogicFalsity:function(a,b,c){a=new L;M(a,0,1*c,p);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.k},LogicThereExists:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.k},LogicForAll:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*
b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,0.5);return b},LogicIsDefinedAs:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.k;b.n=new K(0.01,0.01);b.o=new K(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=0.5*Dc,d=new L;M(d,0,1*c,p);d.lineTo(0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.k;b.n=new K(0,0.5);b.o=new K(1,1);return b},
LogicUnion:function(a,b,c){var a=0.5*Dc,d=new L;M(d,1*b,0,p);d.lineTo(1*b,0.5*c);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.k;b.n=new K(0,0);b.o=new K(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.Fb:0,a=a?a.Lr:0;0===d&&(d=0.3);0===a&&(a=0.3);var e=new L;M(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);O(e);b=e.k;b.n=new K(0,
0.5-a/2);d=Yk(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.o=new K(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},DoubleArrow:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*c);a.lineTo(0,1*c);O(a);M(a,0.3*b,0.214*c,p);a.lineTo(0.3*b,0.786*c);Tk(a);return a.k},DoubleEndArrow:function(a,
b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;c=Yk(0,0.5,0.3,0,0,0.3,0.3,0.3);b.n=new K(c.x,c.y);c=Yk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);
a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new K(0,0.3);c=Yk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},Pointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);O(a);b=a.k;b.n=new K(0.2,0.35);c=Yk(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new K(c.x,c.y);return b},RoundedPointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.4,0.35);c=
Yk(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new K(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new K(0.2,0.3);c=Yk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);O(a);b=
a.k;b.n=new K(0,0);b.o=new K(0.7,1);return b},Cone1:function(a,b,c){var a=0.5*Dc,d=0.1*Dc,e=new L;M(e,0,0.9*c,h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);O(e);b=e.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.97);return b},Cone2:function(a,b,c){a=new L;M(a,0,0.9*c,h);N(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*b,0);a.lineTo(0,0.9*c);O(a);M(a,0,0.9*c,p);N(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Tk(a);
b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.82);return b},Cube1:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);O(a);M(a,0.5*b,1*c,p);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Tk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(0.5,0.85);return b},Cube2:function(a,b,c){a=new L;M(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*
b,0*c);O(a);M(a,0,0.3*c,p);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Tk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=0.5*Dc,d=0.1*Dc,e=new L;M(e,0,0.1*c,h);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);M(e,0,0.1*c,p);N(e,0,(0.1+d)*c,(0.5-a)*b,0.2*
c,0.5*b,0.2*c);N(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);Tk(e);b=e.k;b.n=new K(0,0.2);b.o=new K(1,0.9);return b},Cylinder2:function(a,b,c){var a=0.5*Dc,d=0.1*Dc,e=new L;M(e,0,0.9*c,h);e.lineTo(0,0.1*c);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);M(e,0,0.9*c,p);N(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);N(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);Tk(e);b=e.k;
b.n=new K(0,0.1);b.o=new K(1,0.8);return b},Cylinder3:function(a,b,c){var a=0.1*Dc,d=0.5*Dc,e=new L;M(e,0.1*b,0,h);e.lineTo(0.9*b,0);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);M(e,0.1*b,0,p);N(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);N(e,0.2*b,(0.5+d)*c,(0.1+a)*b,1*c,0.1*b,1*c);Tk(e);b=e.k;b.n=new K(0.2,0);b.o=new K(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,
b,c){var a=0.1*Dc,d=0.5*Dc,e=new L;M(e,0.9*b,0,h);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);M(e,0.9*b,0,p);N(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);N(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);Tk(e);b=e.k;b.n=new K(0.1,0);b.o=new K(0.8,1);return b},Prism1:function(a,b,c){a=new L;M(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*
b,c);a.lineTo(0,c);O(a);M(a,0.25*b,0.25*c,p);a.lineTo(0.5*b,c);Tk(a);b=a.k;b.n=new K(0.408,0.172);b.o=new K(0.833,0.662);return b},Prism2:function(a,b,c){a=new L;M(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);M(a,0,c,p);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);Tk(a);b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*
b,1*c);a.lineTo(0,0.75*c);O(a);M(a,0.5*b,0,p);a.lineTo(0.5*b,1*c);Tk(a);b=a.k;b.n=new K(0.25,0.367);b.o=new K(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);O(a);M(a,0.5*b,0,p);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);Tk(a);b=a.k;b.n=new K(0.25,0.367);b.o=new K(0.75,0.875);return b},Actor:function(a,b,c){var d=0.2*Dc,e=0.1*Dc,a=0.5,g=0.1,i=new L;M(i,a*b,(g+0.1)*c,h);N(i,(a-d)*
b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);N(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-0.1)*c);N(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);N(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=Dc*d;M(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;N(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*c);i.lineTo(0.85*b,0.35*c);d=0.025;e=Dc*d;a=0.825;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*
b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;e=Dc*d;a=0.5;g=0.7;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=Dc*d;a=0.175;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=Dc*d;a=0.05;g=0.25;N(i,(a-
d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.k;b.n=new K(0.2,0.2);b.o=new K(0.8,0.65);return b},Card:function(a,b,c){a=new L;M(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);O(a);b=a.k;b.n=new K(0,0.2);b.o=new K(1,1);return b},Collate:function(a,b,c){a=new L;M(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);M(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,
0.25);return b},CreateRequest:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,p);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Tk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},Database:function(a,b,c){var a=new L,d=0.5*Dc,e=0.1*Dc;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,p);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);N(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);N(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,0.3*c);Tk(a);b=a.k;b.n=new K(0,0.4);b.o=new K(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*
b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);N(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);O(a);b=a.k;b.n=new K(0.226,0);b.o=new K(0.81,1);return b},DiskStorage:function(a,b,c){var a=new L,d=0.5*Dc,e=0.1*Dc;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,p);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,
0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);Tk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(1,0.9);return b},Display:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);O(a);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.Fb:0;0===a?a=0.2:0.15>a&&(a=0.15);var d=new L,e=0.2*Dc;M(d,0,0.2*c,h);N(d,0,(0.2-e)*c,(0.2-
e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);N(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);N(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);N(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);M(d,0,a*c,p);d.lineTo(1*b,a*c);Tk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.Fb:0;0.1>a&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,p);d.lineTo(1*b,a*c);Tk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,
1);return b},Document:function(a,b,c){c/=0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new K(0,0);b.o=new K(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.Fb:0;0.2>a&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,p);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Tk(d);
b=d.k;b.n=new K(a/2,a/2);b.o=new K(1-a/2,1-a/2);return b},ExternalProcess:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0.1*b,0.4*c,p);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*c);Tk(a);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.75);return b},File:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*
b,1*c);a.lineTo(0,1*c);O(a);M(a,0.75*b,0,p);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Tk(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},Interrupt:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);M(a,1*b,0.5*c,p);a.lineTo(1*b,1*c);M(a,1*b,0.5*c,p);a.lineTo(1*b,0);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},InternalStorage:function(a,b,c){var d=a?a.Fb:0,a=a?a.Lr:0;0===d&&(d=0.1);0===a&&(a=0.1);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*
b,1*c);e.lineTo(0,1*c);O(e);M(e,d*b,0,p);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Tk(e);b=e.k;b.n=new K(d,a);b.o=new K(1,1);return b},Junction:function(a,b,c){var a=new L,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=0.5*Dc;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);N(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);N(a,0,(0.5-g)*c,(0.5-g)*b,0,0.5*b,0);N(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);M(a,(e+d)*b,(e+d)*c,p);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Tk(a);b=a.k;
b.Ib=Kg;return b},LinedDocument:function(a,b,c){c/=0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);M(a,0.1*b,0,p);a.lineTo(0.1*b,0.75*c);Tk(a);b=a.k;b.n=new K(0.1,0);b.o=new K(1,0.6);return b},LoopLimit:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,
b,c){var a=new L,d=0.5*Dc;M(a,0.5*b,1*c,h);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.k;b.n=new K(0.15,0.15);b.o=new K(0.85,0.8);return b},ManualInput:function(a,b,c){a=new L;M(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},MessageFromUser:function(a,
b,c){a=a?a.Fb:0;0===a&&(a=0.7);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(0,0);b.o=new K(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.25);var d=new L;M(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},MicroformRecording:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*
c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,0.75);return b},MultiDocument:function(a,b,c){c/=0.8;a=new L;M(a,b,0,h);a.lineTo(b,0.5*c);N(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);N(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);N(a,0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);O(a);M(a,0.1*b,0.2*c,p);a.lineTo(0.8*
b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Tk(a);b=a.k;b.n=new K(0,0.25);b.o=new K(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new L;M(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);O(a);M(a,0.2*b,0.1*c,p);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);
a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Tk(a);b=a.k;b.n=new K(0,0.2);b.o=new K(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.1);var d=1-a,e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);O(e);M(e,0.5*a*b,a*c,p);e.lineTo((1-0.5*a)*b,a*c);Tk(e);b=e.k;b.n=new K(d/4+0.5*a,a);b.o=new K(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);O(a);
b=a.k;b.n=new K(0,0);b.o=new K(0.75,1);return b},Or:function(a,b,c){var a=new L,d=0.5*Dc;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,1*b,0.5*c,p);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);Tk(a);b=a.k;b.Ib=Kg;return b},PaperTape:function(a,b,c){c/=0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0.3*c);N(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);N(a,0.5*
b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new K(0,0.49);b.o=new K(1,0.75);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.Fb:0,a=a?a.Lr:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);O(e);b=e.k;b.n=new K(d,0);b.o=new K(1-a,1);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Fb:0,a=a?a.Lr:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,
1*c);O(e);b=e.k;b.n=new K(d,0);b.o=new K(1-a,1);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,(1-a)*b,0,p);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Tk(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},Process:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,p);d.lineTo(a*b,1*c);Tk(d);
b=d.k;b.n=new K(a,0);b.o=new K(1,1);return b},Sort:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);Tk(a);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.5);return b},Start:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);M(a,0.25*b,0,p);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Tk(a);b=a.k;b.n=new K(0.25,0);b.o=
new K(0.75,1);return b},Terminator:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);b=a.k;b.n=new K(0.23,0);b.o=new K(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.Fb:0;0===a&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);O(d);b=d.k;b.n=new K(0,0);b.o=new K(1,1-a);return b},AndGate:function(a,b,c){var a=new L,d=0.5*Dc;M(a,0,0,h);a.lineTo(0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0);b.o=new K(0.55,1);return b},Buffer:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},Clock:function(a,b,c){var a=new L,d=0.5*Dc;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*
c,1*b,0.5*c);M(a,1*b,0.5*c,p);a.lineTo(1*b,0.5*c);M(a,0.8*b,0.75*c,p);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Tk(a);b=a.k;b.Ib=Kg;return b},Ground:function(a,b,c){a=new L;M(a,0.5*b,0,p);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.k},Inverter:function(a,b,c){var a=new L,
d=0.1*Dc;M(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.n=new K(0,0.25);b.o=new K(0.4,0.75);return b},NandGate:function(a,b,c){var a=new L,d=0.5*Dc,e=0.4*Dc,g=0.1*Dc;M(a,0.8*b,0.5*c,h);N(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*
b,0);N(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.k;b.n=new K(0,0.05);b.o=new K(0.55,0.95);return b},NorGate:function(a,b,c){var a=new L,d=0.5,e=Dc*d,g=0,i=0.5;M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,
0.8*b,0.5*c);d=0.1;e=0.1*Dc;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new K(0.2,0.25);b.o=new K(0.6,0.75);return b},OrGate:function(a,b,c){var a=new L,d=0.5*Dc;M(a,0,0,h);N(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);N(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);O(a);b=a.k;b.n=
new K(0.2,0.25);b.o=new K(0.75,0.75);return b},XnorGate:function(a,b,c){var a=new L,d=0.5,e=Dc*d,g=0.2,i=0.5;M(a,0.1*b,0,p);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*Dc;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*
b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new K(0.4,0.25);b.o=new K(0.65,0.75);return b},XorGate:function(a,b,c){var a=new L,d=0.5*Dc;M(a,0.1*b,0,p);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.2*b,0,h);N(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);O(a);b=a.k;b.n=new K(0.4,0.25);b.o=new K(0.8,0.75);return b},Capacitor:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(0,1*c);a.moveTo(1*b,
0);a.lineTo(1*b,1*c);return a.k},Resistor:function(a,b,c){a=new L;M(a,0,0.5*c,p);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.k},Inductor:function(a,b,c){var a=new L,d=0.1*Dc,e=0.1,g=0.5;M(a,(e-0.5*d)*b,(g+0.1)*c,p);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);
g=e=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+0.5*d)*b,(g+0.1)*c);return a.k},ACvoltageSource:function(a,b,c){var a=new L,d=0.5*Dc;M(a,0*b,0.5*c,p);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+
d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);N(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.k;b.Ib=Kg;return b},DCvoltageSource:function(a,b,c){a=new L;M(a,0,0.75*c,p);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},Diode:function(a,b,c){a=new L;M(a,1*b,0,p);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=0.38*
b,c=0.6*c,a=new L,g=0.8*Dc,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);N(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=0.4*Dc;i=0.4;j=0.2;k=0.5;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*
b+d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);N(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=0.2*Dc;i=0.2;k=j=0.5;M(a,(j-i)*b+d,k*c+e,h);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=0.4*Dc;i=0.4;j=0.8;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*
b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);N(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);g=0.8*Dc;i=0.8;j=1;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);N(a,(j+i-0.5*
g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);return a.k},Email:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);O(a);M(a,0,0,p);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Tk(a);return a.k},Ethernet:function(a,b,c){a=new L;M(a,0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);O(a);M(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);
a.lineTo(0.4*b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);O(a);M(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Tk(a);return a.k},Power:function(a,b,c){var a=new L,d=0.4*Dc,e=0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);new E(0,0);Uk(0.5,0.5-e,0.5+d,0.5-
e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);new E(i.x,i.y);M(a,i.x*b,i.y*c,h);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);Uk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=0.3*Dc;e=0.3;Uk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);N(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,
(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);Uk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);N(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);O(a);M(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);O(a);b=a.k;b.n=new K(0.25,0.55);b.o=new K(0.75,0.8);return b},Fallout:function(a,b,c){var a=new L,d=0.5*Dc;M(a,0*b,0.5*c,h);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*
c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);O(a);b=a.k;b.Ib=
Kg;return b},IrritationHazard:function(a,b,c){a=new L;M(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);O(a);b=a.k;b.n=new K(0.3,0.3);b.o=new K(0.7,0.7);return b},ElectricalHazard:function(a,b,c){a=new L;M(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*
c);a.lineTo(0.63*b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);O(a);return a.k},FireHazard:function(a,b,c){a=new L;M(a,0.1*b,1*c,h);N(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);N(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);N(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);N(a,0.8*b,0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);N(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);N(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,
1*c);O(a);b=a.k;b.n=new K(0.05,0.645);b.o=new K(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,p);N(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);N(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.k},BpmnActivityParallel:function(a,b,c){a=new L;
M(a,0,0,p);a.lineTo(0,1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},BpmnActivitySequential:function(a,b,c){a=new L;M(a,0,0,p);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.k},BpmnActivityAdHoc:function(a,b,c){a=new L;M(a,0,0,p);M(a,1*b,1*c,p);M(a,0,0.5*c,p);N(a,0.2*b,0.35*c,0.3*b,0.35*c,0.5*b,0.5*c);N(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.k},BpmnActivityCompensation:function(a,b,c){a=new L;M(a,
0,0.5*c,h);a.lineTo(0.5*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);O(a);return a.k},BpmnTaskMessage:function(a,b,c){a=new L;M(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);O(a);M(a,0,0.2*c,p);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Tk(a);return a.k},BpmnTaskScript:function(a,b,c){a=new L;M(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);N(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);N(a,0.4*b,0.5*c,1*b,
0.5*c,0.7*b,1*c);O(a);M(a,0.45*b,0.73*c,p);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Tk(a);return a.k},BpmnTaskUser:function(a,b,c){a=new L;M(a,0,0,p);M(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);N(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);N(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,
0.405*c);var d=0.5-0.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;N(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);N(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);N(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);N(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);M(a,0.2*b,1*c,p);a.lineTo(0.2*b,0.8*c);M(a,0.8*b,1*c,p);a.lineTo(0.8*
b,0.8*c);return a.k},BpmnEventConditional:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.2*b,0.2*c,p);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Tk(a);return a.k},BpmnEventError:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);O(a);return a.k},
BpmnEventEscalation:function(a,b,c){a=new L;M(a,0,0,p);M(a,1*b,1*c,p);M(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},BpmnEventTimer:function(a,b,c){var a=new L,d=0.5*Dc;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,0.5*b,0,p);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*
b,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Tk(a);b=a.k;b.Ib=Kg;return b}},Zk;for(Zk in Dk)Dk[Zk.toLowerCase()]=Zk;
var $k={None:"",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",OpenTriangle:"m 0,0 l 8,4 -8,4",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",Line:"m 0,0 l 0,8",
DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 12,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -4 0 4 z",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 -8,-4 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 -8,0 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",Fork:"m 0,4 l 8,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleFork:"F1 m 6,3 b 0 360 -3 0 3 m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
LineFork:"m 0,0 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleLine:"F1 m 8 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",CircleLineFork:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m 4 -4 l 0 8",OpenTriangleTop:"m 0,0 l 8,4 -8,0 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4 -8,0",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",
OpenTriangleLine:"m 0,0 8,4 -8,4 m 8.5,0 l 0,-8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",ForwardSlash:"m 0,8 l 5,-8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",BackSlash:"m 0,0 l 5,8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3"},Bk,al={},bl;for(bl in Dk){var fl=Dk[bl];"string"===typeof fl&&(fl=Dk[fl]);"string"===typeof fl&&(fl=Dk[fl]);fl&&(al[bl]=fl(m,100,100));al[bl].$d()}Bk=al;var gl={};function Ck(a){if($k){for(var b in $k){var c=Pd($k[b],p);gl[b]=c;gl[b.toLowerCase()]=b}$k=f}return gl[a]}X.FigureGenerators=Dk;X.ArrowheadGeometries=gl;
function R(a){0===arguments.length?w.call(this):w.call(this,a);this.pm=this.kj="";this.sp=m;this.Yp=this.Op=this.$o=this.Fq=this.Fo=this.so=h;this.iq=this.dq=this.cq=p;this.Am=h;this.vq="";this.sq=h;this.Rj=this.jq=this.eq=this.tq=m;this.Qs=p;this.jg=this.uq=m;this.gq="";this.Wk=m;this.fq=(new hb(NaN,NaN)).freeze();this.kq="";this.Xk=m;this.gd="";this.gp=h;this.s=this.ro=this.nj=m;this.li=(new E(NaN,NaN)).freeze();this.Vs=new E(NaN,NaN);this.Bp="";this.mi=m;this.Cp=Xb;this.Jp=Kc;this.Ep=Lc;this.Go=
m;this.hp=h;this.tp=hl;this.Lf=p;this.Dm=(new E(6,6)).freeze();this.Cm="gray";this.Bm=4;this.$D=-1;this.ii=h;this.ot=this.Xe=p}v.H("Part",R);v.na(R,w);
R.prototype.fb=function(a){w.prototype.fb.call(this,a);a.kj=this.kj;a.pm=this.pm;a.sp=this.sp;a.so=this.so;a.Fo=this.Fo;a.Fq=this.Fq;a.$o=this.$o;a.Op=this.Op;a.Yp=this.Yp;a.cq=this.cq;a.dq=this.dq;a.iq=this.iq;a.Am=this.Am;a.vq=this.vq;a.sq=this.sq;a.tq=this.tq;a.eq=this.eq;a.jq=this.jq;a.Qs=p;a.uq=this.uq;a.jg=m;a.gq=this.gq;a.fq.Pa(this.fq);a.kq=this.kq;a.gd=this.gd;a.gp=this.gp;a.ro=this.ro;a.li.Pa(this.li);a.Bp=this.Bp;a.Cp=this.Cp.B();a.Jp=this.Jp.B();a.Ep=this.Ep.B();a.Go=this.Go;a.hp=this.hp;
a.tp=this.tp;a.Lf=this.Lf;a.Dm.Pa(this.Dm);a.Cm=this.Cm;a.Bm=this.Bm};R.prototype.Rg=function(a){w.prototype.Rg.call(this,a);Zi(a);a.Rj=m;a.Wk=m;a.Xk=m;a.mi=m};R.prototype.toString=function(){var a=v.Ki(Object.getPrototypeOf(this))+"#"+v.fc(this);this.data&&(a+="("+ye(this.data)+")");return a};
R.prototype.dumpReferences=R.prototype.CB=function(){v.trace("References for "+this);this.sa&&v.trace("  "+this.sa.toString()+' LayerName: "'+this.xd+'"');this.Qn!==this&&v.trace("  SelectionObject: "+this.Qn.toString()+' SelectionObjectName: "'+this.Rn+'"');this.vb!==this&&v.trace("  LocationObject: "+this.vb.toString()+' LocationObjectName: "'+this.Ar+'"');if(this.jg){for(var a="",b=this.jg.f;b.next();)a+=b.key+" ";v.trace("  Adornments: "+a)}this.Ta&&v.trace("  ContainingGroup: "+this.Ta.toString());
if(this instanceof U){if(this.lc)for(b=this.lc.f;b.next(););if(0<this.ge.count){a="";for(b=this.ge;b.next();)a+=b.value.toString()+", ";v.trace("  Links: "+a)}this.fe&&v.trace("  LabeledLink: "+this.fe.toString());if(this instanceof V){v.trace("  Placeholder: "+this.placeholder);a="";for(b=this.hc;b.next();)a+=b.value.toString()+", ";v.trace("  Members: "+a);a="";for(b=this.Qk.f;b.next();)a+=b.value.toString()+", ";v.trace("  NestedGroups: "+a);v.trace("  Layout: "+this.sb)}}else if(this instanceof
W){v.trace("  Path: "+this.path);v.trace("  From: "+this.da+" "+this.Bc+' "'+this.Vg+'"');v.trace("  To: "+this.ga+" "+this.md+' "'+this.Zh+'"');a="";for(b=this.Xh;b.next();)a+=b.value.toString()+", ";v.trace("  LabelNodes: "+a)}};R.LayoutNone=0;var ni;R.LayoutAdded=ni=1;var si;R.LayoutRemoved=si=2;var ij;R.LayoutShown=ij=4;var jj;R.LayoutHidden=jj=8;R.LayoutNodeSized=16;var xi;R.LayoutGroupLayout=xi=32;var hl;R.LayoutStandard=hl=ni|si|ij|jj|16|xi;
R.prototype.ig=function(){w.prototype.ig.call(this);var a=this.b;a!==m&&this.ul&&(Fi(a,"shadowOffset",this.hD),Fi(a,"shadowColor",this.shadowColor),Fi(a,"shadowBlur",this.shadowBlur))};R.prototype.zl=function(a,b,c,d,e,g,i){var j=this.b;j!==m&&(a===we&&"elements"===b?e instanceof w&&oi(e,e,function(a){pi(j,a)}):a===xe&&"elements"===b&&e instanceof w&&oi(e,e,function(a){ri(j,a)}),j.ke(a,b,c,d,e,g,i))};
R.prototype.updateTargetBindings=R.prototype.ic=function(a){w.prototype.ic.call(this,a);if(this.data!==m)for(a=this.elements;a.next();){var b=a.value;b instanceof w&&oi(b,b,function(a){a.data!==m&&a.ic()})}};v.m(R,{uE:"adornments"},function(){return this.jg===m?m:this.jg.f});R.prototype.findAdornment=R.prototype.hn=function(a){t&&v.e(a,"string",R,"findAdornment:category");var b=this.jg;return b===m?m:b.$(a)};
R.prototype.addAdornment=R.prototype.Pm=function(a,b){if(b!==m){t&&(v.e(a,"string",R,"addAdornment:category"),v.c(b,cf,R,"addAdornment:ad"));var c=m,d=this.jg;d!==m&&(c=d.$(a));if(c!==b){if(c!==m){var e=c.sa;e!==m&&e.vd(-1,c)}d===m&&(this.jg=d=new ja("string",cf));d.add(a,b);c=this.b;c!==m&&(d=c.jn("Adornment"),d===m&&(d=c.jn("")),d!==m&&(d.dk(99999999,b),b.data=this.data))}}};
R.prototype.removeAdornment=R.prototype.Bl=function(a){t&&v.e(a,"string",R,"removeAdornment:category");var b=this.jg;if(b!==m){var c=b.$(a);if(c!==m){var d=c.sa;d!==m&&d.vd(-1,c)}b.remove(a);0===b.count&&(this.jg=m)}};R.prototype.clearAdornments=R.prototype.Pg=function(){var a=this.jg;if(a!==m){for(var b=[],a=a.f;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.Bl(b[c])}};
R.prototype.updateAdornments=R.prototype.$h=function(){a:{var a=this.b;if(a!==m){var b=m;if(this.Da&&this.cD){var c=this.Qn;if(c!==m&&this.gb()&&c.fk()&&c.oa.W()){b=this.hn("Selection");if(b===m){b=this.dD;b===m&&(this instanceof W?b=a.nC:this instanceof R&&(b=this instanceof V?a.QB:a.BC));if(!(b instanceof cf))break a;of(b);b=b.copy();if(!(b instanceof cf))break a;b.hd="Selection";b.Hd=c}if(b!==m){a=b.placeholder;if(a!==m){var d=c.pl(),e=0;c instanceof X&&(e=c.Oa);a.ka=new hb((c.qa.width+e)*d,(c.qa.height+
e)*d)}else this instanceof W&&(a=b.xa,a=pk(b,a,a.length),d=this.path,a instanceof X&&d===c&&(d=c.va,li(this),d=c.va,a.pr=d,0===a.Oa&&(a.Oa=c.Oa)));b.Ka=c.pn();b.type!==ng&&(b.location=c.ub(Xb))}}this.Pm("Selection",b)}else this.Bl("Selection")}}c=this.b;if(c!==m){c=c.Ob.ie.j;b=c.length;for(a=0;a<b;a++)d=c[a],d.isEnabled&&d.updateAdornments(this)}};v.m(R,{sa:"layer"},s("s"));v.m(R,{b:"diagram"},function(){var a=this.s;return a!==m?a.b:m});v.a(R,"layerName",R.prototype.xd);
v.defineProperty(R,{xd:"layerName"},s("pm"),function(a){var b=this.pm;if(b!==a&&(t&&v.e(a,"string",R,"layerName"),this.pm=a,this.d("layerName",b,a),b=this.sa,b!==m&&b.name!==a)){var c=b.b;if(c!==m&&(a=c.jn(a),a!==m&&a!==b)){var d=b.vd(-1,this,h);0<=d&&c.ke(xe,"parts",b,this,m,d,h);d=a.dk(99999999,this,h);0<=d&&c.ke(we,"parts",a,m,this,h,d);d=this.xr;if(d!==m){var e=c.wa;c.wa=h;d(this,b,a);c.wa=e}}}});v.a(R,"layerChanged",R.prototype.xr);
v.defineProperty(R,{xr:"layerChanged"},s("sp"),function(a){var b=this.sp;b!==a&&(a!==m&&v.e(a,"function",R,"layerChanged"),this.sp=a,this.d("layerChanged",b,a))});v.a(R,"location",R.prototype.location);v.defineProperty(R,{location:"location"},s("li"),function(a){var b=this.li;if(!b.u(a)){t&&v.c(a,E,R,"location");this.li=a=a.B();if(this.Hc===p){var c=this.kb,d=this.Vs,e=c.copy();c.Xd(a.x-d.x,a.y-d.y);c.u(e)||this.d("position",e,c);lj(this)}this.d("location",b,a)}});
function lj(a){if(a.ii===p){var b=a.b;b!==m&&(b.tg.add(a),a instanceof U&&!b.ca.ab&&a.kf(),qf(b));a.ii=h}}function il(a){if(a.ii!==p){var b=a.kb,c=a.Yb,d=c.copy();c.ta();c.x=b.x;c.y=b.y;c.freeze();Xi(a,d,c);a.ii=p}}v.m(R,{vb:"locationObject"},function(){if(this.mi===m){var a=this.Ar;a!==f&&a!==m&&""!==a?(a=this.Ke(a),this.mi=a!==m?a:this):this.mi=this}return this.mi.visible?this.mi:this});v.a(R,"minLocation",R.prototype.wC);
v.defineProperty(R,{wC:"minLocation"},s("Jp"),function(a){var b=this.Jp;b.u(a)||(t&&v.c(a,E,R,"minLocation"),this.Jp=a=a.B(),this.d("minLocation",b,a))});v.a(R,"maxLocation",R.prototype.qC);v.defineProperty(R,{qC:"maxLocation"},s("Ep"),function(a){var b=this.Ep;b.u(a)||(t&&v.c(a,E,R,"maxLocation"),this.Ep=a=a.B(),this.d("maxLocation",b,a))});v.a(R,"locationObjectName",R.prototype.Ar);
v.defineProperty(R,{Ar:"locationObjectName"},s("Bp"),function(a){var b=this.Bp;b!==a&&(t&&v.e(a,"string",R,"locationObjectName"),this.Bp=a,this.mi=m,ej(this),this.d("locationObjectName",b,a))});v.a(R,"locationSpot",R.prototype.of);v.defineProperty(R,{of:"locationSpot"},s("Cp"),function(a){var b=this.Cp;b.u(a)||(t&&(v.c(a,K,R,"locationSpot"),Ob(a)||v.g("Part.locationSpot must be a specific Spot value, not: "+a)),this.Cp=a=a.B(),ej(this),this.d("locationSpot",b,a))});
R.prototype.move=R.prototype.move=function(a){this.position=a;this.Hc===p&&il(this)};
R.prototype.isVisible=R.prototype.gb=function(){if(!this.Ng)return p;var a=this.sa;if(a!==m&&!a.visible)return p;var b=this.Ta;if(b!==m&&!b.ee)return p;if(this instanceof U){if(a!==m)if(a.b.nf)for(a=this.hf();a.next();){if(b=a.value,b=b.da,b!==m&&!b.Pd)return p}else for(a=this.vu();a.next();)if(b=a.value,b=b.ga,b!==m&&!b.Pd)return p;a=this.fe;if(a!==m&&!a.gb())return p}else if(this instanceof W){b=this.da;if(b!==m&&jl(b)===m)return p;b=this.ga;if(b!==m&&jl(b)===m)return p}return h};
function kl(a,b,c){Sb(c)&&(c=ec);var d=b.qa;if(b===m||b===a)return new E(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new E(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.wb(c);for(b=b.V;b!==m&&b!==a;)b.transform.wb(c),b=b.V;a.tm.wb(c);c.offset(-a.zc.x,-a.zc.y);return c}R.prototype.ensureBounds=R.prototype.Sh=function(){gh(this,Infinity,Infinity);this.pc()};
R.prototype.pc=function(){Wi(this);if(this.Hc===p)il(this);else{this instanceof cf&&(this.N!==ng&&this.Za!==m)&&(this.mi=this.Za);var a=this.CA;a.set(this.Yb);cj(this);this.Yb.ta();var b=this.Xe;this.Ai(0,0,this.zc.width,this.zc.height);var c=NaN,d=NaN,e=this.of,g=this.vb;Sb(e)&&v.g("Spot must be real: "+e.toString());var i=g.qa,j=this.Vs;j.Dl(0,0,i.width,i.height,e);if(g!==this){g.transform.wb(j);g.Oa&&(e=g.Eh/2,j.offset(-e,-e));for(g=g.V;g!==m&&g!==this;)g.transform.wb(j),g=g.V}this.tm.wb(j);j.offset(-this.zc.x,
-this.zc.y);j=this.Vs;g=this.position;e=this.location;e.W()?(c=e.x-j.x,d=e.y-j.y,g.copy(),g.Xd(c,d)):g.W()&&(c=g.x,d=g.y,e.copy(),e.Xd(c+j.x,d+j.y));j=this.Yb;j.x=c;j.y=d;j.freeze();Wi(this);Xi(this,a,j);a.u(j)?this.Xe=b:(this instanceof U||this.constructor===R)&&(!Va(a.width,j.width)||!Va(a.height,j.height))&&this.r(16);this.ii=p}};
function qi(a,b){a.ot=p;var c=a.b;if(c!==m){a.updateAdornments();var d=a.uE;if(d!==m){Wi(a);for(cj(a);d.next();)gh(d.value,Infinity,Infinity),d.value.pc()}a instanceof U&&Ci(c,a);!a.sa.Zc&&!b&&fi(c);var d=a.Yb,e=c.jb;e.W()?a.Xe?d.Me(e)||(a.Xe=p,ph(c)):d.Me(e)&&(a.Xe=h):c.mm=h;a.Yb.W()&&ph(c,a.Yb)}}R.prototype.ek=ca(h);v.a(R,"isInDocumentBounds",R.prototype.jy);
v.defineProperty(R,{jy:"isInDocumentBounds"},s("gp"),function(a){var b=this.gp;b!==a&&(t&&v.e(a,"boolean",R,"isInDocumentBounds"),this.gp=a,this.d("isInDocumentBounds",b,a))});v.a(R,"category",R.prototype.hd);
v.defineProperty(R,{hd:"category"},s("kj"),function(a){var b=this.kj;if(b!==a){t&&v.e(a,"string",R,"category");this.kj=a;this.d("category",b,a);var b=this.b,c=this.data;b!==m&&c!==m&&(this instanceof U||this.constructor===R?(b=b.findTemplateForNodeData(c,a),b instanceof R&&(of(b),b=b.copy(),b instanceof R&&ll(this,b,a))):this instanceof W&&(b=b.findTemplateForLinkData(c,a),b instanceof W&&(of(b),b=b.copy(),b instanceof W&&ll(this,b,a))))}});
function ll(a,b,c){a.Pg();var d=a.data,e=a.xd,g=a.Da;b.Rg(a);b.fb(a);a.kj=c;a.K();aj(a);b=a.b;c=h;b!==m&&(c=b.La,b.La=h);a.Zl=d;d!==m&&a.ic();b!==m&&(b.La=c);d=a.xd;d!==e&&(a.pm=e,a.xd=d);a.Da=g}R.prototype.canCopy=R.prototype.kH=function(){if(!this.jB)return p;var a=this.sa;if(a===m)return h;if(!a.Hh)return p;a=a.b;return a===m?h:!a.Hh?p:h};R.prototype.canDelete=R.prototype.oH=function(){if(!this.tB)return p;var a=this.sa;if(a===m)return h;if(!a.Uj)return p;a=a.b;return a===m?h:!a.Uj?p:h};
R.prototype.canEdit=R.prototype.qH=function(){if(!this.oD)return p;var a=this.sa;if(a===m)return h;if(!a.$m)return p;a=a.b;return a===m?h:!a.$m?p:h};R.prototype.canGroup=R.prototype.uH=function(){if(!this.RB)return p;var a=this.sa;if(a===m)return h;if(!a.Um)return p;a=a.b;return a===m?h:!a.Um?p:h};R.prototype.canMove=R.prototype.xH=function(){if(!this.zC)return p;var a=this.sa;if(a===m)return h;if(!a.Vj)return p;a=a.b;return a===m?h:!a.Vj?p:h};
R.prototype.canPrint=R.prototype.UE=function(){if(!this.HC)return p;var a=this.sa;if(a===m)return h;if(!a.Wm)return p;a=a.b;return a===m?h:!a.Wm?p:h};R.prototype.canReshape=R.prototype.CH=function(){if(!this.QC)return p;var a=this.sa;if(a===m)return h;if(!a.Xm)return p;a=a.b;return a===m?h:!a.Xm?p:h};R.prototype.canResize=R.prototype.DH=function(){if(!this.RC)return p;var a=this.sa;if(a===m)return h;if(!a.Ym)return p;a=a.b;return a===m?h:!a.Ym?p:h};
R.prototype.canRotate=R.prototype.EH=function(){if(!this.WC)return p;var a=this.sa;if(a===m)return h;if(!a.Zm)return p;a=a.b;return a===m?h:!a.Zm?p:h};R.prototype.canSelect=R.prototype.Ax=function(){if(!this.ik)return p;var a=this.sa;if(a===m)return h;if(!a.Id)return p;a=a.b;return a===m?h:!a.Id?p:h};v.a(R,"copyable",R.prototype.jB);v.defineProperty(R,{jB:"copyable"},s("so"),function(a){var b=this.so;b!==a&&(t&&v.e(a,"boolean",R,"copyable"),this.so=a,this.d("copyable",b,a))});v.a(R,"deletable",R.prototype.tB);
v.defineProperty(R,{tB:"deletable"},s("Fo"),function(a){var b=this.Fo;b!==a&&(t&&v.e(a,"boolean",R,"deletable"),this.Fo=a,this.d("deletable",b,a))});v.a(R,"textEditable",R.prototype.oD);v.defineProperty(R,{oD:"textEditable"},s("Fq"),function(a){var b=this.Fq;b!==a&&(t&&v.e(a,"boolean",R,"textEditable"),this.Fq=a,this.d("textEditable",b,a),this.updateAdornments())});v.a(R,"groupable",R.prototype.RB);
v.defineProperty(R,{RB:"groupable"},s("$o"),function(a){var b=this.$o;b!==a&&(t&&v.e(a,"boolean",R,"groupable"),this.$o=a,this.d("groupable",b,a))});v.a(R,"movable",R.prototype.zC);v.defineProperty(R,{zC:"movable"},s("Op"),function(a){var b=this.Op;b!==a&&(t&&v.e(a,"boolean",R,"movable"),this.Op=a,this.d("movable",b,a))});v.a(R,"printable",R.prototype.HC);
v.defineProperty(R,{HC:"printable"},s("Yp"),function(a){var b=this.Yp;b!==a&&(t&&v.e(a,"boolean",R,"printable"),this.Yp=a,this.d("printable",b,a))});v.a(R,"reshapable",R.prototype.QC);v.defineProperty(R,{QC:"reshapable"},s("cq"),function(a){var b=this.cq;b!==a&&(t&&v.e(a,"boolean",R,"reshapable"),this.cq=a,this.d("reshapable",b,a),this.updateAdornments())});v.a(R,"resizable",R.prototype.RC);
v.defineProperty(R,{RC:"resizable"},s("dq"),function(a){var b=this.dq;b!==a&&(t&&v.e(a,"boolean",R,"resizable"),this.dq=a,this.d("resizable",b,a),this.updateAdornments())});v.a(R,"rotatable",R.prototype.WC);v.defineProperty(R,{WC:"rotatable"},s("iq"),function(a){var b=this.iq;b!==a&&(t&&v.e(a,"boolean",R,"rotatable"),this.iq=a,this.d("rotatable",b,a),this.updateAdornments())});v.a(R,"selectable",R.prototype.ik);
v.defineProperty(R,{ik:"selectable"},s("Am"),function(a){var b=this.Am;b!==a&&(t&&v.e(a,"boolean",R,"selectable"),this.Am=a,this.d("selectable",b,a),this.updateAdornments())});v.a(R,"selectionObjectName",R.prototype.Rn);v.defineProperty(R,{Rn:"selectionObjectName"},s("vq"),function(a){var b=this.vq;b!==a&&(t&&v.e(a,"string",R,"selectionObjectName"),this.vq=a,this.Rj=m,this.d("selectionObjectName",b,a))});v.a(R,"selectionAdorned",R.prototype.cD);
v.defineProperty(R,{cD:"selectionAdorned"},s("sq"),function(a){var b=this.sq;b!==a&&(t&&v.e(a,"boolean",R,"selectionAdorned"),this.sq=a,this.d("selectionAdorned",b,a),this.updateAdornments())});v.a(R,"selectionAdornmentTemplate",R.prototype.dD);v.defineProperty(R,{dD:"selectionAdornmentTemplate"},s("tq"),function(a){var b=this.tq;b!==a&&(t&&v.c(a,cf,R,"selectionAdornmentTemplate"),this instanceof W&&(a.type=ng),this.tq=a,this.d("selectionAdornmentTemplate",b,a))});
v.m(R,{Qn:"selectionObject"},function(){if(this.Rj===m){var a=this.Rn;a!==m&&""!==a?(a=this.Ke(a),this.Rj=a!==m?a:this):this instanceof W?(a=this.path,this.Rj=a!==m?a:this):this.Rj=this}return this.Rj});v.a(R,"isSelected",R.prototype.Da);
v.defineProperty(R,{Da:"isSelected"},s("Qs"),function(a){var b=this.Qs;if(b!==a){t&&v.e(a,"boolean",R,"isSelected");var c=this.b;if(!a||this.Ax()&&!(c!==m&&c.selection.count>=c.rC)){this.Qs=a;var d=p;if(c!==m){d=c.La;c.La=h;var e=c.selection;e.ta();a?e.add(this):e.remove(this);e.freeze()}this.d("isSelected",b,a);this.updateAdornments();a=this.eD;a!==m&&a(this);c!==m&&(qf(c),c.La=d)}}});v.a(R,"selectionChanged",R.prototype.eD);
v.defineProperty(R,{eD:"selectionChanged"},s("uq"),function(a){var b=this.uq;b!==a&&(a!==m&&v.e(a,"function",R,"selectionChanged"),this.uq=a,this.d("selectionChanged",b,a))});v.a(R,"resizeAdornmentTemplate",R.prototype.SC);v.defineProperty(R,{SC:"resizeAdornmentTemplate"},s("eq"),function(a){var b=this.eq;b!==a&&(t&&v.c(a,cf,R,"resizeAdornmentTemplate"),this.eq=a,this.d("resizeAdornmentTemplate",b,a))});v.a(R,"resizeObjectName",R.prototype.UC);
v.defineProperty(R,{UC:"resizeObjectName"},s("gq"),function(a){var b=this.gq;b!==a&&(t&&v.e(a,"string",R,"resizeObjectName"),this.gq=a,this.Wk=m,this.d("resizeObjectName",b,a))});v.m(R,{uG:"resizeObject"},function(){if(this.Wk===m){var a=this.UC;a!==m&&""!==a?(a=this.Ke(a),this.Wk=a!==m?a:this):this.Wk=this}return this.Wk});v.a(R,"resizeCellSize",R.prototype.TC);
v.defineProperty(R,{TC:"resizeCellSize"},s("fq"),function(a){var b=this.fq;b.u(a)||(t&&v.c(a,hb,R,"resizeCellSize"),this.fq=a=a.B(),this.d("resizeCellSize",b,a))});v.a(R,"rotateAdornmentTemplate",R.prototype.XC);v.defineProperty(R,{XC:"rotateAdornmentTemplate"},s("jq"),function(a){var b=this.jq;b!==a&&(t&&v.c(a,cf,R,"rotateAdornmentTemplate"),this.jq=a,this.d("rotateAdornmentTemplate",b,a))});v.a(R,"rotateObjectName",R.prototype.YC);
v.defineProperty(R,{YC:"rotateObjectName"},s("kq"),function(a){var b=this.kq;b!==a&&(t&&v.e(a,"string",R,"rotateObjectName"),this.kq=a,this.Xk=m,this.d("rotateObjectName",b,a))});v.m(R,{yG:"rotateObject"},function(){if(this.Xk===m){var a=this.YC;a!==m&&""!==a?(a=this.Ke(a),this.Xk=a!==m?a:this):this.Xk=this}return this.Xk});v.a(R,"text",R.prototype.text);v.defineProperty(R,{text:"text"},s("gd"),function(a){var b=this.gd;b!==a&&(t&&v.e(a,"string",R,"text"),this.gd=a,this.d("text",b,a))});
v.a(R,"containingGroup",R.prototype.Ta);
v.defineProperty(R,{Ta:"containingGroup"},s("nj"),function(a){if(this instanceof U||this.constructor===R){var b=this.nj;if(b!==a){t&&a!==m&&v.c(a,V,R,"containingGroup");if(a!==m&&(this===a||a.tl(this)))this===a&&v.g("Cannot make a Group a member of itself: "+this.toString()),v.g("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString());this.r(si);var c=this.b;b!==m?ml(b,this):this instanceof V&&c!==m&&c.Yk.remove(this);this.nj=a;a!==m?nl(a,this):this instanceof
V&&c!==m&&c.Yk.add(this);this.r(ni);if(c!==m){var d=this.data,e=c.I;d!==m&&e instanceof P&&e.Oy(d,e.Xb(a!==m?a.data:m))}d=this.Mx;d!==m&&(e=h,c!==m&&(e=c.wa,c.wa=h),d(this,b,a),c!==m&&(c.wa=e));if(this instanceof V){c=new ka(R);bf(c,this,h,p);for(c=c.f;c.next();)if(d=c.value,d instanceof U)for(d=d.ge;d.next();)e=d.value,ui(e)}if(this instanceof U)for(d=this.ge;d.next();)e=d.value,ui(e);this.d("containingGroup",b,a);a!==m&&a.Zu()}}else v.g("cannot set the Part.containingGroup of a Link or Adornment")});
function ol(a,b){var c=a.nj;if(c!==b){c!==m&&ml(c,a);a.nj=b;b!==m&&nl(b,a);var d=a.Mx;if(d!==m){var e=h,g=a.b;g!==m&&(e=g.wa,g.wa=h);d(a,c,b);g!==m&&(g.wa=e)}}}function Zi(a){a=a.Ta;a!==m&&(a.K(),a.Za!==m&&a.Za.K(),a.kf())}R.prototype.tr=function(){var a=this.nj;a!==m&&nl(a,this)};R.prototype.ur=function(){var a=this.nj;a!==m&&ml(a,this)};R.prototype.kl=function(){var a=this.data;if(a!==m){var b=this.b;b!==m&&(b=b.I,b!==m&&b.OC(a))}};v.a(R,"containingGroupChanged",R.prototype.Mx);
v.defineProperty(R,{Mx:"containingGroupChanged"},s("ro"),function(a){var b=this.ro;b!==a&&(a!==m&&v.e(a,"function",R,"containingGroupChanged"),this.ro=a,this.d("containingGroupChanged",b,a))});v.m(R,{wK:"topLevelPart"},function(){return pl(this,this)});function pl(a,b){var c=b.Ta;return c!==m?pl(a,c):b instanceof U&&(c=b.fe,c!==m)?pl(a,c):b}v.m(R,{wr:"isTopLevel"},function(){return this.Ta!==m||this instanceof U&&this.Ni?p:h});
R.prototype.isMemberOf=R.prototype.tl=function(a){return!(a instanceof V)?p:ql(this,this,a)};function ql(a,b,c){if(b===c||c===m)return p;var d=b.Ta;return d!==m&&(d===c||ql(a,d,c))?h:b instanceof U&&(b=b.fe,b!==m)?ql(a,b,c):p}R.prototype.findCommonContainingGroup=R.prototype.rF=function(a){return rl(this,this,a)};function rl(a,b,c){if(b===m||c===m)return m;var d=b.Ta;if(d===m)return m;if(b===c)return d;var e=c.Ta;return e===m?m:d===e?e:ql(a,c,d)?d:ql(a,b,e)?e:rl(a,d,e)}
v.a(R,"isLayoutPositioned",R.prototype.ly);v.defineProperty(R,{ly:"isLayoutPositioned"},s("hp"),function(a){var b=this.hp;b!==a&&(t&&v.e(a,"boolean",R,"isLayoutPositioned"),this.hp=a,this.d("isLayoutPositioned",b,a),this.r(a?ij:jj))});v.a(R,"layoutConditions",R.prototype.jC);v.defineProperty(R,{jC:"layoutConditions"},s("tp"),function(a){var b=this.tp;b!==a&&(t&&v.e(a,"number",R,"layoutConditions"),this.tp=a,this.d("layoutConditions",b,a))});
R.prototype.canLayout=R.prototype.$q=function(){if(!this.ly||!this.gb())return p;var a=this.sa;return a!==m&&a.Zc||this instanceof U&&this.Ni?p:h};R.prototype.invalidateLayout=R.prototype.r=function(a){a===f&&(a=16777215);var b;!this.ly||0===(a&this.jC)?b=p:(b=this.sa,b!==m&&b.Zc||this instanceof U&&this.Ni?b=p:(b=this.b,b=b!==m&&b.ca.ab?p:h));if(b)if(b=this.nj,b!==m){var c=b.sb;c!==m?c.r():b.r(a)}else a=this.b,a!==m&&(c=a.sb,c!==m&&c.r())};v.a(R,"dragComputation",R.prototype.Sx);
v.defineProperty(R,{Sx:"dragComputation"},s("Go"),function(a){var b=this.Go;b!==a&&(a!==m&&v.e(a,"function",R,"dragComputation"),this.Go=a,this.d("dragComputation",b,a))});v.a(R,"isShadowed",R.prototype.ul);v.defineProperty(R,{ul:"isShadowed"},s("Lf"),function(a){var b=this.Lf;b!==a&&(t&&v.e(a,"boolean",R,"isShadowed"),this.Lf=a,aj(this),this.d("isShadowed",b,a))});v.a(R,"shadowOffset",R.prototype.hD);
v.defineProperty(R,{hD:"shadowOffset"},s("Dm"),function(a){var b=this.Dm;b.u(a)||(t&&v.c(a,E,R,"shadowOffset"),this.Dm=a=a.B(),aj(this),this.d("shadowOffset",b,a))});v.a(R,"shadowColor",R.prototype.shadowColor);v.defineProperty(R,{shadowColor:"shadowColor"},s("Cm"),function(a){var b=this.Cm;b!==a&&(t&&v.e(a,"string",R,"shadowColor"),this.Cm=a,aj(this),this.d("shadowColor",b,a))});v.a(R,"shadowBlur",R.prototype.shadowBlur);
v.defineProperty(R,{shadowBlur:"shadowBlur"},s("Bm"),function(a){var b=this.Bm;b!==a&&(t&&v.e(a,"number",R,"shadowBlur"),this.Bm=a,aj(this),this.d("shadowBlur",b,a))});function cf(a){0===arguments.length?R.call(this,Og):R.call(this,a);this.xd="Adornment";this.ua=m;this.Am=p;this.li=new E(NaN,NaN);this.ih=new A(F);this.cc=m;this.Ac=(new A(E)).freeze();this.St=new E;this.Za=m}v.H("Adornment",cf);v.na(cf,R);
cf.prototype.toString=function(){var a=this.Tm;return"Adornment("+this.hd+")"+(a!==m?a.toString():"")};cf.prototype.rj=function(){return this.ua&&this.ua.T instanceof W?this.ua.T.rj():m};cf.prototype.Xo=ca(m);cf.prototype.jw=function(){var a=this.Tm;return a instanceof W?a.Ac:m};v.m(cf,{placeholder:"placeholder"},s("Za"));v.a(cf,"adornedObject",cf.prototype.Hd);v.defineProperty(cf,{Hd:"adornedObject"},s("ua"),ba("ua"));v.m(cf,{Tm:"adornedPart"},function(){var a=this.ua;return a!==m?a.T:m});
cf.prototype.ek=function(){var a=this.ua;if(a===m)return h;a=a.T;return a===m||!a.Hc};v.m(cf,{Ta:"containingGroup"},ca(m));
cf.prototype.zl=function(a,b,c,d,e,g,i){if(a===we&&"elements"===b)if(e instanceof Ig)this.Za===m?this.Za=e:this.Za!==e&&v.g("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof w){var j=yk(e,e,function(a){return a instanceof Ig});j instanceof Ig&&(this.Za===m?this.Za=j:this.Za!==j&&v.g("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===xe&&"elements"===b&&(d===this.Za?this.Za=m:d instanceof w&&this.Za.Wh(d)&&(this.Za=
m));R.prototype.zl.call(this,a,b,c,d,e,g,i)};cf.prototype.updateAdornments=cf.prototype.$h=aa();cf.prototype.kl=aa();function U(a){0===arguments.length?R.call(this,Og):R.call(this,a);this.pd=new A(W);this.om=this.yp=this.wp=m;this.np=h;this.Tq=p;this.Mq=m;this.lo=this.op=h;this.mo=(new rb(2)).freeze();this.lc=this.lg=m}v.H("Node",U);v.na(U,R);U.prototype.fb=function(a){R.prototype.fb.call(this,a);a.wp=this.wp;a.yp=this.yp;a.np=this.np;a.Tq=this.Tq;a.Mq=this.Mq;a.op=this.op;a.lo=this.lo;a.mo.Pa(this.mo)};
U.prototype.Rg=function(a){R.prototype.Rg.call(this,a);a.kf();a.lg=this.lg;a.lc=m};var sl;U.DirectionDefault=sl=v.l(U,"DirectionDefault",0);U.DirectionAbsolute=v.l(U,"DirectionAbsolute",1);var tl;U.DirectionRotatedNode=tl=v.l(U,"DirectionRotatedNode",2);var Ni;U.DirectionRotatedNodeOrthogonal=Ni=v.l(U,"DirectionRotatedNodeOrthogonal",3);function ul(a,b){b!==m&&(a.lg==m&&(a.lg=new ka(vl)),a.lg.add(b))}
U.prototype.zl=function(a,b,c,d,e,g,i){a===we&&"elements"===b?this.lc=m:a===xe&&"elements"===b&&(this.b===m?this.lc=m:d instanceof Q&&xk(this,d,function(a,b){mj(a,b,h)}));R.prototype.zl.call(this,a,b,c,d,e,g,i)};U.prototype.invalidateConnectedLinks=U.prototype.kf=function(a){a===f&&(a=m);for(var b=this.ge;b.next();){var c=b.value;if(!(a!==m&&a.contains(c))){var d=c.Bc;d!==m&&(d.fd=m);var e=c.md;e!==m&&e!==d&&(e.fd=m);c.Nb()}}};
U.prototype.ek=function(){if(this.Ni===p)return h;var a=this.fe;return a===m?h:!a.Hc};v.a(U,"avoidable",U.prototype.yx);v.defineProperty(U,{yx:"avoidable"},s("lo"),function(a){var b=this.lo;if(b!==a){t&&v.e(a,"boolean",U,"avoidable");this.lo=a;var c=this.b;c!==m&&Ci(c,this);this.d("avoidable",b,a)}});v.a(U,"avoidableMargin",U.prototype.WA);
v.defineProperty(U,{WA:"avoidableMargin"},s("mo"),function(a){"number"===typeof a?a=new rb(a):v.c(a,rb,U,"avoidableMargin");var b=this.mo;if(!b.u(a)){this.mo=a=a.B();var c=this.b;c!==m&&Ci(c,this);this.d("avoidableMargin",b,a)}});U.prototype.canAvoid=U.prototype.hH=function(){return this.yx&&!this.Ni};U.prototype.getAvoidableRectangle=U.prototype.NI=function(a){a===f&&(a=new F);a.set(this.oa);a.sx(this.WA);return a};function jl(a){for(;a!==m&&!a.gb();)a=a.Ta;return a}v.m(U,{ge:"linksConnected"},function(){return this.pd.f});
U.prototype.findLinksConnected=U.prototype.Wx=function(a){a===f&&(a=m);if(a===m)return this.pd.f;t&&v.e(a,"string",U,"findLinksConnected:pid");var b=new Ia(this.pd),c=this;b.Ou=function(b){return b.da===c&&b.Vg===a||b.ga===c&&b.Zh===a};return b};U.prototype.findLinksOutOf=U.prototype.vu=function(a){a===f&&(a=m);var b=new Ia(this.pd),c=this;b.Ou=function(b){return b.da!==c?p:a===m?h:b.Vg===a};return b};
U.prototype.findLinksInto=U.prototype.hf=function(a){a===f&&(a=m);var b=new Ia(this.pd),c=this;b.Ou=function(b){return b.ga!==c?p:a===m?h:b.Zh===a};return b};
U.prototype.findNodesConnected=U.prototype.EB=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.pd.f;d.next();){var e=d.value;if(e.da===this){if(a===m||e.Vg===a)e=e.ga,b!==m?b.add(e):c!==m&&c!==e?(b=new ka(U),b.add(c),b.add(e)):c=e}else if(e.ga===this&&(a===m||e.Zh===a))e=e.da,b!==m?b.add(e):c!==m&&c!==e?(b=new ka(U),b.add(c),b.add(e)):c=e}return b!==m?b.f:c!==m?new Ha(c):v.Af};
U.prototype.findNodesOutOf=U.prototype.ln=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.pd.f;d.next();){var e=d.value;if(e.da===this&&(a===m||e.Vg===a))e=e.ga,b!==m?b.add(e):c!==m&&c!==e?(b=new ka(U),b.add(c),b.add(e)):c=e}return b!==m?b.f:c!==m?new Ha(c):v.Af};
U.prototype.findNodesInto=U.prototype.kn=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.pd.f;d.next();){var e=d.value;if(e.ga===this&&(a===m||e.Zh===a))e=e.da,b!==m?b.add(e):c!==m&&c!==e?(b=new ka(U),b.add(c),b.add(e)):c=e}return b!==m?b.f:c!==m?new Ha(c):v.Af};v.a(U,"linkConnected",U.prototype.kC);v.defineProperty(U,{kC:"linkConnected"},s("wp"),function(a){var b=this.wp;b!==a&&(a!==m&&v.e(a,"function",U,"linkConnected"),this.wp=a,this.d("linkConnected",b,a))});v.a(U,"linkDisconnected",U.prototype.lC);
v.defineProperty(U,{lC:"linkDisconnected"},s("yp"),function(a){var b=this.yp;b!==a&&(a!==m&&v.e(a,"function",U,"linkDisconnected"),this.yp=a,this.d("linkDisconnected",b,a))});function wl(a,b,c){if(!a.pd.contains(b)){a.pd.add(b);var d=a.kC;if(d!==m){var e=h,g=a.b;g!==m&&(e=g.wa,g.wa=h);d(a,b,c);g!==m&&(g.wa=e)}a.Pi&&(c=h,g=a.b,g!==m&&(c=g.nf),c?b.da===a&&(a.Pi=p):b.ga===a&&(a.Pi=p))}}
function xl(a,b,c){if(a.pd.remove(b)){var d=a.lC,e=a.b;if(d!==m){var g=h;e!==m&&(g=e.wa,e.wa=h);d(a,b,c);e!==m&&(e.wa=g)}!a.Pi&&!(e!==m&&e.ca.ab)&&(b=a.pd.count,0===b?a.Pi=h:1===b&&yi(a))}}function yi(a){if(0!==a.pd.count){var b=h,c=a.b;c!==m&&(b=c.nf);for(c=a.pd.f;c.next();){var d=c.value;if(b){if(d.da===a){a.Pi=p;return}}else if(d.ga===a){a.Pi=p;return}}a.Pi=h}}U.prototype.tr=function(){R.prototype.tr.call(this);yi(this);var a=this.om;a!==m&&yl(a,this)};
U.prototype.ur=function(){R.prototype.ur.call(this);var a=this.om;a!==m&&a.$e!==m&&(a.$e.remove(this),a.K())};U.prototype.kl=function(){if(0<this.pd.count){var a=this.b;if(a===m)return;for(var b=this.pd.copy().f;b.next();)a.remove(b.value)}R.prototype.kl.call(this)};v.m(U,{Ni:"isLinkLabel"},function(){return this.om!==m});v.a(U,"labeledLink",U.prototype.fe);
v.defineProperty(U,{fe:"labeledLink"},s("om"),function(a){var b=this.om;if(b!==a){t&&a!==m&&v.c(a,W,U,"labeledLink");var c=this.b,d=this.data;if(b!==m&&(b.$e!==m&&(b.$e.remove(this),b.K()),c!==m&&d!==m)){var e=b.data,g=c.I;if(e!==m&&g instanceof P){var i=g.Xb(d);i!==f&&g.qG(e,i)}}this.om=a;a!==m&&(yl(a,this),c!==m&&d!==m&&(e=a.data,g=c.I,e!==m&&g instanceof P&&(i=g.Xb(d),i!==f&&g.MA(e,i))));ej(this);this.d("labeledLink",b,a)}});
U.prototype.findPort=U.prototype.lr=function(a){t&&v.e(a,"string",U,"findPort:pid");this.lc===m&&wj(this);if(this.lc!==m){var b=this.lc.$(a);if(b!==m)return b}if(""!==a&&this.lc!==m&&(b=this.lc.$(""),b!==m))return b;this.lc===m&&wj(this);return this};v.m(U,{port:"port"},function(){return this.lr("")});v.m(U,{ports:"ports"},function(){this.lc===m&&wj(this);return this.lc!==m?this.lc.f:v.Af});function wj(a){a.lc!==m&&a.lc.clear();xk(a,a,function(a,c){zj(a,c)})}
function zj(a,b){var c=b.je;c!==m&&(a.lc===m&&(a.lc=new ja("string",Q)),a.lc.add(c,b))}function mj(a,b,c){var d=b.je;if(d!==m&&(a.lc!==m&&a.lc.remove(d),b=a.b,b!==m&&c)){c=m;for(a=a.Wx(d);a.next();)c===m&&(c=[]),c.push(a.value);if(c!==m)for(a=0;a<c.length;a++)b.remove(c[a])}}
U.prototype.isInTreeOf=U.prototype.lJ=function(a){if(a===m||a===this)return p;var b=h,c=this.b;c!==m&&(b=c.nf);if(b)a:{for(b=this;b!==a;){for(var c=m,d=b.hf();d.next()&&!(c=d.value.da,c!==b););if(c===m){a=p;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=m;for(d=b.vu();d.next()&&!(c=d.value.ga,c!==b););if(c===m){a=p;break a}b=c}a=h}return a};U.prototype.findTreeParts=U.prototype.LI=function(){var a=new ka(R);bf(a,this,p,h);return a};
U.prototype.collapseTree=U.prototype.cr=function(){var a=this.b;if(a!==m&&!a.mf){a.mf=h;var b=a.nf,c=new ka(U);c.add(this);zl(this,c,b);a.mf=p}};function zl(a,b,c){a.Pd=p;for(var d=c?a.vu():a.hf();d.next();){var e=d.value,g=e.NB(a);g!==m&&(g!==a&&!b.contains(g))&&(b.add(g),aj(e),e.Pg(),aj(g),g.Pg(),Zi(g),g.r(jj),g.Pd&&(g.fv=g.Pd,zl(g,b,c)))}}U.prototype.expandTree=U.prototype.jr=function(){var a=this.b;if(a!==m&&!a.mf){a.mf=h;var b=a.nf,c=new ka(U);c.add(this);Al(this,c,b);a.mf=p}};
function Al(a,b,c){a.Pd=h;for(var d=c?a.vu():a.hf();d.next();){var e=d.value,g=e.NB(a);g!==m&&(g!==a&&!b.contains(g))&&(b.add(g),aj(e),e.$h(),aj(g),g.$h(),Zi(g),g.r(ij),g.fv&&(g.fv=p,Al(g,b,c)))}}v.a(U,"isTreeExpanded",U.prototype.Pd);
v.defineProperty(U,{Pd:"isTreeExpanded"},s("np"),function(a){var b=this.np;if(b!==a){t&&v.e(a,"boolean",U,"isTreeExpanded");this.np=a;var c=this.b;c!==m&&ph(c);this.d("isTreeExpanded",b,a);b=this.AD;if(b!==m){var d=h;c!==m&&(d=c.wa,c.wa=h);b(this);c!==m&&(c.wa=d)}c!==m&&c.ca.ab||(a?this.jr():this.cr())}});v.a(U,"wasTreeExpanded",U.prototype.fv);
v.defineProperty(U,{fv:"wasTreeExpanded"},s("Tq"),function(a){var b=this.Tq;b!==a&&(t&&v.e(a,"boolean",U,"wasTreeExpanded"),this.Tq=a,this.d("wasTreeExpanded",b,a))});v.a(U,"treeExpandedChanged",U.prototype.AD);v.defineProperty(U,{AD:"treeExpandedChanged"},s("Mq"),function(a){var b=this.Mq;b!==a&&(a!==m&&v.e(a,"function",U,"treeExpandedChanged"),this.Mq=a,this.d("treeExpandedChanged",b,a))});v.a(U,"isTreeLeaf",U.prototype.Pi);
v.defineProperty(U,{Pi:"isTreeLeaf"},s("op"),function(a){var b=this.op;b!==a&&(t&&v.e(a,"boolean",U,"isTreeLeaf"),this.op=a,this.d("isTreeLeaf",b,a))});
function W(){R.call(this,ng);this.qg=m;this.gi="";this.Vo=m;this.sg=Wb;this.pg=NaN;this.og=sl;this.rg=NaN;this.Jg=m;this.xi="";this.Lq=m;this.Lg=Wb;this.Ig=NaN;this.Hg=sl;this.Kg=NaN;this.bq=this.aq=p;this.fo=Oi;this.to=0;this.vo=Oi;this.wo=NaN;this.ti=Nj;this.yq=0.5;this.cc=this.$e=m;this.Ac=(new A(E)).freeze();this.Vf=m;this.Zk=p;this.Pw=m;this.Jm=p;this.wk=this.oh=this.va=m;this.Cd=0;this.ih=new A(F);this.St=new E;this.Sv=p}v.H("Link",W);v.na(W,R);
W.prototype.fb=function(a){R.prototype.fb.call(this,a);a.gi=this.gi;a.Vo=this.Vo;a.sg=this.sg.B();a.pg=this.pg;a.og=this.og;a.rg=this.rg;a.xi=this.xi;a.Lq=this.Lq;a.Lg=this.Lg.B();a.Ig=this.Ig;a.Hg=this.Hg;a.Kg=this.Kg;a.aq=this.aq;a.bq=this.bq;a.fo=this.fo;a.to=this.to;a.vo=this.vo;a.wo=this.wo;a.ti=this.ti;a.yq=this.yq};W.prototype.Rg=function(a){R.prototype.Rg.call(this,a);a.cc=m;a.Vf=m;a.Nb();a.wk=this.wk;a.Cd=this.Cd};var Nj;W.Normal=Nj=v.l(W,"Normal",1);var oh;
W.Orthogonal=oh=v.l(W,"Orthogonal",2);var If;W.AvoidsNodes=If=v.l(W,"AvoidsNodes",3);var Oi;W.None=Oi=v.l(W,"None",0);var Hj;W.Bezier=Hj=v.l(W,"Bezier",9);var Ij;W.JumpGap=Ij=v.l(W,"JumpGap",10);var Jj;W.JumpOver=Jj=v.l(W,"JumpOver",11);var Kj;W.End=Kj=v.l(W,"End",17);var Lj;W.Scale=Lj=v.l(W,"Scale",18);var Mj;W.Stretch=Mj=v.l(W,"Stretch",19);var Ik;W.OrientAlong=Ik=v.l(W,"OrientAlong",21);var Bl;W.OrientPlus90=Bl=v.l(W,"OrientPlus90",22);var Cl;W.OrientMinus90=Cl=v.l(W,"OrientMinus90",23);var Dl;
W.OrientOpposite=Dl=v.l(W,"OrientOpposite",24);var El;W.OrientUpright=El=v.l(W,"OrientUpright",25);var Fl;W.OrientPlus90Upright=Fl=v.l(W,"OrientPlus90Upright",26);var Gl;W.OrientMinus90Upright=Gl=v.l(W,"OrientMinus90Upright",27);var Hl;W.OrientUpright45=Hl=v.l(W,"OrientUpright45",28);W.prototype.ek=function(){var a=this.da;if(a!==m&&(a.Hc||a.ii))return p;a=this.ga;return a!==m&&(a.Hc||a.ii)?p:h};
function wk(a,b){var c;switch(a){default:case Oi:c=0;break;case Ik:c=b;break;case Bl:c=b+90;break;case Cl:c=b-90;break;case Dl:c=b+180;break;case El:c=ld(b);90<c&&270>c&&(c-=180);break;case Fl:c=ld(b+90);90<c&&270>c&&(c-=180);break;case Gl:c=ld(b-90);90<c&&270>c&&(c-=180);break;case Hl:c=ld(b);if(45<c&&135>c||225<c&&315>c)return 0;90<c&&270>c&&(c-=180)}return ld(c)}v.a(W,"fromNode",W.prototype.da);
v.defineProperty(W,{da:"fromNode"},s("qg"),function(a){var b=this.qg;if(b!==a){t&&a!==m&&v.c(a,U,W,"fromNode");var c=this.Bc;b!==m&&(this.Jg!==b&&xl(b,this,c),c!==m&&(c.fd=m),Il(this),b.r(si));this.qg=a;this.oh=m;this.Nb();var d=this.b;if(d!==m){var e=this.data,g=d.I;e!==m&&g instanceof P&&g.Xu(e,g.Xb(a!==m?a.data:m))}e=this.Bc;g=this.$x;if(g!==m){var i=h;d!==m&&(i=d.wa,d.wa=h);g(this,c,e);d!==m&&(d.wa=i)}a!==m&&(this.Jg!==a&&wl(a,this,e),e!==m&&(e.fd=m),Jl(this),a.r(ni));this.d("fromNode",b,a);ui(this)}});
v.a(W,"fromPortId",W.prototype.Vg);v.defineProperty(W,{Vg:"fromPortId"},s("gi"),function(a){var b=this.gi;if(b!==a){t&&v.e(a,"string",W,"fromPortId");var c=this.Bc;c!==m&&(c.fd=m);Il(this);this.gi=a;var d=this.Bc;d!==m&&(d.fd=m);var e=this.b;if(e!==m){var g=this.data,i=e.I;g!==m&&i instanceof P&&i.Sr(g,a)}c!==d&&(this.oh=m,this.Nb(),g=this.$x,g!==m&&(i=h,e!==m&&(i=e.wa,e.wa=h),g(this,c,d),e!==m&&(e.wa=i)));Jl(this);this.d("fromPortId",b,a)}});
v.m(W,{Bc:"fromPort"},function(){var a=this.qg;return a===m?m:a.lr(this.gi)});v.a(W,"fromPortChanged",W.prototype.$x);v.defineProperty(W,{$x:"fromPortChanged"},s("Vo"),function(a){var b=this.Vo;b!==a&&(a!==m&&v.e(a,"function",W,"fromPortChanged"),this.Vo=a,this.d("fromPortChanged",b,a))});v.a(W,"toNode",W.prototype.ga);
v.defineProperty(W,{ga:"toNode"},s("Jg"),function(a){var b=this.Jg;if(b!==a){t&&a!==m&&v.c(a,U,W,"toNode");var c=this.md;b!==m&&(this.qg!==b&&xl(b,this,c),c!==m&&(c.fd=m),Il(this),b.r(si));this.Jg=a;this.oh=m;this.Nb();var d=this.b;if(d!==m){var e=this.data,g=d.I;e!==m&&g instanceof P&&g.Yu(e,g.Xb(a!==m?a.data:m))}e=this.md;g=this.Yy;if(g!==m){var i=h;d!==m&&(i=d.wa,d.wa=h);g(this,c,e);d!==m&&(d.wa=i)}a!==m&&(this.qg!==a&&wl(a,this,e),e!==m&&(e.fd=m),Jl(this),a.r(ni));this.d("toNode",b,a);ui(this)}});
v.a(W,"toPortId",W.prototype.Zh);v.defineProperty(W,{Zh:"toPortId"},s("xi"),function(a){var b=this.xi;if(b!==a){t&&v.e(a,"string",W,"toPortId");var c=this.md;c!==m&&(c.fd=m);Il(this);this.xi=a;var d=this.md;d!==m&&(d.fd=m);var e=this.b;if(e!==m){var g=this.data,i=e.I;g!==m&&i instanceof P&&i.Ur(g,a)}c!==d&&(this.oh=m,this.Nb(),g=this.Yy,g!==m&&(i=h,e!==m&&(i=e.wa,e.wa=h),g(this,c,d),e!==m&&(e.wa=i)));Jl(this);this.d("toPortId",b,a)}});v.m(W,{md:"toPort"},function(){var a=this.Jg;return a===m?m:a.lr(this.xi)});
v.a(W,"toPortChanged",W.prototype.Yy);v.defineProperty(W,{Yy:"toPortChanged"},s("Lq"),function(a){var b=this.Lq;b!==a&&(a!==m&&v.e(a,"function",W,"toPortChanged"),this.Lq=a,this.d("toPortChanged",b,a))});v.a(W,"fromSpot",W.prototype.Va);v.defineProperty(W,{Va:"fromSpot"},s("sg"),function(a){var b=this.sg;b.u(a)||(t&&v.c(a,K,W,"fromSpot"),this.sg=a=a.B(),this.d("fromSpot",b,a),this.Nb())});v.a(W,"fromEndSegmentLength",W.prototype.ck);
v.defineProperty(W,{ck:"fromEndSegmentLength"},s("pg"),function(a){var b=this.pg;b!==a&&(t&&v.e(a,"number",W,"fromEndSegmentLength"),0>a&&v.ha(a,">= 0",W,"fromEndSegmentLength"),this.pg=a,this.d("fromEndSegmentLength",b,a),this.Nb())});v.a(W,"fromEndSegmentDirection",W.prototype.nr);v.defineProperty(W,{nr:"fromEndSegmentDirection"},s("og"),function(a){var b=this.og;b!==a&&(t&&v.Sa(a,U,W,"fromEndSegmentDirection"),this.og=a,this.d("fromEndSegmentDirection",b,a),this.Nb())});
v.a(W,"fromShortLength",W.prototype.or);v.defineProperty(W,{or:"fromShortLength"},s("rg"),function(a){var b=this.rg;b!==a&&(t&&v.e(a,"number",W,"fromShortLength"),this.rg=a,this.d("fromShortLength",b,a),this.Nb())});v.a(W,"toSpot",W.prototype.Xa);v.defineProperty(W,{Xa:"toSpot"},s("Lg"),function(a){var b=this.Lg;b.u(a)||(t&&v.c(a,K,W,"toSpot"),this.Lg=a=a.B(),this.d("toSpot",b,a),this.Nb())});v.a(W,"toEndSegmentLength",W.prototype.lk);
v.defineProperty(W,{lk:"toEndSegmentLength"},s("Ig"),function(a){var b=this.Ig;b!==a&&(t&&v.e(a,"number",W,"toEndSegmentLength"),0>a&&v.ha(a,">= 0",W,"toEndSegmentLength"),this.Ig=a,this.d("toEndSegmentLength",b,a),this.Nb())});v.a(W,"toEndSegmentDirection",W.prototype.Zr);v.defineProperty(W,{Zr:"toEndSegmentDirection"},s("Hg"),function(a){var b=this.Hg;b!==a&&(t&&v.Sa(a,U,W,"toEndSegmentDirection"),this.Hg=a,this.d("toEndSegmentDirection",b,a),this.Nb())});v.a(W,"toShortLength",W.prototype.$r);
v.defineProperty(W,{$r:"toShortLength"},s("Kg"),function(a){var b=this.Kg;b!==a&&(t&&v.e(a,"number",W,"toShortLength"),this.Kg=a,this.d("toShortLength",b,a),this.Nb())});function ui(a){var b=a.da,c=a.ga;b!==m&&c!==m?ol(a,b.rF(c)):ol(a,m)}W.prototype.getOtherNode=W.prototype.NB=function(a){t&&v.c(a,U,W,"getOtherNode:node");var b=this.da;return a===b?this.ga:b};W.prototype.getOtherPort=W.prototype.QI=function(a){t&&v.c(a,Q,W,"getOtherPort:port");var b=this.Bc;return a===b?this.md:b};
v.m(W,{Xh:"labelNodes"},function(){return this.$e===m?v.Af:this.$e.f});function yl(a,b){a.$e===m&&(a.$e=new ka(U));a.$e.add(b);a.K()}W.prototype.tr=function(){R.prototype.tr.call(this);var a=this.qg,b=this.Jg;if(a!==m){var c=this.Bc;c!==m&&(c.fd=m);wl(a,this,c);Jl(this)}b!==m&&(c=this.md,c!==m&&(c.fd=m),wl(b,this,c),Jl(this))};
W.prototype.ur=function(){R.prototype.ur.call(this);var a=this.qg,b=this.Jg;if(a!==m){var c=this.Bc;c!==m&&(c.fd=m);xl(a,this,c);Il(this)}b!==m&&(c=this.md,c!==m&&(c.fd=m),xl(b,this,c),Il(this))};W.prototype.kl=function(){if(this.$e!==m){var a=this.b;if(a===m)return;for(var b=this.$e.copy().f;b.next();)a.remove(b.value)}b=this.data;b!==m&&(a=this.b,a!==m&&(a=a.I,a instanceof P&&a.rG(b)))};
W.prototype.move=W.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;R.prototype.move.call(this,a);this.gk(c,b);for(a=this.Xh;a.next();){var d=a.value,e=d.position;d.move(new E(e.x+c,e.y+b))}};v.a(W,"relinkableFrom",W.prototype.KC);v.defineProperty(W,{KC:"relinkableFrom"},s("aq"),function(a){var b=this.aq;b!==a&&(t&&v.e(a,"boolean",W,"relinkableFrom"),this.aq=a,this.d("relinkableFrom",b,a))});v.a(W,"relinkableTo",W.prototype.LC);
v.defineProperty(W,{LC:"relinkableTo"},s("bq"),function(a){var b=this.bq;b!==a&&(t&&v.e(a,"boolean",W,"relinkableTo"),this.bq=a,this.d("relinkableTo",b,a))});W.prototype.canRelinkFrom=W.prototype.zH=function(){if(!this.KC)return p;var a=this.sa;if(a!==m&&!a.zi)return p;a=a.b;return a!==m&&!a.zi?p:h};W.prototype.canRelinkTo=W.prototype.AH=function(){if(!this.LC)return p;var a=this.sa;if(a!==m&&!a.zi)return p;a=a.b;return a!==m&&!a.zi?p:h};
v.m(W,{path:"path"},function(){var a=this.cc;if(a!==m)return a;a=this.xa;a=pk(this,a,a.length);return a instanceof X?this.cc=a:m});W.prototype.Xo=s("path");W.prototype.jw=s("Ac");W.prototype.rj=function(){Kl(this);var a=this.$d();return this.Pw=a};
W.prototype.$d=function(){var a=Infinity,b=Infinity,c=this.Y,d;if(0===c)return new F(NaN,NaN,0,0);if(1===c)c=this.h(0),a=Math.min(c.x,a),b=Math.min(c.y,b),d=new F(c.x,c.y,0,0);else if(2===c){d=this.h(0);var e=this.h(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new F(d,e)}else if(Ll(this)===Hj&&4<=c&&!ug(this)){d=this.h(0);var a=Math.min(d.x,a),b=Math.min(d.y,b),e=d.x,g=d.y,i=d.x,j=d.y,k,l,n,r;d=new F(e,g,0,0);for(var q=3;q<c;q+=3)k=this.h(q-3),l=this.h(q-2),q+3>=c&&(q=c-1),n=this.h(q-1),r=this.h(q),
Vc(k.x,k.y,l.x,l.y,n.x,n.y,r.x,r.y,0.5,d),e=Math.min(e,d.x),g=Math.min(g,d.y),i=Math.max(i,d.x+d.width),j=Math.max(j,d.y+d.height),a=Math.min(r.x,a),b=Math.min(r.y,b)}else{d=this.h(0);e=this.h(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new F(d,e);for(q=2;q<c;q++)e=this.h(q),a=Math.min(e.x,a),b=Math.min(e.y,b),d.cv(e)}this.St.Xd(a-d.x,b-d.y);return d};v.m(W,{vC:"midPoint"},function(){Kl(this);return Ml(this)});
function Ml(a){var b=a.Y;if(0===b)return Nc;if(1===b)return a.h(0);if(2===b){var c=a.h(0),d=a.h(1);return new E((c.x+d.x)/2,(c.y+d.y)/2)}if(Ll(a)===Hj&&3<=b&&!ug(a)){if(3===b)return a.h(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=a.h(e),d=a.h(e+1),g=a.h(e+2),a=a.h(e+3),e=new E,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.h(e)}e=0;g=[];for(i=0;i<b-1;i++)c=a.h(i),d=a.h(i+1),Ta(c.x,d.x)?(c=d.y-
c.y,0>c&&(c=-c)):Ta(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Gi(d)),g.push(c),e+=c;for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c+=d;i++}b=a.h(i);a=a.h(i+1);if(b.x===a.x)return b.y>a.y?new E(b.x,b.y-(e/2-c)):new E(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new E(b.x-(e/2-c),b.y):new E(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new E(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}v.m(W,{uC:"midAngle"},function(){Kl(this);return Nl(this)});
function Nl(a){var b=a.Y;if(2>b)return NaN;if(Ll(a)===Hj&&4<=b&&!ug(a)){var c=(b-1)/3|0,d=3*(c/2|0);if(1===c%2){var d=Math.floor(d),b=a.h(d),e=a.h(d+1),c=a.h(d+2),a=a.h(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return eb(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(0<d&&d+1<b)return b=a.h(d-1),e=a.h(d+1),b.Ph(e)}c=b/2|0;if(0===b%2)return b=a.h(c-1),e=a.h(c),b.Ph(e);b=a.h(c-1);e=a.h(c);c=a.h(c+1);a=b.Gi(e);d=e.Gi(c);return a>d?b.Ph(e):e.Ph(c)}v.a(W,"points",W.prototype.ib);
v.defineProperty(W,{ib:"points"},s("Ac"),function(a){t&&v.c(a,A,W,"points");var b=this.Ac;if(b!==a&&a!==m){for(var c=a.f;c.next();){var d=c.value;d.freeze()}a.freeze();this.Ac=a.copy();this.lf();Ol(this);for(var c=a.count,e=new A,g=0;g<c;g++)d=a.j[g],e.add(d.copy());this.d("points",b,e)}});v.m(W,{Y:"pointsCount"},function(){return this.Ac.count});W.prototype.getPoint=W.prototype.h=function(a){return this.Ac.j[a]};
W.prototype.setPoint=W.prototype.w=function(a,b){t&&(v.c(b,E,W,"setPoint"),b.W()||v.g("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));this.Vf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Ac.Wu(a,b)};
W.prototype.insertPoint=W.prototype.q=function(a,b){t&&(v.c(b,E,W,"insertPoint"),b.W()||v.g("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));this.Vf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Ac.gc(a,b)};
W.prototype.addPoint=W.prototype.Wc=function(a){t&&(v.c(a,E,W,"addPoint"),a.W()||v.g("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));this.Vf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Ac.add(a)};W.prototype.removePoint=W.prototype.PC=function(a){this.Vf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Ac.Se(a)};
W.prototype.clearPoints=W.prototype.bn=function(){this.Vf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Ac.clear()};W.prototype.movePoints=W.prototype.gk=function(a,b){for(var c=new A(E),d=this.Ac.f;d.next();){var e=d.value;c.add(new E(e.x+a,e.y+b))}this.ib=c};W.prototype.startRoute=W.prototype.kk=function(){if(this.Vf===m){for(var a=new A(E),b=this.Ac.f;b.next();)a.add(b.value.B());this.Vf=a;this.Ac.ta()}};
W.prototype.commitRoute=W.prototype.Nh=function(){if(this.Vf!==m){for(var a=this.Vf,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.j[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.Ac,l=k.count,e=0;e<l;e++)g=k.j[e],i=Math.min(g.x,i),j=Math.min(g.y,j);if(l===d)for(e=0;e<l;e++)if(g=a.j[e],d=k.j[e],g.x-b!==d.x-i||g.y-c!==d.y-j){this.lf();break}this.Vf=m;this.Ac.freeze();Ol(this);b=new A(E);for(e=0;e<l;e++)g=k.j[e],b.add(g.copy());this.d("points",a,b)}};
W.prototype.rollbackRoute=W.prototype.vG=function(){this.Vf=m};function Ol(a){0===a.Ac.count?a.Zk=p:(a.Zk=h,Pl(a,p))}W.prototype.invalidateRoute=W.prototype.Nb=function(){if(!this.Jm&&(!this.b||!this.b.ca.ab)&&this.gb()){this.Zk=p;this.lf();var a=this.Xo();a!==m&&a.K()}};
function Kl(a){if(!a.Zk&&!a.Sv){var b=h;try{a.Sv=h;a.kk();var c=a.da,d=m,d=c===m?m:a.Bc;if(d!==m){var e=Aj(d);if(e===c||!c.gb()){var g=jl(c);g!==m&&g!==c?(c=g,d=g.lr("")):c=g}else d=e}if(c===m||d===m||!c.location.W())b=p;else{var i=a.ga,e=m,e=i===m?m:a.md;if(e!==m){var j=Aj(e);if(j===i||!i.gb()){var k=jl(i);k!==m&&k!==i?(i=k,e=k.lr("")):i=k}else e=j}if(i===m||e===m||!i.location.W())b=p;else{var l=a.Y,n=Ql(a,d),r=Rl(a,e),j=d===e,q=ug(a),u=a.He===Hj;j&&!q?(u=h,a.oh=h):a.oh=p;var x=a.au===Oi||j;if(!q&&
n===Ub&&r===Ub&&!j){r=p;if(!x&&3<=l)var B=a.Nd(c,d,Ub,h,p,i,e),G=a.Nd(i,e,Ub,p,p,c,d),r=Sl(a,0,B,l-1,G);if(!r)if(a.bn(),u){var r=c,q=d,I=e,y=a.Nd(r,q,Ub,h,p,i,I),J=a.Nd(i,I,Ub,p,p,r,q),z=J.x-y.x,H=J.y-y.y,fa=Tl(a),S=0,T=0,ga=y.x+z/3,na=y.y+H/3,ra=ga,Da=na;Va(H,0)?Da=0<z?Da-fa:Da+fa:(S=-z/H,T=Math.sqrt(fa*fa/(S*S+1)),0>fa&&(T=-T),ra=(0>H?-1:1)*T+ga,Da=S*(ra-ga)+na);var ga=y.x+2*z/3,na=y.y+2*H/3,Wa=ga,fb=na;Va(H,0)?fb=0<z?fb-fa:fb+fa:(Wa=(0>H?-1:1)*T+ga,fb=S*(Wa-ga)+na);a.bn();a.Wc(y);a.Wc(new E(ra,
Da));a.Wc(new E(Wa,fb));a.Wc(J);a.w(0,a.Nd(r,q,Ub,h,p,i,I));a.w(3,a.Nd(i,I,Ub,p,p,r,q))}else{var r=c,q=d,I=e,ab=a.Nd(r,q,Ub,h,p,i,I),Pa=a.Nd(i,I,Ub,p,p,r,q);if(!isNaN(a.lu)||0!==a.Cd&&!ug(a)){var gb=Pa.x-ab.x,bb=Pa.y-ab.y,Zb=Tl(a),Xc=ab.x+gb/2,Xa=ab.y+bb/2,i=Xc,r=Xa;if(Va(bb,0))r=0<gb?r-Zb:r+Zb;else{var q=-gb/bb,Fc=Math.sqrt(Zb*Zb/(q*q+1));0>Zb&&(Fc=-Fc);i=(0>bb?-1:1)*Fc+Xc;r=q*(i-Xc)+Xa}a.Wc(ab);a.Wc(new E(i,r))}else a.Wc(ab);a.Wc(Pa)}}else{var Dd=a.Te===If;x&&(q&&Dd||j)&&a.bn();var rc=Tl(a),Vb=
a.Nd(c,d,n,h,q,i,e),J=H=z=0;if(q||n!==Ub||j){var hc=Ul(a,d,n,h),J=Vl(a,c,d,Vb,n,h,q,e);j&&(J-=q?90:30,0>rc&&(J-=180));0>J?J+=360:360<=J&&(J-=360);j&&(hc+=Math.abs(rc));0===J?z=hc:90===J?H=hc:180===J?z=-hc:270===J?H=-hc:(z=hc*Math.cos(J*Math.PI/180),H=hc*Math.sin(J*Math.PI/180));if(Sb(n)&&j)var Gc=d.ub(ec),Vb=a.ay(c,d,Gc,new E(Gc.x+1E3*z,Gc.y+1E3*H),h)}I=a.Nd(i,e,r,p,q,c,d);y=ga=fa=0;if(q||r!==Ub||j){var Hb=Ul(a,e,r,p),y=Vl(a,i,e,I,r,p,q,d);j&&(y+=q?0:30,0>rc&&(y+=180));0>y?y+=360:360<=y&&(y-=360);
j&&(Hb+=Math.abs(rc));0===y?fa=Hb:90===y?ga=Hb:180===y?fa=-Hb:270===y?ga=-Hb:(fa=Hb*Math.cos(y*Math.PI/180),ga=Hb*Math.sin(y*Math.PI/180));Sb(r)&&j&&(Gc=e.ub(ec),I=a.ay(i,e,Gc,new E(Gc.x+1E3*fa,Gc.y+1E3*ga),p))}na=Vb;if(q||n!==Ub||j)na=new E(Vb.x+z,Vb.y+H);e=I;if(q||r!==Ub||j)e=new E(I.x+fa,I.y+ga);if(x||q||!Sb(n)||!(3<l&&Sl(a,0,Vb,l-2,e)))if(!x&&!q&&Sb(r)&&3<l&&Sl(a,1,na,l-1,I))a.w(0,Vb);else if(!x&&!q&&4<l&&Sl(a,1,na,l-2,e))a.w(0,Vb),a.w(l-1,I);else if(!x&&q&&6<=l&&!Dd&&Sl(a,1,na,l-2,e))a.w(0,Vb),
a.w(l-1,I);else{a.bn();a.Wc(Vb);(q||n!==Ub||j)&&a.Wc(na);if(q)b:if(z=na,H=e,J=-45<=J&&45>J?0:45<=J&&135>J?90:135<=J&&225>J?180:270,y=-45<=y&&45>y?0:45<=y&&135>y?90:135<=y&&225>y?180:270,S=c.oa.copy(),T=i.oa.copy(),S.W()&&T.W()){S.jf(8,8);T.jf(8,8);S.cv(z);T.cv(H);ra=a.b;if(a.Te===If&&ra!==m&&!S.ea(H)&&!T.ea(z)&&c!==i&&!a.sa.Zc){ra.Jc===m&&(ra.Jc=new Wl);i=m;ra.Jc.tn||(i=a!==m?a.Ta:m);if(ra.Jc.tn||ra.Jc.group!==i){if(i===m){ra.xj&&ei(ra,ra.$d());Wa=ra.sc.copy();Wa.jf(100,100);Xl(ra.Jc,Wa);for(fb=ra.hk;fb.next();){var Ib=
fb.value,Jb=Ib.sa;Jb===m||(!Jb.visible||Jb.Zc)||Ai(ra,Ib)}}else{var De=i.oa.copy();De.jf(20,20);Xl(ra.Jc,De);for(var Oc=i.hc;Oc.next();){var od=Oc.value;od instanceof U&&Ai(ra,od)}}ra.Jc.group=i;ra.Jc.tn=p}else Yl(ra.Jc);var Da=ra.Jc,Hc=S.copy().ok(T);Hc.jf(2*Da.el,2*Da.dl);Zl(Da,z,J,H,y,Hc);var xc=$l(Da,H.x,H.y);if(!Da.abort&&xc===am){Yl(Da);var fd=Da.iD;Hc.jf(Da.el*fd,Da.dl*fd);Zl(Da,z,J,H,y,Hc);xc=$l(Da,H.x,H.y)}!Da.abort&&xc===am&&(Yl(Da),fd=Da.hC,Hc.jf(Da.el*fd,Da.dl*fd),Zl(Da,z,J,H,y,Hc),xc=
$l(Da,H.x,H.y));!Da.abort&&(xc===am&&Da.GD)&&(Yl(Da),Zl(Da,z,J,H,y,Da.hb),xc=$l(Da,H.x,H.y));if(!Da.abort&&xc<am&&0!==$l(Da,H.x,H.y)){bm(a,Da,H.x,H.y,y,h);var sb=a.h(2);if(4>a.Y)0===J||180===J?(sb.x=z.x,sb.y=H.y):(sb.x=H.x,sb.y=z.y),a.w(2,sb),a.q(3,sb);else{var yc=a.h(3);if(0===J||180===J)if(Va(sb.x,yc.x)){var Ed=0===J?Math.max(sb.x,z.x):Math.min(sb.x,z.x);a.w(2,new E(Ed,z.y));a.w(3,new E(Ed,yc.y))}else Va(sb.y,yc.y)?(Math.abs(z.y-sb.y)<=Da.dl/2&&(a.w(2,new E(sb.x,z.y)),a.w(3,new E(yc.x,z.y))),a.q(2,
new E(sb.x,z.y))):a.w(2,new E(z.x,sb.y));else if(90===J||270===J)if(Va(sb.y,yc.y)){var Fd=90===J?Math.max(sb.y,z.y):Math.min(sb.y,z.y);a.w(2,new E(z.x,Fd));a.w(3,new E(yc.x,Fd))}else Va(sb.x,yc.x)?(Math.abs(z.x-sb.x)<=Da.el/2&&(a.w(2,new E(z.x,sb.y)),a.w(3,new E(z.x,yc.y))),a.q(2,new E(z.x,sb.y))):a.w(2,new E(sb.x,z.y))}break b}}var sa,Fa;if(0===J)if(H.x>z.x||270===y&&H.y<z.y&&T.right>z.x||90===y&&H.y>z.y&&T.right>z.x)sa=new E(H.x,z.y),Fa=new E(H.x,(z.y+H.y)/2),180===y?(sa.x=cm(a,z.x,H.x),Fa.x=sa.x,
Fa.y=H.y):270===y&&H.y<z.y||90===y&&H.y>z.y?(sa.x=z.x<T.left?cm(a,z.x,T.left):z.x<T.right&&(270===y&&z.y<T.top||90===y&&z.y>T.bottom)?cm(a,z.x,H.x):T.right,Fa.x=sa.x,Fa.y=H.y):0===y&&(z.x<T.left&&z.y>T.top&&z.y<T.bottom)&&(sa.x=z.x,sa.y=z.y<H.y?Math.min(H.y,T.top):Math.max(H.y,T.bottom),Fa.y=sa.y);else{sa=new E(z.x,H.y);Fa=new E((z.x+H.x)/2,H.y);if(180===y||90===y&&H.y<S.top||270===y&&H.y>S.bottom){if(180===y&&(T.ea(z)||S.ea(H)))sa.y=cm(a,z.y,H.y);else if(H.y<z.y&&(180===y||90===y))sa.y=cm(a,S.top,
Math.max(H.y,T.bottom));else if(H.y>z.y&&(180===y||270===y))sa.y=cm(a,S.bottom,Math.min(H.y,T.top));Fa.x=H.x;Fa.y=sa.y}if(sa.y>S.top&&sa.y<S.bottom)if(H.x>=S.left&&H.x<=z.x||z.x<=T.right&&z.x>=H.x){if(90===y||270===y)sa=new E(Math.max((z.x+H.x)/2,z.x),z.y),Fa=new E(sa.x,H.y)}else sa.y=270===y||(0===y||180===y)&&H.y<z.y?Math.min(H.y,0===y?S.top:Math.min(S.top,T.top)):Math.max(H.y,0===y?S.bottom:Math.max(S.bottom,T.bottom)),Fa.x=H.x,Fa.y=sa.y}else if(180===J)if(H.x<z.x||270===y&&H.y<z.y&&T.left<z.x||
90===y&&H.y>z.y&&T.left<z.x)sa=new E(H.x,z.y),Fa=new E(H.x,(z.y+H.y)/2),0===y?(sa.x=cm(a,z.x,H.x),Fa.x=sa.x,Fa.y=H.y):270===y&&H.y<z.y||90===y&&H.y>z.y?(sa.x=z.x>T.right?cm(a,z.x,T.right):z.x>T.left&&(270===y&&z.y<T.top||90===y&&z.y>T.bottom)?cm(a,z.x,H.x):T.left,Fa.x=sa.x,Fa.y=H.y):180===y&&(z.x>T.right&&z.y>T.top&&z.y<T.bottom)&&(sa.x=z.x,sa.y=z.y<H.y?Math.min(H.y,T.top):Math.max(H.y,T.bottom),Fa.y=sa.y);else{sa=new E(z.x,H.y);Fa=new E((z.x+H.x)/2,H.y);if(0===y||90===y&&H.y<S.top||270===y&&H.y>
S.bottom){if(0===y&&(T.ea(z)||S.ea(H)))sa.y=cm(a,z.y,H.y);else if(H.y<z.y&&(0===y||90===y))sa.y=cm(a,S.top,Math.max(H.y,T.bottom));else if(H.y>z.y&&(0===y||270===y))sa.y=cm(a,S.bottom,Math.min(H.y,T.top));Fa.x=H.x;Fa.y=sa.y}if(sa.y>S.top&&sa.y<S.bottom)if(H.x<=S.right&&H.x>=z.x||z.x>=T.left&&z.x<=H.x){if(90===y||270===y)sa=new E(Math.min((z.x+H.x)/2,z.x),z.y),Fa=new E(sa.x,H.y)}else sa.y=270===y||(0===y||180===y)&&H.y<z.y?Math.min(H.y,180===y?S.top:Math.min(S.top,T.top)):Math.max(H.y,180===y?S.bottom:
Math.max(S.bottom,T.bottom)),Fa.x=H.x,Fa.y=sa.y}else if(90===J)if(H.y>z.y||180===y&&H.x<z.x&&T.bottom>z.y||0===y&&H.x>z.x&&T.bottom>z.y)sa=new E(z.x,H.y),Fa=new E((z.x+H.x)/2,H.y),270===y?(sa.y=cm(a,z.y,H.y),Fa.x=H.x,Fa.y=sa.y):180===y&&H.x<z.x||0===y&&H.x>z.x?(sa.y=z.y<T.top?cm(a,z.y,T.top):z.y<T.bottom&&(180===y&&z.x<T.left||0===y&&z.x>T.right)?cm(a,z.y,H.y):T.bottom,Fa.x=H.x,Fa.y=sa.y):90===y&&(z.y<T.top&&z.x>T.left&&z.x<T.right)&&(sa.x=z.x<H.x?Math.min(H.x,T.left):Math.max(H.x,T.right),sa.y=z.y,
Fa.x=sa.x);else{sa=new E(H.x,z.y);Fa=new E(H.x,(z.y+H.y)/2);if(270===y||0===y&&H.x<S.left||180===y&&H.x>S.right){if(270===y&&(T.ea(z)||S.ea(H)))sa.x=cm(a,z.x,H.x);else if(H.x<z.x&&(270===y||0===y))sa.x=cm(a,S.left,Math.max(H.x,T.right));else if(H.x>z.x&&(270===y||180===y))sa.x=cm(a,S.right,Math.min(H.x,T.left));Fa.x=sa.x;Fa.y=H.y}if(sa.x>S.left&&sa.x<S.right)if(H.y>=S.top&&H.y<=z.y||z.y<=T.bottom&&z.y>=H.y){if(0===y||180===y)sa=new E(z.x,Math.max((z.y+H.y)/2,z.y)),Fa=new E(H.x,sa.y)}else sa.x=180===
y||(90===y||270===y)&&H.x<z.x?Math.min(H.x,90===y?S.left:Math.min(S.left,T.left)):Math.max(H.x,90===y?S.right:Math.max(S.right,T.right)),Fa.x=sa.x,Fa.y=H.y}else if(H.y<z.y||180===y&&H.x<z.x&&T.top<z.y||0===y&&H.x>z.x&&T.top<z.y)sa=new E(z.x,H.y),Fa=new E((z.x+H.x)/2,H.y),90===y?(sa.y=cm(a,z.y,H.y),Fa.x=H.x,Fa.y=sa.y):180===y&&H.x<z.x||0===y&&H.x>=z.x?(sa.y=z.y>T.bottom?cm(a,z.y,T.bottom):z.y>T.top&&(180===y&&z.x<T.left||0===y&&z.x>T.right)?cm(a,z.y,H.y):T.top,Fa.x=H.x,Fa.y=sa.y):270===y&&(z.y>T.bottom&&
z.x>T.left&&z.x<T.right)&&(sa.x=z.x<H.x?Math.min(H.x,T.left):Math.max(H.x,T.right),sa.y=z.y,Fa.x=sa.x);else{sa=new E(H.x,z.y);Fa=new E(H.x,(z.y+H.y)/2);if(90===y||0===y&&H.x<S.left||180===y&&H.x>S.right){if(90===y&&(T.ea(z)||S.ea(H)))sa.x=cm(a,z.x,H.x);else if(H.x<z.x&&(90===y||0===y))sa.x=cm(a,S.left,Math.max(H.x,T.right));else if(H.x>z.x&&(90===y||180===y))sa.x=cm(a,S.right,Math.min(H.x,T.left));Fa.x=sa.x;Fa.y=H.y}if(sa.x>S.left&&sa.x<S.right)if(H.y<=S.bottom&&H.y>=z.y||z.y>=T.top&&z.y<=H.y){if(0===
y||180===y)sa=new E(z.x,Math.min((z.y+H.y)/2,z.y)),Fa=new E(H.x,sa.y)}else sa.x=180===y||(90===y||270===y)&&H.x<z.x?Math.min(H.x,270===y?S.left:Math.min(S.left,T.left)):Math.max(H.x,270===y?S.right:Math.max(S.right,T.right)),Fa.x=sa.x,Fa.y=H.y}a.Wc(sa);a.Wc(Fa)}(q||r!==Ub||j)&&a.Wc(e);a.Wc(I)}}b=h}}}finally{a.Sv=p,b?a.Nh():a.vG()}}}function dm(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
W.prototype.getLinkPointFromPoint=W.prototype.ay=function(a,b,c,d){if(a===m||b===m)return c;if(!a.gb()){var e=jl(a);e!==m&&e!==a&&(b=e.port)}a=b.V===m?new Za:b.V.Zd.copy();e=a.copy();e.Du();d=Bb(e,d);e=Bb(e,c);c=e.copy();b.Bu(d,e,c);b=Bb(a,c);c.x=b.x;c.y=b.y;return c};function em(a,b){var c=a.fd;c===m&&(c=new fm,c.port=a,c.Yg=a.T,a.fd=c);return gm(c,b)}
W.prototype.getLinkPoint=W.prototype.Nd=function(a,b,c,d,e,g,i){if(Ob(c))return c=b.ub(c);if(Pb(c)&&(c=em(b,this),c!==m))return c=c.Bn;c=b.ub(ec);this.Y>(e?6:2)?(i=d?this.h(1):this.h(this.Y-2),e&&(i=dm(c,i.copy()))):(i=i.ub(ec),e&&(i=dm(c,i)));return this.ay(a,b,c,i,d)};
function Vl(a,b,c,d,e,g,i,j){a:if(Ob(e))d=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:0.5>e.x?225:0.5<e.x?45:0;else{if(Pb(e)&&(e=em(c,a),e!==m))switch(e.Bd){case v.Nc:d=270;break a;case v.vc:d=180;break a;default:case v.Fc:d=0;break a;case v.Ec:d=90;break a}e=c.ub(ec);a.Y>(i?6:2)?(j=g?a.h(1):a.h(a.Y-2),j=i?dm(e,j.copy()):d):j=j.ub(ec);d=Math.abs(j.x-e.x)>Math.abs(j.y-e.y)?j.x>=e.x?0:180:j.y>=e.y?90:270}i=sl;i=g?a.nr:a.Zr;i===sl&&(i=g?c.nr:c.Zr);switch(i){case tl:a=
b.Ka;d+=a;360<=d&&(d-=360);break;case sl:case Ni:a=b.Ka;if(0===a)break;45<=a&&135>a?d+=90:135<=a&&225>a?d+=180:225<=a&&315>a&&(d+=270);360<=d&&(d-=360)}return d}function Ul(a,b,c,d){if(Pb(c)&&(c=em(b,a),c!==m))return c.ru;c=NaN;c=d?a.ck:a.lk;isNaN(c)&&(c=d?b.ck:b.lk);isNaN(c)&&(c=10);return c}function Ql(a,b){var c=a.Va;Tb(c)&&(b===f&&(b=a.Bc),b!==m&&(c=b.Va));return c===Wb?Ub:c}function Rl(a,b){var c=a.Xa;Tb(c)&&(b===f&&(b=a.md),b!==m&&(c=b.Xa));return c===Wb?Ub:c}
function hm(a){var b=a.or;isNaN(b)&&(a=a.Bc,a!==m&&(b=a.or));return isNaN(b)?0:b}function im(a){var b=a.$r;isNaN(b)&&(a=a.md,a!==m&&(b=a.$r));return isNaN(b)?0:b}function ug(a){a=a.Te;return a===oh||a===If}function Ll(a){if(a.oh===m){var b=ug(a);a.oh=a.Bc===a.md&&!b}return a.oh?Hj:a.He}function jm(a){if(a.He===Hj)return 0;a=a.kB;if(isNaN(a)||0>a)a=10;return a}
function Tl(a){var b=a.lu;if(isNaN(b)){var c=a.Cd;0!==c?(b=a.wk,b=b!==m?b.Vi:10,a=Math.abs(c),b=b/2+((a-1)/2|0)*b,0===a%2&&(b=-b),0>c&&(b=-b)):b=10}return b}
function Sl(a,b,c,d,e){var g=a.au;if(ug(a)){if(g===Lj)return p;g===Mj&&(g=Kj)}switch(g){case Lj:var i=a.h(b),j=a.h(d);if(!i.u(c)||!j.u(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,n=Math.sqrt(k*k+l*l);if(!Va(n,0)){var r;Va(k,0)?r=0>l?-Math.PI/2:Math.PI/2:(r=Math.atan(l/Math.abs(k)),0>k&&(r=Math.PI-r));var j=c.x,q=c.y,k=e.x-j,u=e.y-q,l=Math.sqrt(k*k+u*u);Va(k,0)?u=0>u?-Math.PI/2:Math.PI/2:(u=Math.atan(u/Math.abs(k)),0>k&&(u=Math.PI-u));n=l/n;r=u-r;a.w(b,c);for(b+=1;b<d;b++)c=a.h(b),k=c.x-g,l=c.y-i,c=Math.sqrt(k*
k+l*l),Va(c,0)||(Va(k,0)?l=0>l?-Math.PI/2:Math.PI/2:(l=Math.atan(l/Math.abs(k)),0>k&&(l=Math.PI-l)),k=l+r,c*=n,a.w(b,new E(j+c*Math.cos(k),q+c*Math.sin(k))));a.w(d,e)}}return h;case Mj:i=a.h(b);q=a.h(d);if(!i.u(c)||!q.u(e)){g=i.x;i=i.y;j=q.x;q=q.y;n=(j-g)*(j-g)+(q-i)*(q-i);k=c.x;r=c.y;var l=e.x,u=e.y,x=0,B=1,x=0!==l-k?(u-r)/(l-k):9E9;0!==x&&(B=Math.sqrt(1+1/(x*x)));a.w(b,c);for(b+=1;b<d;b++){var c=a.h(b),G=c.x,I=c.y,y=0.5;0!==n&&(y=((g-G)*(g-j)+(i-I)*(i-q))/n);var J=g+y*(j-g),z=i+y*(q-i),c=Math.sqrt((G-
J)*(G-J)+(I-z)*(I-z));I<x*(G-J)+z&&(c=-c);0<x&&(c=-c);G=k+y*(l-k);y=r+y*(u-r);0!==x?(c=G+c/B,a.w(b,new E(c,y-(c-G)/x))):a.w(b,new E(G,y+c))}a.w(d,e)}return h;case Kj:return ug(a)&&(g=a.h(b+1),i=a.h(b+2),Va(g.x,i.x)&&!Va(g.y,i.y)?a.w(b+1,new E(g.x,c.y)):Va(g.y,i.y)&&a.w(b+1,new E(c.x,g.y)),g=a.h(d-1),i=a.h(d-2),Va(g.x,i.x)&&!Va(g.y,i.y)?a.w(d-1,new E(g.x,e.y)):Va(g.y,i.y)&&a.w(d-1,new E(e.x,g.y))),a.w(b,c),a.w(d,e),h;default:return p}}
function cm(a,b,c){return!isNaN(a.lu)||0!==a.Cd&&!ug(a)?(b+c)/2+Tl(a):(b+c)/2}
function bm(a,b,c,d,e,g){var i=b.el,j=b.dl,k=$l(b,c,d),l=c,n=d;for(0===e?l+=i:90===e?n+=j:180===e?l-=i:n-=j;k>km&&$l(b,l,n)===k-lm;)c=l,d=n,0===e?l+=i:90===e?n+=j:180===e?l-=i:n-=j,k-=lm;if(g){if(k>km)if(180===e||0===e)c=Math.floor(c/i)*i+i/2;else if(90===e||270===e)d=Math.floor(d/j)*j+j/2}else c=Math.floor(c/i)*i+i/2,d=Math.floor(d/j)*j+j/2;k>km&&(g=e,l=c,n=d,0===e?(g=90,n+=j):90===e?(g=180,l-=i):180===e?(g=270,n-=j):270===e&&(g=0,l+=i),$l(b,l,n)===k-lm?bm(a,b,l,n,g,p):(l=c,n=d,0===e?(g=270,n-=j):
90===e?(g=0,l+=i):180===e?(g=90,n+=j):270===e&&(g=180,l-=i),$l(b,l,n)===k-lm&&bm(a,b,l,n,g,p)));a.Wc(new E(c,d))}W.prototype.findClosestSegment=W.prototype.CI=function(a){t&&v.c(a,E,W,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.h(0),d=this.h(1),e=db(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.Y-1;i++){var c=this.h(i+1),j=db(b,a,d.x,d.y,c.x,c.y),d=c;j<e&&(g=i,e=j)}return g};W.prototype.invalidateGeometry=W.prototype.lf=function(){this.cc=this.va=m;this.K()};
v.m(W,{pr:"geometry"},function(){this.va===m&&(Kl(this),this.va=mm(this));return this.va});function li(a){if(a.va===m&&a.Zk!==p){a.va=mm(a);var b=a.Xo();if(b!==m){b.va=a.va;for(var c=a.xa,d=c.length,e=0;e<d;e++){var g=c.j[e];g!==b&&(g.Oi&&g instanceof X)&&(g.va=a.va)}}}}
function mm(a){var b=a.Y;if(2>b){var a=new zd(Ad),c=new Bd(0,0);a.tc.add(c);return a}var d,e=a.h(0).copy(),g=new E(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=Ll(a);if(i===Hj&&3<=b&&!Ta(a.Wr,0))if(3===b){var j=a.h(2).copy(),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y)}else{if(ug(a))for(j=0;j<b;j++)c=a.Ac.j[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);else for(var k,j=3;j<b;j+=3)j+3>=b&&(j=b-1),k=a.h(j),g.x=Math.min(k.x,g.x),g.y=Math.min(k.y,g.y);c=g.x;d=g.y}else{for(j=0;j<b;j++)c=
a.Ac.j[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);c=g.x;d=g.y}c-=a.St.x;d-=a.St.y;e.x-=c;e.y-=d;if(2===b){var l=a.h(1).copy();l.x-=c;l.y-=d;0!==hm(a)&&nm(a,e,h,g);0!==im(a)&&nm(a,l,p,g);a=new zd(Kd);a.Ma=e.x;a.Na=e.y;a.aa=l.x;a.ba=l.y;return a}l=new L;0!==hm(a)&&nm(a,e,h,g);M(l,e.x,e.y,p,p);if(i===Hj&&3<=b&&!Ta(a.Wr,0))if(3===b)j=a.h(1),b=j.x-c,e=j.y-d,j=a.h(2).copy(),j.x-=c,j.y-=d,0!==im(a)&&nm(a,j,p,g),N(l,b,e,b,e,j.x,j.y);else if(ug(a)){e=new E(c,d);i=a.h(1).copy();k=new E(c,d);for(var b=new E(c,
d),g=a.h(0),n=m,r=a.Wr/3,j=1;j<a.Y-1;j++){var n=a.h(j),q=g,u=n,x=a.h(om(a,n,j,p));if(!Ta(q.x,u.x)||!Ta(u.x,x.x))if(!Ta(q.y,u.y)||!Ta(u.y,x.y)){var B=r,G=k,I=b;isNaN(B)&&(B=a.Wr/3);var y=q.x,q=q.y,J=u.x,u=u.y,z=x.x,x=x.y,H=B*pm(y,q,J,u),B=B*pm(J,u,z,x);Ta(q,u)&&Ta(J,z)&&(J>y?x>u?(G.x=J-H,G.y=u-H,I.x=J+B,I.y=u+B):(G.x=J-H,G.y=u+H,I.x=J+B,I.y=u-B):x>u?(G.x=J+H,G.y=u-H,I.x=J-B,I.y=u+B):(G.x=J+H,G.y=u+H,I.x=J-B,I.y=u-B));Ta(y,J)&&Ta(u,x)&&(u>q?(z>J?(G.x=J-H,G.y=u-H,I.x=J+B):(G.x=J+H,G.y=u-H,I.x=J-B),I.y=
u+B):(z>J?(G.x=J-H,G.y=u+H,I.x=J+B):(G.x=J+H,G.y=u+H,I.x=J-B),I.y=u-B));if(Ta(y,J)&&Ta(J,z)||Ta(q,u)&&Ta(u,x))y=0.5*(y+z),q=0.5*(q+x),G.x=y,G.y=q,I.x=y,I.y=q;1===j?(i.x=0.5*(g.x+n.x),i.y=0.5*(g.y+n.y)):2===j&&(Ta(g.x,a.h(0).x)&&Ta(g.y,a.h(0).y))&&(i.x=0.5*(g.x+n.x),i.y=0.5*(g.y+n.y));N(l,i.x-c,i.y-d,k.x-c,k.y-d,n.x-c,n.y-d);e.set(k);i.set(b);g=n}}j=g.x;g=g.y;a=a.h(a.Y-1);j=0.5*(j+a.x);g=0.5*(g+a.y);N(l,b.x-c,b.y-d,j-c,g-d,a.x-c,a.y-d)}else for(j=3;j<b;j+=3)g=a.h(j-2),j+3>=b&&(j=b-1),e=a.h(j-1),k=
a.h(j),j===b-1&&0!==im(a)&&(k=k.copy(),nm(a,k,p,Ec)),N(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d);else{n=a.h(0);for(j=1;j<b;){j=om(a,n,j,1<j);r=a.h(j);if(j>=b-1){n!==r&&(0!==im(a)&&(r=r.copy(),nm(a,r,p,Ec)),qm(a,l,-c,-d,n,r));break}j=om(a,r,j+1,j<b-3);g=a;e=l;i=-c;k=-d;G=a.h(j);Va(n.y,r.y)&&Va(r.x,G.x)?(I=jm(g),I=Math.min(I,Math.abs(r.x-n.x)/2),I=y=Math.min(I,Math.abs(G.y-r.y)/2),Va(I,0)?(qm(g,e,i,k,n,r),n=r):(q=r.x,B=r.y,J=q,u=B,q=r.x>n.x?r.x-I:r.x+I,u=G.y>r.y?r.y+y:r.y-y,qm(g,e,i,k,n,new E(q,B)),Qd(e,
r.x+i,r.y+k,J+i,u+k),n=new E(J,u))):Va(n.x,r.x)&&Va(r.y,G.y)?(I=jm(g),y=Math.min(I,Math.abs(r.y-n.y)/2),y=I=Math.min(y,Math.abs(G.x-r.x)/2),Va(I,0)?(qm(g,e,i,k,n,r),n=r):(q=r.x,u=B=r.y,B=r.y>n.y?r.y-y:r.y+y,J=G.x>r.x?r.x+I:r.x-I,qm(g,e,i,k,n,new E(q,B)),Qd(e,r.x+i,r.y+k,J+i,u+k),n=new E(J,u))):(qm(g,e,i,k,n,r),n=r)}}return l.k}
function pm(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Ta(a,0)?b:Ta(b,0)?a:Math.sqrt(a*a+b*b)}
function nm(a,b,c,d){var e=a.Y;if(!(2>e))if(c){var g=a.h(1),c=g.x-d.x,d=g.y-d.y,g=pm(b.x,b.y,c,d);0!==g&&(e=2===e?0.5*g:g,a=hm(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.h(e-2),c=g.x-d.x,d=g.y-d.y,g=pm(b.x,b.y,c,d),0!==g&&(e=2===e?0.5*g:g,a=im(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function om(a,b,c,d){for(var e=a.Y,g=b;Ta(b.x,g.x)&&Ta(b.y,g.y);){if(c>=e)return e-1;g=a.h(c++)}if(!Ta(b.x,g.x)&&!Ta(b.y,g.y))return c-1;for(var i=g;Ta(b.x,g.x)&&Ta(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||Ta(b.y,g.y)&&Ta(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.h(c++)}return c-2}
function qm(a,b,c,d,e,g){if(rm(a)){var i=new A("number"),j;a:if(j=a.b,j===m)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.zr;j.next();){var k=j.value;if(k!==m&&k.visible)for(k=k.Si;k.next();){var l=k.value;if(l===a){0<i.length&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof W&&a.gb()&&l.gb()&&rm(l)&&a.rj().Me(l.rj())&&!(a.da===l.da||a.ga===l.ga)){var n=l.path;if(n!==m&&n.fk())for(var n=e,r=g,q=i,u=l.Y,x=1;x<u;x++){var B=l.h(x-1),G=l.h(x),
I=new E,y;b:{y=n;var J=r,z=I;if(Va(y.x,J.x)){if(Va(B.y,G.y)&&Math.min(y.y,J.y)<=B.y&&Math.max(y.y,J.y)>=B.y&&Math.min(B.x,G.x)<=y.x&&Math.max(B.x,G.x)>=y.x){z.x=y.x;z.y=B.y;y=h;break b}}else if(Va(B.x,G.x)&&Math.min(y.x,J.x)<=B.x&&Math.max(y.x,J.x)>=B.x&&Math.min(B.y,G.y)<=y.y&&Math.max(B.y,G.y)>=y.y){z.x=B.x;z.y=y.y;y=h;break b}z.x=0;z.y=0;y=p}y&&(Va(n.y,r.y)?q.add(I.x):q.add(I.y))}}}}0<i.length&&i.sort(function(a,b){return a-b});j=i.length}n=e.x;n=e.y;if(0<j)if(Va(e.y,g.y))if(e.x<g.x)for(k=0;k<
j;){q=Math.max(e.x,Math.min(i.j[k++]-5,g.x-10));b.lineTo(q+c,g.y+d);n=q+c;for(r=Math.min(q+10,g.x);k<j;)if(l=i.j[k],l<r+10)k++,r=Math.min(l+5,g.x);else break;l=(q+r)/2+c;l=g.y-10+d;q=r+c;r=g.y+d;a.He===Ij?M(b,q,r,p,p):N(b,n,l,q,l,q,r)}else for(k=j-1;0<=k;){q=Math.min(e.x,Math.max(i.j[k--]+5,g.x+10));b.lineTo(q+c,g.y+d);n=q+c;for(r=Math.max(q-10,g.x);0<=k;)if(l=i.j[k],l>r-10)k--,r=Math.max(l-5,g.x);else break;l=g.y-10+d;q=r+c;r=g.y+d;a.He===Ij?M(b,q,r,p,p):N(b,n,l,q,l,q,r)}else if(Va(e.x,g.x))if(e.y<
g.y)for(k=0;k<j;){q=Math.max(e.y,Math.min(i.j[k++]-5,g.y-10));b.lineTo(g.x+c,q+d);n=q+d;for(r=Math.min(q+10,g.y);k<j;)if(l=i.j[k],l<r+10)k++,r=Math.min(l+5,g.y);else break;l=g.x-10+c;q=g.x+c;r+=d;a.He===Ij?M(b,q,r,p,p):N(b,l,n,l,r,q,r)}else for(k=j-1;0<=k;){q=Math.min(e.y,Math.max(i.j[k--]+5,g.y+10));b.lineTo(g.x+c,q+d);n=q+d;for(r=Math.max(q-10,g.y);0<=k;)if(l=i.j[k],l>r-10)k--,r=Math.max(l-5,g.y);else break;l=g.x-10+c;q=g.x+c;r+=d;a.He===Ij?M(b,q,r,p,p):N(b,l,n,l,r,q,r)}}b.lineTo(g.x+c,g.y+d)}
v.m(W,{xu:"firstPickIndex"},function(){return 2>=this.Y?0:ug(this)||Ql(this)!==Ub?1:0});v.m(W,{py:"lastPickIndex"},function(){var a=this.Y;return 0===a?0:2>=a?a-1:ug(this)||Rl(this)!==Ub?a-2:a-1});function rm(a){a=a.He;return a===Jj||a===Ij}function Pl(a,b){if(b||rm(a)){var c=a.b;c!==m&&(!c.bm.contains(a)&&a.Pw!==m)&&c.bm.add(a,a.Pw)}}
function og(a,b){var c=a.sa;if(!(c===m||!c.visible||c.Zc)){var d=c.b;if(d!==m)for(var e=p,d=d.zr;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=p,g=g.Si;g.next();){var j=g.value;j instanceof W&&(j===a?i=h:i&&sm(a,j,b))}else if(e)for(g=g.Si;g.next();)j=g.value,j instanceof W&&sm(a,j,b)}}}function sm(a,b,c){if(b!==m&&rm(b)&&b.va!==m&&(a.rj().Me(b.rj())||c.Me(b.rj())))a.da===b.da||a.ga===b.ga||b.lf()}v.a(W,"adjusting",W.prototype.au);
v.defineProperty(W,{au:"adjusting"},s("fo"),function(a){var b=this.fo;b!==a&&(t&&v.Sa(a,W,W,"adjusting"),this.fo=a,this.d("adjusting",b,a))});v.a(W,"corner",W.prototype.kB);v.defineProperty(W,{kB:"corner"},s("to"),function(a){var b=this.to;b!==a&&(t&&v.e(a,"number",W,"corner"),this.to=a,this.lf(),this.d("corner",b,a))});v.a(W,"curve",W.prototype.He);
v.defineProperty(W,{He:"curve"},s("vo"),function(a){var b=this.vo;b!==a&&(t&&v.Sa(a,W,W,"curve"),this.vo=a,this.Nb(),Pl(this,b===Ij||b===Jj||a===Ij||a===Jj),this.d("curve",b,a))});v.a(W,"curviness",W.prototype.lu);v.defineProperty(W,{lu:"curviness"},s("wo"),function(a){var b=this.wo;b!==a&&(t&&v.e(a,"number",W,"curviness"),this.wo=a,this.Nb(),this.d("curviness",b,a))});v.a(W,"routing",W.prototype.Te);
v.defineProperty(W,{Te:"routing"},s("ti"),function(a){var b=this.ti;b!==a&&(t&&v.Sa(a,W,W,"routing"),this.ti=a,this.oh=m,this.Nb(),Pl(this,b===oh||b===If||a===oh||a===If),this.d("routing",b,a))});v.a(W,"smoothness",W.prototype.Wr);v.defineProperty(W,{Wr:"smoothness"},s("yq"),function(a){var b=this.yq;b!==a&&(t&&v.e(a,"number",W,"smoothness"),this.yq=a,this.lf(),this.d("smoothness",b,a))});
function Jl(a){var b=a.qg;if(b!==m){var c=a.Jg;if(c!==m){var d=a.gi,a=a.xi,e;a:{if(!(c===m||b.lg===m))for(e=b.lg.f;e.next();){var g=e.value;if(g.In===b&&g.Ir===c&&g.Lu===d&&g.Mu===a||g.In===c&&g.Ir===b&&g.Lu===a&&g.Mu===d){e=g;break a}}e=m}for(var i=g=m,j=b.pd.j,k=j.length,l=0;l<k;l++){var n=j[l];if(n.qg===b&&n.gi===d&&n.Jg===c&&n.xi===a||n.qg===c&&n.gi===a&&n.Jg===b&&n.xi===d)i===m?i=n:(g===m&&(g=new A(W),g.add(i)),g.add(n))}if(g!==m){e===m&&(e=new vl,e.In=b,e.Lu=d,e.Ir=c,e.Mu=a,ul(b,e),ul(c,e));
e.links=g;for(l=0;l<g.count;l++)if(n=g.j[l],0===n.Cd){b=1;for(c=0;c<g.count;c++)Math.abs(g.j[c].Cd)===b&&(b++,c=-1);n.wk=e;n.Cd=n.da===e.In?b:-b;n.Nb()}}}}}
function Il(a){var b=a.wk;if(b!==m){var c=a.Cd;a.wk=m;a.Cd=0;a.Nb();b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.j[0],c.wk=m,c.Cd=0,c.Nb()),c=b.In,b!==m&&c.lg!==m&&c.lg.remove(b),c=b.Ir,b!==m&&c.lg!==m&&c.lg.remove(b);else{c=Math.abs(c);a=0===c%2;for(b=b.links.f;b.next();){var d=b.value,e=Math.abs(d.Cd),g=0===e%2;e>c&&a===g&&(d.Cd=0<d.Cd?d.Cd-2:d.Cd+2,d.Nb())}}}}function vl(){v.Hb(this);this.links=this.Mu=this.Ir=this.Lu=this.In=m;this.Vi=10}
v.kd(vl,{In:h,Lu:h,Ir:h,Mu:h,links:h,Vi:h});function Wl(){v.Hb(this);this.group=m;this.tn=h;this.abort=p;this.zg=this.yg=1;this.ct=this.bt=-1;this.Ed=this.Dd=8;this.yb=m;this.GD=p;this.iD=22;this.hC=111}v.kd(Wl,{group:h,tn:h,abort:h,GD:h,iD:h,hC:h});var km=1,lm=1,am=999999999,tm=am;
function Xl(a,b){if(!(0>=b.width||0>=b.height)){var c=b.y,d=b.x+b.width,e=b.y+b.height;a.yg=Math.floor((b.x-a.Dd)/a.Dd)*a.Dd;a.zg=Math.floor((c-a.Ed)/a.Ed)*a.Ed;a.bt=Math.ceil((d+2*a.Dd)/a.Dd)*a.Dd;a.ct=Math.ceil((e+2*a.Ed)/a.Ed)*a.Ed;c=1+(Math.ceil((a.bt-a.yg)/a.Dd)|0);d=1+(Math.ceil((a.ct-a.zg)/a.Ed)|0);if(a.yb===m||a.Pq<c-1||a.Qq<d-1){for(var e=[],g=0;g<=c;g++){for(var i=[],j=0;j<=d;j++)i[j]=0;e[g]=i}a.yb=e;a.Pq=c-1;a.Qq=d-1}if(a.yb!==m)for(c=0;c<=a.Pq;c++)for(d=0;d<=a.Qq;d++)a.yb[c][d]=tm}}
v.m(Wl,{hb:m},function(){return new F(this.yg,this.zg,this.bt-this.yg,this.ct-this.zg)});v.a(Wl,"cellWidth",Wl.prototype.el);v.defineProperty(Wl,{el:m},s("Dd"),function(a){0<a&&a!==this.Dd&&(this.Dd=a,Xl(this,this.hb))});v.a(Wl,"cellHeight",Wl.prototype.dl);v.defineProperty(Wl,{dl:m},s("Ed"),function(a){0<a&&a!==this.Ed&&(this.Ed=a,Xl(this,this.hb))});function um(a,b,c){return a.yg<=b&&b<=a.bt&&a.zg<=c&&c<=a.ct}
function $l(a,b,c){if(!um(a,b,c))return 0;b-=a.yg;b/=a.Dd;c-=a.zg;c/=a.Ed;return a.yb[b|0][c|0]}function Bi(a,b,c){um(a,b,c)&&(b-=a.yg,b/=a.Dd,c-=a.zg,c/=a.Ed,a.yb[b|0][c|0]=0)}function Yl(a){if(a.yb!==m)for(var b=0;b<=a.Pq;b++)for(var c=0;c<=a.Qq;c++)a.yb[b][c]>=km&&(a.yb[b][c]|=am)}
function vm(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,n;l=b|0;n=c|0;var r=a.yb[l][n];if(r>=km&&r<am){e?n+=d:l+=d;for(r+=lm;g<=l&&(l<=i&&j<=n&&n<=k)&&!(r>=a.yb[l][n]);)a.yb[l][n]=r,r+=lm,e?n+=d:l+=d}l=e?n:l;if(e)if(0<d)for(c+=d;c<l;c+=d)vm(a,b,c,1,!e,g,i,j,k),vm(a,b,c,-1,!e,g,i,j,k);else for(c+=d;c>l;c+=d)vm(a,b,c,1,!e,g,i,j,k),vm(a,b,c,-1,!e,g,i,j,k);else if(0<d)for(b+=d;b<l;b+=d)vm(a,b,c,1,!e,g,i,j,k),vm(a,b,c,-1,!e,g,i,j,k);else for(b+=d;b>l;b+=d)vm(a,b,c,1,!e,g,i,j,k),vm(a,b,c,-1,!e,g,
i,j,k)}}function wm(a,b,c,d,e,g,i,j,k,l,n){for(var r=b|0,q=c|0,u=a.yb[r][q];0===u&&r>j&&r<k&&q>l&&q<n;)if(i?q+=g:r+=g,u=a.yb[r][q],1>=Math.abs(r-d)&&1>=Math.abs(q-e))return a.abort=h,0;r=b|0;q=c|0;u=a.yb[r][q];b=km;for(a.yb[r][q]=b;0===u&&r>j&&r<k&&q>l&&q<n;)i?q+=g:r+=g,u=a.yb[r][q],a.yb[r][q]=b,b+=lm;return i?q:r}
function Zl(a,b,c,d,e,g){if(a.yb!==m){a.abort=p;var i=b.x,j=b.y;if(um(a,i,j)){var i=i-a.yg,i=i/a.Dd,j=j-a.zg,j=j/a.Ed,k=d.x,l=d.y;if(um(a,k,l))if(k-=a.yg,k/=a.Dd,l-=a.zg,l/=a.Ed,1>=Math.abs(i-k)&&1>=Math.abs(j-l))a.abort=h;else{var n=g.x,b=g.y,d=g.x+g.width,r=g.y+g.height,n=n-a.yg,n=n/a.Dd,b=b-a.zg,b=b/a.Ed,d=d-a.yg,d=d/a.Dd,r=r-a.zg,r=r/a.Ed,g=Math.max(0,Math.min(a.Pq,n|0)),d=Math.min(a.Pq,Math.max(0,d|0)),b=Math.max(0,Math.min(a.Qq,b|0)),r=Math.min(a.Qq,Math.max(0,r|0)),i=i|0,j=j|0,k=k|0,l=l|0,
n=i,q=j,u=0===c||90===c?1:-1;(c=90===c||270===c)?q=wm(a,i,j,k,l,u,c,g,d,b,r):n=wm(a,i,j,k,l,u,c,g,d,b,r);if(!a.abort){a:{for(var c=0===e||90===e?1:-1,e=90===e||270===e,u=k|0,x=l|0,B=a.yb[u][x];0===B&&u>g&&u<d&&x>b&&x<r;)if(e?x+=c:u+=c,B=a.yb[u][x],1>=Math.abs(u-i)&&1>=Math.abs(x-j)){a.abort=h;break a}u=k|0;x=l|0;B=a.yb[u][x];for(a.yb[u][x]=tm;0===B&&u>g&&u<d&&x>b&&x<r;)e?x+=c:u+=c,B=a.yb[u][x],a.yb[u][x]=tm}a.abort||(vm(a,n,q,1,p,g,d,b,r),vm(a,n,q,-1,p,g,d,b,r),vm(a,n,q,1,h,g,d,b,r),vm(a,n,q,-1,h,
g,d,b,r))}}}}}function fm(){v.Hb(this);this.qf=this.port=this.Yg=m;this.Hr=p}v.kd(fm,{Yg:h,port:h,qf:h,Hr:h});fm.prototype.toString=function(){for(var a=this.qf,b=this.Yg.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==m&&(b+="\n  "+d.toString())}return b};
function xm(a,b,c,d){b=b.offsetY;switch(b){case v.Ec:return 90;case v.vc:return 180;case v.Nc:return 270;case v.Fc:return 0}switch(b){case v.Ec|v.Nc:return 180<c?270:90;case v.vc|v.Fc:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case v.vc|v.Nc:return c>a&&c<=180+a?180:270;case v.Nc|v.Fc:return c>180-a&&c<=360-a?270:0;case v.Fc|v.Ec:return c>a&&c<=180+a?90:0;case v.Ec|v.vc:return c>180-a&&c<=360-a?180:90;case v.vc|v.Nc|v.Fc:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case v.Nc|v.Fc|v.Ec:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case v.Fc|v.Ec|v.vc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case v.Ec|v.vc|v.Nc:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(v.vc|v.Nc|v.Fc|v.Ec)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function gm(a,b){var c=a.qf;if(c===m){if(!a.Hr){c=a.Hr;a.Hr=h;var d=a.Yg.ge;a.qf=[];for(var e=0,g=new F(a.port.ub(Xb),a.port.ub(nc)),d=d.f;d.next();){var i=d.value;if(i.gb()){var j=Ub,j=i.Bc===a.port?Ql(i,a.port):Rl(i,a.port);if(Pb(j)){var k;k=i.Bc===a.port?i.md:i.Bc;if(k!==m&&k.T!==m){var l=k.ub(ec);k=k.fd;k=k!==m?gm(k,i):m;k!==m&&(l=k.Bn);k=g.fu.Ph(l);var j=xm(g,j,k,ug(i)),n;0===j?(n=v.Fc,180<k&&(k-=360)):n=90===j?v.Ec:180===j?v.vc:v.Nc;(j=a.qf[e])?(j.link=i,j.Ka=k,j.Bd=n):(j=new ym(i,k,n),a.qf[e]=
j);j.Ku.set(l);e++}}}}a.qf.sort(fm.prototype.eG);g=a.qf.length;d=-1;for(e=i=0;e<g;e++)j=a.qf[e],j!==m&&(j.Bd!==d&&(d=j.Bd,i=0),j.rl=i,i++);d=-1;i=0;for(e=g-1;0<=e;e--)j=a.qf[e],j!==m&&(j.Bd!==d&&(d=j.Bd,i=j.rl+1),j.er=i);e=a.qf;for(g=0;g<e.length;g++)if(d=e[g],d!==m){l=d;j=a.port;i=d=f;switch(l.Bd){case v.Ec:d=j.ub(nc);i=j.ub(fc);break;case v.vc:d=j.ub(fc);i=j.ub(Xb);break;case v.Nc:d=j.ub(Xb);i=j.ub(dc);break;default:case v.Fc:d=j.ub(dc),i=j.ub(nc)}j=i.y-d.y;k=(l.rl+1)/(l.er+1);l=l.Bn;l.x=d.x+(i.x-
d.x)*k;l.y=d.y+j*k}e=a.qf;for(g=0;g<e.length;g++)if(i=e[g],i!==m){d=i;k=i;n=k.link;i=Ul(n,a.port,Ub,n.Bc===a.port);l=k.rl;if(!(0>l)&&(j=k.er,!(1>=j)&&ug(n))){n=k.Ku;var r=k.Bn;if(k.Bd===v.vc||k.Bd===v.Ec)l=j-1-l;i=((k=k.Bd===v.vc||k.Bd===v.Fc)?n.y<r.y:n.x<r.x)?i+8*l:(k?n.y===r.y:n.x===r.x)?i:i+8*(j-1-l)}d.ru=i}a.Hr=c}c=a.qf}for(e=0;e<c.length;e++)if(g=c[e],g!==m&&g.link===b)return g;return m}
fm.prototype.eG=function(a,b){return a===b?0:a===m?-1:b===m?1:a.Bd<b.Bd?-1:a.Bd>b.Bd?1:a.Ka<b.Ka?-1:a.Ka>b.Ka?1:0};function ym(a,b,c){this.link=a;this.Ka=b;this.Bd=c;this.Ku=new E;this.rl=this.er=this.rl=0;this.Bn=new E;this.ru=0}v.kd(ym,{link:h,Ka:h,Bd:h,Ku:h,rl:h,er:h,Bn:h,ru:h});ym.prototype.toString=function(){return this.link.toString()+" "+this.Ka.toString()+" "+this.Bd.toString()+":"+this.rl.toString()+"/"+this.er.toString()+" "+this.Bn.toString()+" "+this.ru.toString()+" "+this.Ku.toString()};
function V(a){0===arguments.length?U.call(this,Og):U.call(this,a);this.Gp=new ka(R);this.Qk=new ka(V);this.Gj=this.Hp=this.Fp=m;this.Nq=p;this.mp=h;this.Sq=p;this.Za=this.Dq=m;this.qo=p;this.Sc=new Dh;this.Sc.group=this}v.H("Group",V);v.na(V,U);da=V.prototype;
da.fb=function(a){U.prototype.fb.call(this,a);a.Fp=this.Fp;a.Hp=this.Hp;a.Gj=this.Gj;a.Nq=this.Nq;a.mp=this.mp;a.Sq=this.Sq;a.Dq=this.Dq;var b=yk(a,a,function(a){return a instanceof Ig});a.Za=b instanceof Ig?b:m;a.qo=this.qo;this.Sc!==m?(a.Sc=this.Sc.copy(),a instanceof V&&(a.Sc.group=a)):(a.Sc!==m&&(a.Sc.group=m),a.Sc=m)};
da.Rg=function(a){U.prototype.Rg.call(this,a);for(var b=a.wu(),a=a.hc;a.next();){var c=a.value;c.K();c.r(jj);c.Pg();c instanceof V&&(c.ev=c.ee,zm(c,b));if(c instanceof U)c.kf(b);else if(c instanceof W)for(c=c.Xh;c.next();)c.value.kf(b)}};
da.zl=function(a,b,c,d,e,g,i){if(a===we&&"elements"===b)if(e instanceof Ig)this.Za===m?this.Za=e:this.Za!==e&&v.g("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof w){var j=yk(e,e,function(a){return a instanceof Ig});j instanceof Ig&&(this.Za===m?this.Za=j:this.Za!==j&&v.g("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===xe&&"elements"===b&&(d===this.Za?this.Za=m:d instanceof w&&this.Za.Wh(d)&&(this.Za=m));U.prototype.zl.call(this,
a,b,c,d,e,g,i)};da.Ai=function(a,b,c,d){this.mi=this.Za;w.prototype.Ai.call(this,a,b,c,d);this.Za!==m&&(a=this.Za.zm,this.location=new E(a.x,a.y))};da.ek=function(){if(!U.prototype.ek.call(this))return p;for(var a=this.hc;a.next();){var b=a.value;if(b instanceof U){if(b.gb()&&b.Hc)return p}else if(b instanceof W&&b.gb()&&b.Hc&&b.da!==this&&b.ga!==this)return p}return h};v.m(V,{placeholder:"placeholder"},s("Za"));v.a(V,"computesBoundsAfterDrag",V.prototype.Kx);
v.defineProperty(V,{Kx:"computesBoundsAfterDrag"},s("qo"),function(a){var b=this.qo;b!==a&&(v.e(a,"boolean",V,"computesBoundsAfterDrag"),this.qo=a,this.d("computesBoundsAfterDrag",b,a))});v.m(V,{hc:"memberParts"},function(){return this.Gp.f});function nl(a,b){if(a.Gp.add(b)){b instanceof V&&a.Qk.add(b);var c=a.sC;if(c!==m){var d=h,e=a.b;e!==m&&(d=e.wa,e.wa=h);c(a,b);e!==m&&(e.wa=d)}}c=a.Za;c===m&&(c=a);c.K()}
function ml(a,b){if(a.Gp.remove(b)){b instanceof V&&a.Qk.remove(b);var c=a.tC;if(c!==m){var d=h,e=a.b;e!==m&&(d=e.wa,e.wa=h);c(a,b);e!==m&&(e.wa=d)}}c=a.Za;c===m&&(c=a);c.K()}V.prototype.kl=function(){if(0<this.Gp.count){var a=this.b;if(a===m)return;for(var b=this.Gp.copy().f;b.next();)a.remove(b.value)}U.prototype.kl.call(this)};V.prototype.Zu=function(){var a=this.sa;a!==m&&a.Zu(this)};v.a(V,"layout",V.prototype.sb);
v.defineProperty(V,{sb:"layout"},s("Sc"),function(a){var b=this.Sc;b!==a&&(a!==m&&v.c(a,Dh,V,"layout"),b!==m&&(b.b=m,b.group=m),this.Sc=a,a!==m&&(a.b=this.b,a.group=this),this.d("layout",b,a))});v.a(V,"memberAdded",V.prototype.sC);v.defineProperty(V,{sC:"memberAdded"},s("Fp"),function(a){var b=this.Fp;b!==a&&(a!==m&&v.e(a,"function",V,"memberAdded"),this.Fp=a,this.d("memberAdded",b,a))});v.a(V,"memberRemoved",V.prototype.tC);
v.defineProperty(V,{tC:"memberRemoved"},s("Hp"),function(a){var b=this.Hp;b!==a&&(a!==m&&v.e(a,"function",V,"memberRemoved"),this.Hp=a,this.d("memberRemoved",b,a))});v.a(V,"memberValidation",V.prototype.Cr);v.defineProperty(V,{Cr:"memberValidation"},s("Gj"),function(a){var b=this.Gj;b!==a&&(a!==m&&v.e(a,"function",V,"memberValidation"),this.Gj=a,this.d("memberValidation",b,a))});
V.prototype.canAddMembers=V.prototype.gH=function(a){var b=this.b;if(b===m)return p;b=b.Ld;for(a=b.Xx(a).f;a.next();)if(!b.ny(this,a.value))return p;return h};V.prototype.addMembers=V.prototype.dH=function(a,b){var c=this.b;if(c===m)return p;for(var c=c.Ld,d=h,e=c.Xx(a).f;e.next();){var g=e.value;!b||c.ny(this,g)?g.Ta=this:d=p}return d};v.a(V,"ungroupable",V.prototype.CD);
v.defineProperty(V,{CD:"ungroupable"},s("Nq"),function(a){var b=this.Nq;b!==a&&(v.e(a,"boolean",V,"ungroupable"),this.Nq=a,this.d("ungroupable",b,a))});V.prototype.canUngroup=V.prototype.HH=function(){if(!this.CD)return p;var a=this.sa;if(a!==m&&!a.an)return p;a=a.b;return a!==m&&!a.an?p:h};V.prototype.findSubGraphParts=V.prototype.wu=function(){var a=new ka(R);bf(a,this,h,p);a.remove(this);return a};
V.prototype.collapseSubGraph=V.prototype.br=function(){var a=this.b;if(a!==m&&!a.mf){a.mf=h;var b=this.wu();zm(this,b);a.mf=p}};function zm(a,b){a.ee=p;for(var c=a.hc;c.next();){var d=c.value;d.K();d.r(jj);d.Pg();d instanceof V&&(d.ev=d.ee,zm(d,b));if(d instanceof U)d.kf(b);else if(d instanceof W)for(d=d.Xh;d.next();)d.value.kf(b)}}V.prototype.expandSubGraph=V.prototype.ir=function(){var a=this.b;if(a!==m&&!a.mf){a.mf=h;var b=this.wu();Am(this,b);a.mf=p}};
function Am(a,b){a.ee=h;for(var c=a.hc;c.next();){var d=c.value;d.K();d.r(ij);d.$h();d instanceof V&&d.ev&&Am(d,b);if(d instanceof U)d.kf(b);else if(d instanceof W)for(d=d.Xh;d.next();)d.value.kf(b)}}v.a(V,"isSubGraphExpanded",V.prototype.ee);
v.defineProperty(V,{ee:"isSubGraphExpanded"},s("mp"),function(a){var b=this.mp;if(b!==a){v.e(a,"boolean",V,"isSubGraphExpanded");this.mp=a;var c=this.b;c!==m&&ph(c);this.d("isSubGraphExpanded",b,a);b=this.nD;if(b!==m){var d=h;c!==m&&(d=c.wa,c.wa=h);b(this);c!==m&&(c.wa=d)}c!==m&&c.ca.ab||(a?this.ir():this.br())}});v.a(V,"wasSubGraphExpanded",V.prototype.ev);
v.defineProperty(V,{ev:"wasSubGraphExpanded"},s("Sq"),function(a){var b=this.Sq;b!==a&&(v.e(a,"boolean",V,"wasSubGraphExpanded"),this.Sq=a,this.d("wasSubGraphExpanded",b,a))});v.a(V,"subGraphExpandedChanged",V.prototype.nD);v.defineProperty(V,{nD:"subGraphExpandedChanged"},s("Dq"),function(a){var b=this.Dq;b!==a&&(a!==m&&v.e(a,"function",V,"subGraphExpandedChanged"),this.Dq=a,this.d("subGraphExpandedChanged",b,a))});
V.prototype.move=V.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;U.prototype.move.call(this,a);for(a=this.wu().f;a.next();){var d=a.value,e=d.position;U.prototype.move.call(d,new E(e.x+c,e.y+b))}};function Ig(){Q.call(this);this.Fd=(new rb(0)).freeze();this.zm=new F(NaN,NaN,NaN,NaN)}v.H("Placeholder",Ig);v.na(Ig,Q);Ig.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.Fd=this.Fd.B();a.zm=this.zm.copy()};
Ig.prototype.Ci=function(a){if(this.background===m&&this.Ih===m)return p;var b=this.qa;return ub(0,0,b.width,b.height,a.x,a.y)};
Ig.prototype.Br=function(){var a=this.T;(a===m||!(a instanceof V)&&!(a instanceof cf))&&v.g("Placeholder is not inside a Group or Adornment.");if(a instanceof V){var b;a:{b=this.T;if(b instanceof V&&b.Kx&&this.zm.W()){var c=b.b;if(c!==m&&(c=c.pa,c instanceof wf&&!c.Io&&c.Lb!==m&&!c.Lb.contains(b))){b=this.zm;break a}}b=this.T;if(b instanceof V){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.hc;i.next();){var j=i.value;if(j.gb()){if(j instanceof W){if(j.ac)continue;if(j.da===b||j.ga===b)continue}j=
j.oa;j.left<c&&(c=j.left);j.top<d&&(d=j.top);j.right>e&&(e=j.right);j.bottom>g&&(g=j.bottom)}}!isFinite(c)||!isFinite(d)?(b=b.location,c=this.padding,b=new F(b.x+c.left,b.y+c.top,0,0)):b=new F(c,d,e-c,g-d)}else b=new F;c=this.padding;b=new F(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.zm=b;c=this.Ic;kb(c,b.width||0,b.height||0);Si(this,0,0,c.width,c.height);c=a.hc;for(d=p;c.next();)if(c.value.gb()){d=h;break}d&&(!isNaN(b.x)&&!isNaN(b.y))&&(a.location=new E(b.x,b.y))}else b=
this.ka,c=this.Ic,kb(c,b.width||0,b.height||0),Si(this,0,0,c.width,c.height)};Ig.prototype.Ai=function(a,b,c,d){var e=this.oa;e.x=a;e.y=b;e.width=c;e.height=d};v.a(Ig,"padding",Ig.prototype.padding);v.defineProperty(Ig,{padding:"padding"},s("Fd"),function(a){"number"===typeof a?a=new rb(a):v.c(a,rb,w,"padding");var b=this.Fd;b.u(a)||(this.Fd=a=a.B(),this.d("padding",b,a))});function Dh(){v.Hb(this);this.nw=this.L=m;this.Ps=this.jp=h;this.qp=this.pp=p;this.io=(new E(0,0)).freeze();this.p=m}
v.H("Layout",Dh);Dh.prototype.cloneProtected=Dh.prototype.fb=function(a){a.jp=this.jp;a.Ps=this.Ps;a.qp=this.qp;a.io=this.io.B()};Dh.prototype.copy=Dh.prototype.copy=function(){var a=new this.constructor;this.fb(a);return a};Dh.prototype.toString=function(){var a=v.Ki(Object.getPrototypeOf(this)),a=a+"(";this.group!==m&&(a+=" in "+this.group);this.b!==m&&(a+=" for "+this.b);return a+")"};v.a(Dh,"diagram",Dh.prototype.b);
v.defineProperty(Dh,{b:"diagram"},s("L"),function(a){this.L!==a&&(a!==m&&v.c(a,C,Dh,"diagram"),this.L=a)});v.a(Dh,"group",Dh.prototype.group);v.defineProperty(Dh,{group:"group"},s("nw"),function(a){this.nw!==a&&(a!==m&&v.c(a,V,Dh,"group"),this.nw=a)});v.a(Dh,"isOngoing",Dh.prototype.eC);v.defineProperty(Dh,{eC:"isOngoing"},s("jp"),function(a){this.jp!==a&&(v.e(a,"boolean",Dh,"isOngoing"),this.jp=a)});v.a(Dh,"isInitial",Dh.prototype.dC);
v.defineProperty(Dh,{dC:"isInitial"},s("Ps"),function(a){v.e(a,"boolean",Dh,"isInitial");this.Ps=a;a||(this.pp=h)});v.a(Dh,"isValidLayout",Dh.prototype.Ne);v.defineProperty(Dh,{Ne:"isValidLayout"},s("pp"),function(a){this.pp!==a&&(this.pp=a,a||(a=this.b,a!==m&&(a.ks=h)))});Dh.prototype.invalidateLayout=Dh.prototype.r=function(){if(this.pp){var a=this.b;if(a!==m&&!a.ca.ab&&(this.eC&&a.Kf||this.dC&&!a.Kf))this.Ne=p,a.Oq=h,qf(a)}};v.a(Dh,"isViewportSized",Dh.prototype.Hu);
v.defineProperty(Dh,{Hu:"isViewportSized"},s("qp"),function(a){this.qp!==a&&(this.qp=a)&&this.r()});v.a(Dh,"network",Dh.prototype.Dc);v.defineProperty(Dh,{Dc:"network"},s("p"),function(a){var b=this.p;b!==a&&(a!==m&&v.c(a,Bm,Dh,"network"),b!==m&&Cm(b,m),this.p=a,a!==m&&Cm(a,this))});Dh.prototype.createNetwork=Dh.prototype.ku=function(){var a=new Bm;Cm(a,this);return a};
Dh.prototype.makeNetwork=Dh.prototype.ZF=function(a){var b=this.createNetwork();a instanceof C?(b.Xq(a.hk,h),b.Xq(a.links,h)):a instanceof V?b.Xq(a.hc):a.f&&b.Xq(a.f);return b};Dh.prototype.updateParts=Dh.prototype.AK=function(){var a=this.b;if(a===m&&this.p!==m)for(var b=this.p.P.f;b.next();){var c=b.value.Ba;if(c!==m&&(a=c.b,a!==m))break}a!==m&&a.Gb("Layout");this.commitLayout();a!==m&&a.Md("Layout")};Dh.prototype.commitLayout=Dh.prototype.hu=aa();
Dh.prototype.doLayout=Dh.prototype.fr=function(a){a===m&&v.g("Layout.doLayout(collection) argument must not be null");var b=new ka(R);a===this.b?(Dm(this,b,a.hk,h,this.zy,h,p,h),Dm(this,b,a.Si,h,this.zy,h,p,h)):a===this.group&&Dm(this,b,a.hc,p,this.zy,h,p,h);var c=b.count;if(0<c){a=this.b;a!==m&&a.Gb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Lc.x,e=d,g=this.Lc.y,i=0,j=0,b=b.f;b.next();){var k=b.value;k.Sh();var l=k.oa.width,n=k.oa.height;k.move(new E(e,g));delete k.cA;e+=Math.max(l,50)+20;
j=Math.max(j,Math.max(n,50));i>=c-1?(i=0,e=d,g+=j+20,j=0):i++}a!==m&&a.Md("Layout")}this.Ne=h};Dh.prototype.zy=function(a){return!a.location.W()||a instanceof V&&a.cA?h:p};function Dm(a,b,c,d,e,g,i,j){for(c=c.f;c.next();){var k=c.value;if(!d||k.wr)if(!e||e(k))k.$q()&&(g&&k instanceof U?k.Ni||(k instanceof V&&k.sb===m?Dm(a,b,k.hc,p,e,g,i,j):b.add(k)):i&&k instanceof W?b.add(k):j&&k.constructor===R&&b.add(k))}}v.a(Dh,"arrangementOrigin",Dh.prototype.Lc);
v.defineProperty(Dh,{Lc:"arrangementOrigin"},s("io"),function(a){this.io.u(a)||(t&&v.c(a,E,Dh,"arrangementOrigin"),this.io.Pa(a),this.r())});function Em(a,b){var c=a.group;if(c!==m){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;e!==m?(d=e.ub(Xb),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy();return d}return b}function Bm(){v.Hb(this);this.Sc=m;this.clear()}v.H("LayoutNetwork",Bm);
Bm.prototype.clear=function(){if(this.Rq)for(var a=this.Rq.f;a.next();){var b=a.value;b.clear();b.p=m}if(this.Lo)for(a=this.Lo.f;a.next();)b=a.value,b.clear(),b.p=m;this.Rq=new ka(Fm);this.Lo=new ka(Gm);this.Fw=new ja(U,Fm);this.xw=new ja(W,Gm)};Bm.prototype.toString=function(){return"LayoutNetwork"+(this.sb!==m?"("+this.sb.toString()+")":"")};v.m(Bm,{sb:"layout"},s("Sc"));function Cm(a,b){t&&b!==m&&v.c(b,Dh,Bm,"setLayout");a.Sc=b}v.m(Bm,{P:"vertexes"},s("Rq"));v.m(Bm,{Mb:"edges"},s("Lo"));
Bm.prototype.createVertex=Bm.prototype.Di=function(){return new Fm};Bm.prototype.createEdge=Bm.prototype.en=function(){return new Gm};
Bm.prototype.addParts=Bm.prototype.Xq=function(a,b){if(a!==m){b===f&&(b=p);v.e(b,"boolean",Bm,"addParts:toplevelonly");for(var c=a.f;c.next();){var d=c.value;if(d instanceof U&&(!b||d.wr)&&d.$q()&&!d.Ni)if(d instanceof V&&d.sb===m)this.Xq(d.hc,p);else if(this.ce(d)===m){var e=this.Di();e.Yg=d;this.Tj(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof W&&(!b||d.wr)&&d.$q()&&this.tu(d)===m){var g=d.da,e=d.ga;g!==e&&(g=this.uu(g),e=this.uu(e),g!==m&&e!==m&&this.vl(g,e,d))}}};
Bm.prototype.findGroupVertex=Bm.prototype.uu=function(a){if(a===m)return m;a=jl(a);if(a===m)return m;var b=this.ce(a);if(b!==m)return b;a=a.Ta;return a!==m&&(b=this.ce(a),b!==m)?b:m};Bm.prototype.addVertex=Bm.prototype.Tj=function(a){if(a!==m){t&&v.c(a,Fm,Bm,"addVertex:vertex");this.Rq.add(a);var b=a.Ba;b!==m&&this.Fw.add(b,a);a.p=this}};Bm.prototype.addNode=Bm.prototype.Rm=function(a){if(a===m)return m;t&&v.c(a,U,Bm,"addNode:node");var b=this.ce(a);b===m&&(b=this.Di(),b.Yg=a,this.Tj(b));return b};
Bm.prototype.deleteVertex=Bm.prototype.wB=function(a){if(a!==m&&(t&&v.c(a,Fm,Bm,"deleteVertex:vertex"),Hm(this,a))){for(var b=a.cf,c=b.count-1;0<=c;c--){var d=b.Z(c);this.fn(d)}b=a.re;for(c=b.count-1;0<=c;c--)d=b.Z(c),this.fn(d)}};function Hm(a,b){if(b===m)return p;var c=a.Rq.remove(b);c&&(a.Fw.remove(b.Ba),b.p=m);return c}Bm.prototype.deleteNode=Bm.prototype.eI=function(a){a!==m&&(t&&v.c(a,U,Bm,"deleteNode:node"),a=this.ce(a),a!==m&&this.wB(a))};
Bm.prototype.findVertex=Bm.prototype.ce=function(a){if(a===m)return m;t&&v.c(a,U,Bm,"findVertex:node");return this.Fw.$(a)};Bm.prototype.addEdge=Bm.prototype.Qm=function(a){if(a!==m){t&&v.c(a,Gm,Bm,"addEdge:edge");this.Lo.add(a);var b=a.Aa;b!==m&&this.tu(b)===m&&this.xw.add(b,a);b=a.D;b!==m&&b.OA(a);b=a.G;b!==m&&b.KA(a);a.p=this}};
Bm.prototype.addLink=Bm.prototype.cH=function(a){if(a===m)return m;t&&v.c(a,W,Bm,"addLink:link");var b=a.da,c=a.ga,d=this.tu(a);d===m?(d=this.en(),d.Aa=a,b!==m&&(d.G=this.Rm(b)),c!==m&&(d.D=this.Rm(c)),this.Qm(d)):(d.G=b!==m?this.Rm(b):m,d.D=c!==m?this.Rm(c):m);return d};Bm.prototype.deleteEdge=Bm.prototype.fn=function(a){if(a!==m){t&&v.c(a,Gm,Bm,"deleteEdge:edge");var b=a.D;b!==m&&b.vB(a);b=a.G;b!==m&&b.uB(a);Im(this,a)}};function Im(a,b){b!==m&&a.Lo.remove(b)&&(a.xw.remove(b.Aa),b.p=m)}
Bm.prototype.deleteLink=Bm.prototype.dI=function(a){a!==m&&(t&&v.c(a,W,Bm,"deleteLink:link"),a=this.tu(a),a!==m&&this.fn(a))};Bm.prototype.findEdge=Bm.prototype.tu=function(a){if(a===m)return m;t&&v.c(a,W,Bm,"findEdge:link");return this.xw.$(a)};
Bm.prototype.linkVertexes=Bm.prototype.vl=function(a,b,c){if(a===m||b===m)return m;t&&(v.c(a,Fm,Bm,"linkVertexes:fromVertex"),v.c(b,Fm,Bm,"linkVertexes:toVertex"),v.c(c,W,Bm,"linkVertexes:link"));if(a.p===this&&b.p===this){var d=this.en();d.Aa=c;d.G=a;d.D=b;this.Qm(d);return d}return m};Bm.prototype.reverseEdge=Bm.prototype.Su=function(a){if(a!==m){t&&v.c(a,Gm,Bm,"reverseEdge:edge");var b=a.G,c=a.D;b===m||c===m||(b.uB(a),c.vB(a),a.Su(),b.OA(a),c.KA(a))}};
Bm.prototype.deleteSelfEdges=Bm.prototype.ou=function(){for(var a=[],b=this.Mb.f;b.next();){var c=b.value;c.G===c.D&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.fn(a[c])};Bm.prototype.deleteArtificialVertexes=Bm.prototype.gF=function(){for(var a=[],b=this.P.f;b.next();){var c=b.value;c.Ba===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.wB(a[b]);a=[];for(b=this.Mb.f;b.next();)c=b.value,c.Aa===m&&a.push(c);c=a.length;for(b=0;b<c;b++)this.fn(a[b])};
Bm.prototype.splitIntoSubNetworks=Bm.prototype.GG=function(){this.gF();for(var a=[],b=this.Mb.f;b.next();){var c=b.value;(c.G===m||c.D===m)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.fn(a[c]);this.ou();a=new A(Bm);for(c=h;c;)for(var c=p,d=this.P.f;d.next();)if(b=d.value,0<b.cf.count||0<b.re.count){c=this.sb.createNetwork();a.add(c);Jm(this,c,b);c=h;break}a.sort(function(a,b){return a===m||b===m||a===b?0:b.P.count-a.P.count});return a};
function Jm(a,b,c){if(c!==m&&c.p!==b){Hm(a,c);b.Tj(c);for(var d=c.ob;d.next();){var e=d.value;e.p!==b&&(Im(a,e),b.Qm(e),Jm(a,b,e.G))}for(d=c.nb;d.next();)e=d.value,e.p!==b&&(Im(a,e),b.Qm(e),Jm(a,b,e.D))}}Bm.prototype.getParts=Bm.prototype.SI=function(){for(var a=new ka(R),b=this.P.f;b.next();)a.add(b.value.Ba);for(b=this.Mb.f;b.next();)a.add(b.value.Aa);return a};function Fm(){v.Hb(this);this.p=m;this.A=(new F(0,0,10,10)).freeze();this.z=(new E(5,5)).freeze();this.clear()}v.H("LayoutVertex",Fm);
Fm.prototype.clear=function(){this.Ba=m;this.cf=new A(Gm);this.re=new A(Gm)};Fm.prototype.toString=function(){return"LayoutVertex#"+v.fc(this)+(this.Ba!==m?"("+this.Ba.toString()+")":"")};v.a(Fm,"network",Fm.prototype.Dc);v.defineProperty(Fm,{Dc:"network"},s("p"),function(a){this.p!==a&&(a!==m&&v.c(a,Bm,Fm,"network"),this.p=a)});v.a(Fm,"node",Fm.prototype.Yg);
v.defineProperty(Fm,{Yg:"node"},s("Ba"),function(a){if(this.Ba!==a){t&&a!==m&&v.c(a,U,Fm,"node");this.Ba=a;a.Sh();var b=a.oa;if(b.W()&&(this.A.Pa(b),a=a.location,a.W())){var c=this.z;c.ta();c.x=a.x-b.x;c.y=a.y-b.y;c.freeze()}}});v.a(Fm,"bounds",Fm.prototype.hb);v.defineProperty(Fm,{hb:"bounds"},s("A"),function(a){this.A.u(a)||(t&&v.c(a,F,Fm,"bounds"),this.A.Pa(a))});v.a(Fm,"focus",Fm.prototype.focus);v.defineProperty(Fm,{focus:"focus"},s("z"),function(a){this.z.u(a)||(t&&v.c(a,E,Fm,"focus"),this.z.Pa(a))});
v.a(Fm,"centerX",Fm.prototype.ya);v.defineProperty(Fm,{ya:"centerX"},function(){return this.A.x+this.z.x},function(a){var b=this.A;b.x+this.z.x!==a&&(t&&v.i(a,Fm,"centerX"),b.ta(),b.x=a-this.z.x,b.freeze())});v.a(Fm,"centerY",Fm.prototype.za);v.defineProperty(Fm,{za:"centerY"},function(){return this.A.y+this.z.y},function(a){var b=this.A;b.y+this.z.y!==a&&(t&&v.i(a,Fm,"centerY"),b.ta(),b.y=a-this.z.y,b.freeze())});v.a(Fm,"focusX",Fm.prototype.yu);
v.defineProperty(Fm,{yu:"focusX"},function(){return this.z.x},function(a){var b=this.z;b.x!==a&&(b.ta(),b.x=a,b.freeze())});v.a(Fm,"focusY",Fm.prototype.zu);v.defineProperty(Fm,{zu:"focusY"},function(){return this.z.y},function(a){var b=this.z;b.y!==a&&(b.ta(),b.y=a,b.freeze())});v.a(Fm,"x",Fm.prototype.x);v.defineProperty(Fm,{x:"x"},function(){return this.A.x},function(a){var b=this.A;b.x!==a&&(b.ta(),b.x=a,b.freeze())});v.a(Fm,"y",Fm.prototype.y);
v.defineProperty(Fm,{y:"y"},function(){return this.A.y},function(a){var b=this.A;b.y!==a&&(b.ta(),b.y=a,b.freeze())});v.a(Fm,"width",Fm.prototype.width);v.defineProperty(Fm,{width:"width"},function(){return this.A.width},function(a){var b=this.A;b.width!==a&&(b.ta(),b.width=a,b.freeze())});v.a(Fm,"height",Fm.prototype.height);v.defineProperty(Fm,{height:"height"},function(){return this.A.height},function(a){var b=this.A;b.height!==a&&(b.ta(),b.height=a,b.freeze())});
Fm.prototype.commit=Fm.prototype.Mh=function(){var a=this.Ba;a!==m&&a.move(this.hb.position)};Fm.prototype.addSourceEdge=Fm.prototype.OA=function(a){a!==m&&(t&&v.c(a,Gm,Fm,"addSourceEdge:edge"),this.cf.contains(a)||this.cf.add(a))};Fm.prototype.deleteSourceEdge=Fm.prototype.vB=function(a){a!==m&&(t&&v.c(a,Gm,Fm,"deleteSourceEdge:edge"),this.cf.remove(a))};Fm.prototype.addDestinationEdge=Fm.prototype.KA=function(a){a!==m&&(t&&v.c(a,Gm,Fm,"addDestinationEdge:edge"),this.re.contains(a)||this.re.add(a))};
Fm.prototype.deleteDestinationEdge=Fm.prototype.uB=function(a){a!==m&&(t&&v.c(a,Gm,Fm,"deleteDestinationEdge:edge"),this.re.remove(a))};v.m(Fm,{FG:"sourceVertexes"},function(){for(var a=new ka(Fm),b=this.ob;b.next();){var c=b.value.G;c!==m&&!a.contains(c)&&a.add(c)}return a.f});v.m(Fm,{iF:"destinationVertexes"},function(){for(var a=new ka(Fm),b=this.nb;b.next();){var c=b.value.D;c!==m&&!a.contains(c)&&a.add(c)}return a.f});
v.m(Fm,{P:"vertexes"},function(){for(var a=new ka(Fm),b=this.ob;b.next();){var c=b.value,c=c.G;c!==m&&!a.contains(c)&&a.add(c)}for(b=this.nb;b.next();)c=b.value,c=c.D,c!==m&&!a.contains(c)&&a.add(c);return a.f});v.m(Fm,{ob:"sourceEdges"},function(){return this.cf.f});v.m(Fm,{nb:"destinationEdges"},function(){return this.re.f});v.m(Fm,{Mb:"edges"},function(){for(var a=new A(Gm),b=this.ob;b.next();){var c=b.value;a.add(c)}for(b=this.nb;b.next();)c=b.value,a.add(c);return a.f});
v.m(Fm,{qF:"edgesCount"},function(){return this.cf.count+this.re.count});var Km;Fm.standardComparer=Km=function(a,b){t&&v.c(a,Fm,Fm,"standardComparer:m");t&&v.c(b,Fm,Fm,"standardComparer:n");var c=a.Ba,d=b.Ba;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:d!==m?-1:0};
Fm.smartComparer=function(a,b){t&&v.c(a,Fm,Fm,"smartComparer:m");t&&v.c(b,Fm,Fm,"smartComparer:n");if(a!==m){if(b!==m){var c=a.Ba,d=b.Ba;if(c!==m){if(d!==m){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==m?-1:0}return 1}return b!==m?-1:0};function Gm(){v.Hb(this);this.p=m;this.clear()}v.H("LayoutEdge",Gm);Gm.prototype.clear=function(){this.D=this.G=this.Aa=m};Gm.prototype.toString=function(){return"LayoutEdge#"+v.fc(this)+(this.Aa!==m?"("+this.Aa.toString()+")":"")};v.a(Gm,"network",Gm.prototype.Dc);
v.defineProperty(Gm,{Dc:"network"},s("p"),function(a){this.p!==a&&(t&&a!==m&&v.c(a,Bm,Gm,"network"),this.p=a)});v.a(Gm,"link",Gm.prototype.link);v.defineProperty(Gm,{link:"link"},s("Aa"),function(a){this.Aa!==a&&(t&&a!==m&&v.c(a,W,Gm,"link"),this.Aa=a)});v.a(Gm,"fromVertex",Gm.prototype.xF);v.defineProperty(Gm,{xF:"fromVertex"},s("G"),function(a){this.G!==a&&(t&&a!==m&&v.c(a,Fm,Gm,"fromVertex"),this.G=a)});v.a(Gm,"toVertex",Gm.prototype.QG);
v.defineProperty(Gm,{QG:"toVertex"},s("D"),function(a){this.D!==a&&(t&&a!==m&&v.c(a,Fm,Gm,"toVertex"),this.D=a)});Gm.prototype.Su=function(){var a=this.G;this.G=this.D;this.D=a};Gm.prototype.commit=Gm.prototype.Mh=aa();Gm.prototype.getOtherVertex=Gm.prototype.zF=function(a){t&&v.c(a,Fm,Gm,"getOtherVertex:v");return this.D===a?this.G:this.G===a?this.D:m};
function Ii(){Dh.call(this);this.Hu=h;this.Uq=this.Vq=NaN;this.bi=(new hb(NaN,NaN)).freeze();this.Dg=(new hb(10,10)).freeze();this.ia=Uj;this.wc=Sj;this.Vb=Oj;this.Tb=Lm}v.H("GridLayout",Ii);v.na(Ii,Dh);Ii.prototype.cloneProtected=Ii.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.Vq=this.Vq;a.Uq=this.Uq;a.bi=this.bi.B();a.Dg=this.Dg.B();a.ia=this.ia;a.wc=this.wc;a.Vb=this.Vb;a.Tb=this.Tb};
Ii.prototype.doLayout=Ii.prototype.fr=function(a){var b=this.b;b===m&&v.g("The diagram for this layout is not set.");this.Lc=Em(this,this.Lc);var c=new ka(R);a===this.b?(Dm(this,c,a.hk,h,m,h,p,h),Dm(this,c,a.links,h,m,h,p,h),Dm(this,c,a.Si,h,m,h,p,h)):a===this.group&&Dm(this,c,a.hc,p,m,h,p,h);for(a=c.copy().f;a.next();){var d=a.value;if(d instanceof W&&(d.da!==m||d.ga!==m))c.remove(d);else if(d.Sh(),d instanceof V)for(d=d.hc;d.next();)c.remove(d.value)}c=c.zf();if(0!==c.length){switch(this.vf){case Rj:c.reverse();
break;case Oj:c.sort(this.Qg);break;case Pj:c.sort(this.Qg),c.reverse()}d=this.HD;isNaN(d)&&(d=0);a=this.dz;a=isNaN(a)?Math.max(this.b.jb.width-b.padding.left-b.padding.right,0):Math.max(this.dz,0);0>=d&&0>=a&&(d=1);var e=this.Vi.width;isFinite(e)||(e=0);var g=this.Vi.height;isFinite(g)||(g=0);b.Gb("Layout");switch(this.lb){case Vj:var i=Math.max(this.Yj.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.qa,i=Math.max(i,l.width);var i=Math.max(i+e,1),n=Math.max(this.Yj.height,1);
if(!isFinite(n))for(j=n=0;j<c.length;j++)k=c[j],l=k.qa,n=Math.max(n,l.height);for(var n=Math.max(n+g,1),r=this.Jd,q=this.Lc.x,u=q,x=this.Lc.y,B=0,G=0,j=0;j<c.length;j++){var k=c[j],l=k.qa,I=Math.ceil((l.width+e)/i)*i,y=Math.ceil((l.height+g)/n)*n,J;switch(r){case Tj:J=Math.abs(u-l.width)+q;break;default:J=u+l.width-q}if(0<d&&B>d-1||0<a&&0<B&&J>a)B=0,u=q,x+=G,G=0;G=Math.max(G,y);switch(r){case Tj:l=-l.width;break;default:l=0}k.move(new E(u+l,x));switch(r){case Tj:u-=I;break;default:u+=I}B++}break;
case Uj:i=Math.max(this.Yj.width,1);for(k=j=B=x=0;k<c.length;k++)n=c[k],r=n.qa,q=kl(n,n.vb,n.of),x=Math.max(x,q.x),B=Math.max(B,r.width-q.x),j=Math.max(j,q.y);u=this.Jd;switch(u){case Tj:x+=e;break;default:B+=e}var i=isFinite(i)?Math.max(i+e,1):Math.max(x+B,1),z=x=this.Lc.x,B=this.Lc.y,I=G=0,l=Math.max(this.Yj.height,1),y=j=0;J=h;for(k=0;k<c.length;k++){n=c[k];r=n.qa;q=kl(n,n.vb,n.of);if(0<G)switch(u){case Tj:z=Math.floor((z-x-(r.width-q.x))/i)*i+x;break;default:z=Math.ceil((z-x+q.x)/i)*i+x}else switch(u){case Tj:I=
z+q.x+r.width;break;default:I=z-q.x}var H;switch(u){case Tj:H=-(z+q.x)+x+I;break;default:H=z+r.width-q.x-x-I}if(0<d&&G>d-1||0<a&&0<G&&H>a){for(z=0;z<G&&k!==G;z++){H=c[k-G+z];var fa=kl(H,H.vb,H.of);H.move(new E(H.position.x,H.position.y+j-fa.y))}y+=g;B=J?B+y:B+(y+j);G=y=j=0;z=x;J=p}j=Math.max(j,q.y);y=Math.max(y,r.height-q.y);isFinite(l)&&(y=Math.max(y,Math.max(r.height,l)-q.y));J?n.move(new E(z-q.x,B-q.y)):n.move(new E(z-q.x,B));switch(u){case Tj:z-=q.x+e;break;default:z+=r.width-q.x+e}G++}for(z=
0;z<G&&k!==G;z++)H=c[k-G+z],fa=kl(H,H.vb,H.of),H.move(new E(H.position.x,H.position.y+j-fa.y))}b.Md("Layout");this.Ne=h}};v.a(Ii,"wrappingWidth",Ii.prototype.dz);v.defineProperty(Ii,{dz:"wrappingWidth"},s("Vq"),function(a){if(this.Vq!==a&&(0<a||isNaN(a)))this.Vq=a,this.Hu=isNaN(a),this.r()});v.a(Ii,"wrappingColumn",Ii.prototype.HD);v.defineProperty(Ii,{HD:"wrappingColumn"},s("Uq"),function(a){if(this.Uq!==a&&(0<a||isNaN(a)))this.Uq=a,this.r()});v.a(Ii,"cellSize",Ii.prototype.Yj);
v.defineProperty(Ii,{Yj:"cellSize"},s("bi"),function(a){this.bi.u(a)||(this.bi.Pa(a),this.r())});v.a(Ii,"spacing",Ii.prototype.Vi);v.defineProperty(Ii,{Vi:"spacing"},s("Dg"),function(a){this.Dg.u(a)||(this.Dg.Pa(a),this.r())});v.a(Ii,"alignment",Ii.prototype.lb);v.defineProperty(Ii,{lb:"alignment"},s("ia"),function(a){if(this.ia!==a&&(t&&v.c(a,ha,Ii,"alignment"),a===Uj||a===Vj))this.ia=a,this.r()});v.a(Ii,"arrangement",Ii.prototype.Jd);
v.defineProperty(Ii,{Jd:"arrangement"},s("wc"),function(a){if(this.wc!==a&&(t&&v.c(a,ha,Ii,"arrangement"),a===Sj||a===Tj))this.wc=a,this.r()});v.a(Ii,"sorting",Ii.prototype.vf);v.defineProperty(Ii,{vf:"sorting"},s("Vb"),function(a){if(this.Vb!==a&&(t&&v.c(a,ha,Ii,"sorting"),a===Qj||a===Rj||a===Oj||Pj))this.Vb=a,this.r()});v.a(Ii,"comparer",Ii.prototype.Qg);v.defineProperty(Ii,{Qg:"comparer"},s("Tb"),function(a){this.Tb!==a&&(t&&v.e(a,"function",Ii,"comparer"),this.Tb=a,this.r())});var Lm;
Ii.standardComparer=Lm=function(a,b){t&&v.c(a,R,Ii,"standardComparer:a");t&&v.c(b,R,Ii,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
Ii.smartComparer=function(a,b){t&&v.c(a,R,Ii,"standardComparer:a");t&&v.c(b,R,Ii,"standardComparer:b");if(a!==m){if(b!==m){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==m?-1:0};var Vj;Ii.Position=Vj=v.l(Ii,"Position",0);var Uj;Ii.Location=Uj=v.l(Ii,"Location",1);var Sj;Ii.LeftToRight=Sj=v.l(Ii,"LeftToRight",2);var Tj;Ii.RightToLeft=Tj=v.l(Ii,"RightToLeft",3);var Qj;Ii.Forward=Qj=v.l(Ii,"Forward",4);var Rj;Ii.Reverse=Rj=v.l(Ii,"Reverse",5);var Oj;Ii.Ascending=Oj=v.l(Ii,"Ascending",6);var Pj;Ii.Descending=Pj=v.l(Ii,"Descending",7);
function Wj(){Dh.call(this);this.dw=this.dm=this.Zb=0;this.Ko=360;this.cw=hk;this.us=this.Yd=this.FA=this.pj=0;this.Wt=new Mm;this.xs=this.xm=0;this.lA=function(a){a||(a=(new Date).getTime());return(9301*a+49297)%233280/233280};this.dE=600;this.Zp=NaN;this.ko=1;this.Eg=0;this.Gg=360;this.wc=hk;this.O=dk;this.Vb=ak;this.Tb=Km;this.Dg=6;this.Sp=kk}v.H("CircularLayout",Wj);v.na(Wj,Dh);
Wj.prototype.cloneProtected=Wj.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.Zp=this.Zp;a.ko=this.ko;a.Eg=this.Eg;a.Gg=this.Gg;a.wc=this.wc;a.O=this.O;a.Vb=this.Vb;a.Tb=this.Tb;a.Dg=this.Dg;a.Sp=this.Sp};Wj.prototype.createNetwork=Wj.prototype.ku=function(){var a=new Nm;Cm(a,this);return a};
Wj.prototype.doLayout=Wj.prototype.fr=function(a){this.Dc===m&&(this.Dc=this.makeNetwork(a));if(1===this.p.P.count)a=this.p.P.Z(0),a.ya=0,a.za=0;else{for(var a=this.p.P.f,b=new A(Om);a.next();){var c=a.value,d=c.Ba;d!==m&&(c.width=d.la.width,c.height=d.la.height);b.add(c)}var a=new A(Om),c=new A(Om),b=this.sort(b),a=new A(Om),c=new A(Om),d=this.cw,e=this.WD,g=this.Zb,i=this.dm,j=this.dw,k=this.Ko,l=this.pj,n=this.FA,r=this.Yd,q=this.us,d=this.Jd,e=this.Jr,g=this.IC;if(!isFinite(g)||0>=g)g=NaN;i=this.UA;
if(!isFinite(i)||0>=i)i=1;j=this.jk;isFinite(j)||(j=0);k=this.Fl;if(!isFinite(k)||360<k||1>k)k=360;l=this.Vi;isFinite(l)||(l=NaN);d===ik&&e===jk?d=hk:d===ik&&e!==jk&&(e=jk,d=this.Jd);if((this.direction===bk||this.direction===ck)&&this.vf!==ak){for(var u=0;!(u>=b.length);u+=2){a.add(b.Z(u));if(u+1>=b.length)break;c.add(b.Z(u+1))}this.direction===bk?(this.Jd===ik&&a.reverse(),b=new A(Om),b.Zf(a),b.Zf(c)):(this.Jd===ik&&c.reverse(),b=new A(Om),b.Zf(c),b.Zf(a))}for(var x=b.length,B=n=0,u=0;u<b.length;u++){var r=
j+k*B*(this.direction===dk?1:-1)/x,G=b.Z(u).Ie;isNaN(G)&&(G=Pm(b.Z(u),r));if(360>k&&(0===u||u===b.length-1))G/=2;n+=G;B++}if(isNaN(g)||d===ik){isNaN(l)&&(l=6);if(d!==hk&&d!==ik){G=-Infinity;for(u=0;u<x;u++){var q=b.Z(u),I=b.Z(u===x-1?0:u+1);isNaN(q.Ie)&&Pm(q,0);isNaN(I.Ie)&&Pm(I,0);G=Math.max(G,(q.Ie+I.Ie)/2)}q=G+l;d===fk?(r=2*Math.PI/x,g=(G+l)/r):g=Qm(this,q*(360<=k?x:x-1),i,j*Math.PI/180,k*Math.PI/180)}else g=Qm(this,n+(360<=k?x:x-1)*(d!==ik?l:1.6*l),i,j*Math.PI/180,k*Math.PI/180);r=g*i}else if(r=
g*i,B=Rm(this,g,r,j*Math.PI/180,k*Math.PI/180),isNaN(l)){if(d===hk||d===ik)l=(B-n)/(360<=k?x:x-1)}else if(d===hk||d===ik)u=(B-n)/(360<=k?x:x-1),u<l?(g=Qm(this,n+l*(360<=k?x:x-1),i,j*Math.PI/180,k*Math.PI/180),r=g*i):l=u;else{G=-Infinity;for(u=0;u<x;u++)q=b.Z(u),I=b.Z(u===x-1?0:u+1),isNaN(q.Ie)&&Pm(q,0),isNaN(I.Ie)&&Pm(I,0),G=Math.max(G,(q.Ie+I.Ie)/2);q=G+l;u=Qm(this,q*(360<=k?x:x-1),i,j*Math.PI/180,k*Math.PI/180);u>g?(g=u,r=g*i):q=B/(360<=k?x:x-1)}this.cw=d;this.WD=e;this.Zb=g;this.dm=i;this.dw=j;
this.Ko=k;this.pj=l;this.FA=n;this.Yd=r;this.us=q;c=[b,a,c];b=c[0];a=c[1];c=c[2];d=this.cw;e=this.Zb;i=this.dw;j=this.Ko;k=this.pj;l=this.Yd;n=this.us;if((this.direction===bk||this.direction===ck)&&d===ik)Sm(this,b,j,i-j/2,dk);else if(this.direction===bk||this.direction===ck){g=0;switch(d){case gk:g=180*Tm(this,e,l,i,n)/Math.PI;break;case hk:n=b=0;g=a.dc();g!==m&&(b=Pm(g,Math.PI/2));g=c.dc();g!==m&&(n=Pm(g,Math.PI/2));g=180*Tm(this,e,l,i,k+(b+n)/2)/Math.PI;break;case fk:g=j/b.length}if(this.direction===
bk){switch(d){case gk:Um(this,a,i,ek);break;case hk:Vm(this,a,i,ek);break;case fk:Wm(this,a,j/2,i,ek)}switch(d){case gk:Um(this,c,i+g,dk);break;case hk:Vm(this,c,i+g,dk);break;case fk:Wm(this,c,j/2,i+g,dk)}}else{switch(d){case gk:Um(this,c,i,ek);break;case hk:Vm(this,c,i,ek);break;case fk:Wm(this,c,j/2,i,ek)}switch(d){case gk:Um(this,a,i+g,dk);break;case hk:Vm(this,a,i+g,dk);break;case fk:Wm(this,a,j/2,i+g,dk)}}}else switch(d){case gk:Um(this,b,i,this.direction);break;case hk:Vm(this,b,i,this.direction);
break;case fk:Wm(this,b,j,i,this.direction);break;case ik:Sm(this,b,j,i,this.direction)}this.updateParts();this.Dc=m;this.Ne=h}};function Wm(a,b,c,d,e){for(var g=a.Ko,i=a.Zb,a=a.Yd,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===dk?k*c/(360<=g?j:j-1):-(k*c)/j),n=b.Z(k),r=i*Math.tan(l)/a,r=Math.sqrt((i*i+a*a*r*r)/(1+r*r));n.ya=r*Math.cos(l);n.za=r*Math.sin(l);n.Zt=180*l/Math.PI}}
function Vm(a,b,c,d){for(var e=a.Zb,g=a.Yd,i=a.pj,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k),n=b.Z(k===j-1?0:k+1),r=g*Math.sin(c);l.ya=e*Math.cos(c);l.za=r;l.Zt=180*c/Math.PI;isNaN(l.Ie)&&Pm(l,0);isNaN(n.Ie)&&Pm(n,0);l=Tm(a,e,g,d===dk?c:-c,(l.Ie+n.Ie)/2+i);c+=d===dk?l:-l}}function Um(a,b,c,d){for(var e=a.Zb,g=a.Yd,i=a.us,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k);l.ya=e*Math.cos(c);l.za=g*Math.sin(c);l.Zt=180*c/Math.PI;l=Tm(a,e,g,d===dk?c:-c,i);c+=d===dk?l:-l}}
function Sm(a,b,c,d,e){var g=a.xs,g=a.Ko;a.kA=0;a.Wt=new Mm;if(360>c){for(g=d+(e===dk?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.xs=g;Xm(a,b,c,d,e)}else Ym(a,b,c,d,e);a.Wt.Mh(b)}
function Ym(a,b,c,d,e){for(var g=a.pj,i=a.dm,j=a.Zb*Math.cos(d*Math.PI/180),k=a.Yd*Math.sin(d*Math.PI/180),l=b.zf(),n=0;n<l.length;n++){l[n].ya=j;l[n].za=k;if(n===l.length-1)break;var r=[],r=Zm(a,j,k,l,n,e);r[0]||(r=$m(a,j,k,l,n,e));j=r[1];k=r[2]}a.xm++;if(!(128<a.xm)){var j=l[0].ya,k=l[0].za,n=l[l.length-1].ya,r=l[l.length-1].za,q=Math.abs(j-n)-((l[0].width+l[l.length-1].width)/2+g),u=Math.abs(k-r)-((l[0].height+l[l.length-1].height)/2+g),g=0;2.5>Math.abs(u)?Math.abs(j-n)<(l[0].width+l[l.length-
1].width)/2&&(g=0):g=0<u?u:2.5>Math.abs(q)?0:q;q=p;q=Math.abs(n)>Math.abs(r)?0<n^k>r:0<r^j<n;if(q=e===dk?q:!q)g=-Math.abs(g),g=Math.min(g,-l[l.length-1].width),g=Math.min(g,-l[l.length-1].height);j=a.Wt;if(0<g&&0>j.hm||Math.abs(g)<Math.abs(j.hm)&&!(0>g&&0<j.hm)){j.hm=g;j.al=[];j.Om=[];for(k=0;k<l.length;k++)j.al[k]=l[k].hb.x,j.Om[k]=l[k].hb.y}l=a.xm;36<l&&0===l%13&&(a.Zb*=(0===l%2?0.75:1.1)+0.15*a.lA(a.xm),a.Yd=a.Zb*i);2.5<Math.abs(g)&&(a.Zb-=g/(2*Math.PI),a.Yd=a.Zb*i,Ym(a,b,c,d,e))}}
function Xm(a,b,c,d,e){for(var g=a.Zb,i=a.Yd,j=a.dm,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),n=b.zf(),r=0;r<n.length;r++){n[r].ya=k;n[r].za=l;if(r===n.length-1)break;var q=[],q=Zm(a,k,l,n,r,e);q[0]||(q=$m(a,k,l,n,r,e));k=q[1];l=q[2]}a.kA++;if(!(128<a.kA)){b.Z(b.length-1);k=Math.atan2(l,k);k=e===dk?a.xs-k:k-a.xs;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.Wt;if(Math.abs(g)<Math.abs(i.hm)){i.hm=g;i.al=[];i.Om=[];for(k=0;k<n.length;k++)i.al[k]=n[k].hb.x,i.Om[k]=n[k].hb.y}n=
a.xm;36<n&&0===n%13&&(a.Zb*=(0==n%2?0.75:1.1)+0.15*a.lA(a.xm),a.Yd=a.Zb*j);2.5<Math.abs(g)&&(a.Zb-=g/(2*Math.PI),a.Yd=a.Zb*j,Xm(a,b,c,d,e))}}
function Zm(a,b,c,d,e,g){var i=a.pj,j=a.Zb,a=a.Yd,k=0,l=0,n=p;if(0<=c^g===dk){if(k=b+((d[e].width+d[e+1].width)/2+i),k>j){k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j)return[p,k,l];n=h}}else if(k=b-((d[e].width+d[e+1].width)/2+i),k<-j){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j)return[p,k,l];n=h}l=Math.sqrt(1-k*k/(j*j))*a;0>c^n&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[p,k,l]:[h,k,l]}
function $m(a,b,c,d,e,g){var i=a.pj,j=a.Zb,a=a.Yd,k=0,l=0,n=p;if(0<=b^g===dk){if(l=c-((d[e].height+d[e+1].height)/2+i),l<-a){l=c+((d[e].height+d[e+1].height)/2+i);if(l>a)return[p,k,l];n=h}}else if(l=c+((d[e].height+d[e+1].height)/2+i),l>a){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a)return[p,k,l];n=h}k=Math.sqrt(1-l*l/(a*a))*j;0>b^n&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[p,k,l]:[h,k,l]}function Mm(){this.hm=-Infinity;this.Om=this.al=m}
Mm.prototype.Mh=function(a){if(!(this.al===m||this.Om===m))for(var b=0;b<this.al.length;b++){var c=a.Z(b);c.x=this.al[b];c.y=this.Om[b]}};Wj.prototype.commitLayout=Wj.prototype.hu=function(){this.commitNodes();this.commitLinks()};Wj.prototype.commitNodes=Wj.prototype.Jx=function(){for(var a=this.pE,b=this.p.P.f,c;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.Mh()};Wj.prototype.commitLinks=Wj.prototype.Ix=function(){for(var a=this.p.Mb.f;a.next();)a.value.Mh()};
function Rm(a,b,c,d,e){var g=a.dE;if(0.0010>Math.abs(a.dm-1))return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function Qm(a,b,c,d,e){return b/(d!==f&&e!==f?Rm(a,1,c,d,e):Rm(a,1,c))}
function Tm(a,b,c,d,e){if(0.0010>Math.abs(a.dm-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(700*a.p.P.count);b>c&&(d+=Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
Wj.prototype.sort=function(a){switch(this.vf){case Zj:break;case $j:a.reverse();break;case Xj:a.sort(this.Qg);break;case Yj:a.sort(this.Qg);a.reverse();break;case ak:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new A(Om),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var i=0;i<a.length;i++){var j=a.Z(i).qF;j>e&&(e=j,g=i)}else for(i=0;i<a.length;i++)j=b[i],j>e&&(e=j,g=i);d.add(a.Z(g));b[g]=-1;g=a.Z(g);e=g.ob;for(g=g.nb;e.next();)i=e.value,i=i.G,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++;for(;g.next();)i=
g.value,i=i.D,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++}a=[];for(b=0;b<d.length;b++){j=d.Z(b);a[b]=[];for(var c=j.nb,e=j.ob,k,l;c.next();)k=c.value,l=d.indexOf(k.D),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(;e.next();)k=e.value,l=d.indexOf(k.G),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],n=[],r=[],e=[],g=new A(Om),i=b=0;b<a.length;b++){var q=a[b].length;if(1===q)e.push(b);else if(0===q)g.add(d.Z(b));else{if(0===i)c.push(b);else{for(var u=Infinity,x=Infinity,B=
-1,G=[],q=0;q<c.length;q++)if(0>a[c[q]].indexOf(c[q===c.length-1?0:q+1]))G.push(q===c.length-1?0:q+1);if(0===G.length)for(q=0;q<c.length;q++)G.push(q);for(q=0;q<G.length;q++){var I=G[q],y;l=a[b];k=n;y=r;for(var J=j,z=I,H=c,fa=0,S=0;S<k.length;S++){var T=J[k[S]],ga=J[y[S]],na=0,ra=0;T<ga?(na=T,ra=ga):(na=ga,ra=T);if(na<z&&z<=ra)for(T=0;T<l.length;T++)ga=l[T],0>H.indexOf(ga)||na<J[ga]&&J[ga]<ra||(na===J[ga]||ra===J[ga])||fa++;else for(T=0;T<l.length;T++)ga=l[T],0>H.indexOf(ga)||na<J[ga]&&J[ga]<ra&&
!(na===J[ga]||ra===J[ga])&&fa++}y=fa;for(k=J=0;k<a[b].length;k++)l=c.indexOf(a[b][k]),0<=l&&(l=Math.abs(I-(l>=I?l+1:l)),J+=l<c.length+1-l?l:c.length+1-l);for(k=0;k<n.length;k++)l=j[n[k]],z=j[r[k]],l>=I&&l++,z>=I&&z++,l>z&&(H=z,z=l,l=H),z-l<(c.length+2)/2^(l<I&&I<=z)||J++;if(y<u||y===u&&J<x)u=y,x=J,B=I}c.splice(B,0,b);for(q=0;q<c.length;q++)j[c[q]]=q;for(q=0;q<a[b].length;q++)u=a[b][q],0<=c.indexOf(u)&&(n.push(b),r.push(u))}i++}}n=p;for(r=c.length;;){n=h;for(j=0;j<e.length;j++)if(b=e[j],q=a[b][0],
l=c.indexOf(q),0<=l){for(i=x=0;i<a[q].length;i++)u=a[q][i],u=c.indexOf(u),0>u||u===l||(B=u>l?u-l:l-u,x+=u<l^B>r-B?1:-1);c.splice(0>x?l:l+1,0,b);e.splice(j,1);j--}else n=p;if(n)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],g.add(d.Z(l));return g;default:v.g("Invalid sorting type.")}return a};v.a(Wj,"radius",Wj.prototype.IC);v.defineProperty(Wj,{IC:"radius"},s("Zp"),function(a){if(this.Zp!==a&&(0<a||isNaN(a)))this.Zp=a,this.r()});v.a(Wj,"aspectRatio",Wj.prototype.UA);
v.defineProperty(Wj,{UA:"aspectRatio"},s("ko"),function(a){this.ko!==a&&0<a&&(this.ko=a,this.r())});v.a(Wj,"startAngle",Wj.prototype.jk);v.defineProperty(Wj,{jk:"startAngle"},s("Eg"),function(a){this.Eg!==a&&(this.Eg=a,this.r())});v.a(Wj,"sweepAngle",Wj.prototype.Fl);v.defineProperty(Wj,{Fl:"sweepAngle"},s("Gg"),function(a){this.Gg!==a&&(this.Gg=0<a&&360>=a?a:360,this.r())});v.a(Wj,"arrangement",Wj.prototype.Jd);
v.defineProperty(Wj,{Jd:"arrangement"},s("wc"),function(a){if(this.wc!==a&&(t&&v.c(a,ha,Wj,"arrangement"),a===ik||a===hk||a===gk||a===fk))this.wc=a,this.r()});v.a(Wj,"direction",Wj.prototype.direction);v.defineProperty(Wj,{direction:"direction"},s("O"),function(a){if(this.O!==a&&(t&&v.c(a,ha,Wj,"direction"),a===dk||a===ek||a===bk||a===ck))this.O=a,this.r()});v.a(Wj,"sorting",Wj.prototype.vf);
v.defineProperty(Wj,{vf:"sorting"},s("Vb"),function(a){if(this.Vb!==a&&(t&&v.c(a,ha,Wj,"sorting"),a===Zj||a===$j||a===Xj||Yj||a===ak))this.Vb=a,this.r()});v.a(Wj,"comparer",Wj.prototype.Qg);v.defineProperty(Wj,{Qg:"comparer"},s("Tb"),function(a){this.Tb!==a&&(t&&v.e(a,"function",Wj,"comparer"),this.Tb=a,this.r())});v.a(Wj,"spacing",Wj.prototype.Vi);v.defineProperty(Wj,{Vi:"spacing"},s("Dg"),function(a){this.Dg!==a&&(this.Dg=a,this.r())});v.a(Wj,"nodeDiameterFormula",Wj.prototype.Jr);
v.defineProperty(Wj,{Jr:"nodeDiameterFormula"},s("Sp"),function(a){if(this.Sp!==a&&(t&&v.c(a,ha,Wj,"nodeDiameterFormula"),a===kk||a===jk))this.Sp=a,this.r()});v.m(Wj,{qE:"actualXRadius"},s("Zb"));v.m(Wj,{rE:"actualYRadius"},s("Yd"));v.m(Wj,{aH:"actualSpacing"},s("pj"));v.m(Wj,{pE:"actualCenter"},function(){return isNaN(this.Lc.x)||isNaN(this.Lc.y)?new E(0,0):new E(this.Lc.x+this.qE,this.Lc.y+this.rE)});var hk;Wj.ConstantSpacing=hk=v.l(Wj,"ConstantSpacing",0);var gk;
Wj.ConstantDistance=gk=v.l(Wj,"ConstantDistance",1);var fk;Wj.ConstantAngle=fk=v.l(Wj,"ConstantAngle",2);var ik;Wj.Packed=ik=v.l(Wj,"Packed",3);var dk;Wj.Clockwise=dk=v.l(Wj,"Clockwise",4);var ek;Wj.Counterclockwise=ek=v.l(Wj,"Counterclockwise",5);var bk;Wj.BidirectionalLeft=bk=v.l(Wj,"BidirectionalLeft",6);var ck;Wj.BidirectionalRight=ck=v.l(Wj,"BidirectionalRight",7);var Zj;Wj.Forwards=Zj=v.l(Wj,"Forwards",8);var $j;Wj.Reverse=$j=v.l(Wj,"Reverse",9);var Xj;Wj.Ascending=Xj=v.l(Wj,"Ascending",10);
var Yj;Wj.Descending=Yj=v.l(Wj,"Descending",11);var ak;Wj.Optimized=ak=v.l(Wj,"Optimized",12);var kk;Wj.Pythagorean=kk=v.l(Wj,"Pythagorean",13);var jk;Wj.Circular=jk=v.l(Wj,"Circular",14);function Nm(){Bm.call(this)}v.H("CircularNetwork",Nm);v.na(Nm,Bm);Nm.prototype.createVertex=Nm.prototype.Di=function(){return new Om};Nm.prototype.createEdge=Nm.prototype.en=function(){return new an};function Om(){Fm.call(this);this.lz=this.cm=NaN}v.H("CircularVertex",Om);v.na(Om,Fm);
function Pm(a,b){var c=a.p;if(c===m)return NaN;c=c.sb;if(c===m)return NaN;if(c.Jd===ik)if(c.Jr===jk)a.cm=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.cm=Math.min(a.height/c,a.width/d)}else a.cm=c.Jr===jk?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.cm}v.a(Om,"diameter",Om.prototype.Ie);v.defineProperty(Om,{Ie:"diameter"},s("cm"),ba("cm"));v.a(Om,"actualAngle",Om.prototype.Zt);
v.defineProperty(Om,{Zt:"actualAngle"},s("lz"),ba("lz"));function an(){Gm.call(this)}v.H("CircularEdge",an);v.na(an,Gm);function bn(){Dh.call(this);this.ef=m;this.rp=0;this.Ue=(new hb(100,100)).freeze();this.jo=p;this.dd=this.Cg=h;this.vm=100;this.No=1;this.cp=1E3;this.Eo=0.05;this.Do=50;this.Bo=150;this.Co=0;this.zo=20;this.yo=25}v.H("ForceDirectedLayout",bn);v.na(bn,Dh);
bn.prototype.cloneProtected=bn.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.Ue=this.Ue.B();a.jo=this.jo;a.Cg=this.Cg;a.dd=this.dd;a.vm=this.vm;a.No=this.No;a.cp=this.cp;a.Eo=this.Eo;a.Do=this.Do;a.Bo=this.Bo;a.Co=this.Co;a.zo=this.zo;a.yo=this.yo};bn.prototype.createNetwork=bn.prototype.ku=function(){var a=new cn;Cm(a,this);return a};
bn.prototype.doLayout=bn.prototype.fr=function(a){this.Dc===m&&(this.Dc=this.makeNetwork(a));a=this.Iu;if(0<this.p.P.count){this.p.ou();for(var b=this.p.P.f;b.next();){var c=b.value;c.di=this.electricalCharge(c);c.um=this.gravitationalMass(c);var d=c.Ba;if(d!==m){var e=d.oa.width,d=d.oa.height;c.width=e;c.height=d;c.yu=0.5*e;c.zu=0.5*d}}for(b=this.p.Mb.f;b.next();)c=b.value,c.Bq=this.springStiffness(c),c.th=this.springLength(c);this.rp=0;a:{if(!(3>this.p.P.count)){e=b=0;c=this.p.P.f;c.next();for(d=
c.value.A;c.next();){if(c.value.A.Me(d)&&(b++,1<b)){b=h;break a}if(10<e)break;e++}}b=p}if(b){b=this.p;for(e=b.GG().f;e.next();){this.Dc=d=e.value;for(c=this.p.P.f;c.next();){for(var d=c.value,g=0,i=d.P;i.next();)g++;d.ue=g;d.ri=1;d.xk=m;d.Wf=m}dn(this,0,a)}this.Dc=b;e.reset();t&&v.c(b,cn,bn,"arrangeConnectedGraphs:singletons");for(var c=this.du,j=e.count,d=h,i=g=0,k=[],l=0;l<j+b.P.count+2;l++)k[l]=m;j=0;for(e.reset();e.next();){var n=e.value,l=this.$d(n);if(d)d=p,g=l.x+l.width/2,i=l.y+l.height/2,
k[0]=new E(l.right+c.width,l.top),k[1]=new E(l.left,l.bottom+c.height),j=2;else{var r=en(k,j,new E(g,i),new hb(l.width,l.height),c),q=k[r],u=new E(q.x+l.width+c.width,q.y),x=new E(q.x,q.y+l.height+c.height);r+1<j&&k.splice(r+1,0,m);k[r]=u;k[r+1]=x;j++;r=q.x-l.x;l=q.y-l.y;for(n=n.P.f;n.next();){var B=n.value;B.ya+=r;B.za+=l}}}for(n=b.P.f;n.next();)B=n.value,l=B.A,2>j?(g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new E(l.right+c.width,l.top),k[1]=new E(l.left,l.bottom+c.height),j=2):(r=en(k,j,new E(g,i),new hb(l.width,
l.height),c),q=k[r],u=new E(q.x+l.width+c.width,q.y),x=new E(q.x,q.y+l.height+c.height),r+1<j&&k.splice(r+1,0,m),k[r]=u,k[r+1]=x,j++,B.ya=q.x+B.width/2,B.za=q.y+B.height/2);for(e.reset();e.next();){d=e.value;for(g=d.P.f;g.next();)c=g.value,b.Tj(c);for(d=d.Mb.f;d.next();)c=d.value,b.Qm(c)}}fn(this,a);this.updateParts()}this.vm=a;this.Dc=m;this.Ne=h};bn.prototype.$d=function(a){t&&v.c(a,cn,bn,"computeBounds:net");for(var b=new F,c=h,a=a.P.f;a.next();){var d=a.value;c?(c=p,b.set(d.A)):b.ok(d.A)}return b};
function gn(a,b,c){t&&(v.i(b,bn,"computeClusterLayoutIterations:level"),v.i(c,bn,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.p.P.count,c*(b+1)/11),10)}
function dn(a,b,c){t&&(v.i(b,bn,"layoutClusters:level"),v.i(c,bn,"layoutClusters:maxiter"));var d;t&&v.i(b,bn,"hasClusters:level");if(10<b||3>a.p.P.count)d=p;else{a.ef===m?a.ef=new A(hn):a.ef.clear();a.ef.Zf(a.p.P);d=a.ef;d.sort(function(a,b){return a===m||b===m||a===b?0:b.ue-a.ue});for(var e=d.count-1;0<=e&&1>=d.j[e].ue;)e--;d=1<d.count-e}if(d){d=a.sl;a.sl*=1+1/(b+1);t&&v.i(b,bn,"pushSubNetwork:level");for(var e=a.p,g=new cn,i=a.ef.f;i.next();){var j=i.value;if(1<j.ue){g.Tj(j);var k={gz:j.ue,hz:j.width,
fz:j.height,KD:j.z.x,LD:j.z.y};j.Wf===m&&(j.Wf=new A);j.Wf.add(k);j.Sw=j.Wf.count-1}else break}for(var l=e.Mb.f;l.next();){var n=l.value;if(n.G.p===g&&n.D.p===g)g.Qm(n);else if(n.G.p===g){var r=n.G.xk;r===m&&(r=new A(hn),n.G.xk=r);r.add(n.D);n.G.ue--;n.G.ri+=n.D.ri}else n.D.p===g&&(r=n.D.xk,r===m&&(r=new A(hn),n.D.xk=r),r.add(n.G),n.D.ue--,n.D.ri+=n.G.ri)}for(l=g.Mb.f;l.next();)n=l.value,n.th*=Math.max(1,Math.sqrt((n.G.ri+n.D.ri)/(4*b+1)));for(i=g.P.f;i.next();)if(j=i.value,r=j.xk,r!==m&&0<r.count&&
(k=j.Wf.j[j.Wf.count-1],k=k.gz-j.ue,!(0>=k))){for(var q=0,u=0,x=r.count-k;x<r.count;x++){for(var B=r.j[x],n=m,l=B.Mb.f;l.next();){var G=l.value;if(G.zF(B)===j){n=G;break}}n!==m&&(u+=n.th,q+=B.width*B.height)}r=j.ya;l=j.za;n=j.width;x=j.height;B=j.z;G=n*x;1>G&&(G=1);q=Math.sqrt((q+G+4*u*u/(k*k))/G);k=(q-1)*n/2;q=(q-1)*x/2;j.hb=new F(r-B.x-k,l-B.y-q,n+2*k,x+2*q);j.focus=new E(B.x+k,B.y+q)}a.Dc=g;g=Math.max(0,gn(a,b,c));a.Iu+=g;dn(a,b+1,c);fn(a,g);t&&(v.c(e,cn,bn,"popNetwork:oldnet"),v.i(b,bn,"popNetwork:level"));
for(c=a.p.P.f;c.next();)g=c.value,g.p=e,g.Wf!==m&&(i=g.Wf.j[g.Sw],g.ue=i.gz,j=i.KD,k=i.LD,g.hb=new F(g.ya-j,g.za-k,i.hz,i.fz),g.focus=new E(j,k),g.Sw--);for(c=a.p.Mb.f;c.next();)c.value.p=e;a.Dc=e;c=a.ef;c===m?c=new A(hn):c.clear();c.Zf(e.P);c.sort(function(a,b){return a===m||b===m||a===b?0:b.ue-a.ue});for(e=c.f;e.next();)jn(a,e.value,b);a.sl=d}}
function jn(a,b,c){t&&(v.c(b,hn,bn,"surroundNode:oldnet"),v.i(c,bn,"surroundNode:level"));var d=b.xk;if(!(d===m||0===d.count)){var c=b.ya,e=b.za,g=b.width,i=b.height;b.Wf!==m&&0<b.Wf.count&&(i=b.Wf.j[0],g=i.hz,i=i.fz);for(var g=Math.sqrt(g*g+i*i)/2,j=p,k=i=0,l=0,n=b.P.f;n.next();){var r=n.value;1>=r.ue?k++:(j=h,l++,i+=Math.atan2(b.za-r.za,b.ya-r.ya))}if(0!==k){0<l&&(i/=l);l=b=0;b=j?2*Math.PI/(k+1):2*Math.PI/k;0===k%2&&(l=b/2);1<d.count&&d.sort(function(a,b){return a===m||b===m||a===b?0:b.width*b.height-
a.width*a.height});j=0===k%2?0:1;for(n=d.f;n.next();)if(r=n.value,!(1<r.ue)&&!a.isFixed(r)){d=m;for(k=r.Mb.f;k.next();){d=k.value;break}var k=r.width,q=r.height,d=g+d.th+Math.sqrt(k*k+q*q)/2,k=i+(b*(j/2>>1)+l)*(0==j%2?1:-1);r.ya=c+d*Math.cos(k);r.za=e+d*Math.sin(k);j++}}}}
function en(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,n=k.y-c.y,l=l*l+n*n;if(l<g){for(n=j-1;0<=n;n--)if(a[n].y>k.y&&a[n].x-k.x<d.width+e.width)continue a;for(n=j+1;n<b;n++)if(a[n].x>k.x&&a[n].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}bn.prototype.JA=function(a){var b=a.Ba;if(b!==m)for(b=b.EB();b.next();){var c=b.value;if("Comment"===c.hd){var d=this.p.ce(c);d===m&&(d=this.p.Rm(c),d.di=this.mB,c=this.p.vl(a,d,m),c!==m&&(c.th=this.nB))}}};
function kn(a,b){t&&(v.c(a,hn,bn,"getNodeDistance:vertexA"),v.c(b,hn,bn,"getNodeDistance:vertexB"));var c=a.hb,d=c.x,e=c.y,g=c.width,c=c.height,i=b.hb,j=i.x,k=i.y,l=i.width,i=i.height;return d+g<j?e>k+i?(d=d+g-j,e=e-k-i,Math.sqrt(d*d+e*e)):e+c<k?(d=d+g-j,e=e+c-k,Math.sqrt(d*d+e*e)):j-(d+g):d>j+l?e>k+i?(d=d-j-l,e=e-k-i,Math.sqrt(d*d+e*e)):e+c<k?(d=d-j-l,e=e+c-k,Math.sqrt(d*d+e*e)):d-(j+l):e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function fn(a,b){t&&v.i(b,bn,"performIterations:num");a.ef=m;for(var c=a.rp+b;a.rp<c&&!(a.rp++,!ln(a)););a.ef=m}
function ln(a){a.ef===m&&(a.ef=new A(hn),a.ef.Zf(a.p.P));var b=a.ef;if(0>=b.count)return p;var c=b.j[0];c.nd=0;c.od=0;for(var d=c.ya,e=d,g=c.za,i=g,c=1;c<b.count;c++){var j=b.j[c];j.nd=0;j.od=0;var k=j.ya,j=j.za,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===m||b===m||a===b?0:a.ya-b.ya}):b.sort(function(a,b){return a===m||b===m||a===b?0:a.za-b.za});for(var l=0,n=k=0,c=0;c<b.count;c++){j=b.j[c];d=j.ya;e=j.za;k=j.di*a.electricalFieldX(d,e);
n=j.di*a.electricalFieldY(d,e);j.nd+=k;j.od+=n;k=j.um*a.gravitationalFieldX(d,e);n=j.um*a.gravitationalFieldY(d,e);j.nd+=k;j.od+=n;for(var r=a.sl,q=c+1;q<b.count;q++)if(g=b.j[q],g!==j){var n=g.ya,u=g.za;if(Math.abs(d-n)>r){if(i)break}else if(Math.abs(e-u)>r){if(!i)break}else{var x=kn(j,g);1>x?(d>n?(k=Math.abs(g.A.right-j.A.left),k=mn(1+k)):d<n?(k=Math.abs(g.A.left-j.A.right),k=-mn(1+k)):(k=Math.max(g.width,j.width),k=mn(1+k)-k/2),e>u?(n=Math.abs(g.A.bottom-j.A.top),n=mn(1+n)):d<n?(n=Math.abs(g.A.top-
j.A.bottom),n=-mn(1+n)):(n=Math.max(g.height,j.height),n=mn(1+n)-n/2)):(l=-(j.di*g.di)/(x*x),k=l*((n-d)/x),n=l*((u-e)/x));j.nd+=k;j.od+=n;g.nd-=k;g.od-=n}}}for(c=a.p.Mb.f;c.next();)i=c.value,j=i.G,g=i.D,d=j.ya,e=j.za,n=g.ya,u=g.za,x=kn(j,g),1>x?(k=(d>n?1:-1)*mn(1+Math.max(g.width,j.width)),n=(e>u?1:-1)*mn(1+Math.max(g.height,j.height))):(l=i.Bq*(x-i.th),k=l*((n-d)/x),n=l*((u-e)/x)),j.nd+=k,j.od+=n,g.nd-=k,g.od-=n;c=0;d=Math.max(a.sl/20,50);for(e=0;e<b.count;e++)j=b.j[e],a.isFixed(j)||(g=j.nd,i=j.od,
g<-d?g=-d:g>d&&(g=d),i<-d?i=-d:i>d&&(i=d),j.ya+=g,j.za+=i,c=Math.max(c,g*g+i*i));return c>a.Ux*a.Ux}function mn(a){t&&v.i(a,bn,"randNext:max");return Math.floor(a*Math.random())}bn.prototype.commitLayout=bn.prototype.hu=function(){this.Py();this.commitNodes();this.commitLinks()};bn.prototype.Py=function(){if(this.El)for(var a=this.p.Mb.f;a.next();){var b=a.value.Aa;b!==m&&(b.Va=Wb,b.Xa=Wb)}};
bn.prototype.commitNodes=bn.prototype.Jx=function(){var a=0,b=0;if(this.TA)var b=this.$d(this.p),c=this.Lc,a=c.x-b.x,b=c.y-b.y;for(var c=new F,d=this.p.P.f;d.next();){var e=d.value;if(0!==a||0!==b)c.set(e.A),c.x+=a,c.y+=b,e.hb=c;e.Mh()}};bn.prototype.commitLinks=bn.prototype.Ix=function(){for(var a=this.p.Mb.f;a.next();)a.value.Mh()};bn.prototype.springStiffness=bn.prototype.nK=function(a){a=a.Bq;return!isNaN(a)?a:this.rB};
bn.prototype.springLength=bn.prototype.mK=function(a){a=a.th;return!isNaN(a)?a:this.qB};bn.prototype.electricalCharge=bn.prototype.zI=function(a){a=a.di;return!isNaN(a)?a:this.oB};bn.prototype.electricalFieldX=bn.prototype.AI=ca(0);bn.prototype.electricalFieldY=bn.prototype.BI=ca(0);bn.prototype.gravitationalMass=bn.prototype.VI=function(a){a=a.um;return!isNaN(a)?a:this.pB};bn.prototype.gravitationalFieldX=bn.prototype.TI=ca(0);bn.prototype.gravitationalFieldY=bn.prototype.UI=ca(0);
bn.prototype.isFixed=bn.prototype.cC=function(a){return a.sw};v.m(bn,{aI:"currentIteration"},s("rp"));v.a(bn,"arrangementSpacing",bn.prototype.du);v.defineProperty(bn,{du:"arrangementSpacing"},s("Ue"),function(a){this.Ue.u(a)||(this.Ue.Pa(a),this.r())});v.a(bn,"arrangesToOrigin",bn.prototype.TA);v.defineProperty(bn,{TA:"arrangesToOrigin"},s("jo"),function(a){this.jo!==a&&(this.jo=a,this.r())});v.a(bn,"setsPortSpots",bn.prototype.El);
v.defineProperty(bn,{El:"setsPortSpots"},s("Cg"),function(a){this.Cg!==a&&(this.Cg=a,this.r())});v.a(bn,"comments",bn.prototype.Hx);v.defineProperty(bn,{Hx:"comments"},s("dd"),function(a){this.dd!==a&&(this.dd=a,this.r())});v.a(bn,"maxIterations",bn.prototype.Iu);v.defineProperty(bn,{Iu:"maxIterations"},s("vm"),function(a){this.vm!==a&&0<=a&&(this.vm=a,this.r())});v.a(bn,"epsilonDistance",bn.prototype.Ux);
v.defineProperty(bn,{Ux:"epsilonDistance"},s("No"),function(a){this.No!==a&&0<a&&(this.No=a,this.r())});v.a(bn,"infinityDistance",bn.prototype.sl);v.defineProperty(bn,{sl:"infinityDistance"},s("cp"),function(a){this.cp!==a&&1<a&&(this.cp=a,this.r())});v.a(bn,"defaultSpringStiffness",bn.prototype.rB);v.defineProperty(bn,{rB:"defaultSpringStiffness"},s("Eo"),function(a){this.Eo!==a&&(this.Eo=a,this.r())});v.a(bn,"defaultSpringLength",bn.prototype.qB);
v.defineProperty(bn,{qB:"defaultSpringLength"},s("Do"),function(a){this.Do!==a&&(this.Do=a,this.r())});v.a(bn,"defaultElectricalCharge",bn.prototype.oB);v.defineProperty(bn,{oB:"defaultElectricalCharge"},s("Bo"),function(a){this.Bo!==a&&(this.Bo=a,this.r())});v.a(bn,"defaultGravitationalMass",bn.prototype.pB);v.defineProperty(bn,{pB:"defaultGravitationalMass"},s("Co"),function(a){this.Co!==a&&(this.Co=a,this.r())});v.a(bn,"defaultCommentSpringLength",bn.prototype.nB);
v.defineProperty(bn,{nB:"defaultCommentSpringLength"},s("zo"),function(a){this.zo!==a&&(this.zo=a,this.r())});v.a(bn,"defaultCommentElectricalCharge",bn.prototype.mB);v.defineProperty(bn,{mB:"defaultCommentElectricalCharge"},s("yo"),function(a){this.yo!==a&&(this.yo=a,this.r())});function cn(){Bm.call(this)}v.H("ForceDirectedNetwork",cn);v.na(cn,Bm);cn.prototype.createVertex=cn.prototype.Di=function(){return new hn};cn.prototype.createEdge=cn.prototype.en=function(){return new nn};
function hn(){Fm.call(this);this.sw=p;this.um=this.di=NaN;this.ri=this.ue=this.od=this.nd=0;this.Wf=this.xk=m;this.Sw=0}v.H("ForceDirectedVertex",hn);v.na(hn,Fm);v.a(hn,"isFixed",hn.prototype.cC);v.defineProperty(hn,{cC:"isFixed"},s("sw"),ba("sw"));v.a(hn,"charge",hn.prototype.VE);v.defineProperty(hn,{VE:"charge"},s("di"),ba("di"));v.a(hn,"mass",hn.prototype.aG);v.defineProperty(hn,{aG:"mass"},s("um"),ba("um"));v.a(hn,"forceX",hn.prototype.tF);v.defineProperty(hn,{tF:"forceX"},s("nd"),ba("nd"));
v.a(hn,"forceY",hn.prototype.uF);v.defineProperty(hn,{uF:"forceY"},s("od"),ba("od"));function nn(){Gm.call(this);this.th=this.Bq=NaN}v.H("ForceDirectedEdge",nn);v.na(nn,Gm);v.a(nn,"stiffness",nn.prototype.IG);v.defineProperty(nn,{IG:"stiffness"},s("Bq"),ba("Bq"));v.a(nn,"length",nn.prototype.length);v.defineProperty(nn,{length:"length"},s("th"),ba("th"));
function Z(){Dh.call(this);this.Oc=this.ed=25;this.O=0;this.Yl=on;this.qm=pn;this.km=qn;this.Kk=4;this.Pl=rn;this.Ah=sn;this.Cg=h;this.Ya=this.Ys=this.Ia=-1;this.te=this.Ip=0;this.Rc=this.se=this.Nf=this.xg=this.Qc=m;this.Pp=0;this.it=this.Pk=m;this.af=0;this.Qp=m;this.Rf=[];this.Rf.length=100}v.H("LayeredDigraphLayout",Z);v.na(Z,Dh);
Z.prototype.cloneProtected=Z.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.ed=this.ed;a.Oc=this.Oc;a.O=this.O;a.Yl=this.Yl;a.qm=this.qm;a.km=this.km;a.Kk=this.Kk;a.Pl=this.Pl;a.Ah=this.Ah;a.Cg=this.Cg};Z.prototype.createNetwork=Z.prototype.ku=function(){var a=new tn;Cm(a,this);return a};
Z.prototype.doLayout=Z.prototype.fr=function(a){this.Dc===m&&(this.Dc=this.makeNetwork(a));this.Lc=Em(this,this.Lc);this.Ys=-1;this.te=this.Ip=0;this.Qp=this.it=this.Pk=m;var b;for(b=0;b<this.Rf.length;b++)this.Rf[b]=m;if(0<this.p.P.count){this.p.ou();for(var c=this.p.Mb.f;c.next();)c.value.eb=p;switch(this.Yl){default:case un:var d=0,e=this.p.P.count-1,g=[];g.length=e+1;for(var i=this.p.P.f;i.next();)i.value.ja=h;for(;vn(this.p)!==m;){var j;for(j=wn(this.p);j!==m;)g[e]=j,e--,j.ja=p,j=wn(this.p);
for(j=xn(this.p);j!==m;)g[d]=j,d++,j.ja=p,j=xn(this.p);t&&v.c(this.p,Bm,Z,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var k=m,l=0,n=this.p.P.f;n.next();){var r=n.value;if(r.ja){for(var q=0,u=r.nb;u.next();)u.value.D.ja&&q++;for(var x=0,B=r.ob;B.next();)B.value.G.ja&&x++;if(k===m||l<q-x)k=r,l=q-x}}j=k;j!==m&&(g[d]=j,d++,j.ja=p)}var G;for(G=0;G<this.p.P.count;G++)g[G].U=G;for(var I=this.p.Mb.f;I.next();){var y=I.value;y.G.U>y.D.U&&(this.p.Su(y),y.eb=h)}break;case on:for(var J=this.p.P.f;J.next();)J.value.oj=
-1,J.value.fm=-1;for(var z=this.p.Mb.f;z.next();)z.value.Qo=p;this.Pp=0;for(J.reset();J.next();)0===J.value.ob.count&&yn(this,J.value);for(J.reset();J.next();)-1===J.value.oj&&yn(this,J.value);for(z.reset();z.next();){var H=z.value;if(!H.Qo){var fa=H.G,S=fa.fm,T=H.D,ga=T.fm;T.oj<fa.oj&&S<ga&&(this.p.Su(H),H.eb=h)}}}for(var na=this.p.P.f,ra;na.next();){ra=na.value;ra.s=-1;var Da=ra.Ba;if("undefined"!==typeof Da&&Da!==m){var Wa=Da.oa.width,fb=Da.oa.height;ra.width=Wa;ra.height=fb;ra.yu=0.5*Wa;ra.zu=
0.5*fb}}this.Ia=-1;switch(this.qm){case zn:An(this);break;case Bn:for(var ab,Pa=this.p.P.f;Pa.next();)ab=Cn(this,Pa.value),this.Ia=Math.max(ab,this.Ia);Pa.reset();for(var gb;Pa.next();)gb=Pa.value,gb.s=this.Ia-gb.s;break;default:case pn:An(this);for(var bb=this.p.P.f;bb.next();)bb.value.ja=p;for(bb.reset();bb.next();)0===bb.value.ob.count&&Dn(this,bb.value);var Zb=Infinity;for(bb.reset();bb.next();)Zb=Math.min(Zb,bb.value.s);this.Ia=-1;for(bb.reset();bb.next();)bb.value.s-=Zb,this.Ia=Math.max(this.Ia,
bb.value.s)}for(na.reset();na.next();)this.Ia=Math.max(this.Ia,na.value.s);for(var Xc=this.p.Mb.f,Xa,Fc=[];Xc.next();)Xa=Xc.value,Xa.ja=p,Fc.push(Xa);for(var Dd=0;Dd<Fc.length;Dd++)if(Xa=Fc[Dd],!Xa.ja&&!((Xa.G.Ba===m||Xa.D.Ba===m)&&Xa.G.s===Xa.D.s)){var rc,Vb,hc,Gc;rc=Vb=hc=Gc=0;var Hb=Xa.G,Ib=Xa.D;if(Xa.Aa!==m){var Jb=Xa.Aa;if(Jb===m)continue;var De=Hb.Ba,Oc=Ib.Ba;if(De===m||Oc===m)continue;var od=Jb.da,Hc=Jb.ga,xc=Jb.Bc,fd=Jb.md;if(Xa.eb)var sb=od,yc=xc,od=Hc,xc=fd,Hc=sb,fd=yc;var Ed=Hb.z.copy(),
Fd=Xa.D.z.copy(),sa=Xa.eb?Ib.A.copy():Hb.A.copy(),Fa=isNaN(sa.x)?Ed.copy():kl(od,xc,ec);if(De!==od&&!isNaN(sa.x)&&od.gb()){var zc=Hb.A.copy();isNaN(zc.x)||(Fa.x+=sa.x-zc.x,Fa.y+=sa.y-zc.y)}var mb=Xa.eb?Hb.A.copy():Ib.A.copy(),Pc=isNaN(mb.x)?Fd.copy():kl(Hc,fd,ec);if(Oc!==Hc&&!isNaN(mb.x)&&Hc.gb()){var Gd=Ib.A;isNaN(Gd.x)||(Pc.x+=mb.x-Gd.x,Pc.y+=mb.y-Gd.y)}90===this.O||270===this.O?(rc=Math.round((Fa.x-Ed.x)/this.Oc),hc=Fa.x,Vb=Math.round((Pc.x-Fd.x)/this.Oc),Gc=Pc.x):(rc=Math.round((Fa.y-Ed.y)/this.Oc),
hc=Fa.y,Vb=Math.round((Pc.y-Fd.y)/this.Oc),Gc=Pc.y);Xa.ve=rc;Xa.we=hc;Xa.Vd=Vb;Xa.ye=Gc}else Xa.ve=0,Xa.we=0,Xa.Vd=0,Xa.ye=0;var pd=Hb.s,Kb=Ib.s,wb,qd=Xa;t&&v.c(qd,En,Z,"_goesAround:edge");var Qc=0,Rc=qd.Aa;if(Rc!==m){if(Rc.Bc!==m){var Td=Rc.da;Ql(Rc)===Fn(this,qd,h)?Qc+=1:this.El&&Td!==m&&1===Td.ports.count&&qd.eb&&(Qc+=1)}if(Rc.md!==m){var Ud=Rc.ga;Rl(Rc)===Fn(this,qd,p)?Qc+=2:this.El&&Ud!==m&&1===Ud.ports.count&&qd.eb&&(Qc+=2)}}wb=Qc;var ic=1===wb||3===wb?h:p,$b=2===wb||3===wb?h:p,$a,Db;$b&&(Db=
this.p.Di(),Db.Ba=m,Db.tk=1,Db.s=pd,Db.oi=Hb,this.p.Tj(Db),$a=this.p.vl(Hb,Db,Xa.Aa),$a.ja=p,$a.eb=Xa.eb,$a.ve=rc,$a.Vd=0,$a.we=hc,$a.ye=0,Hb=Db);var rd=1;ic&&rd--;if(pd-Kb>rd&&0<pd){Xa.ja=p;Db=this.p.Di();Db.Ba=m;Db.tk=2;Db.s=pd-1;this.p.Tj(Db);$a=this.p.vl(Hb,Db,Xa.Aa);$a.ja=h;$a.eb=Xa.eb;$a.ve=$b?0:rc;$a.Vd=0;$a.we=$b?0:hc;$a.ye=0;Hb=Db;for(pd--;pd-Kb>rd&&0<pd;)Db=this.p.Di(),Db.Ba=m,Db.tk=3,Db.s=pd-1,this.p.Tj(Db),$a=this.p.vl(Hb,Db,Xa.Aa),$a.ja=h,$a.eb=Xa.eb,$a.ve=0,$a.Vd=0,$a.we=0,$a.ye=0,Hb=
Db,pd--;$a=this.p.vl(Db,Ib,Xa.Aa);$a.ja=!ic;ic&&(Db.oi=Ib);$a.eb=Xa.eb;$a.ve=0;$a.Vd=Vb;$a.we=0;$a.ye=Gc}else Xa.ja=h}var ac=this.Qc=[],xb;for(xb=0;xb<=this.Ia;xb++)ac[xb]=0;for(var Vd=this.p.P.f;Vd.next();)Vd.value.U=-1;switch(this.km){default:case Gn:for(var Lb,bc=this.p.P.f;bc.next();){var Wd=bc.value;Lb=Wd.s;Wd.U=this.Qc[Lb];this.Qc[Lb]++}break;case qn:var Ee,sd=this.p.P.f;for(Ee=this.Ia;0<=Ee;Ee--){for(;sd.next();)sd.value.s===Ee&&-1===sd.value.U&&Hn(this,sd.value);sd.reset()}break;case In:var gd,
Ic=this.p.P.f;for(gd=0;gd<=this.Ia;gd++){for(;Ic.next();)Ic.value.s===gd&&-1===Ic.value.U&&Jn(this,Ic.value);Ic.reset()}}this.Ys=-1;for(xb=this.te=this.Ip=0;xb<=this.Ia;xb++)ac[xb]>ac[this.te]&&(this.Ys=ac[xb]-1,this.te=xb),ac[xb]<ac[this.Ip]&&(this.Ip=xb);this.Qp=[];for(xb=0;xb<ac.length;xb++)this.Qp[xb]=[];Vd.reset();for(var cc,Hd;Vd.next();)Hd=Vd.value,cc=Hd.s,this.Qp[cc][Hd.U]=Hd;this.Ya=-1;for(var ef=0;ef<=this.Ia;ef++){for(var Xd=Kn(this,ef),Yd=0,he=this.Qc[ef],td=0;td<he;td++){var ud=Xd[td],
Yd=Yd+Vn(this,ud,h);ud.J=Yd;Yd+=1;Yd+=Vn(this,ud,p)}this.Ya=Math.max(this.Ya,Yd-1);bo(this,ef,Xd)}var ib=co(this),pb=eo(this),$c,ia,Ua;for($c=0;$c<this.Kk;$c++){for(ia=0;ia<=this.Ia;ia++)fo(this,ia,1),ho(this,ia,1,1);Ua=co(this);Ua<ib&&(ib=Ua,pb=eo(this));for(ia=this.Ia;0<=ia;ia--)fo(this,ia,-1),ho(this,ia,-1,-1);Ua=co(this);Ua<ib&&(ib=Ua,pb=eo(this))}io(this,pb);for($c=0;$c<this.Kk;$c++){for(ia=0;ia<=this.Ia;ia++)fo(this,ia,0),ho(this,ia,0,0);Ua=co(this);Ua<ib&&(ib=Ua,pb=eo(this));for(ia=this.Ia;0<=
ia;ia--)fo(this,ia,0),ho(this,ia,0,0);Ua=co(this);Ua<ib&&(ib=Ua,pb=eo(this))}io(this,pb);var Ba,yb,jc,vd,wd;switch(this.Pl){case jo:break;case ko:for(vd=ib+1;(wd=co(this))<vd;){vd=wd;for(yb=this.Ia;0<=yb;yb--)for(jc=0;jc<=yb;jc++){for(Ba=h;Ba;){Ba=p;for(ia=yb;ia>=jc;ia--)Ba=ho(this,ia,-1,-1)||Ba}Ua=co(this);Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=yb;ia>=jc;ia--)Ba=ho(this,ia,1,1)||Ba}Ua=co(this);Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=jc;ia<=yb;ia++)Ba=
ho(this,ia,1,1)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=jc;ia<=yb;ia++)Ba=ho(this,ia,-1,-1)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=yb;ia>=jc;ia--)Ba=ho(this,ia,0,0)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=jc;ia<=yb;ia++)Ba=ho(this,ia,0,0)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this))}}break;default:case rn:yb=this.Ia;jc=0;for(vd=ib+1;(wd=co(this))<vd;){vd=wd;for(Ba=h;Ba;){Ba=p;for(ia=yb;ia>=jc;ia--)Ba=ho(this,ia,
-1,-1)||Ba}Ua=co(this);Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=yb;ia>=jc;ia--)Ba=ho(this,ia,1,1)||Ba}Ua=co(this);Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=jc;ia<=yb;ia++)Ba=ho(this,ia,1,1)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=jc;ia<=yb;ia++)Ba=ho(this,ia,-1,-1)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=p;for(ia=yb;ia>=jc;ia--)Ba=ho(this,ia,0,0)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this));for(Ba=h;Ba;){Ba=
p;for(ia=jc;ia<=yb;ia++)Ba=ho(this,ia,0,0)||Ba}Ua>=ib?io(this,pb):(ib=Ua,pb=eo(this))}}io(this,pb);var Ra,Qb,ff=0!==(this.Ah&lo),Jf=this.Ah===sn;1E3<this.p.Mb.count&&!Jf&&(ff=p);if(ff){var Ca=[],la;for(la=0;la<=this.Ia;la++)Ca[la]=0;for(var ie=this.p.P.f,Id,Eb;ie.next();){Id=ie.value;Ra=Id.s;Eb=Id.J;var xd=Vn(this,Id,p);Ca[Ra]=Math.max(Ca[Ra],Eb+xd)}for(ie.reset();ie.next();)Id=ie.value,Ra=Id.s,Eb=Id.J,Id.J=(8*(this.Ya-Ca[Ra])>>1)+8*Eb;this.Ya*=8}if(0!==(this.Ah&mo))for(Qb=h;Qb;){Qb=p;for(Ra=this.te+
1;Ra<=this.Ia;Ra++)Qb=no(this,Ra,1)||Qb;for(Ra=this.te-1;0<=Ra;Ra--)Qb=no(this,Ra,-1)||Qb;Qb=no(this,this.te,0)||Qb}if(0!==(this.Ah&oo)){for(Ra=this.te+1;Ra<=this.Ia;Ra++)po(this,Ra,1);for(Ra=this.te-1;0<=Ra;Ra--)po(this,Ra,-1);po(this,this.te,0)}ff&&(qo(this,-1),qo(this,1));if(0!==(this.Ah&mo))for(Qb=h;Qb;){Qb=p;Qb=no(this,this.te,0)||Qb;for(Ra=this.te+1;Ra<=this.Ia;Ra++)Qb=no(this,Ra,0)||Qb;for(Ra=this.te-1;0<=Ra;Ra--)Qb=no(this,Ra,0)||Qb}this.updateParts()}this.Dc=m;this.Ne=h};
function ro(a){t&&v.c(a,Gm,Z,"linkMinLength:edge");for(var b=a.D,c=0,a=a.G.nb;a.next();)a.value.D===b&&c++;return 1<c?2:1}function so(a){t&&v.c(a,Gm,Z,"linkLengthWeight:edge");return 1}function to(a){t&&v.c(a,Gm,Z,"linkStraightenWeight:edge");var b=a.G.Ba,a=a.D.Ba;return b===m&&a===m?8:b===m||a===m?4:1}
function uo(a,b,c){t&&(v.c(b,vo,Z,"nodeMinLayerSpace:v"),v.e(c,"boolean",Z,"nodeMinLayerSpace:topleft"));return b.Ba===m?0:90===a.O||270===a.O?c?b.z.y+10:b.A.height-b.z.y+10:c?b.z.x+10:b.A.width-b.z.x+10}
function Vn(a,b,c){t&&(v.c(b,vo,Z,"nodeMinColumnSpace:v"),v.e(c,"boolean",Z,"nodeMinColumnSpace:topleft"));if(b.Ba===m)return 0;var d=c?b.Dw:b.Cw;if(d!==f)return d;d=a.O;return 90===d||270===d?c?b.Dw=b.z.x/a.Oc+1|0:b.Cw=(b.A.width-b.z.x)/a.Oc+1|0:c?b.Dw=b.z.y/a.Oc+1|0:b.Cw=(b.A.height-b.z.y)/a.Oc+1|0}function eo(a){a.Pk===m&&(a.Pk=[]);for(var b=0,c=a.p.P.f,d;c.next();)d=c.value,a.Pk[b]=d.s,b++,a.Pk[b]=d.J,b++,a.Pk[b]=d.U,b++;return a.Pk}
function io(a,b){t&&v.c(b,Array,Z,"restoreLayout:layout");for(var c=0,d=a.p.P.f,e;d.next();)e=d.value,e.s=b[c],c++,e.J=b[c],c++,e.U=b[c],c++}
function wo(a,b,c){t&&(v.i(b,Z,"crossingMatrix:unfixedLayer"),v.i(c,Z,"crossingMatrix:direction"));var d=Kn(a,b),e=a.Qc[b];a.it||(a.it=[]);for(var g=a.it,i,j=0;j<e;j++){i=0;var k=d[j],l=k.oi,n,r;if(l!==m&&l.s===k.s)if(k=l.U,k>j)for(r=j+1;r<k;r++)n=d[r],(n.oi!==l||n.tk!==l.tk)&&i++;else for(r=j-1;r>k;r--)n=d[r],(n.oi!==l||n.tk!==l.tk)&&i++;var q,u,x,B,G,I;if(0<=c){k=d[j].cf;for(l=0;l<k.count;l++)if(q=k.j[l],q.ja&&q.G.s!==b){n=q.G.U;r=q.ye;q=q.we;for(u=l+1;u<k.count;u++)x=k.j[u],x.ja&&x.G.s!==b&&(B=
x.G.U,G=x.ye,x=x.we,r<G&&(n>B||n===B&&q>x)&&i++,G<r&&(B>n||B===n&&x>q)&&i++)}}if(0>=c){k=d[j].re;for(l=0;l<k.count;l++)if(q=k.j[l],q.ja&&q.D.s!==b){n=q.D.U;r=q.ye;q=q.we;for(u=l+1;u<k.count;u++)x=k.j[u],x.ja&&x.D.s!==b&&(B=x.D.U,G=x.ye,x=x.we,q<x&&(n>B||n===B&&r>G)&&i++,x<q&&(B>n||B===n&&G>r)&&i++)}}g[j*e+j]=i;for(k=j+1;k<e;k++){var y=0,J=0;if(0<=c){i=d[j].cf;I=d[k].cf;for(l=0;l<i.count;l++)if(q=i.j[l],q.ja&&q.G.s!==b){n=q.G.U;q=q.we;for(u=0;u<I.count;u++)x=I.j[u],x.ja&&x.G.s!==b&&(B=x.G.U,x=x.we,
(n<B||n===B&&q<x)&&J++,(B<n||B===n&&x<q)&&y++)}}if(0>=c){i=d[j].re;I=d[k].re;for(l=0;l<i.count;l++)if(q=i.j[l],q.ja&&q.D.s!==b){n=q.D.U;r=q.ye;for(u=0;u<I.count;u++)x=I.j[u],x.ja&&x.D.s!==b&&(B=x.D.U,G=x.ye,(n<B||n===B&&r<G)&&J++,(B<n||B===n&&G<r)&&y++)}}g[j*e+k]=y;g[k*e+j]=J}}bo(a,b,d);return g}function co(a){var b,c=0,d,e;for(b=0;b<=a.Ia;b++){d=wo(a,b,1);e=a.Qc[b];for(var g=0;g<e;g++)for(var i=g;i<e;i++)c+=d[g*e+i]}return c}
function xo(a){t&&v.e(h,"boolean",Z,"countBends:weighted");for(var b=0,c=0;c<=a.Ia;c++){var d=a,e=c;t&&(v.i(e,Z,"bends:unfixedLayer"),v.i(1,Z,"bends:direction"),v.e(h,"boolean",Z,"bends:weighted"));for(var g=Kn(d,e),i=d.Qc[e],j=0,k=f,k=0;k<i;k++){var l=g[k].re,n,r,q;if("undefined"!==typeof l)for(var u=0;u<l.count;u++)n=l.j[u],n.ja&&n.D.s!==e&&(r=n.G.J+n.ve,q=n.D.J+n.Vd,j+=(Math.abs(r-q)+1)*to(n))}bo(d,e,g);b+=j}return b}
Z.prototype.normalize=function(){var a=Infinity;this.Ya=-1;for(var b=this.p.P.f,c;b.next();)c=b.value,a=Math.min(a,c.J-Vn(this,c,h)),this.Ya=Math.max(this.Ya,c.J+Vn(this,c,p));for(b.reset();b.next();)b.value.J-=a;this.Ya-=a};
function yo(a,b,c){t&&(v.i(b,Z,"barycenters:unfixedLayer"),v.i(c,Z,"barycenters:direction"));var d=Kn(a,b),e=a.Qc[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=m;0>=c&&(k=j.cf);var l=m;0<=c&&(l=j.re);var n=0,r=0,q=j.oi;q!==m&&q.s===j.s&&(n+=q.J-1,r++);if(k!==m)for(q=0;q<k.count;q++){var j=k.j[q],u=j.G;j.ja&&(!j.eb&&u.s!==b)&&(n+=u.J+j.ve,r++)}if(l!==m)for(k=0;k<l.count;k++)j=l.j[k],q=j.D,j.ja&&(!j.eb&&q.s!==b)&&(n+=q.J+j.Vd,r++);g[i]=0===r?-1:n/r}bo(a,b,d);return g}
function zo(a,b,c){t&&(v.i(b,Z,"medians:unfixedLayer"),v.i(c,Z,"medians:direction"));for(var d=Kn(a,b),e=a.Qc[b],g=[],i=0;i<e;i++){var j=d[i],k=m;0>=c&&(k=j.cf);var l=m;0<=c&&(l=j.re);var n=0,r=[],q=j.oi;q!==m&&q.s===j.s&&(r[n]=q.J-1,n++);if(k!==m)for(q=0;q<k.count;q++){var j=k.j[q],u=j.G;j.ja&&(!j.eb&&u.s!==b)&&(r[n]=u.J+j.ve,n++)}if(l!==m)for(k=0;k<l.count;k++)j=l.j[k],q=j.D,j.ja&&(!j.eb&&q.s!==b)&&(r[n]=q.J+j.Vd,n++);0===n?g[i]=-1:(r.sort(function(a,b){return a-b}),l=n>>1,g[i]=n&1?r[l]:r[l-1]+
r[l]>>1)}bo(a,b,d);return g}function Ao(a,b,c,d,e,g){t&&(v.c(b,vo,Z,"tightComponentUnset:v"),v.i(c,Z,"tightComponentUnset:component"),v.i(d,Z,"tightComponentUnset:unset"),v.e(e,"boolean",Z,"tightComponentUnset:forward"),v.e(g,"boolean",Z,"tightComponentUnset:backward"));if(b.pb===d){b.pb=c;var i,j;if(e)for(var k=b.nb;k.next();){var l=k.value.D;i=b.s-l.s;j=ro(k.value);i===j&&Ao(a,l,c,d,e,g)}if(g)for(k=b.ob;k.next();)l=k.value.G,i=l.s-b.s,j=ro(k.value),i===j&&Ao(a,l,c,d,e,g)}}
function Bo(a,b,c,d,e,g){t&&(v.c(b,vo,Z,"componentUnset:v"),v.i(c,Z,"componentUnset:component"),v.i(d,Z,"componentUnset:unset"),v.e(e,"boolean",Z,"componentUnset:forward"),v.e(g,"boolean",Z,"componentUnset:backward"));if(b.pb===d){b.pb=c;if(e)for(var i=b.nb,j;i.next();)j=i.value.D,Bo(a,j,c,d,e,g);if(g)for(b=b.ob;b.next();)i=b.value.G,Bo(a,i,c,d,e,g)}}function vn(a){t&&v.c(a,Bm,Z,"greedyCycleRemovalFindNode:network");for(a=a.P.f;a.next();){var b=a.value;if(b.ja)return b}return m}
function wn(a){t&&v.c(a,Bm,Z,"greedyCycleRemovalFindSink:network");for(a=a.P.f;a.next();){var b=a.value;if(b.ja){for(var c=h,d=b.nb;d.next();)if(d.value.D.ja){c=p;break}if(c)return b}}return m}function xn(a){t&&v.c(a,Bm,Z,"greedyCycleRemovalFindSource:network");for(a=a.P.f;a.next();){var b=a.value;if(b.ja){for(var c=h,d=b.ob;d.next();)if(d.value.G.ja){c=p;break}if(c)return b}}return m}
function yn(a,b){t&&v.c(b,vo,Z,"depthFirstSearchCycleRemovalVisit:v");b.oj=a.Pp;a.Pp++;for(var c=b.nb;c.next();){var d=c.value,e=d.D;-1===e.oj&&(d.Qo=h,yn(a,e))}b.fm=a.Pp;a.Pp++}function An(a){for(var b=a.p.P.f;b.next();){var c=Co(a,b.value);a.Ia=Math.max(c,a.Ia)}}function Co(a,b){t&&v.c(b,vo,Z,"longestPathSinkLayeringLength:v");var c=0;if(-1===b.s){for(var d=b.nb;d.next();)var e=d.value,g=ro(e),c=Math.max(c,Co(a,e.D)+g);b.s=c}else c=b.s;return c}
function Cn(a,b){t&&v.c(b,vo,Z,"longestPathSourceLayeringLength:v");var c=0;if(-1===b.s){for(var d,e,g=b.ob;g.next();)e=g.value,d=ro(e),c=Math.max(c,Cn(a,e.G)+d);b.s=c}else c=b.s;return c}
function Dn(a,b){t&&v.c(b,vo,Z,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.ja){b.ja=h;for(var c=b.nb;c.next();)Dn(a,c.value.D);t&&v.c(b,vo,Z,"optimalLinkLengthLayeringPull:v");for(c=a.p.P.f;c.next();)c.value.pb=-1;for(var d=b.ob;d.next();){var e=d.value,g=ro(e);e.G.s-e.D.s>g&&Ao(a,e.G,0,-1,h,p)}for(Ao(a,b,1,-1,h,h);0!==b.pb;){for(var g=0,d=Infinity,i=0,j=m,k=a.p.P.f;k.next();){var l=k.value;if(1===l.pb){for(var n=0,r=p,q=l.ob;q.next();){var e=q.value,u=e.G,n=n+so(e);1!==u.pb&&(g+=so(e),u=
u.s-l.s,e=ro(e),d=Math.min(d,u-e))}for(e=l.nb;e.next();)q=e.value,u=q.D,n-=so(q),1!==u.pb?g-=so(q):r=h;if((j===m||n<i)&&!r)j=l,i=n}}if(0<g){for(c.reset();c.next();)g=c.value,1===g.pb&&(g.s+=d);b.pb=0}else j.pb=0}t&&v.c(b,vo,Z,"optimalLinkLengthLayeringPush:v");for(c=a.p.P.f;c.next();)c.value.pb=-1;for(Ao(a,b,1,-1,h,p);0!==b.pb;){g=0;d=Infinity;i=0;j=m;for(k=a.p.P.f;k.next();)if(l=k.value,1===l.pb){n=0;r=p;for(e=l.ob;e.next();)q=e.value.G,n+=so(e.value),1!==q.pb?g+=so(e.value):r=h;for(e=k.value.nb;e.next();)q=
e.value,u=q.D,n-=so(q),1!==u.pb&&(g-=so(q),u=l.s-u.s,q=ro(q),d=Math.min(d,u-q));if((j===m||n>i)&&!r)j=l,i=n}if(0>g){for(c.reset();c.next();)g=c.value,1===g.pb&&(g.s-=d);b.pb=0}else j.pb=0}}}function Fn(a,b,c){t&&(v.c(b,En,Z,"_oppositeSpotDir:edge"),v.e(c,"boolean",Z,"_oppositeSpotDir:from"));return 90===a.O?c&&!b.eb||!c&&b.eb?Yb:gc:180===a.O?c&&!b.eb||!c&&b.eb?qc:pc:270===a.O?c&&!b.eb||!c&&b.eb?gc:Yb:c&&!b.eb||!c&&b.eb?pc:qc}
function Hn(a,b){t&&v.c(b,vo,Z,"depthFirstOutInitializeIndicesVisit:v");var c=b.s;b.U=a.Qc[c];a.Qc[c]++;for(var c=b.re.zf(),d=h,e;d;){d=p;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.ve>i.ve&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.ja&&(d=d.D,-1===d.U&&Hn(a,d))}
function Jn(a,b){t&&v.c(b,vo,Z,"depthFirstInInitializeIndicesVisit:v");var c=b.s;b.U=a.Qc[c];a.Qc[c]++;for(var c=b.cf.zf(),d=h,e;d;){d=p;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.Vd>i.Vd&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.ja&&(d=d.G,-1===d.U&&Jn(a,d))}
function fo(a,b,c){t&&(v.i(b,Z,"medianBarycenterCrossingReduction:unfixedLayer"),v.i(c,Z,"medianBarycenterCrossingReduction:direction"));for(var d=Kn(a,b),e=a.Qc[b],g=zo(a,b,c),i=yo(a,b,c),c=0;c<e;c++)-1===i[c]&&(i[c]=d[c].J),-1===g[c]&&(g[c]=d[c].J);for(var j=h,k;j;){j=p;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c])j=h,k=g[c],g[c]=g[c+1],g[c+1]=k,k=i[c],i[c]=i[c+1],i[c+1]=k,k=d[c],d[c]=d[c+1],d[c+1]=k}for(c=g=0;c<e;c++)k=d[c],k.U=c,g+=Vn(a,k,h),k.J=g,g+=1,g+=Vn(a,k,p);bo(a,b,d)}
function ho(a,b,c,d){t&&(v.i(b,Z,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer"),v.i(c,Z,"adjacentExchangeCrossingReductionBendStraighten:directionCR"),v.e(p,"boolean",Z,"adjacentExchangeCrossingReductionBendStraighten:straighten"),v.i(d,Z,"adjacentExchangeCrossingReductionBendStraighten:directionBS"));var d=Kn(a,b),e=a.Qc[b],c=wo(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=p,l=h;l;){l=p;for(g=0;g<e-1;g++){var n=c[d[g].U*e+d[g+1].U],r=c[d[g+
1].U*e+d[g].U],q=0,u=0,x=d[g].J,B=d[g+1].J,G=Vn(a,d[g],h),I=Vn(a,d[g],p),y=Vn(a,d[g+1],h),J=Vn(a,d[g+1],p),G=x-G+y,I=B-I+J,z=d[g].ob.f;for(z.reset();z.next();)if(J=z.value,J.ja&&J.G.s===b){J=J.G;for(y=0;d[y]!==J;)y++;y<g&&(q+=2*(g-y),u+=2*(g+1-y));y===g+1&&(q+=1);y>g+1&&(q+=4*(y-g),u+=4*(y-(g+1)))}z=d[g].nb.f;for(z.reset();z.next();)if(J=z.value,J.ja&&J.D.s===b){J=J.D;for(y=0;d[y]!==J;)y++;y===g+1&&(u+=1)}z=d[g+1].ob.f;for(z.reset();z.next();)if(J=z.value,J.ja&&J.G.s===b){J=J.G;for(y=0;d[y]!==J;)y++;
y<g&&(q+=2*(g+1-y),u+=2*(g-y));y===g&&(u+=1);y>g+1&&(q+=4*(y-(g+1)),u+=4*(y-g))}z=d[g+1].nb.f;for(z.reset();z.next();)if(J=z.value,J.ja&&J.D.s===b){J=J.D;for(y=0;d[y]!==J;)y++;y===g&&(q+=1)}var y=J=0,z=i[d[g].U],H=j[d[g].U],fa=i[d[g+1].U],S=j[d[g+1].U];-1!==z&&(J+=Math.abs(z-x),y+=Math.abs(z-I));-1!==H&&(J+=Math.abs(H-x),y+=Math.abs(H-I));-1!==fa&&(J+=Math.abs(fa-B),y+=Math.abs(fa-G));-1!==S&&(J+=Math.abs(S-B),y+=Math.abs(S-G));if(u<q-0.5||u===q&&r<n-0.5||u===q&&r===n&&y<J-0.5)l=k=h,d[g].J=I,d[g+
1].J=G,n=d[g],d[g]=d[g+1],d[g+1]=n}}for(g=0;g<e;g++)d[g].U=g;bo(a,b,d);return k}function no(a,b,c){t&&(v.i(b,Z,"bendStraighten:unfixedLayer"),v.i(c,Z,"bendStraighten:direction"));for(var d=p;Do(a,b,c);)d=h;return d}
function Do(a,b,c){t&&(v.i(b,Z,"shiftbendStraighten:unfixedLayer"),v.i(c,Z,"shiftbendStraighten:direction"));var d,e=Kn(a,b),g=a.Qc[b],i=yo(a,b,-1);if(0<c)for(d=0;d<g;d++)i[d]=-1;var j=yo(a,b,1);if(0>c)for(d=0;d<g;d++)j[d]=-1;for(var k=p,l=h;l;){l=p;for(d=0;d<g;d++){var n=e[d].J,r=Vn(a,e[d],h),q=Vn(a,e[d],p),r=0>d-1||n-e[d-1].J-1>r+Vn(a,e[d-1],p)?n-1:n,q=d+1>=g||e[d+1].J-n-1>q+Vn(a,e[d+1],h)?n+1:n,u=0,x=0,B=0,G,I,y,J;if(0>=c)for(var z=e[d].ob.f;z.next();)G=z.value,G.ja&&G.G.s!==b&&(I=to(G),y=G.ve,
J=G.Vd,G=G.G.J,u+=(Math.abs(n+J-(G+y))+1)*I,x+=(Math.abs(r+J-(G+y))+1)*I,B+=(Math.abs(q+J-(G+y))+1)*I);if(0<=c)for(z=e[d].nb.f;z.next();)G=z.value,G.ja&&G.D.s!==b&&(I=to(G),y=G.ve,J=G.Vd,G=G.D.J,u+=(Math.abs(n+y-(G+J))+1)*I,x+=(Math.abs(r+y-(G+J))+1)*I,B+=(Math.abs(q+y-(G+J))+1)*I);J=y=I=0;G=i[e[d].U];z=j[e[d].U];-1!==G&&(I+=Math.abs(G-n),y+=Math.abs(G-r),J+=Math.abs(G-q));-1!==z&&(I+=Math.abs(z-n),y+=Math.abs(z-r),J+=Math.abs(z-q));if(x<u||x===u&&y<I)l=k=h,e[d].J=r;if(B<u||B===u&&J<I)l=k=h,e[d].J=
q}}bo(a,b,e);a.normalize();return k}
function po(a,b,c){t&&(v.i(b,Z,"medianStraighten:unfixedLayer"),v.i(c,Z,"medianStraighten:direction"));for(var d=Kn(a,b),e=a.Qc[b],g=zo(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=p;for(c=0;c<e;c++){var j=d[c].J,k=Vn(a,d[c],h),l=Vn(a,d[c],p),n=0,r;-1===i[c]?0===c&&c===e-1?n=j:0===c?(r=d[c+1].J,n=r-j===l+Vn(a,d[c+1],h)?j-1:j):c===e-1?(r=d[c-1].J,n=j-r===k+Vn(a,d[c-1],p)?j+1:j):(r=d[c-1].J,k=r+Vn(a,d[c-1],p)+k+1,r=d[c+1].J,l=r-Vn(a,d[c+1],h)-l-1,n=(k+l)/2|0):0===c&&c===e-1?n=i[c]:0===c?(r=d[c+1].J,
l=r-Vn(a,d[c+1],h)-l-1,n=Math.min(i[c],l)):c===e-1?(r=d[c-1].J,k=r+Vn(a,d[c-1],p)+k+1,n=Math.max(i[c],k)):(r=d[c-1].J,k=r+Vn(a,d[c-1],p)+k+1,r=d[c+1].J,l=r-Vn(a,d[c+1],h)-l-1,k<i[c]&&i[c]<l?n=i[c]:k>=i[c]?n=k:l<=i[c]&&(n=l));n!==j&&(g=h,d[c].J=n)}}bo(a,b,d);a.normalize()}
function Eo(a,b){t&&(v.i(b,Z,"packAux:column"),v.i(1,Z,"packAux:direction"));for(var c=h,d=a.p.P.f,e;d.next();){e=d.value;var g=Vn(a,e,h),i=Vn(a,e,p);if(e.J-g<=b&&e.J+i>=b){c=p;break}}g=p;if(c)for(d.reset();d.next();)e=d.value,e.J>b&&(e.J-=1,g=h);return g}
function Fo(a,b){t&&(v.i(b,Z,"tightPackAux:column"),v.i(1,Z,"tightPackAux:direction"));var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.Ia;d++)e[d]=p,g[d]=p;for(var i=a.p.P.f;i.next();){d=i.value;var j=d.J-Vn(a,d,h),k=d.J+Vn(a,d,p);j<=b&&k>=b&&(e[d.s]=h);j<=c&&k>=c&&(g[d.s]=h)}j=h;c=p;for(d=0;d<=a.Ia;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();)d=i.value,d.J>b&&(d.J-=1,c=h);return c}
function qo(a,b){t&&v.i(b,Z,"componentPack:direction");for(var c=0;c<=a.Ya;c++)for(;Eo(a,c););a.normalize();for(c=0;c<a.Ya;c++)for(;Fo(a,c););a.normalize();var d,e,g,i;if(0<b)for(c=0;c<=a.Ya;c++){d=eo(a);e=xo(a);for(g=e+1;e<g;)g=e,Go(a,c,1),i=xo(a),i>e?io(a,d):i<e&&(e=i,d=eo(a))}if(0>b)for(c=a.Ya;0<=c;c--){d=eo(a);e=xo(a);for(g=e+1;e<g;)g=e,Go(a,c,-1),i=xo(a),i>e?io(a,d):i<e&&(e=i,d=eo(a))}a.normalize()}
function Go(a,b,c){t&&(v.i(b,Z,"componentPackAux:column"),v.i(c,Z,"componentPackAux:direction"));a.af=0;for(var d=a.p.P.f,e;d.next();)d.value.pb=-1;if(0<c)for(d.reset();d.next();)e=d.value,e.J-Vn(a,e,h)<=b&&(e.pb=a.af);if(0>c)for(d.reset();d.next();)e=d.value,e.J+Vn(a,e,p)>=b&&(e.pb=a.af);a.af++;for(d.reset();d.next();)e=d.value,-1===e.pb&&(Bo(a,e,a.af,-1,h,h),a.af++);b=[];for(e=0;e<a.af*a.af;e++)b[e]=p;var g=[];for(e=0;e<(a.Ia+1)*(a.Ya+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.s,j=Math.max(0,e.J-Vn(a,e,h)),k=Math.min(a.Ya,e.J+Vn(a,e,p));j<=k;j++)g[i*(a.Ya+1)+j]=e.pb}for(e=0;e<=a.Ia;e++){if(0<c)for(j=0;j<a.Ya;j++)-1!==g[e*(a.Ya+1)+j]&&(-1!==g[e*(a.Ya+1)+j+1]&&g[e*(a.Ya+1)+j]!==g[e*(a.Ya+1)+j+1])&&(b[g[e*(a.Ya+1)+j]*a.af+g[e*(a.Ya+1)+j+1]]=h);if(0>c)for(j=a.Ya;0<j;j--)-1!==g[e*(a.Ya+1)+j]&&(-1!==g[e*(a.Ya+1)+j-1]&&g[e*(a.Ya+1)+j]!==g[e*(a.Ya+1)+j-1])&&(b[g[e*(a.Ya+1)+j]*a.af+g[e*(a.Ya+1)+j-1]]=h)}g=[];for(e=0;e<a.af;e++)g[e]=h;i=new A("number");for(i.add(0);0!==i.count;)if(k=
i.j[i.count-1],i.Se(i.count-1),g[k]){g[k]=p;for(e=0;e<a.af;e++)b[k*a.af+e]&&i.gc(0,e)}if(0<c)for(d.reset();d.next();)e=d.value,g[e.pb]&&(e.J-=1);if(0>c)for(d.reset();d.next();)e=d.value,g[e.pb]&&(e.J+=1)}Z.prototype.commitLayout=Z.prototype.hu=function(){if(this.El){var a,b;270===this.O?(a=oc,b=sc):90===this.O?(a=sc,b=oc):180===this.O?(a=pc,b=qc):(a=qc,b=pc);for(var c=this.p.Mb.f,d;c.next();)d=c.value.Aa,d!==m&&(d.Va=a,d.Xa=b)}this.commitNodes();this.commitLinks()};
Z.prototype.commitNodes=Z.prototype.Jx=function(){this.xg=[];this.Nf=[];this.se=[];this.Rc=[];for(var a=0;a<=this.Ia;a++)this.xg[a]=0,this.Nf[a]=0,this.se[a]=0,this.Rc[a]=0;for(var a=this.p.P.f,b,c;a.next();)b=a.value,c=b.s,this.xg[c]=Math.max(this.xg[c],uo(this,b,h)),this.Nf[c]=Math.max(this.Nf[c],uo(this,b,p));b=0;for(var d=this.ed,e=0;e<=this.Ia;e++)c=d,0>=this.xg[e]+this.Nf[e]&&(c=0),0<e&&(b+=c/2),90===this.O||0===this.O?(b+=this.Nf[e],this.se[e]=b,b+=this.xg[e]):(b+=this.xg[e],this.se[e]=b,b+=
this.Nf[e]),e<this.Ia&&(b+=c/2),this.Rc[e]=b;d=this.Lc.copy();for(e=0;e<=this.Ia;e++)270===this.O?(this.se[e]=d.y+this.se[e],this.Rc[e]=d.y+this.Rc[e]):90===this.O?(this.se[e]=d.y+b-this.se[e],this.Rc[e]=d.y+b-this.Rc[e]):180===this.O?(this.se[e]=d.x+this.se[e],this.Rc[e]=d.x+this.Rc[e]):(this.se[e]=d.x+b-this.se[e],this.Rc[e]=d.x+b-this.Rc[e]);for(a.reset();a.next();){b=a.value;c=b.s;var g=b.J|0;270===this.O||90===this.O?(e=d.x+this.Oc*g,c=this.se[c]):(e=this.se[c],c=d.y+this.Oc*g);b.ya=e;b.za=c;
b.Mh()}};
Z.prototype.commitLinks=Z.prototype.Ix=function(){for(var a=this.p.Mb.f,b,c;a.next();)c=a.value.Aa,"undefined"!==typeof c&&c!==m&&(c.kk(),c.bn(),c.Nh());for(a.reset();a.next();)c=a.value.Aa,"undefined"!==typeof c&&c!==m&&Kl(c);for(a.reset();a.next();)if(b=a.value,c=b.Aa){c.kk();var d=c,e=d.da,g=d.ga,i=d.Bc,j=d.md;if(b.ja){if(c.He===Hj&&4===c.Y){b.eb&&(d=e,e=g,g=d,d=i,i=j,j=d);var k,l,n,r;if(b.G.J===b.D.J)k=c.Nd(e,i,Ql(c),h,p,g,j).copy(),l=c.Nd(g,j,Rl(c),p,p,e,i).copy(),n=new E((2*k.x+l.x)/3,(2*k.y+
l.y)/3),r=new E((k.x+2*l.x)/3,(k.y+2*l.y)/3),c.bn(),c.Wc(k),c.Wc(n),c.Wc(r),c.Wc(l);else{d=b=p;i!==m&&Ql(c)===Ub&&(b=h);j!==m&&Rl(c)===Ub&&(d=h);if(b||d)k=c.h(0).copy(),n=c.h(1).copy(),r=c.h(2).copy(),l=c.h(3).copy();b&&(90===this.O||270===this.O?(n.x=k.x,n.y=(k.y+l.y)/2):(n.x=(k.x+l.x)/2,n.y=k.y),c.w(1,n),c.w(0,c.Nd(e,i,Ql(c),h,p,g,j).copy()));d&&(90===this.O||270===this.O?(r.x=l.x,r.y=(k.y+l.y)/2):(r.x=(k.x+l.x)/2,r.y=l.y),c.w(2,r),c.w(3,c.Nd(g,j,Rl(c),p,p,e,i).copy()))}}c.Nh()}else if(b.G.s===
b.D.s)c.Nh();else{var q=p,u=p,x,B=c.xu+1;if(ug(c))u=h,x=c.Y,4<x&&c.ib.removeRange(2,x-3);else if(c.He===Hj)q=h,x=c.Y,4<x&&c.ib.removeRange(2,x-3),B=2;else{x=c.Y;var G=Ql(c)===Ub,I=Rl(c)===Ub;2<x&&G&&I?c.ib.removeRange(1,x-2):3<x&&G&&!I?c.ib.removeRange(1,x-3):3<x&&!G&&I?c.ib.removeRange(2,x-2):4<x&&(!G&&!I)&&c.ib.removeRange(2,x-3)}x=b.G;var I=b.D,y;if(b.eb){for(;I!==m&&x!==I;){y=G=m;for(var J=I.ob.f;J.next()&&!(z=J.value,z.Aa===b.Aa&&(G=z.G,y=z.D,G.Ba===m)););G!==x&&(z=c.h(B-1).copy(),J=new E(G.ya,
G.za),u?180===this.O||0===this.O?2===B?(c.q(B++,new E(z.x,z.y)),c.q(B++,new E(z.x,J.y))):(y=y!==m?new E(y.ya,y.za):z.copy(),y.y!==J.y&&(y=this.Rc[G.s-1],c.q(B++,new E(y,z.y)),c.q(B++,new E(y,J.y)))):2===B?(c.q(B++,new E(z.x,z.y)),c.q(B++,new E(J.x,z.y))):(y=y!==m?new E(y.ya,y.za):z.copy(),y.x!==J.x&&(y=this.Rc[G.s-1],c.q(B++,new E(z.x,y)),c.q(B++,new E(J.x,y)))):2===B?q?(y=Math.max(10,this.xg[I.s]),H=Math.max(10,this.Nf[I.s]),180===this.O?(I=I.A.x,c.q(B++,new E(I-y,J.y)),c.q(B++,new E(I,J.y)),c.q(B++,
new E(I+H,J.y))):90===this.O?(I=I.A.y+I.A.height,c.q(B++,new E(J.x,I+H)),c.q(B++,new E(J.x,I)),c.q(B++,new E(J.x,I-y))):270===this.O?(I=I.A.y,c.q(B++,new E(J.x,I-y)),c.q(B++,new E(J.x,I)),c.q(B++,new E(J.x,I+H))):(I=I.A.x+I.A.width,c.q(B++,new E(I+H,J.y)),c.q(B++,new E(I,J.y)),c.q(B++,new E(I-y,J.y)))):(c.q(B++,z),180===this.O||0===this.O?c.q(B++,new E(z.x,J.y)):c.q(B++,new E(J.x,z.y)),c.q(B++,new E(J.x,J.y))):(y=Math.max(10,this.xg[G.s]),H=Math.max(10,this.Nf[G.s]),180===this.O?(q&&c.q(B++,new E(J.x-
y,J.y)),c.q(B++,J),q&&c.q(B++,new E(J.x+H,J.y))):90===this.O?(q&&c.q(B++,new E(J.x,J.y+H)),c.q(B++,J),q&&c.q(B++,new E(J.x,J.y-y))):270===this.O?(q&&c.q(B++,new E(J.x,J.y-y)),c.q(B++,J),q&&c.q(B++,new E(J.x,J.y+H))):(q&&c.q(B++,new E(J.x+H,J.y)),c.q(B++,J),q&&c.q(B++,new E(J.x-y,J.y)))));I=G}if(j===m||!Rl(c).u(Ub))z=c.h(B-1).copy(),J=c.h(B).copy(),u?(G=this.Nf[x.s],180===this.O||0===this.O?(u=z.y,u>=x.A.y&&u<=x.A.bottom&&(I=x.ya+G,u=u<x.A.y+x.A.height/2?x.A.y-this.Oc/2:x.A.bottom+this.Oc/2,c.q(B++,
new E(I,z.y)),c.q(B++,new E(I,u))),c.q(B++,new E(J.x,u))):(u=z.x,u>=x.A.x&&u<=x.A.right&&(I=x.za+G,u=u<x.A.x+x.A.width/2?x.A.x-this.Oc/2:x.A.right+this.Oc/2,c.q(B++,new E(z.x,I)),c.q(B++,new E(u,I))),c.q(B++,new E(u,J.y))),c.q(B++,J)):q?(y=Math.max(10,this.xg[x.s]),H=Math.max(10,this.Nf[x.s]),180===this.O?(I=x.A.x+x.A.width,c.w(B-2,new E(I,z.y)),c.w(B-1,new E(I+H,z.y))):90===this.O?(I=x.A.y,c.w(B-2,new E(z.x,I)),c.w(B-1,new E(z.x,I-y))):270===this.O?(I=x.A.y+x.A.height,c.w(B-2,new E(z.x,I)),c.w(B-
1,new E(z.x,I+H))):(I=x.A.x,c.w(B-2,new E(I,z.y)),c.w(B-1,new E(I-y,z.y)))):(180===this.O||0===this.O?c.q(B++,new E(J.x,z.y)):c.q(B++,new E(z.x,J.y)),c.q(B++,J))}else{for(;x!==m&&x!==I;){y=G=m;x=x.nb.f;for(var z;x.next()&&!(z=x.value,z.Aa===b.Aa&&(G=z.D,y=z.G,y.Ba!==m&&(y=m),G.Ba===m)););var H;G!==I&&(z=c.h(B-1).copy(),J=new E(G.ya,G.za),u?180===this.O||0===this.O?(y=y!==m?new E(y.ya,y.za):z.copy(),y.y!==J.y&&(y=this.Rc[G.s],2===B&&(y=0===this.O?Math.max(y,z.x):Math.min(y,z.x)),c.q(B++,new E(y,z.y)),
c.q(B++,new E(y,J.y)))):(y=y!==m?new E(y.ya,y.za):z.copy(),y.x!==J.x&&(y=this.Rc[G.s],2===B&&(y=90===this.O?Math.max(y,z.y):Math.min(y,z.y)),c.q(B++,new E(z.x,y)),c.q(B++,new E(J.x,y)))):(y=Math.max(10,this.xg[G.s]),H=Math.max(10,this.Nf[G.s]),180===this.O?(c.q(B++,new E(J.x+H,J.y)),q&&c.q(B++,J),c.q(B++,new E(J.x-y,J.y))):90===this.O?(c.q(B++,new E(J.x,J.y-y)),q&&c.q(B++,J),c.q(B++,new E(J.x,J.y+H))):270===this.O?(c.q(B++,new E(J.x,J.y+H)),q&&c.q(B++,J),c.q(B++,new E(J.x,J.y-y))):(c.q(B++,new E(J.x-
y,J.y)),q&&c.q(B++,J),c.q(B++,new E(J.x+H,J.y)))));x=G}u&&(z=c.h(B-1).copy(),J=c.h(B).copy(),180===this.O||0===this.O?z.y!==J.y&&(y=0===this.O?Math.min(Math.max((J.x+z.x)/2,this.Rc[I.s]),J.x):Math.max(Math.min((J.x+z.x)/2,this.Rc[I.s]),J.x),c.q(B++,new E(y,z.y)),c.q(B++,new E(y,J.y))):z.x!==J.x&&(y=90===this.O?Math.min(Math.max((J.y+z.y)/2,this.Rc[I.s]),J.y):Math.max(Math.min((J.y+z.y)/2,this.Rc[I.s]),J.y),c.q(B++,new E(z.x,y)),c.q(B++,new E(J.x,y))))}d!==m&&q&&(i!==m&&(Sb(Ql(c))&&(d=c.h(0).copy(),
q=c.h(2).copy(),d.u(q)||c.w(1,new E((d.x+q.x)/2,(d.y+q.y)/2))),c.w(0,c.Nd(e,i,Ub,h,p,g,j))),j!==m&&(Sb(Rl(c))&&(d=c.h(c.Y-1),q=c.h(c.Y-3),d.u(q)||c.w(c.Y-2,new E((d.x+q.x)/2,(d.y+q.y)/2))),c.w(c.Y-1,c.Nd(g,j,Ub,p,p,e,i))));c.Nh();b.Mh()}}e=new A(W);for(a=this.p.Mb.f;a.next();)c=a.value.Aa,c!==m&&(ug(c)&&!e.contains(c))&&e.add(c);if(0<e.count)if(90===this.O||270===this.O){t&&v.c(e,A,Z,"adjustOverlapsH:routables");a=0;c=new A(Ho);for(k=e.f;k.next();)if(g=k.value,g!==m&&ug(g))for(e=2;e<g.Y-3;e++)i=g.h(e).copy(),
j=g.h(e+1).copy(),Io(i.y,j.y)&&!Io(i.x,j.x)&&(l=new Ho,l.s=Math.floor(i.y/2),n=g.h(0).copy(),r=g.h(g.Y-1).copy(),l.dc=n.x*n.x+n.y,l.$c=r.x*r.x+r.y,l.sd=Math.min(i.x,j.x),l.Xc=Math.max(i.x,j.x),l.U=e,l.Aa=g,e+2<g.Y&&(n=g.h(e-1).copy(),r=g.h(e+2).copy(),b=0,n.y<i.y?b=r.y<i.y?3:i.x<j.x?2:1:n.y>i.y&&(b=r.y>i.y?0:j.x<i.x?2:1),l.eh=b),c.add(l));if(1<c.count){c.sort(this.bD);for(k=0;k<c.count;){e=c.j[k].s;for(l=k+1;l<c.count&&c.j[l].s===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.j[g].Xc;for(n=k+1;n<l&&c.j[n].sd<
e;)e=Math.max(e,c.j[n].Xc),n++;i=n-g;if(1<i){c.Tn(this.Vu,g,g+i);j=1;r=c.j[g].$c;for(e=g;e<n;e++)b=c.j[e],b.$c!==r&&(j++,r=b.$c);c.Tn(this.aD,g,g+i);q=1;r=c.j[g].dc;for(e=g;e<n;e++)b=c.j[e],b.dc!==r&&(q++,r=b.dc);j<q?(d=p,q=j,r=c.j[g].$c,c.Tn(this.Vu,g,g+i)):(d=h,r=c.j[g].dc);B=0;for(e=g;e<n;e++){b=c.j[e];if((d?b.dc:b.$c)!==r)B++,r=d?b.dc:b.$c;g=b.Aa;i=g.h(b.U).copy();j=g.h(b.U+1).copy();u=4*(B-(q-1)/2);if(g.Te!==If||Jo(i.x,i.y+u,j.x,j.y+u))a++,g.kk(),g.w(b.U,new E(i.x,i.y+u)),g.w(b.U+1,new E(j.x,
j.y+u)),g.Nh()}}g=n}k=l}}}else{t&&v.c(e,A,Z,"adjustOverlapsV:routables");a=0;c=new A(Ho);for(k=e.f;k.next();)if(g=k.value,g!==m&&ug(g))for(e=2;e<g.Y-3;e++)i=g.h(e).copy(),j=g.h(e+1).copy(),Io(i.x,j.x)&&!Io(i.y,j.y)&&(l=new Ho,l.s=Math.floor(i.x/2),n=g.h(0).copy(),r=g.h(g.Y-1).copy(),l.dc=n.x+n.y*n.y,l.$c=r.x+r.y*r.y,l.sd=Math.min(i.y,j.y),l.Xc=Math.max(i.y,j.y),l.U=e,l.Aa=g,e+2<g.Y&&(n=g.h(e-1).copy(),r=g.h(e+2).copy(),b=0,n.x<i.x?b=r.x<i.x?3:i.y<j.y?2:1:n.x>i.x&&(b=r.x>i.x?0:j.y<i.y?2:1),l.eh=b),
c.add(l));if(1<c.count){c.sort(this.bD);for(k=0;k<c.count;){e=c.j[k].s;for(l=k+1;l<c.count&&c.j[l].s===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.j[g].Xc;for(n=k+1;n<l&&c.j[n].sd<e;)e=Math.max(e,c.j[n].Xc),n++;i=n-g;if(1<i){c.Tn(this.Vu,g,g+i);j=1;r=c.j[g].$c;for(e=g;e<n;e++)b=c.j[e],b.$c!==r&&(j++,r=b.$c);c.Tn(this.aD,g,g+i);q=1;r=c.j[g].dc;for(e=g;e<n;e++)b=c.j[e],b.dc!==r&&(q++,r=b.dc);j<q?(d=p,q=j,r=c.j[g].$c,c.Tn(this.Vu,g,g+i)):(d=h,r=c.j[g].dc);B=0;for(e=g;e<n;e++){b=c.j[e];if((d?b.dc:b.$c)!==r)B++,
r=d?b.dc:b.$c;g=b.Aa;i=g.h(b.U).copy();j=g.h(b.U+1).copy();u=4*(B-(q-1)/2);if(g.Te!==If||Jo(i.x+u,i.y,j.x+u,j.y))a++,g.kk(),g.w(b.U,new E(i.x+u,i.y)),g.w(b.U+1,new E(j.x+u,j.y)),g.Nh()}}g=n}k=l}}}};function Ho(){this.U=this.Xc=this.sd=this.$c=this.dc=this.s=0;this.Aa=m;this.eh=0}v.kd(Ho,{sa:h,dc:h,$c:h,sd:h,Xc:h,index:h,link:h,eh:h});Z.prototype.bD=function(a,b){return!(a instanceof Ho)||!(b instanceof Ho)||a===b?0:a.s<b.s?-1:a.s>b.s?1:a.sd<b.sd?-1:a.sd>b.sd?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:0};
Z.prototype.aD=function(a,b){return!(a instanceof Ho)||!(b instanceof Ho)||a===b?0:a.dc<b.dc?-1:a.dc>b.dc||a.eh<b.eh?1:a.eh>b.eh||a.sd<b.sd?-1:a.sd>b.sd?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:0};Z.prototype.Vu=function(a,b){return!(a instanceof Ho)||!(b instanceof Ho)||a===b?0:a.$c<b.$c?-1:a.$c>b.$c||a.eh<b.eh?1:a.eh>b.eh||a.sd<b.sd?-1:a.sd>b.sd?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:0};function Io(a,b){t&&(v.i(a,Z,"isApprox:a"),v.i(b,Z,"isApprox:b"));var c=a-b;return-1<c&&1>c}
function Jo(a,b,c,d){t&&(v.i(a,Z,"isUnoccupied2:px"),v.i(b,Z,"isUnoccupied2:py"),v.i(c,Z,"isUnoccupied2:qx"),v.i(d,Z,"isUnoccupied2:qy"));return h}function Kn(a,b){var c,d=a.Qc[b];if(d>=a.Rf.length){c=[];var e;for(e=0;e<a.Rf.length;e++)c[e]=a.Rf[e];a.Rf=c}"undefined"===typeof a.Rf[d]||a.Rf[d]===m?c=[]:(c=a.Rf[d],a.Rf[d]=m);var d=a.Qp[b],g;for(e=0;e<d.length;e++)g=d[e],g instanceof vo&&(c[g.U]=g);return c}function bo(a,b,c){a.Rf[a.Qc[b]]=c}v.a(Z,"layerSpacing",Z.prototype.yr);
v.defineProperty(Z,{yr:"layerSpacing"},s("ed"),function(a){this.ed!==a&&("number"===typeof a&&0<=a)&&(this.ed=a,this.r())});v.a(Z,"columnSpacing",Z.prototype.ZE);v.defineProperty(Z,{ZE:"columnSpacing"},s("Oc"),function(a){this.Oc!==a&&("number"===typeof a&&0<=a)&&(this.Oc=a,this.r())});v.a(Z,"direction",Z.prototype.direction);v.defineProperty(Z,{direction:"direction"},s("O"),function(a){this.O!==a&&"number"===typeof a&&(this.O=a,this.r())});v.a(Z,"cycleRemoveOption",Z.prototype.lB);
v.defineProperty(Z,{lB:"cycleRemoveOption"},s("Yl"),function(a){if(this.Yl!==a&&(t&&v.c(a,ha,tn,"cycleRemoveOption"),a===un||a===on))this.Yl=a,this.r()});v.a(Z,"layeringOption",Z.prototype.iC);v.defineProperty(Z,{iC:"layeringOption"},s("qm"),function(a){if(this.qm!==a&&(t&&v.c(a,ha,tn,"layeringOption"),a===pn||a===zn||a===Bn))this.qm=a,this.r()});v.a(Z,"initializeOption",Z.prototype.$B);
v.defineProperty(Z,{$B:"initializeOption"},s("km"),function(a){if(this.km!==a&&(t&&v.c(a,ha,tn,"initializeOption"),a===qn||a===In||a===Gn))this.km=a,this.r()});v.a(Z,"iterations",Z.prototype.SF);v.defineProperty(Z,{SF:"iterations"},s("Kk"),function(a){t&&v.i(a,tn,"iterations");this.Kk!==a&&("number"===typeof a&&0<=a)&&(this.Kk=a,this.r())});v.a(Z,"aggressiveOption",Z.prototype.PA);
v.defineProperty(Z,{PA:"aggressiveOption"},s("Pl"),function(a){if(this.Pl!==a&&(t&&v.c(a,ha,tn,"cycleRemoveOption"),a===jo||a===rn||a===ko))this.Pl=a,this.r()});v.a(Z,"packOption",Z.prototype.iG);v.defineProperty(Z,{iG:"packOption"},s("Ah"),function(a){this.Ah!==a&&("number"===typeof a&&0<=a&&8>a)&&(this.Ah=a,this.r())});v.a(Z,"setsPortSpots",Z.prototype.El);v.defineProperty(Z,{El:"setsPortSpots"},s("Cg"),function(a){this.Cg!==a&&"boolean"===typeof a&&(this.Cg=a,this.r())});
v.m(Z,{AJ:"maxLayer"},s("Ia"));v.m(Z,{yJ:"maxIndex"},s("Ys"));v.m(Z,{xJ:"maxColumn"},s("Ya"));v.m(Z,{GJ:"minIndexLayer"},s("Ip"));v.m(Z,{zJ:"maxIndexLayer"},s("te"));var on;Z.CycleDepthFirst=on=v.l(Z,"CycleDepthFirst",0);var un;Z.CycleGreedy=un=v.l(Z,"CycleGreedy",1);var pn;Z.LayerOptimalLinkLength=pn=v.l(Z,"LayerOptimalLinkLength",0);var zn;Z.LayerLongestPathSink=zn=v.l(Z,"LayerLongestPathSink",1);var Bn;Z.LayerLongestPathSource=Bn=v.l(Z,"LayerLongestPathSource",2);var qn;
Z.InitDepthFirstOut=qn=v.l(Z,"InitDepthFirstOut",0);var In;Z.InitDepthFirstIn=In=v.l(Z,"InitDepthFirstIn",1);var Gn;Z.InitNaive=Gn=v.l(Z,"InitNaive",2);var jo;Z.AggressiveNone=jo=v.l(Z,"AggressiveNone",0);var rn;Z.AggressiveLess=rn=v.l(Z,"AggressiveLess",1);var ko;Z.AggressiveMore=ko=v.l(Z,"AggressiveMore",2);Z.PackNone=0;var lo;Z.PackExpand=lo=1;var mo;Z.PackStraighten=mo=2;var oo;Z.PackMedian=oo=4;var sn;Z.PackAll=sn=7;function tn(){Bm.call(this)}v.H("LayeredDigraphNetwork",tn);v.na(tn,Bm);
tn.prototype.createVertex=tn.prototype.Di=function(){return new vo};tn.prototype.createEdge=tn.prototype.en=function(){return new En};function vo(){Fm.call(this);this.U=this.J=this.s=-1;this.ja=p;this.pb=this.fm=this.oj=NaN;this.oi=m;this.tk=0;this.Cw=this.Dw=f}v.H("LayeredDigraphVertex",vo);v.na(vo,Fm);v.a(vo,"layer",vo.prototype.sa);v.defineProperty(vo,{sa:"layer"},s("s"),ba("s"));v.a(vo,"column",vo.prototype.jd);v.defineProperty(vo,{jd:"column"},s("J"),ba("J"));v.a(vo,"index",vo.prototype.index);
v.defineProperty(vo,{index:"index"},s("U"),ba("U"));v.a(vo,"valid",vo.prototype.valid);v.defineProperty(vo,{valid:"valid"},s("ja"),ba("ja"));v.a(vo,"discover",vo.prototype.jF);v.defineProperty(vo,{jF:"discover"},s("oj"),ba("oj"));v.a(vo,"finish",vo.prototype.finish);v.defineProperty(vo,{finish:"finish"},s("fm"),ba("fm"));v.a(vo,"component",vo.prototype.$E);v.defineProperty(vo,{$E:"component"},s("pb"),ba("pb"));v.a(vo,"near",vo.prototype.fG);
v.defineProperty(vo,{fG:"near"},s("oi"),function(a){a!==m&&v.c(a,vo,vo,"layeredDigraphVertex");this.oi=a});function En(){Gm.call(this);this.Qo=this.eb=this.ja=p;this.ye=this.we=NaN;this.Vd=this.XG=0}v.H("LayeredDigraphEdge",En);v.na(En,Gm);v.a(En,"valid",En.prototype.valid);v.defineProperty(En,{valid:"valid"},s("ja"),ba("ja"));v.a(En,"rev",En.prototype.rev);v.defineProperty(En,{rev:"rev"},s("eb"),ba("eb"));v.a(En,"forest",En.prototype.vF);v.defineProperty(En,{vF:"forest"},s("Qo"),ba("Qo"));
v.a(En,"portFromPos",En.prototype.kG);v.defineProperty(En,{kG:"portFromPos"},s("we"),ba("we"));v.a(En,"portToPos",En.prototype.mG);v.defineProperty(En,{mG:"portToPos"},s("ye"),ba("ye"));v.a(En,"portFromColOffset",En.prototype.jG);v.defineProperty(En,{jG:"portFromColOffset"},s("ve"),ba("ve"));v.a(En,"portToColOffset",En.prototype.lG);v.defineProperty(En,{lG:"portToColOffset"},s("Vd"),ba("Vd"));
function Y(){Dh.call(this);this.nc=new A(U);this.cc=Ko;this.Cq=Lo;this.wc=Mo;this.Ue=(new hb(10,10)).freeze();this.S=new $;this.R=new $}v.H("TreeLayout",Y);v.na(Y,Dh);Y.prototype.cloneProtected=Y.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.cc=this.cc;a.Cq=this.Cq;a.wc=this.wc;a.Ue=this.Ue.B();No(a.S,this.S);No(a.R,this.R)};Y.prototype.createNetwork=Y.prototype.ku=function(){var a=new Oo;Cm(a,this);return a};
Y.prototype.makeNetwork=Y.prototype.ZF=function(a){var b=this.createNetwork();a instanceof C?(Po(this,b,a.hk,h),Po(this,b,a.links,h)):a instanceof V?Po(this,b,a.hc,p):a.f&&Po(this,b,a.f,p);return b};
function Po(a,b,c,d){for(c=c.f;c.next();){var e=c.value;if(e instanceof U&&e.$q()&&"Comment"!==e.hd&&(!d||e.wr))e.Ni||(e instanceof V&&e.sb===m?Po(a,b,e.hc,p):b.Rm(e))}for(c.reset();c.next();)if(e=c.value,e instanceof W&&e.$q()&&"Comment"!==e.hd&&(!d||e.wr)){var g=e.da,a=e.ga;if(!(g===m||a===m||g===a)&&"Comment"!==g.hd&&"Comment"!==a.hd)g=b.uu(g),a=b.uu(a),g!==m&&a!==m&&b.vl(g,a,e)}}
Y.prototype.doLayout=Y.prototype.fr=function(a){this.Dc===m&&(this.Dc=this.makeNetwork(a));this.nc===m&&(this.nc=new A(U));this.Jd!==Qo&&(this.Lc=Em(this,this.Lc));if(0<this.p.P.count){this.p.ou();for(var b=this.p.P.f;b.next();)a=b.value,a.wj=p,a.Lk=0,a.cb=m,a.zb=[];for(var c=this.nc.f;c.next();)b=c.value,a=this.p.ce(b),a===m&&this.nc.remove(b);if(0===this.nc.length){for(a=this.p.P.f;a.next();)switch(b=a.value,this.cc){case Ko:0===b.ob.count&&this.nc.add(b.Ba);break;case Ro:0===b.nb.count&&this.nc.add(b.Ba);
break;default:v.g("Unhandled path value "+this.cc.toString())}if(0===this.nc.count){a=999999;b=m;for(c=this.p.P.f;c.next();){var d=c.value;switch(this.cc){case Ko:d.ob.count<a&&(a=d.ob.count,b=d);break;case Ro:d.nb.count<a&&(a=d.nb.count,b=d);break;default:v.g("Unhandled path value "+this.cc.toString())}}b!==m&&this.nc.add(b.Ba)}}for(c=this.nc.f;c.next();)b=c.value,a=this.p.ce(b),a!==m&&!a.wj&&(a.wj=h,So(this,a));for(a=this.nc.f;a.next();)b=this.p.ce(a.value),To(this,b);for(a=this.nc.f;a.next();)b=
this.p.ce(a.value),Uo(this,b);for(a=this.nc.f;a.next();)Vo(this,this.p.ce(a.value));for(a=this.p.P.f;a.next();)this.JA(a.value);for(a=this.nc.f;a.next();)Wo(this,this.p.ce(a.value));if(this.wc===Qo)for(a=this.nc.f;a.next();)c=a.value,b=this.p.ce(c),d=c.position,c=d.x,d=d.y,isFinite(c)||(c=0),isFinite(d)||(d=0),Xo(this,b,c,d);else{d=this.Lc.copy();for(a=this.nc.f;a.next();)if(c=a.value,b=this.p.ce(c),b!==m)switch(Xo(this,b,d.x+b.ra.x,d.y+b.ra.y),this.wc){case Mo:d.y+=b.Ca.height+this.Ue.height;break;
case Yo:d.x+=b.Ca.width+this.Ue.width;break;default:v.g("Unhandled arrangement value "+this.wc.toString())}d.freeze()}this.updateParts()}this.nc=this.Dc=m;this.Ne=h};
function So(a,b){t&&v.c(b,$,Y,"walkTree:v");if(b!==m){var c,d,e;switch(a.cc){case Ko:if(0<b.nb.count){c=new A($);for(d=b.iF;d.next();)e=d.value,Zo(a,b,e)&&c.add(e);0<c.count&&(b.zb=c.zf())}break;case Ro:if(0<b.ob.count){c=new A($);for(d=b.FG;d.next();)e=d.value,Zo(a,b,e)&&c.add(e);0<c.count&&(b.zb=c.zf())}break;default:v.g("Unhandled path value"+a.cc.toString())}d=b.zb;var g=d.length;for(c=0;c<g;c++)e=d[c],e.wj=h,e.Lk=b.Lk+1,e.cb=b,a.nc.remove(e.Ba);for(c=0;c<g;c++)e=d[c],So(a,e)}}
function Zo(a,b,c){t&&v.c(b,$,Y,"walkOK:v");t&&v.c(c,$,Y,"walkOK:c");if(c.wj){var d;t&&v.c(c,$,Y,"isAncestor:a");t&&v.c(b,$,Y,"isAncestor:b");if(b===m)d=p;else{for(d=b.cb;d!==m&&d!==c;)d=d.cb;d=d===c}if(d||c.Lk>b.Lk)return p;a.removeChild(c.cb,c)}return h}
Y.prototype.removeChild=function(a,b){t&&v.c(a,$,Y,"removeChild:p");t&&v.c(b,$,Y,"removeChild:c");if(a!==m&&b!==m){var c=a.zb,d=0,e;for(e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){var d=Array(c.length-d),g=0;for(e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.zb=d}}};
function To(a,b){t&&v.c(b,$,Y,"initializeTree:v");if(b!==m){t&&v.c(b,$,Y,"initializeTreeVertexValues:v");var c=$o(a,b);No(b,c);if(b.cb!==m&&b.cb.ia===ap){for(var c=b.Ka,d=b.cb.zb,e=0;e<d.length&&b!==d[e];)e++;0===e%2?e!==d.length-1&&(c=90===c?180:180===c?270:270===c?180:270):c=90===c?0:180===c?90:270===c?0:90;b.Ka=c}d=b.Ba;d!==m&&(c=d.la.width,d=d.la.height,b.width=c,b.height=d,b.yu=c/2,b.zu=d/2);b.wj=h;b.ia===ap&&bp(b);for(var c=0,d=b.fl,e=0,g=b.zb,i=g.length,j=0;j<i;j++){var k=g[j];To(a,k);c+=k.Cs+
1;d=Math.max(d,k.Xs);e=Math.max(e,k.vh)}b.Cs=c;b.Xs=d;b.vh=0<d?e+1:0}}function $o(a,b){t&&v.c(b,$,Y,"mom:v");switch(a.Cq){default:case Lo:return b.cb!==m?b.cb:a.S;case cp:return b.cb===m?a.S:b.cb.cb===m?a.R:b.cb;case dp:if(b.cb!==m)return b.cb.cb!==m?b.cb.cb:a.R;case ep:var c=h;if(0===b.fl)c=p;else for(var d=b.zb,e=d.length,g=0;g<e;g++)if(0<d[g].fl){c=p;break}return c&&b.cb!==m?a.R:b.cb!==m?b.cb:a.S}}
function Uo(a,b){t&&v.c(b,$,Y,"assignTree:v");if(b!==m){t&&v.c(b,$,Y,"assignTreeVertexValues:v");for(var c=b.zb,d=c.length,e=0;e<d;e++)Uo(a,c[e])}}function Vo(a,b){t&&v.c(b,$,Y,"sortTree:v");if(b!==m){b.ia!==ap&&bp(b);for(var c=b.zb,d=c.length,e=0;e<d;e++)Vo(a,c[e])}}
function bp(a){t&&v.c(a,$,Y,"sortTreeVertexChildren:v");switch(a.Vb){case fp:break;case gp:a.zb.reverse();break;case hp:a.zb.sort(a.Tb);break;case ip:a.zb.sort(a.Tb);a.zb.reverse();break;default:v.g("Unhandled sorting value "+a.Vb.toString())}}
Y.prototype.JA=function(a){t&&v.c(a,$,Y,"addComments:v");var b=a.Pb,c=a.cb,d=0,e=jp,e=p;c!==m&&(d=c.Pb,e=c.ia,e=kp(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.fl,g=new F,i=g.width,g=g.height,j=0,k=a.cd;if(a.Ba!==m)for(var l=a.Ba.EB();l.next();){var n=l.value;"Comment"===n.hd&&n.gb()&&(a.dd===m&&(a.dd=[]),a.dd.push(n),n.Sh(),n=n.la,b&&!c||!e&&!d&&c||e&&d&&c?(i=Math.max(i,n.width),g+=n.height+Math.abs(j)):(i+=n.width+Math.abs(j),g=Math.max(g,n.height)),j=k)}a.dd!==m&&(b&&!c||!e&&!d&&c||e&&d&&
c?(i+=Math.abs(a.Sb),g=Math.max(0,g-a.height)):(g+=Math.abs(a.Sb),i=Math.max(0,i-a.width)),a.hb=new F(0,0,a.A.width+i,a.A.height+g))};function kp(a){return a===lp||a===ap||a===mp||a===np}function op(a){return a===lp||a===ap}function pp(a){t&&v.c(a,$,Y,"isLeftSideBus:v");var b=a.cb;if(b!==m){var c=b.lb;if(kp(c)){if(op(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===mp)return h}}return p}
function Wo(a,b){t&&v.c(b,$,Y,"layoutTree:v");if(b!==m){var c=b.zb,d=c.length,e,g;for(g=0;g<d;g++)e=c[g],Wo(a,e);switch(b.Ef){case qp:rp(a,b);break;case sp:if(b.ia===ap)rp(a,b);else if(t&&v.c(b,$,Y,"layoutTreeBlock:v"),0===b.fl)e=b.cb,c=p,d=0,g=jp,e!==m&&(d=e.Pb,g=e.ia,c=kp(g)),e=pp(b),b.M=new E(0,0),b.Ca=new hb(b.width,b.height),b.ra=b.cb!==m&&b.dd!==m&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?new E(b.width-2*b.z.x,0):new E(0,b.height-2*b.z.y):new E(0,0),b.up=m,b.hq=m;else{var i=
tp(b),c=90===i||270===i,j=0,k,l,n=b.zb,r=n.length;for(k=0;k<r;k++)l=n[k],j=Math.max(j,c?l.Ca.width:l.Ca.height);var q=b.ia;e=q===up;var u=q===vp,x=kp(q),B=Math.max(0,b.Bf),d=wp(b),G=b.Vc,I=xp(b),y=b.Wd,J=0;if(e||u||b.Mj||b.Nj&&1===b.vh)J=Math.max(0,b.Kc);e=b.width;g=b.height;var z=0,H=0,fa=0,S=m,T=m,ga=new hb(0,0),na=0,ra=0,Da=0,Wa=0,fb=0,ab=0;l=0;x&&!op(q)&&135<i&&n.reverse();if(op(q))if(1<r)for(k=0;k<r;k++)0===k%2&&k!==r-1?ab=Math.max(ab,c?n[k].Ca.width:n[k].Ca.height):0!==k%2&&(l=Math.max(l,c?
n[k].Ca.width:n[k].Ca.height));else 1===r&&(ab=c?n[0].Ca.width:n[0].Ca.height);var Pa;if(x){switch(q){case lp:k=135>i?yp(b,n,ab,z,H):zp(b,n,ab,z,H);ab=k[0];z=k[1];H=k[2];break;case mp:for(k=0;k<r;k++)l=n[k],Pa=l.Ca,S=0===Wa?0:y,c?(l.M=new E(j-Pa.width,ra+S),z=Math.max(z,Pa.width),H=Math.max(H,ra+S+Pa.height),ra+=S+Pa.height):(l.M=new E(na+S,j-Pa.height),z=Math.max(z,na+S+Pa.width),H=Math.max(H,Pa.height),na+=S+Pa.width),Wa++;break;case np:for(k=0;k<r;k++)l=n[k],Pa=l.Ca,S=0===Wa?0:y,c?(l.M=new E(G/
2+b.z.x,ra+S),z=Math.max(z,Pa.width),H=Math.max(H,ra+S+Pa.height),ra+=S+Pa.height):(l.M=new E(na+S,G/2+b.z.y),z=Math.max(z,na+S+Pa.width),H=Math.max(H,Pa.height),na+=S+Pa.width),Wa++}S=[];T=[];c?(S[0]=new E(0,0),S[1]=new E(0,H),T[0]=new E(z,0)):(S[0]=new E(0,0),S[1]=new E(z,0),T[0]=new E(0,H));T[1]=new E(z,H)}else for(var gb,bb=0;bb<r;bb++){l=n[bb];Pa=l.Ca;if(c){0<B&&(0<Wa&&na+G+Pa.width>B)&&(na<j&&Ap(b,q,j-na,0,fb,bb-1),Da++,Wa=0,fb=bb,fa=H,na=0,ra=135<i?-H-y:H+y);Bp(a,l,new E(0,ra));gb=0;if(0===
Wa){if(S=l.up,T=l.hq,ga=Pa.copy(),S===m||T===m||i!==tp(l))S=[],T=[],S[0]=new E(0,0),S[1]=new E(0,ga.height),T[0]=new E(ga.width,0),T[1]=new E(ga.width,ga.height)}else k=Hp(b,l,S,T,ga.width,ga.height),gb=k[0],S=k[1],T=k[2],ga.width=k[3],ga.height=k[4],na<Pa.width&&0>gb&&(Ip(b,-gb,0,fb,bb-1),Jp(S,-gb,0),Jp(T,-gb,0),gb=0);l.M=new E(gb,ra);z=Math.max(z,ga.width);H=Math.max(H,fa+(0===Da?0:y)+Pa.height);na=ga.width}else{0<B&&(0<Wa&&ra+G+Pa.height>B)&&(ra<j&&Ap(b,q,0,j-ra,fb,bb-1),Da++,Wa=0,fb=bb,fa=z,ra=
0,na=135<i?-z-y:z+y);Bp(a,l,new E(na,0));gb=0;if(0===Wa){if(S=l.up,T=l.hq,ga=Pa.copy(),S===m||T===m||i!==tp(l))S=[],T=[],S[0]=new E(0,0),S[1]=new E(ga.width,0),T[0]=new E(0,ga.height),T[1]=new E(ga.width,ga.height)}else k=Hp(b,l,S,T,ga.width,ga.height),gb=k[0],S=k[1],T=k[2],ga.width=k[3],ga.height=k[4],ra<Pa.height&&0>gb&&(Ip(b,0,-gb,fb,bb-1),Jp(S,0,-gb),Jp(T,0,-gb),gb=0);l.M=new E(na,gb);H=Math.max(H,ga.height);z=Math.max(z,fa+(0===Da?0:y)+Pa.width);ra=ga.height}Wa++}0<Da&&(c?(H+=Math.max(0,d),na<
z&&Ap(b,q,z-na,0,fb,r-1),0<J&&(u||Ip(b,J,0,0,r-1),z+=J)):(z+=Math.max(0,d),ra<H&&Ap(b,q,0,H-ra,fb,r-1),0<J&&(u||Ip(b,0,J,0,r-1),H+=J)));j=new E(0,0);switch(q){case Kp:c?j.x+=z/2-b.z.x-I/2:j.y+=H/2-b.z.y-I/2;break;case jp:0<Da?c?j.x+=z/2-b.z.x-I/2:j.y+=H/2-b.z.y-I/2:c?(k=n[0].M.x+n[0].ra.x,u=n[r-1].M.x+n[r-1].ra.x+2*n[r-1].z.x,j.x+=(u+k)/2-b.z.x-I/2):(k=n[0].M.y+n[0].ra.y,u=n[r-1].M.y+n[r-1].ra.y+2*n[r-1].z.y,j.y+=(u+k)/2-b.z.y-I/2);break;case up:c?(j.x-=I,z+=I):(j.y-=I,H+=I);break;case vp:c?(j.x+=
z-b.width+I,z+=I):(j.y+=H-b.height+I,H+=I);break;case lp:c?j.x=1<r?j.x+(ab+G/2-b.z.x):j.x+(n[0].z.x-b.z.x+n[0].ra.x):j.y=1<r?j.y+(ab+G/2-b.z.y):j.y+(n[0].z.y-b.z.y+n[0].ra.y);break;case mp:c?j.x+=z+G/2-b.z.x:j.y+=H+G/2-b.z.y;break;case np:break;default:v.g("Unhandled alignment value "+q.toString())}for(k=0;k<r;k++)l=n[k],l.M=c?new E(l.M.x+l.ra.x-j.x,l.M.y+(135<i?(x?-H:-l.Ca.height)+l.ra.y-d:g+d+l.ra.y)):new E(l.M.x+(135<i?(x?-z:-l.Ca.width)+l.ra.x-d:e+d+l.ra.x),l.M.y+l.ra.y-j.y);n=new hb(0,0);x?c?
(z=Lp(b,z,j.x),0>j.x&&(j.x=0),135<i&&(j.y+=H+d),H+=g+d,q===np&&(n.width+=G/2+b.z.x),n.height+=g+d):(135<i&&(j.x+=z+d),z+=e+d,H=Mp(b,H,j.y),0>j.y&&(j.y=0),q===np&&(n.height+=G/2+b.z.y),n.width+=e+d):c?(b.dd===m?e>z&&(q=Np(q,e-z,0),n.width=q[0],n.height=q[1],z=e,j.x=0):z=Lp(b,z,j.x),0>j.x&&(n.width-=j.x,j.x=0),135<i&&(j.y+=H+d),H=Math.max(Math.max(H,g),H+g+d),n.height+=g+d):(135<i&&(j.x+=z+d),z=Math.max(Math.max(z,e),z+e+d),b.dd===m?g>H&&(q=Np(q,0,g-H),n.width=q[0],n.height=q[1],H=g,j.y=0):H=Mp(b,H,
j.y),0>j.y&&(n.height-=j.y,j.y=0),n.width+=e+d);if(0<Da)i=[],q=[],c?(i[2]=new E(0,g+d),i[3]=new E(i[2].x,H),q[2]=new E(z,i[2].y),q[3]=new E(q[2].x,i[3].y)):(i[2]=new E(e+d,0),i[3]=new E(z,i[2].y),q[2]=new E(i[2].x,H),q[3]=new E(i[3].x,q[2].y));else{i=[];q=[];for(k=0;k<S.length;k++)x=S[k],i[k+2]=new E(x.x+n.width,x.y+n.height);for(k=0;k<T.length;k++)x=T[k],q[k+2]=new E(x.x+n.width,x.y+n.height)}c?(i[0]=new E(j.x,0),i[1]=new E(i[0].x,g),i[2].y<i[1].y&&(i[2].x>i[0].x?i[2]=i[1].copy():i[1]=i[2].copy()),
i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy()),q[0]=new E(j.x+e,0),q[1]=new E(q[0].x,g),q[2].y<q[1].y&&(q[2].x<q[0].x?q[2]=q[1].copy():q[1]=q[2].copy()),q[3].y<q[2].y&&(q[3].x<q[0].x?q[3]=q[2].copy():q[2]=q[3].copy()),i[2].y-=d/2,q[2].y-=d/2):(i[0]=new E(0,j.y),i[1]=new E(e,i[0].y),i[2].x<i[1].x&&(i[2].y>i[0].y?i[2]=i[1].copy():i[1]=i[2].copy()),i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy()),q[0]=new E(0,j.y+g),q[1]=new E(e,q[0].y),q[2].x<q[1].x&&(q[2].y<q[0].y?
q[2]=q[1].copy():q[1]=q[2].copy()),q[3].x<q[2].x&&(q[3].y<q[0].y?q[3]=q[2].copy():q[2]=q[3].copy()),i[2].x-=d/2,q[2].x-=d/2);b.up=i;b.hq=q;b.ra=j;b.Ca=new hb(z,H)}break;default:v.g("Unhandled compaction value "+b.Ef.toString())}}}
function rp(a,b){t&&v.c(b,$,Y,"layoutTreeNone:v");if(0===b.fl){var c=b.cb,d=p,e=0,g=jp;c!==m&&(e=c.Pb,g=c.ia,d=kp(g));c=pp(b);b.M=new E(0,0);b.Ca=new hb(b.width,b.height);b.ra=b.cb!==m&&b.dd!==m&&((180===e||270===e)&&!d||c)?180===e&&!d||(90===e||270===e)&&c?new E(b.width-2*b.z.x,0):new E(0,b.height-2*b.z.y):new E(0,0)}else{var d=tp(b),e=90===d||270===d,i=0,j,k,c=b.zb,g=c.length,l;for(j=0;j<g;j++)k=c[j],i=Math.max(i,e?k.Ca.width:k.Ca.height);var n=b.ia,r=n===up,q=n===vp,u=kp(n),x=Math.max(0,b.Bf),
B=wp(b),G=b.Vc,I=xp(b),y=r||q?0:I/2,J=b.Wd,z=0;if(r||q||b.Mj||b.Nj&&1===b.vh)z=Math.max(0,b.Kc);var r=b.width,H=b.height,fa=0,S=0,T=0,ga=0,na=0,ra=0,Da=0,Wa=0,fb=0,ab=0;u&&!op(n)&&135<d&&c.reverse();if(op(n))if(1<g)for(j=0;j<g;j++)k=c[j],l=k.Ca,0===j%2&&j!==g-1?fb=Math.max(fb,(e?l.width:l.height)+Op(k)-G):0!==j%2&&(ab=Math.max(ab,(e?l.width:l.height)+Op(k)-G));else 1===g&&(fb=e?c[0].Ca.width:c[0].Ca.height);if(u)switch(n){case lp:case ap:k=[];k=135>d?yp(b,c,fb,fa,S):zp(b,c,fb,fa,S);fb=k[0];fa=k[1];
S=k[2];break;case mp:for(j=0;j<g;j++)k=c[j],l=k.Ca,x=0===Da?0:J,e?(k.M=new E(i-l.width,na+x),fa=Math.max(fa,l.width),S=Math.max(S,na+x+l.height),na+=x+l.height):(k.M=new E(ga+x,i-l.height),fa=Math.max(fa,ga+x+l.width),S=Math.max(S,l.height),ga+=x+l.width),Da++;break;case np:for(i=0;i<g;i++)k=c[i],l=k.Ca,x=0===Da?0:J,e?(k.M=new E(G/2+b.z.x,na+x),fa=Math.max(fa,l.width),S=Math.max(S,na+x+l.height),na+=x+l.height):(k.M=new E(ga+x,G/2+b.z.y),fa=Math.max(fa,ga+x+l.width),S=Math.max(S,l.height),ga+=x+l.width),
Da++}else for(ab=0;ab<g;ab++)k=c[ab],l=k.Ca,e?(0<x&&(0<Da&&ga+G+l.width>x)&&(ga<i&&Ap(b,n,i-ga,0,Wa,ab-1),ra++,Da=0,Wa=ab,T=S,ga=0,na=135<d?-S-J:S+J),j=0===Da?y:G,Bp(a,k,new E(0,na)),k.M=new E(ga+j,na),fa=Math.max(fa,ga+j+l.width),S=Math.max(S,T+(0===ra?0:J)+l.height),ga+=j+l.width):(0<x&&(0<Da&&na+G+l.height>x)&&(na<i&&Ap(b,n,0,i-na,Wa,ab-1),ra++,Da=0,Wa=ab,T=fa,na=0,ga=135<d?-fa-J:fa+J),j=0===Da?y:G,Bp(a,k,new E(ga,0)),k.M=new E(ga,na+j),S=Math.max(S,na+j+l.height),fa=Math.max(fa,T+(0===ra?0:J)+
l.width),na+=j+l.height),Da++;0<ra&&(e?(S+=Math.max(0,B),ga<fa&&Ap(b,n,fa-ga,0,Wa,g-1),0<z&&(q||Ip(b,z,0,0,g-1),fa+=z)):(fa+=Math.max(0,B),na<S&&Ap(b,n,0,S-na,Wa,g-1),0<z&&(q||Ip(b,0,z,0,g-1),S+=z)));q=new E(0,0);switch(n){case Kp:e?q.x+=fa/2-b.z.x-I/2:q.y+=S/2-b.z.y-I/2;break;case jp:0<ra?e?q.x+=fa/2-b.z.x-I/2:q.y+=S/2-b.z.y-I/2:e?(n=c[0].M.x+c[0].ra.x,G=c[g-1].M.x+c[g-1].ra.x+2*c[g-1].z.x,q.x+=n+(G-n)/2-b.z.x-I/2):(n=c[0].M.y+c[0].ra.y,G=c[g-1].M.y+c[g-1].ra.y+2*c[g-1].z.y,q.y+=n+(G-n)/2-b.z.y-
I/2);break;case up:e?(q.x-=I,fa+=I):(q.y-=I,S+=I);break;case vp:e?(q.x+=fa-b.width+I,fa+=I):(q.y+=S-b.height+I,S+=I);break;case lp:case ap:e?q.x=1<g?q.x+(fb+G/2-b.z.x):q.x+(c[0].z.x-b.z.x+c[0].ra.x):q.y=1<g?q.y+(fb+G/2-b.z.y):q.y+(c[0].z.y-b.z.y+c[0].ra.y);break;case mp:e?q.x+=fa+G/2-b.z.x:q.y+=S+G/2-b.z.y;break;case np:break;default:v.g("Unhandled alignment value "+n.toString())}for(j=0;j<g;j++)k=c[j],k.M=e?new E(k.M.x+k.ra.x-q.x,k.M.y+(135<d?(u?-S:-k.Ca.height)+k.ra.y-B:H+B+k.ra.y)):new E(k.M.x+
(135<d?(u?-fa:-k.Ca.width)+k.ra.x-B:r+B+k.ra.x),k.M.y+k.ra.y-q.y);e?(fa=Lp(b,fa,q.x),0>q.x&&(q.x=0),135<d&&(q.y+=S+B),S+=H+B):(135<d&&(q.x+=fa+B),fa+=r+B,S=Mp(b,S,q.y),0>q.y&&(q.y=0));b.ra=q;b.Ca=new hb(fa,S)}}
function yp(a,b,c,d,e){t&&v.c(a,$,Y,"layoutBusChildrenPosDir:v");var g=b.length,i,j;if(0===g)return a=[c,d,e];if(1===g)return i=b[0],j=i.Ca,d=j.width,e=j.height,a=[c,d,e];var k=a.Vc,l=a.Wd,n=90===tp(a),r=0,q=0,u=0,x=0,B=0,G=0,x=G=0,I,y;for(I=0;I<g;I++)0!==I%2||1<g&&I===g-1||(i=b[I],j=i.Ca,y=0===r?0:l,n?(G=Op(i)-k,i.M=new E(c-(j.width+G),u+y),d=Math.max(d,j.width+G),e=Math.max(e,u+y+j.height),u+=y+j.height):(G=Op(i)-k,i.M=new E(q+y,c-(j.height+G)),e=Math.max(e,j.height+G),d=Math.max(d,q+y+j.width),
q+=y+j.width),r++);r=0;x=q;B=u;n?(q=c+k,u=0):(q=0,u=c+k);for(I=0;I<g;I++)0!==I%2&&(i=b[I],j=i.Ca,y=0===r?0:l,n?(G=Op(i)-k,i.M=new E(q+G,u+y),d=Math.max(d,q+j.width+G),e=Math.max(e,u+y+j.height),u+=y+j.height):(G=Op(i)-k,i.M=new E(q+y,u+G),d=Math.max(d,q+y+j.width),e=Math.max(e,u+j.height+G),q+=y+j.width),r++);1<g&&1===g%2&&(i=b[g-1],j=i.Ca,n?(b=Pp(i,Math.max(Math.abs(B),Math.abs(u))),i.M=new E(c+k/2-i.z.x-i.ra.x,e+b),x=c+k/2-i.z.x-i.ra.x,d=Math.max(d,x+j.width),0>x&&(d-=x),e=Math.max(e,Math.max(B,
u)+b+j.height),0>i.M.x&&(c=Qp(a,i.M.x,p,c,k))):(b=Pp(i,Math.max(Math.abs(x),Math.abs(q))),i.M=new E(d+b,c+k/2-i.z.y-i.ra.y),d=Math.max(d,Math.max(x,q)+b+j.width),x=c+k/2-i.z.y-i.ra.y,e=Math.max(e,x+j.height),0>x&&(e-=x),0>i.M.y&&(c=Qp(a,i.M.y,h,c,k))));return a=[c,d,e]}
function zp(a,b,c,d,e){t&&v.c(a,$,Y,"layoutBusChildrenNegDir:v");var g=b.length,i,j;if(0===g)return a=[c,d,e];if(1===g)return i=b[0],j=i.Ca,d=j.width,e=j.height,a=[c,d,e];var k=a.Vc,l=a.Wd,n=270===tp(a),r=0,q=0,u=0,x=0,B=0,G=0,x=G=0,I,y;for(I=0;I<g;I++)0!==I%2||1<g&&I===g-1||(i=b[I],j=i.Ca,y=0===r?0:l,n?(G=Op(i)-k,u-=y+j.height,i.M=new E(c-(j.width+G),u),d=Math.max(d,j.width+G),e=Math.max(e,Math.abs(u))):(G=Op(i)-k,q-=y+j.width,i.M=new E(q,c-(j.height+G)),e=Math.max(e,j.height+G),d=Math.max(d,Math.abs(q))),
r++);r=0;x=q;B=u;n?(q=c+k,u=0):(q=0,u=c+k);for(I=0;I<g;I++)0!==I%2&&(i=b[I],j=i.Ca,y=0===r?0:l,n?(G=Op(i)-k,u-=y+j.height,i.M=new E(q+G,u),d=Math.max(d,q+j.width+G),e=Math.max(e,Math.abs(u))):(G=Op(i)-k,q-=y+j.width,i.M=new E(q,u+G),e=Math.max(e,u+j.height+G),d=Math.max(d,Math.abs(q))),r++);1<g&&1===g%2&&(i=b[g-1],j=i.Ca,n?(l=Pp(i,Math.max(Math.abs(B),Math.abs(u))),i.M=new E(c+k/2-i.z.x-i.ra.x,-e-j.height-l),x=c+k/2-i.z.x-i.ra.x,d=Math.max(d,x+j.width),0>x&&(d-=x),e=Math.max(e,Math.abs(Math.min(B,
u))+l+j.height),0>i.M.x&&(c=Qp(a,i.M.x,p,c,k))):(l=Pp(i,Math.max(Math.abs(q),Math.abs(q))),i.M=new E(-d-j.width-l,c+k/2-i.z.y-i.ra.y),d=Math.max(d,Math.abs(Math.min(x,q))+l+j.width),x=c+k/2-i.z.y-i.ra.y,e=Math.max(e,x+j.height),0>x&&(e-=x),0>i.M.y&&(c=Qp(a,i.M.y,h,c,k))));for(I=0;I<g;I++)i=b[I],i.M=n?new E(i.M.x,i.M.y+e):new E(i.M.x+d,i.M.y);return a=[c,d,e]}function Op(a){t&&v.c(a,$,Y,"fixRelativePostions:child");return a.parent===m?0:a.parent.Ju}
function Pp(a){t&&v.c(a,$,Y,"fixRelativePostions:lastchild");return a.parent===m?0:a.parent.Uu}function Qp(a,b,c,d,e){t&&v.c(a,$,Y,"fixRelativePostions:v");for(var a=a.zb,g=a.length,i=0;i<g;i++)a[i].M=c?new E(a[i].M.x,a[i].M.y-b):new E(a[i].M.x-b,a[i].M.y);b=a[g-1];return Math.max(d,c?b.ra.y-b.z.y-e/2:b.ra.x-b.z.x-e/2)}
function Lp(a,b,c){t&&v.c(a,$,Y,"calculateSubwidth:v");switch(a.ia){case jp:case Kp:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case up:return a.width>b?a.width:b;case vp:return 2*a.z.x>b?a.width:b+a.width-2*a.z.x;case lp:case ap:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case mp:return a.width-a.z.x+a.Vc/2+b;case np:return Math.max(a.width,a.z.x+a.Vc/2+b);default:return b}}
function Mp(a,b,c){t&&v.c(a,$,Y,"calculateSubheight:v");switch(a.ia){case jp:case Kp:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case up:return a.height>b?a.height:b;case vp:return 2*a.z.y>b?a.height:b+a.height-2*a.z.y;case lp:case ap:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case mp:return a.height-a.z.y+a.Vc/2+b;case np:return Math.max(a.height,a.z.y+a.Vc/2+b);default:return b}}
function Np(a,b,c){t&&v.c(a,ha,Y,"alignOffset:align");switch(a){case Kp:b/=2;c/=2;break;case jp:b/=2;c/=2;break;case up:c=b=0;break;case vp:break;default:v.g("Unhandled alignment value "+a.toString())}return[b,c]}function Ap(a,b,c,d,e,g){t&&v.c(a,$,Y,"shiftRelPosAlign:v");t&&v.c(b,ha,Y,"shiftRelPosAlign:align");b=Np(b,c,d);Ip(a,b[0],b[1],e,g)}function Ip(a,b,c,d,e){t&&v.c(a,$,Y,"shiftRelPos:v");if(!(0===b&&0===c))for(a=a.zb;d<=e;d++){var g=a[d];g.M.x+=b;g.M.y+=c}}
function Bp(a,b,c){t&&v.c(b,$,Y,"recordMidPoints:v");t&&v.c(c,E,Y,"recordMidPoints:p");var d=b.cb;switch(a.cc){case Ko:for(a=b.ob;a.next();)b=a.value,b.G===d&&(b.$p=c);break;case Ro:for(a=b.nb;a.next();)b=a.value,b.D===d&&(b.$p=c);break;default:v.g("Unhandled path value "+a.cc.toString())}}function Jp(a,b,c){for(var d=0;d<a.length;d++)a[d].x+=b,a[d].y+=c}
function Hp(a,b,c,d,e,g){t&&v.c(a,$,Y,"mergeFringes:parent");t&&v.c(b,$,Y,"mergeFringes:child");var i=tp(a),j=90===i||270===i,k=a.Vc,l=e,n=g,r=b.up,e=b.hq,g=b.Ca,a=j?Math.max(n,g.height):Math.max(l,g.width);if(r===m||i!==tp(b))r=[],e=[],j?(r[0]=new E(0,0),r[1]=new E(0,g.height),e[0]=new E(g.width,0),e[1]=new E(e[0].x,r[1].y)):(r[0]=new E(0,0),r[1]=new E(g.width,0),e[0]=new E(0,g.height),e[1]=new E(r[1].x,e[0].y));if(j){b=j=l;i=r;l=9999999;if(!(d===m||2>d.length||i===m||2>i.length))for(var q=n=0;n<
d.length&&q<i.length;){var u=d[n],x=i[q].copy();x.x+=j;var B=u;n+1<d.length&&(B=d[n+1]);var G=x;q+1<i.length&&(G=i[q+1].copy(),G.x+=j);var I=l;u.y===x.y?I=x.x-u.x:u.y>x.y&&u.y<G.y?I=x.x+(u.y-x.y)/(G.y-x.y)*(G.x-x.x)-u.x:x.y>u.y&&x.y<B.y&&(I=x.x-(u.x+(x.y-u.y)/(B.y-u.y)*(B.x-u.x)));I<l&&(l=I);B.y<=u.y?n++:G.y<=x.y?q++:(B.y<=G.y&&n++,G.y<=B.y&&q++)}b-=l;b+=k;k=r;r=b;if(c===m||2>c.length||k===m||2>k.length)c=m;else{i=[];for(l=j=q=0;j<k.length&&k[j].y<c[0].y;)n=k[j++].copy(),n.x+=r,i[l++]=n;for(;q<c.length;)n=
c[q++],i[l++]=n;for(c=c[c.length-1].y;j<k.length&&k[j].y<=c;)j++;for(;j<k.length&&k[j].y>c;)n=k[j++].copy(),n.x+=r,i[l++]=n;c=i}j=e;l=b;if(d===m||2>d.length||j===m||2>j.length)d=m;else{e=[];for(r=n=k=0;k<d.length&&d[k].y<j[0].y;)i=d[k++],e[r++]=i;for(;n<j.length;)i=j[n++].copy(),i.x+=l,e[r++]=i;for(j=j[j.length-1].y;k<d.length&&d[k].y<=j;)k++;for(;k<d.length&&d[k].y>j;)i=d[k++],e[r++]=i;d=e}e=Math.max(0,b)+g.width;g=a}else{b=j=n;i=r;l=9999999;if(!(d===m||2>d.length||i===m||2>i.length))for(q=n=0;n<
d.length&&q<i.length;)u=d[n],x=i[q].copy(),x.y+=j,B=u,n+1<d.length&&(B=d[n+1]),G=x,q+1<i.length&&(G=i[q+1].copy(),G.y+=j),I=l,u.x===x.x?I=x.y-u.y:u.x>x.x&&u.x<G.x?I=x.y+(u.x-x.x)/(G.x-x.x)*(G.y-x.y)-u.y:x.x>u.x&&x.x<B.x&&(I=x.y-(u.y+(x.x-u.x)/(B.x-u.x)*(B.y-u.y))),I<l&&(l=I),B.x<=u.x?n++:G.x<=x.x?q++:(B.x<=G.x&&n++,G.x<=B.x&&q++);b-=l;b+=k;k=r;r=b;if(c===m||2>c.length||k===m||2>k.length)c=m;else{i=[];for(l=j=q=0;j<k.length&&k[j].x<c[0].x;)n=k[j++].copy(),n.y+=r,i[l++]=n;for(;q<c.length;)n=c[q++],
i[l++]=n;for(c=c[c.length-1].x;j<k.length&&k[j].x<=c;)j++;for(;j<k.length&&k[j].x>c;)n=k[j++].copy(),n.y+=r,i[l++]=n;c=i}j=e;l=b;if(d===m||2>d.length||j===m||2>j.length)d=m;else{e=[];for(r=n=k=0;k<d.length&&d[k].x<j[0].x;)i=d[k++],e[r++]=i;for(;n<j.length;)i=j[n++].copy(),i.y+=l,e[r++]=i;for(j=j[j.length-1].x;k<d.length&&d[k].x<=j;)k++;for(;k<d.length&&d[k].x>j;)i=d[k++],e[r++]=i;d=e}e=a;g=Math.max(0,b)+g.height}return[b,c,d,e,g]}
function Xo(a,b,c,d){t&&v.c(b,$,Y,"assignAbsolutePositions:v");if(b!==m){b.x=c;b.y=d;for(var b=b.zb,e=b.length,g=0;g<e;g++){var i=b[g];Xo(a,i,c+i.M.x,d+i.M.y)}}}Y.prototype.commitLayout=Y.prototype.hu=function(){this.Py();this.commitNodes();this.commitLinks()};
Y.prototype.commitNodes=Y.prototype.Jx=function(){for(var a=this.p.P.f,b;a.next();)b=a.value,b.commit();for(a.reset();a.next();)if(b=a.value,t&&v.c(b,$,Y,"layoutComments:v"),b.dd!==m){var c=b.Yg.oa,d=b.cb,e=f,e=f,e=b.Pb,g=0,i=jp,i=p;d!==m&&(g=d.Pb,i=d.ia,i=kp(i));for(var d=90===e||270===e,j=90===g||270===g,k=0===b.fl,l=pp(b),n=0,r=b.dd,q=r.length,u=0;u<q;u++){var e=r[u],x=e.la,B;if(d&&!k||!i&&!j&&k||i&&j&&k){if(135<g&&!i||j&&l)if(0<=b.Sb){e.location=new E(b.A.x-b.Sb-x.width,b.A.y+n);for(B=e.hf();B.next();)e=
B.value,e.Va=pc,e.Xa=qc}else{e.location=new E(b.A.x+2*b.z.x-b.Sb,b.A.y+n);for(B=e.hf();B.next();)e=B.value,e.Va=qc,e.Xa=pc}else if(0<=b.Sb){e.location=new E(b.A.x+2*b.z.x+b.Sb,b.A.y+n);for(B=e.hf();B.next();)e=B.value,e.Va=qc,e.Xa=pc}else{e.location=new E(b.A.x+b.Sb-x.width,b.A.y+n);for(B=e.hf();B.next();)e=B.value,e.Va=pc,e.Xa=qc}n=0<=b.cd?n+(x.height+b.cd):n+(b.cd-x.height)}else{if(135<g&&!i||!j&&l)if(0<=b.Sb){e.location=new E(b.A.x+n,b.A.y-b.Sb-x.height);for(B=e.hf();B.next();)e=B.value,e.Va=Yb,
e.Xa=gc}else{e.location=new E(b.A.x+n,b.A.y+2*b.z.y-b.Sb);for(B=e.hf();B.next();)e=B.value,e.Va=gc,e.Xa=Yb}else if(0<=b.Sb){e.location=new E(b.A.x+n,b.A.y+2*b.z.y+b.Sb);for(B=e.hf();B.next();)e=B.value,e.Va=gc,e.Xa=Yb}else{e.location=new E(b.A.x+n,b.A.y+b.Sb-x.height);for(B=e.hf();B.next();)e=B.value,e.Va=Yb,e.Xa=gc}n=0<=b.cd?n+(x.width+b.cd):n+(b.cd-x.width)}}c=n-b.cd-(d?c.height:c.width);if(this.path===Ko)for(b=b.nb;b.next();){if(e=b.value,(e=e.link)&&e.Te!==If)e.ck=0<c?c:NaN}else for(b=b.ob;b.next();)if(e=
b.value,(e=e.link)&&e.Te!==If)e.lk=0<c?c:NaN}};Y.prototype.commitLinks=Y.prototype.Ix=function(){for(var a=this.p.Mb.f;a.next();)a.value.commit()};Y.prototype.Py=function(){for(var a=this.nc.f;a.next();){var b=this.p.ce(a.value);Rp(this,b)}};
function Rp(a,b){t&&v.c(b,$,Y,"setPortSpotsTree:v");if(b!==m){t&&v.c(b,$,Y,"setPortSpots:v");var c=b.ia;if(kp(c)){t&&v.c(b,$,Y,"setPortSpotsBus:v");t&&v.c(c,ha,Y,"setPortSpots:align");var d=a.cc===Ko,e=tp(b),g;switch(e){case 0:g=qc;break;case 90:g=gc;break;case 180:g=pc;break;default:g=Yb}var i,j,k,l=b.zb,n=l.length;switch(c){case lp:case ap:for(c=0;c<n;c++)if(i=l[c],j=d?i.ob:i.nb,j.next(),k=j.value,k!==m&&(k=k.Aa,k!==m)){i=90===e||270===e?pc:Yb;if(1===n||c===n-1&&1===n%2)switch(e){case 0:i=pc;break;
case 90:i=Yb;break;case 180:i=qc;break;default:i=gc}else 0===c%2&&(i=90===e||270===e?qc:gc);d?(b.Ui&&(k.Va=g),b.Ti&&(k.Xa=i)):(b.Ui&&(k.Va=i),b.Ti&&(k.Xa=g))}break;case mp:i=90===e||270===e?qc:gc;for(j=d?b.nb:b.ob;j.next();)k=j.value,k=k.Aa,k!==m&&(d?(b.Ui&&(k.Va=g),b.Ti&&(k.Xa=i)):(b.Ui&&(k.Va=i),b.Ti&&(k.Xa=g)));break;case np:i=90===e||270===e?pc:Yb;for(j=d?b.nb:b.ob;j.next();)k=j.value,k=k.Aa,k!==m&&(d?(b.Ui&&(k.Va=g),b.Ti&&(k.Xa=i)):(b.Ui&&(k.Va=i),b.Ti&&(k.Xa=g)))}}else if(d=tp(b),a.cc===Ko)for(e=
b.nb;e.next();){if(g=e.value,g=g.Aa,g!==m){if(b.Yf)if(Tb(b.xe))switch(d){case 0:g.Va=qc;break;case 90:g.Va=gc;break;case 180:g.Va=pc;break;default:g.Va=Yb}else g.Va=b.xe;if(b.Xf)if(Tb(b.pe))switch(d){case 0:g.Xa=pc;break;case 90:g.Xa=Yb;break;case 180:g.Xa=qc;break;default:g.Xa=gc}else g.Xa=b.pe}}else for(e=b.ob;e.next();)if(g=e.value,g=g.Aa,g!==m){if(b.Yf)if(Tb(b.xe))switch(d){case 0:g.Xa=qc;break;case 90:g.Xa=gc;break;case 180:g.Xa=pc;break;default:g.Xa=Yb}else g.Xa=b.xe;if(b.Xf)if(Tb(b.pe))switch(d){case 0:g.Va=
pc;break;case 90:g.Va=Yb;break;case 180:g.Va=qc;break;default:g.Va=gc}else g.Va=b.pe}d=b.zb;e=d.length;for(g=0;g<e;g++)Rp(a,d[g])}}function tp(a){t&&v.c(a,$,Y,"orthoAngle:v");a=a.Pb;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function wp(a){t&&v.c(a,$,Y,"computeLayerSpacing:v");var b=tp(a),b=90===b||270===b,c=a.ed;if(0<a.Of)var d=Math.min(1,a.Of),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function xp(a){t&&v.c(a,$,Y,"computeNodeIndent:v");var b=tp(a),b=90===b||270===b,c=a.Ag;if(0<a.Uf)var d=Math.min(1,a.Uf),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}v.a(Y,"roots",Y.prototype.xG);v.defineProperty(Y,{xG:"roots"},s("nc"),function(a){this.nc!==a&&(this.nc=a,this.r())});v.a(Y,"path",Y.prototype.path);v.defineProperty(Y,{path:"path"},s("cc"),function(a){if(this.cc!==a&&(t&&v.c(a,ha,Y,"path"),a===Ko||a===Ro))this.cc=a,this.r()});v.a(Y,"treeStyle",Y.prototype.BD);
v.defineProperty(Y,{BD:"treeStyle"},s("Cq"),function(a){if(this.wc!==a&&(t&&v.c(a,ha,Y,"treeStyle"),a===Lo||a===dp||a===ep||a===cp))this.Cq=a,this.r()});v.a(Y,"arrangement",Y.prototype.Jd);v.defineProperty(Y,{Jd:"arrangement"},s("wc"),function(a){if(this.wc!==a&&(t&&v.c(a,ha,Y,"arrangement"),a===Mo||a===Yo||a===Qo))this.wc=a,this.r()});v.a(Y,"arrangementSpacing",Y.prototype.du);v.defineProperty(Y,{du:"arrangementSpacing"},s("Ue"),function(a){this.Ue.u(a)||(this.Ue.Pa(a),this.r())});
v.a(Y,"rootDefaults",Y.prototype.wG);v.defineProperty(Y,{wG:"rootDefaults"},s("S"),function(a){this.S!==a&&(t&&v.c(a,$,Y,"rootDefaults"),this.S=a,this.r())});v.a(Y,"alternateDefaults",Y.prototype.FE);v.defineProperty(Y,{FE:"alternateDefaults"},s("R"),function(a){this.R!==a&&(t&&v.c(a,$,Y,"alternateDefaults"),this.R=a,this.r())});v.a(Y,"sorting",Y.prototype.vf);
v.defineProperty(Y,{vf:"sorting"},function(){return this.S.Vb},function(a){if(this.S.Vb!==a&&(t&&v.c(a,ha,Y,"sorting"),a===fp||a===gp||a===hp||ip))this.S.Vb=a,this.r()});v.a(Y,"comparer",Y.prototype.Qg);v.defineProperty(Y,{Qg:"comparer"},function(){return this.S.Tb},function(a){this.S.Tb!==a&&(t&&v.e(a,"function",Y,"comparer"),this.S.Tb=a,this.r())});v.a(Y,"angle",Y.prototype.Ka);
v.defineProperty(Y,{Ka:"angle"},function(){return this.S.Pb},function(a){if(this.S.Pb!==a&&(0===a||90===a||180===a||270===a))this.S.Pb=a,this.r()});v.a(Y,"alignment",Y.prototype.lb);v.defineProperty(Y,{lb:"alignment"},function(){return this.S.ia},function(a){this.S.ia!==a&&(t&&v.Sa(a,Y,Y,"alignment"),this.S.ia=a,this.r())});v.a(Y,"nodeIndent",Y.prototype.Ay);v.defineProperty(Y,{Ay:"nodeIndent"},function(){return this.S.Ag},function(a){this.S.Ag!==a&&0<=a&&(this.S.Ag=a,this.r())});
v.a(Y,"nodeIndentPastParent",Y.prototype.By);v.defineProperty(Y,{By:"nodeIndentPastParent"},function(){return this.S.Uf},function(a){this.S.Uf!==a&&(0<=a&&1>=a)&&(this.S.Uf=a,this.r())});v.a(Y,"nodeSpacing",Y.prototype.Ju);v.defineProperty(Y,{Ju:"nodeSpacing"},function(){return this.S.Vc},function(a){this.S.Vc!==a&&(this.S.Vc=a,this.r())});v.a(Y,"layerSpacing",Y.prototype.yr);v.defineProperty(Y,{yr:"layerSpacing"},function(){return this.S.ed},function(a){this.S.ed!==a&&(this.S.ed=a,this.r())});
v.a(Y,"layerSpacingParentOverlap",Y.prototype.qy);v.defineProperty(Y,{qy:"layerSpacingParentOverlap"},function(){return this.S.Of},function(a){this.S.Of!==a&&(0<=a&&1>=a)&&(this.S.Of=a,this.r())});v.a(Y,"compaction",Y.prototype.iu);v.defineProperty(Y,{iu:"compaction"},function(){return this.S.Ef},function(a){if(this.S.Ef!==a&&(t&&v.c(a,ha,Y,"compaction"),a===qp||a===sp))this.S.Ef=a,this.r()});v.a(Y,"breadthLimit",Y.prototype.zx);
v.defineProperty(Y,{zx:"breadthLimit"},function(){return this.S.Bf},function(a){this.S.Bf!==a&&0<=a&&(this.S.Bf=a,this.r())});v.a(Y,"rowSpacing",Y.prototype.Uu);v.defineProperty(Y,{Uu:"rowSpacing"},function(){return this.S.Wd},function(a){this.S.Wd!==a&&(this.S.Wd=a,this.r())});v.a(Y,"rowIndent",Y.prototype.Jy);v.defineProperty(Y,{Jy:"rowIndent"},function(){return this.S.Kc},function(a){this.S.Kc!==a&&0<=a&&(this.S.Kc=a,this.r())});v.a(Y,"commentSpacing",Y.prototype.Gx);
v.defineProperty(Y,{Gx:"commentSpacing"},function(){return this.S.cd},function(a){this.S.cd!==a&&(this.S.cd=a,this.r())});v.a(Y,"commentMargin",Y.prototype.Fx);v.defineProperty(Y,{Fx:"commentMargin"},function(){return this.S.Sb},function(a){this.S.Sb!==a&&(this.S.Sb=a,this.r())});v.a(Y,"setsPortSpot",Y.prototype.Ui);v.defineProperty(Y,{Ui:"setsPortSpot"},function(){return this.S.Yf},function(a){this.S.Yf!==a&&(this.S.Yf=a,this.r())});v.a(Y,"portSpot",Y.prototype.Fy);
v.defineProperty(Y,{Fy:"portSpot"},function(){return this.S.xe},function(a){this.S.xe.u(a)||(this.S.xe=a,this.r())});v.a(Y,"setsChildPortSpot",Y.prototype.Ti);v.defineProperty(Y,{Ti:"setsChildPortSpot"},function(){return this.S.Xf},function(a){this.S.Xf!==a&&(this.S.Xf=a,this.r())});v.a(Y,"childPortSpot",Y.prototype.Dx);v.defineProperty(Y,{Dx:"childPortSpot"},function(){return this.S.pe},function(a){this.S.pe.u(a)||(this.S.pe=a,this.r())});v.a(Y,"alternateSorting",Y.prototype.QE);
v.defineProperty(Y,{QE:"alternateSorting"},function(){return this.R.Vb},function(a){if(this.R.Vb!==a&&(t&&v.c(a,ha,Y,"alternateSorting"),a===fp||a===gp||a===hp||ip))this.R.Vb=a,this.r()});v.a(Y,"alternateComparer",Y.prototype.DE);v.defineProperty(Y,{DE:"alternateComparer"},function(){return this.R.Tb},function(a){this.R.Tb!==a&&(t&&v.e(a,"function",Y,"alternateComparer"),this.R.Tb=a,this.r())});v.a(Y,"alternateAngle",Y.prototype.xE);
v.defineProperty(Y,{xE:"alternateAngle"},function(){return this.R.Pb},function(a){if(this.R.Pb!==a&&(0===a||90===a||180===a||270===a))this.R.Pb=a,this.r()});v.a(Y,"alternateAlignment",Y.prototype.wE);v.defineProperty(Y,{wE:"alternateAlignment"},function(){return this.R.ia},function(a){this.R.ia!==a&&(t&&v.Sa(a,Y,Y,"alternateAlignment"),this.R.ia=a,this.r())});v.a(Y,"alternateNodeIndent",Y.prototype.IE);
v.defineProperty(Y,{IE:"alternateNodeIndent"},function(){return this.R.Ag},function(a){this.R.Ag!==a&&0<=a&&(this.R.Ag=a,this.r())});v.a(Y,"alternateNodeIndentPastParent",Y.prototype.JE);v.defineProperty(Y,{JE:"alternateNodeIndentPastParent"},function(){return this.R.Uf},function(a){this.R.Uf!==a&&(0<=a&&1>=a)&&(this.R.Uf=a,this.r())});v.a(Y,"alternateNodeSpacing",Y.prototype.KE);v.defineProperty(Y,{KE:"alternateNodeSpacing"},function(){return this.R.Vc},function(a){this.R.Vc!==a&&(this.R.Vc=a,this.r())});
v.a(Y,"alternateLayerSpacing",Y.prototype.GE);v.defineProperty(Y,{GE:"alternateLayerSpacing"},function(){return this.R.ed},function(a){this.R.ed!==a&&(this.R.ed=a,this.r())});v.a(Y,"alternateLayerSpacingParentOverlap",Y.prototype.HE);v.defineProperty(Y,{HE:"alternateLayerSpacingParentOverlap"},function(){return this.R.Of},function(a){this.R.Of!==a&&(0<=a&&1>=a)&&(this.R.Of=a,this.r())});v.a(Y,"alternateCompaction",Y.prototype.CE);
v.defineProperty(Y,{CE:"alternateCompaction"},function(){return this.R.Ef},function(a){if(this.R.Ef!==a&&(t&&v.c(a,ha,Y,"alternateCompaction"),a===qp||a===sp))this.R.Ef=a,this.r()});v.a(Y,"alternateBreadthLimit",Y.prototype.yE);v.defineProperty(Y,{yE:"alternateBreadthLimit"},function(){return this.R.Bf},function(a){this.R.Bf!==a&&0<=a&&(this.R.Bf=a,this.r())});v.a(Y,"alternateRowSpacing",Y.prototype.NE);
v.defineProperty(Y,{NE:"alternateRowSpacing"},function(){return this.R.Wd},function(a){this.R.Wd!==a&&(this.R.Wd=a,this.r())});v.a(Y,"alternateRowIndent",Y.prototype.ME);v.defineProperty(Y,{ME:"alternateRowIndent"},function(){return this.R.Kc},function(a){this.R.Kc!==a&&0<=a&&(this.R.Kc=a,this.r())});v.a(Y,"alternateCommentSpacing",Y.prototype.BE);v.defineProperty(Y,{BE:"alternateCommentSpacing"},function(){return this.R.cd},function(a){this.R.cd!==a&&(this.R.cd=a,this.r())});
v.a(Y,"alternateCommentMargin",Y.prototype.AE);v.defineProperty(Y,{AE:"alternateCommentMargin"},function(){return this.R.Sb},function(a){this.R.Sb!==a&&(this.R.Sb=a,this.r())});v.a(Y,"alternateSetsPortSpot",Y.prototype.PE);v.defineProperty(Y,{PE:"alternateSetsPortSpot"},function(){return this.R.Yf},function(a){this.R.Yf!==a&&(this.R.Yf=a,this.r())});v.a(Y,"alternatePortSpot",Y.prototype.LE);
v.defineProperty(Y,{LE:"alternatePortSpot"},function(){return this.R.xe},function(a){this.R.xe.u(a)||(this.R.xe=a,this.r())});v.a(Y,"alternateSetsChildPortSpot",Y.prototype.OE);v.defineProperty(Y,{OE:"alternateSetsChildPortSpot"},function(){return this.R.Xf},function(a){this.R.Xf!==a&&(this.R.Xf=a,this.r())});v.a(Y,"alternateChildPortSpot",Y.prototype.zE);v.defineProperty(Y,{zE:"alternateChildPortSpot"},function(){return this.R.pe},function(a){this.R.pe.u(a)||(this.R.pe=a,this.r())});var Ko;
Y.PathDestination=Ko=v.l(Y,"PathDestination",0);var Ro;Y.PathSource=Ro=v.l(Y,"PathSource",1);var fp;Y.SortingForwards=fp=v.l(Y,"SortingForwards",10);var gp;Y.SortingReverse=gp=v.l(Y,"SortingReverse",11);var hp;Y.SortingAscending=hp=v.l(Y,"SortingAscending",12);var ip;Y.SortingDescending=ip=v.l(Y,"SortingDescending",13);var Kp;Y.AlignmentCenterSubtrees=Kp=v.l(Y,"AlignmentCenterSubtrees",20);var jp;Y.AlignmentCenterChildren=jp=v.l(Y,"AlignmentCenterChildren",21);var up;
Y.AlignmentStart=up=v.l(Y,"AlignmentStart",22);var vp;Y.AlignmentEnd=vp=v.l(Y,"AlignmentEnd",23);var lp;Y.AlignmentBus=lp=v.l(Y,"AlignmentBus",24);var ap;Y.AlignmentBusBranching=ap=v.l(Y,"AlignmentBusBranching",25);var mp;Y.AlignmentTopLeftBus=mp=v.l(Y,"AlignmentTopLeftBus",26);var np;Y.AlignmentBottomRightBus=np=v.l(Y,"AlignmentBottomRightBus",27);var qp;Y.CompactionNone=qp=v.l(Y,"CompactionNone",30);var sp;Y.CompactionBlock=sp=v.l(Y,"CompactionBlock",31);var Lo;
Y.StyleLayered=Lo=v.l(Y,"StyleLayered",40);var ep;Y.StyleLastParents=ep=v.l(Y,"StyleLastParents",41);var dp;Y.StyleAlternating=dp=v.l(Y,"StyleAlternating",42);var cp;Y.StyleRootOnly=cp=v.l(Y,"StyleRootOnly",43);var Mo;Y.ArrangementVertical=Mo=v.l(Y,"ArrangementVertical",50);var Yo;Y.ArrangementHorizontal=Yo=v.l(Y,"ArrangementHorizontal",51);var Qo;Y.ArrangementFixedRoots=Qo=v.l(Y,"ArrangementFixedRoots",52);function Oo(){Bm.call(this)}v.H("TreeNetwork",Oo);v.na(Oo,Bm);
Oo.prototype.createVertex=Oo.prototype.Di=function(){return new $};Oo.prototype.createEdge=Oo.prototype.en=function(){return new Sp};
function $(){Fm.call(this);this.wj=p;this.cb=m;this.zb=[];this.vh=this.Xs=this.Cs=this.Lk=this.SG=0;this.hq=this.up=this.dd=this.ra=this.Ca=this.M=m;this.Nj=this.Mj=this.Rw=p;this.Vb=fp;this.Tb=Km;this.Pb=0;this.ia=jp;this.Uf=this.Ag=0;this.Vc=20;this.ed=50;this.Of=0;this.Ef=sp;this.Bf=0;this.Wd=25;this.cd=this.Kc=10;this.Sb=20;this.Yf=h;this.xe=Wb;this.Xf=h;this.pe=Wb}v.H("TreeVertex",$);v.na($,Fm);
function No(a,b){b!==m&&(a.Vb=b.Vb,a.Tb=b.Tb,a.Pb=b.Pb,a.ia=b.ia,a.Ag=b.Ag,a.Uf=b.Uf,a.Vc=b.Vc,a.ed=b.ed,a.Of=b.Of,a.Ef=b.Ef,a.Bf=b.Bf,a.Wd=b.Wd,a.Kc=b.Kc,a.cd=b.cd,a.Sb=b.Sb,a.Yf=b.Yf,a.xe=b.xe,a.Xf=b.Xf,a.pe=b.pe)}v.a($,"initialized",$.prototype.IF);v.defineProperty($,{IF:"initialized"},s("wj"),ba("wj"));v.a($,"parent",$.prototype.parent);v.defineProperty($,{parent:"parent"},s("cb"),ba("cb"));v.a($,"children",$.prototype.children);v.defineProperty($,{children:"children"},s("zb"),ba("zb"));
v.m($,{fl:"childrenCount"},function(){return this.zb.length});v.a($,"level",$.prototype.WF);v.defineProperty($,{WF:"level"},s("Lk"),ba("Lk"));v.a($,"descendantCount",$.prototype.hF);v.defineProperty($,{hF:"descendantCount"},s("Cs"),ba("Cs"));v.a($,"maxChildrenCount",$.prototype.bG);v.defineProperty($,{bG:"maxChildrenCount"},s("Xs"),ba("Xs"));v.a($,"maxGenerationCount",$.prototype.cG);v.defineProperty($,{cG:"maxGenerationCount"},s("vh"),ba("vh"));v.a($,"relativePosition",$.prototype.pG);
v.defineProperty($,{pG:"relativePosition"},s("M"),function(a){v.c(a,E,$,"relativePosition");this.M=a});v.a($,"subtreeSize",$.prototype.LG);v.defineProperty($,{LG:"subtreeSize"},s("Ca"),function(a){v.c(a,hb,$,"subtreeSize");this.Ca=a});v.a($,"subtreeOffset",$.prototype.KG);v.defineProperty($,{KG:"subtreeOffset"},s("ra"),function(a){v.c(a,E,$,"subtreeOffset");this.ra=a});v.a($,"comments",$.prototype.Hx);v.defineProperty($,{Hx:"comments"},s("dd"),ba("dd"));v.a($,"sorting",$.prototype.vf);
v.defineProperty($,{vf:"sorting"},s("Vb"),ba("Vb"));v.a($,"comparer",$.prototype.Qg);v.defineProperty($,{Qg:"comparer"},s("Tb"),ba("Tb"));v.a($,"angle",$.prototype.Ka);v.defineProperty($,{Ka:"angle"},s("Pb"),ba("Pb"));v.a($,"alignment",$.prototype.lb);v.defineProperty($,{lb:"alignment"},s("ia"),ba("ia"));v.a($,"nodeIndent",$.prototype.Ay);v.defineProperty($,{Ay:"nodeIndent"},s("Ag"),ba("Ag"));v.a($,"nodeIndentPastParent",$.prototype.By);v.defineProperty($,{By:"nodeIndentPastParent"},s("Uf"),ba("Uf"));
v.a($,"nodeSpacing",$.prototype.Ju);v.defineProperty($,{Ju:"nodeSpacing"},s("Vc"),ba("Vc"));v.a($,"layerSpacing",$.prototype.yr);v.defineProperty($,{yr:"layerSpacing"},s("ed"),ba("ed"));v.a($,"layerSpacingParentOverlap",$.prototype.qy);v.defineProperty($,{qy:"layerSpacingParentOverlap"},s("Of"),ba("Of"));v.a($,"compaction",$.prototype.iu);v.defineProperty($,{iu:"compaction"},s("Ef"),ba("Ef"));v.a($,"breadthLimit",$.prototype.zx);v.defineProperty($,{zx:"breadthLimit"},s("Bf"),ba("Bf"));
v.a($,"rowSpacing",$.prototype.Uu);v.defineProperty($,{Uu:"rowSpacing"},s("Wd"),ba("Wd"));v.a($,"rowIndent",$.prototype.Jy);v.defineProperty($,{Jy:"rowIndent"},s("Kc"),ba("Kc"));v.a($,"commentSpacing",$.prototype.Gx);v.defineProperty($,{Gx:"commentSpacing"},s("cd"),ba("cd"));v.a($,"commentMargin",$.prototype.Fx);v.defineProperty($,{Fx:"commentMargin"},s("Sb"),ba("Sb"));v.a($,"setsPortSpot",$.prototype.Ui);v.defineProperty($,{Ui:"setsPortSpot"},s("Yf"),ba("Yf"));v.a($,"portSpot",$.prototype.Fy);
v.defineProperty($,{Fy:"portSpot"},s("xe"),ba("xe"));v.a($,"setsChildPortSpot",$.prototype.Ti);v.defineProperty($,{Ti:"setsChildPortSpot"},s("Xf"),ba("Xf"));v.a($,"childPortSpot",$.prototype.Dx);v.defineProperty($,{Dx:"childPortSpot"},s("pe"),ba("pe"));v.a($,"routeFirstRow",$.prototype.BG);v.defineProperty($,{BG:"routeFirstRow"},s("Rw"),ba("Rw"));v.a($,"routeAroundCentered",$.prototype.zG);v.defineProperty($,{zG:"routeAroundCentered"},s("Mj"),ba("Mj"));v.a($,"routeAroundLastParent",$.prototype.AG);
v.defineProperty($,{AG:"routeAroundLastParent"},s("Nj"),ba("Nj"));function Sp(){Gm.call(this);this.$p=new E(0,0)}v.H("TreeEdge",Sp);v.na(Sp,Gm);
Sp.prototype.commit=Sp.prototype.Mh=function(){var a=this.Aa;if(a!==m&&a.Te!==If){var b=this.p.sb,c=m,d=m;switch(b.cc){case Ko:c=this.G;d=this.D;break;case Ro:c=this.D;d=this.G;break;default:v.g("Unhandled path value "+b.cc.toString())}if(!(c===m||d===m))if(b=this.$p,0===b.x&&0===b.y&&!c.Rw){var e=c;t&&v.c(e,$,Sp,"adjustRouteForAngleChange:parent");t&&v.c(d,$,Sp,"adjustRouteForAngleChange:child");a=this.Aa;c=tp(e);b=tp(d);if(c!==b&&(b=wp(e),e=e.hb,d=d.hb,!(0===c&&d.left-e.right<b+1||90===c&&d.top-
e.bottom<b+1||180===c&&e.left-d.right<b+1||270===c&&e.top-d.bottom<b+1))){Kl(a);var d=a.He===Hj,g=a.Te===oh,i=kp(this.G.ia);a.kk();0===c?(c=e.right+b/2,d?4===a.Y&&(b=a.h(3).y,a.w(1,new E(c-20,a.h(1).y)),a.q(2,new E(c-20,b)),a.q(3,new E(c,b)),a.q(4,new E(c+20,b)),a.w(5,new E(a.h(5).x,b))):g?i?a.w(3,new E(a.h(2).x,a.h(4).y)):6===a.Y&&(a.w(2,new E(c,a.h(2).y)),a.w(3,new E(c,a.h(3).y))):4===a.Y?a.q(2,new E(c,a.h(2).y)):3===a.Y?a.w(1,new E(c,a.h(2).y)):2===a.Y&&a.q(1,new E(c,a.h(1).y))):90===c?(b=e.bottom+
b/2,d?4===a.Y&&(c=a.h(3).x,a.w(1,new E(a.h(1).x,b-20)),a.q(2,new E(c,b-20)),a.q(3,new E(c,b)),a.q(4,new E(c,b+20)),a.w(5,new E(c,a.h(5).y))):g?i?a.w(3,new E(a.h(2).x,a.h(4).y)):6===a.Y&&(a.w(2,new E(a.h(2).x,b)),a.w(3,new E(a.h(3).x,b))):4===a.Y?a.q(2,new E(a.h(2).x,b)):3===a.Y?a.w(1,new E(a.h(2).x,b)):2===a.Y&&a.q(1,new E(a.h(1).x,b))):180===c?(c=e.left-b/2,d?4===a.Y&&(b=a.h(3).y,a.w(1,new E(c+20,a.h(1).y)),a.q(2,new E(c+20,b)),a.q(3,new E(c,b)),a.q(4,new E(c-20,b)),a.w(5,new E(a.h(5).x,b))):g?i?
a.w(3,new E(a.h(2).x,a.h(4).y)):6===a.Y&&(a.w(2,new E(c,a.h(2).y)),a.w(3,new E(c,a.h(3).y))):4===a.Y?a.q(2,new E(c,a.h(2).y)):3===a.Y?a.w(1,new E(c,a.h(2).y)):2===a.Y&&a.q(1,new E(c,a.h(1).y))):270===c&&(b=e.top-b/2,d?4===a.Y&&(c=a.h(3).x,a.w(1,new E(a.h(1).x,b+20)),a.q(2,new E(c,b+20)),a.q(3,new E(c,b)),a.q(4,new E(c,b-20)),a.w(5,new E(c,a.h(5).y))):g?i?a.w(3,new E(a.h(2).x,a.h(4).y)):6===a.Y&&(a.w(2,new E(a.h(2).x,b)),a.w(3,new E(a.h(3).x,b))):4===a.Y?a.q(2,new E(a.h(2).x,b)):3===a.Y?a.w(1,new E(a.h(2).x,
b)):2===a.Y&&a.q(1,new E(a.h(1).x,b)));a.Nh()}}else{var e=c.hb,j=tp(c),d=wp(c),g=c.Wd;Kl(a);var i=a.He===Hj,k=a.Te===oh,l,n,r,q;a.kk();if(k||i){for(l=2;4<a.Y;)a.PC(2);n=a.h(1);r=a.h(2)}else{for(l=1;3<a.Y;)a.PC(1);n=a.h(0);r=a.h(a.Y-1)}q=a.h(a.Y-1);0===j?(c.ia===vp?(j=e.bottom+b.y,0===b.y&&n.y>q.y+c.Kc&&(j=Math.min(j,Math.max(n.y,j-xp(c))))):c.ia===up?(j=e.top+b.y,0===b.y&&n.y<q.y-c.Kc&&(j=Math.max(j,Math.min(n.y,j+xp(c))))):j=c.Mj||c.Nj&&1===c.vh?e.top-c.ra.y+b.y:e.y+e.height/2+b.y,i?(a.q(l,new E(n.x,
j)),l++,a.q(l,new E(e.right+d,j)),l++,a.q(l,new E(e.right+d+(b.x-g)/3,j)),l++,a.q(l,new E(e.right+d+2*(b.x-g)/3,j)),l++,a.q(l,new E(e.right+d+(b.x-g),j)),l++,a.q(l,new E(r.x,j))):(k&&(a.q(l,new E(e.right+d/2,n.y)),l++),a.q(l,new E(e.right+d/2,j)),l++,a.q(l,new E(e.right+d+b.x-(k?g/2:g),j)),l++,k&&a.q(l,new E(a.h(l-1).x,r.y)))):90===j?(c.ia===vp?(j=e.right+b.x,0===b.x&&n.x>q.x+c.Kc&&(j=Math.min(j,Math.max(n.x,j-xp(c))))):c.ia===up?(j=e.left+b.x,0===b.x&&n.x<q.x-c.Kc&&(j=Math.max(j,Math.min(n.x,j+xp(c))))):
j=c.Mj||c.Nj&&1===c.vh?e.left-c.ra.x+b.x:e.x+e.width/2+b.x,i?(a.q(l,new E(j,n.y)),l++,a.q(l,new E(j,e.bottom+d)),l++,a.q(l,new E(j,e.bottom+d+(b.y-g)/3)),l++,a.q(l,new E(j,e.bottom+d+2*(b.y-g)/3)),l++,a.q(l,new E(j,e.bottom+d+(b.y-g))),l++,a.q(l,new E(j,r.y))):(k&&(a.q(l,new E(n.x,e.bottom+d/2)),l++),a.q(l,new E(j,e.bottom+d/2)),l++,a.q(l,new E(j,e.bottom+d+b.y-(k?g/2:g))),l++,k&&a.q(l,new E(r.x,a.h(l-1).y)))):180===j?(c.ia===vp?(j=e.bottom+b.y,0===b.y&&n.y>q.y+c.Kc&&(j=Math.min(j,Math.max(n.y,j-
xp(c))))):c.ia===up?(j=e.top+b.y,0===b.y&&n.y<q.y-c.Kc&&(j=Math.max(j,Math.min(n.y,j+xp(c))))):j=c.Mj||c.Nj&&1===c.vh?e.top-c.ra.y+b.y:e.y+e.height/2+b.y,i?(a.q(l,new E(n.x,j)),l++,a.q(l,new E(e.left-d,j)),l++,a.q(l,new E(e.left-d+(b.x+g)/3,j)),l++,a.q(l,new E(e.left-d+2*(b.x+g)/3,j)),l++,a.q(l,new E(e.left-d+(b.x+g),j)),l++,a.q(l,new E(r.x,j))):(k&&(a.q(l,new E(e.left-d/2,n.y)),l++),a.q(l,new E(e.left-d/2,j)),l++,a.q(l,new E(e.left-d+b.x+(k?g/2:g),j)),l++,k&&a.q(l,new E(a.h(l-1).x,r.y)))):270===
j?(c.ia===vp?(j=e.right+b.x,0===b.x&&n.x>q.x+c.Kc&&(j=Math.min(j,Math.max(n.x,j-xp(c))))):c.ia===up?(j=e.left+b.x,0===b.x&&n.x<q.x-c.Kc&&(j=Math.max(j,Math.min(n.x,j+xp(c))))):j=c.Mj||c.Nj&&1===c.vh?e.left-c.ra.x+b.x:e.x+e.width/2+b.x,i?(a.q(l,new E(j,n.y)),l++,a.q(l,new E(j,e.top-d)),l++,a.q(l,new E(j,e.top-d+(b.y+g)/3)),l++,a.q(l,new E(j,e.top-d+2*(b.y+g)/3)),l++,a.q(l,new E(j,e.top-d+(b.y+g))),l++,a.q(l,new E(j,r.y))):(k&&(a.q(l,new E(n.x,e.top-d/2)),l++),a.q(l,new E(j,e.top-d/2)),l++,a.q(l,new E(j,
e.top-d+b.y+(k?g/2:g))),l++,k&&a.q(l,new E(r.x,a.h(l-1).y)))):v.g("Invalid angle "+j);a.Nh()}}};v.a(Sp,"relativePoint",Sp.prototype.oG);v.defineProperty(Sp,{oG:"relativePoint"},s("$p"),ba("$p"));window.go=ea;ea.version="1.0.4"; })(window);
